{"version":3,"sources":["../node_modules/bitcoinjs-lib/src/script.js","../node_modules/typeforce/index.js","../node_modules/bitcoinjs-lib/src/networks.js","../node_modules/bip174/src/lib/typeFields.js","../node_modules/bitcoinjs-lib/src/types.js","../node_modules/bitcoinjs-lib/src/crypto.js","../node_modules/tiny-secp256k1/js.js","../node_modules/bitcoinjs-lib/src/payments/lazy.js","../node_modules/qr.js/lib/mode.js","../node_modules/qr.js/lib/ErrorCorrectLevel.js","../node_modules/qr.js/lib/Polynomial.js","../node_modules/qr.js/lib/math.js","../node_modules/bitcoinjs-lib/src/payments/index.js","../node_modules/bitcoinjs-lib/src/bufferutils.js","../node_modules/bitcoinjs-lib/src/transaction.js","../node_modules/bip174/src/lib/converter/varint.js","../node_modules/qr.js/lib/QRCode.js","../node_modules/qr.js/lib/8BitByte.js","../node_modules/qr.js/lib/RSBlock.js","../node_modules/qr.js/lib/BitBuffer.js","../node_modules/qr.js/lib/util.js","../node_modules/typeforce/native.js","../node_modules/bitcoinjs-lib/src/address.js","../node_modules/bitcoinjs-lib/src/ecpair.js","../node_modules/varuint-bitcoin/index.js","../node_modules/bip174/src/lib/converter/index.js","../node_modules/bip174/src/lib/converter/tools.js","../node_modules/bitcoinjs-lib/src/templates/multisig/index.js","../node_modules/bitcoinjs-lib/src/templates/pubkey/index.js","../node_modules/bitcoinjs-lib/src/templates/pubkeyhash/index.js","../node_modules/typeforce/errors.js","../node_modules/wif/index.js","../node_modules/bip174/src/lib/parser/index.js","../node_modules/bip174/src/lib/utils.js","../node_modules/bitcoinjs-lib/src/templates/witnesspubkeyhash/output.js","../node_modules/bitcoinjs-lib/src/templates/witnessscripthash/output.js","../node_modules/bitcoinjs-lib/src/index.js","../node_modules/bip32/src/index.js","../node_modules/bip32/src/bip32.js","../node_modules/bip32/src/crypto.js","../node_modules/tiny-secp256k1/node_modules/bn.js/lib/bn.js","../node_modules/tiny-secp256k1/rfc6979.js","../node_modules/typeforce/extra.js","../node_modules/bitcoinjs-lib/src/payments/embed.js","../node_modules/bitcoinjs-lib/src/script_number.js","../node_modules/bitcoinjs-lib/src/script_signature.js","../node_modules/pushdata-bitcoin/index.js","../node_modules/bitcoin-ops/map.js","../node_modules/bitcoinjs-lib/src/payments/p2ms.js","../node_modules/bitcoinjs-lib/src/payments/p2pk.js","../node_modules/bitcoinjs-lib/src/payments/p2pkh.js","../node_modules/bitcoinjs-lib/src/payments/p2sh.js","../node_modules/bitcoinjs-lib/src/payments/p2wpkh.js","../node_modules/bitcoinjs-lib/src/payments/p2wsh.js","../node_modules/bitcoinjs-lib/src/block.js","../node_modules/merkle-lib/fastRoot.js","../node_modules/bitcoinjs-lib/src/psbt.js","../node_modules/bip174/src/lib/psbt.js","../node_modules/bip174/src/lib/combiner/index.js","../node_modules/bip174/src/lib/parser/fromBuffer.js","../node_modules/bip174/src/lib/converter/global/globalXpub.js","../node_modules/bip174/src/lib/converter/global/unsignedTx.js","../node_modules/bip174/src/lib/converter/input/finalScriptSig.js","../node_modules/bip174/src/lib/converter/input/finalScriptWitness.js","../node_modules/bip174/src/lib/converter/input/nonWitnessUtxo.js","../node_modules/bip174/src/lib/converter/input/partialSig.js","../node_modules/bip174/src/lib/converter/input/porCommitment.js","../node_modules/bip174/src/lib/converter/input/sighashType.js","../node_modules/bip174/src/lib/converter/input/witnessUtxo.js","../node_modules/bip174/src/lib/converter/shared/bip32Derivation.js","../node_modules/bip174/src/lib/converter/shared/checkPubkey.js","../node_modules/bip174/src/lib/converter/shared/redeemScript.js","../node_modules/bip174/src/lib/converter/shared/witnessScript.js","../node_modules/bip174/src/lib/parser/toBuffer.js","../node_modules/bitcoinjs-lib/src/transaction_builder.js","../node_modules/bitcoinjs-lib/src/classify.js","../node_modules/bitcoinjs-lib/src/templates/multisig/input.js","../node_modules/bitcoinjs-lib/src/templates/multisig/output.js","../node_modules/bitcoinjs-lib/src/templates/nulldata.js","../node_modules/bitcoinjs-lib/src/templates/pubkey/input.js","../node_modules/bitcoinjs-lib/src/templates/pubkey/output.js","../node_modules/bitcoinjs-lib/src/templates/pubkeyhash/input.js","../node_modules/bitcoinjs-lib/src/templates/pubkeyhash/output.js","../node_modules/bitcoinjs-lib/src/templates/scripthash/index.js","../node_modules/bitcoinjs-lib/src/templates/scripthash/input.js","../node_modules/bitcoinjs-lib/src/templates/scripthash/output.js","../node_modules/bitcoinjs-lib/src/templates/witnesscommitment/index.js","../node_modules/bitcoinjs-lib/src/templates/witnesscommitment/output.js","../node_modules/bitcoinjs-lib/src/templates/witnesspubkeyhash/index.js","../node_modules/bitcoinjs-lib/src/templates/witnesspubkeyhash/input.js","../node_modules/bitcoinjs-lib/src/templates/witnessscripthash/index.js","../node_modules/bitcoinjs-lib/src/templates/witnessscripthash/input.js","../node_modules/qrcode.react/lib/index.js"],"names":["Object","defineProperty","exports","value","scriptNumber","require","scriptSignature","types","bip66","ecc","pushdata","typeforce","OPS","REVERSE_OPS","OP_INT_BASE","OP_RESERVED","isPushOnlyChunk","Buffer","Number","OP_0","OP_1","OP_16","OP_1NEGATE","isOPInt","isPushOnly","Array","every","asMinimalOP","buffer","length","chunksIsBuffer","buf","isBuffer","singleChunkIsBuffer","compile","chunks","bufferSize","reduce","accum","chunk","undefined","encodingLength","allocUnsafe","offset","forEach","opcode","writeUInt8","encode","copy","Error","decompile","i","OP_PUSHDATA4","d","decode","size","number","data","slice","op","push","isDefinedHashType","hashType","hashTypeMod","toASM","map","toString","join","fromASM","asm","String","split","chunkStr","Hex","from","toStack","isCanonicalPubKey","isPoint","isCanonicalScriptSignature","check","signature","ERRORS","NATIVE","tfJSON","TfTypeError","TfPropertyTypeError","tfSubError","getValueTypeName","TYPES","arrayOf","type","options","_arrayOf","array","strict","Nil","minLength","maxLength","e","toJSON","str","Infinity","maybe","_maybe","propertyType","propertyKeyType","_map","propertyName","propertyValue","object","uncompiled","typePropertyName","_object","anyOf","call","arguments","_anyOf","some","allOf","_allOf","quacksLike","_quacksLike","tuple","_tuple","values","expected","_value","actual","TypeError","Function","surrogate","typeName","oneOf","EXTRA","module","bitcoin","messagePrefix","bech32","bip32","public","private","pubKeyHash","scriptHash","wif","regtest","testnet","GlobalTypes","GLOBAL_TYPE_NAMES","InputTypes","INPUT_TYPE_NAMES","OutputTypes","OUTPUT_TYPE_NAMES","UINT31_MAX","Math","pow","BIP32Path","match","UInt31","UInt32","Signer","obj","publicKey","getPublicKey","sign","Satoshi","UInt53","ECPoint","Network","UInt8","Buffer256bit","BufferN","Hash160bit","Hash256bit","Boolean","Null","createHash","ripemd160","update","digest","err","sha256","sha1","hash160","hash256","BN","secp256k1","EC","ec","deterministicGenerateK","ZERO32","alloc","EC_GROUP_ORDER","EC_P","n","curve","nDiv2","shrn","G","g","THROW_BAD_PRIVATE","THROW_BAD_POINT","THROW_BAD_TWEAK","THROW_BAD_HASH","isScalar","x","isOrderScalar","compare","p","t","decodeFrom","y","__isPointCompressed","isPrivate","assumeCompression","pubkey","fromBuffer","toBuffer","toArrayLike","P","decodePoint","getEncoded","compressed","_encode","__sign","hash","addData","r","s","k","kI","Q","mul","isInfinity","umod","isZero","invm","add","cmp","sub","isPointCompressed","pointAdd","pA","pB","__compressed","a","b","pp","pointAddScalar","tweak","tt","qq","uu","pointCompress","pointFromScalar","dd","pointMultiply","privateAdd","dt","privateSub","signWithEntropy","verify","q","isSignature","gtn","sInv","u1","u2","R","mulAdd","eq","prop","name","f","configurable","enumerable","get","this","set","writable","MODE_NUMBER","MODE_ALPHA_NUM","MODE_8BIT_BYTE","MODE_KANJI","L","M","H","math","QRPolynomial","num","shift","prototype","index","getLength","multiply","j","gexp","glog","mod","ratio","QRMath","LOG_TABLE","EXP_TABLE","embed_1","embed","p2data","p2ms_1","p2ms","p2pk_1","p2pk","p2pkh_1","p2pkh","p2sh_1","p2sh","p2wpkh_1","p2wpkh","p2wsh_1","p2wsh","varuint","verifuint","max","floor","readUInt64LE","readUInt32LE","writeUInt64LE","writeInt32LE","writeUInt32LE","reverseBuffer","tmp","cloneBuffer","clone","BufferWriter","bytes","writeVarInt","writeSlice","vector","writeVarSlice","BufferReader","result","readUInt8","readInt32LE","vi","readSlice","readVarInt","count","readVarSlice","bufferutils_1","bcrypto","bscript","script_1","varSliceSize","someScript","vectorSize","someVector","sum","witness","EMPTY_SCRIPT","EMPTY_WITNESS","ZERO","ONE","VALUE_UINT64_MAX","BLANK_OUTPUT","script","valueBuffer","isOutput","out","Transaction","version","locktime","ins","outs","isCoinbaseHash","sequence","scriptSig","DEFAULT_SEQUENCE","scriptPubKey","byteLength","ceil","weight","_ALLOW_WITNESS","hasWitnesses","input","output","newTx","txIn","txOut","inIndex","prevOutScript","ourScript","filter","OP_CODESEPARATOR","txTmp","SIGHASH_NONE","SIGHASH_SINGLE","SIGHASH_ANYONECANPAY","__toBuffer","bufferWriter","tbuffer","hashOutputs","hashPrevouts","hashSequence","writeUInt32","txOutsSize","writeUInt64","forWitness","isCoinbase","getHash","initialOffset","writeInt32","ADVANCED_TRANSACTION_MARKER","ADVANCED_TRANSACTION_FLAG","writeVector","_NO_STRICT","bufferReader","tx","readInt32","marker","flag","vinLen","readUInt32","voutLen","readUInt64","readVector","hex","SIGHASH_ALL","checkUInt53","RangeError","_number","assign","writeUInt16LE","first","readUInt16LE","lo","BitByte","RSBlock","BitBuffer","util","Polynomial","QRCode","typeNumber","errorCorrectLevel","modules","moduleCount","dataCache","dataList","proto","newData","isDark","row","col","getModuleCount","make","rsBlocks","getRSBlocks","totalDataCount","dataCount","put","mode","getLengthInBits","write","makeImpl","getBestMaskPattern","test","maskPattern","setupPositionProbePattern","setupPositionAdjustPattern","setupTimingPattern","setupTypeInfo","setupTypeNumber","createData","mapData","c","minLostPoint","pattern","lostPoint","getLostPoint","createMovieClip","target_mc","instance_name","depth","qr_mc","createEmptyMovieClip","beginFill","moveTo","lineTo","endFill","pos","getPatternPosition","bits","getBCHTypeNumber","getBCHTypeInfo","inc","bitIndex","byteIndex","dark","getMask","PAD0","PAD1","putBit","createBytes","maxDcCount","maxEcCount","dcdata","ecdata","dcCount","ecCount","totalCount","rsPoly","getErrorCorrectPolynomial","modPoly","modIndex","totalCodeCount","QR8bitByte","charCodeAt","ECL","QRRSBlock","RS_BLOCK_TABLE","rsBlock","getRsBlockTable","list","QRBitBuffer","bufIndex","bit","Mode","QRMaskPattern","QRUtil","PATTERN_POSITION_TABLE","G15","G18","G15_MASK","getBCHDigit","digit","errorCorrectLength","qrCode","sameCount","darkCount","abs","constructor","bind","networks","payments","bs58check","fromBase58Check","address","payload","fromBech32","fromWords","words","prefix","toBase58Check","toBech32","toWords","unshift","fromOutputScript","network","toOutputScript","decodeBase58","decodeBech32","NETWORKS","randomBytes","isOptions","ECPair","__D","__Q","lowR","sig","extraData","counter","writeUIntLE","fromPrivateKey","fromPublicKey","fromWIF","wifString","decoded","pop","privateKey","makeRandom","rng","typeFields_1","globalXpub","unsignedTx","finalScriptSig","finalScriptWitness","nonWitnessUtxo","partialSig","porCommitment","sighashType","witnessUtxo","bip32Derivation","checkPubkey","redeemScript","witnessScript","globals","makeChecker","inputs","makeConverter","BIP32_DERIVATION","REDEEM_SCRIPT","WITNESS_SCRIPT","PARTIAL_SIG","outputs","keyValToBuffer","keyVal","keyLen","key","valLen","keyVarIntLen","valVarIntLen","range","keys","keyValsToBuffer","keyVals","buffers","concat","native","getTypeName","fn","captureStackTrace","tfErrorString","valueTypeName","valueJson","JSON","stringify","getValue","message","__type","__value","__valueTypeName","property","label","description","tfPropertyErrorString","__label","__property","create","tfCustomError","decodeRaw","encodeRaw","string","__export","m","hasOwnProperty","converter","checkForInput","inputIndex","throwForUpdateMaker","updateMaker","updateData","mainData","canAdd","canAddToArray","isArray","arr","dupeCheckSet","Set","v","checkForOutput","outputIndex","checkHasKey","checkKeyVal","enumLength","kv","equals","getEnumLength","myenum","val","isNaN","inputCheckUncleanFinalized","needScriptSig","needWitnessScript","scriptSigOK","witnessScriptOK","hasOneFinal","updateGlobal","updateInput","updateOutput","addInputAttributes","addOutputAttributes","defaultVersionSetter","txBuf","defaultLocktimeSetter","crypto","block_1","Block","psbt_1","Psbt","opcodes","transaction_1","transaction_builder_1","TransactionBuilder","bip32_1","fromSeed","fromBase58","UINT256_TYPE","NETWORK_TYPE","BITCOIN","HIGHEST_BIT","BIP32","chainCode","__DEPTH","__INDEX","__PARENT_FINGERPRINT","fromPublicKeyLocal","parentFingerprint","isNeutered","writeUInt32BE","isHardened","hd","I","hmacSHA512","IL","IR","derive","Ki","fingerprint","readUInt32BE","ki","fromPrivateKeyLocal","path","splitPath","prevHd","indexStr","parseInt","deriveHardened","identifier","inString","seed","createHmac","sha256Hash","assert","msg","inherits","ctor","superCtor","super_","TempCtor","base","endian","isBN","negative","red","_init","wordSize","parseHex","start","end","len","min","parseBase","left","right","_initNumber","_initArray","replace","_parseHex","_parseBase","strip","toArray","w","off","limbLen","limbPow","total","word","imuln","_iaddn","dest","_expand","_normSign","inspect","zeros","groupSizes","groupBases","smallMulTo","self","carry","ncarry","rword","maxJ","padding","groupSize","groupBase","modn","idivn","toNumber","ret","ArrayType","reqLength","littleEndian","res","andln","iushrn","clz32","_countBits","_zeroBits","bitLength","hi","zeroBits","toTwos","width","inotn","iaddn","fromTwos","testn","notn","ineg","isNeg","neg","iuor","ior","or","uor","iuand","iand","and","uand","iuxor","ixor","xor","uxor","bytesNeeded","bitsLeft","setn","wbit","iadd","isub","comb10MulTo","mid","o","a0","al0","ah0","a1","al1","ah1","a2","al2","ah2","a3","al3","ah3","a4","al4","ah4","a5","al5","ah5","a6","al6","ah6","a7","al7","ah7","a8","al8","ah8","a9","al9","ah9","b0","bl0","bh0","b1","bl1","bh1","b2","bl2","bh2","b3","bl3","bh3","b4","bl4","bh4","b5","bl5","bh5","b6","bl6","bh6","b7","bl7","bh7","b8","bl8","bh8","b9","bl9","bh9","w0","imul","w1","w2","w3","w4","w5","w6","w7","w8","w9","w10","w11","w12","w13","w14","w15","w16","w17","w18","jumboMulTo","FFTM","mulp","mulTo","hncarry","bigMulTo","makeRBT","N","l","revBin","rb","permute","rbt","rws","iws","rtws","itws","transform","rtwdf","cos","PI","itwdf","sin","rtwdf_","itwdf_","re","ie","ro","io","rx","guessLen13b","odd","conjugate","normalize13b","ws","round","convert13b","stub","ph","_","rwst","iwst","nrws","nrwst","niwst","rmws","mulf","muln","sqr","isqr","toBitArray","iushln","carryMask","newCarry","ishln","hint","extended","h","mask","maskedWords","ishrn","shln","ushln","ushrn","imaskn","maskn","isubn","addn","subn","iabs","_ishlnsubmul","_wordDiv","bhi","diff","qj","div","divmod","positive","divn","divRound","dm","half","r2","acc","egcd","A","B","C","D","isEven","yp","xp","im","isOdd","jm","gcd","_invmp","x1","x2","delta","cmpn","bincn","ucmp","gt","gten","gte","ltn","lt","lten","lte","eqn","Red","toRed","ctx","convertTo","_forceRed","fromRed","convertFrom","forceRed","redAdd","redIAdd","redSub","redISub","redShl","shl","redMul","_verify2","redIMul","redSqr","_verify1","redISqr","redSqrt","sqrt","redInvm","redNeg","redPow","primes","k256","p224","p192","p25519","MPrime","_tmp","K256","P224","P192","P25519","prime","_prime","Mont","imod","rinv","minv","ireduce","rlen","imulK","_strip","outLen","prev","next","mod3","one","nOne","lpow","z","inv","wnd","current","currentLen","mont","u","ONE1","ZERO1","checkSig","extraEntropy","T","_Buffer","_LengthN","Length","_ArrayN","_BufferN","_HexN","_StringN","INT53_MAX","ArrayN","Finite","isFinite","HexN","Int8","Int16","Int32","Int53","Range","_range","StringN","UInt16","networks_1","lazy","typef","opts","validate","OP_RETURN","stacksEqual","minimal","scriptNumSize","toDER","fromDER","bstart","hashTypeBuffer","OP_PUSHDATA1","OP_PUSHDATA2","pubkeys","signatures","isAcceptableSignature","allowIncomplete","OP_CHECKMULTISIG","_chunks","OP_CHECKSIG","_address","OP_DUP","OP_HASH160","OP_EQUALVERIFY","hash2","pkh","redeem","_redeem","OP_EQUAL","nameParts","checkRedeem","hasInput","hasWitness","richunks","EMPTY_BUFFER","chunkHasUncompressedPubkey","_rchunks","stack","wScript","fastMerkleRoot","errorMerkleNoTxes","errorWitnessNotSegwit","prevHash","merkleRoot","timestamp","witnessCommit","nonce","transactions","txesHaveWitnessCommit","witnessCommits","getWitnessCommit","headersOnly","allowWitness","date","Date","setUTCSeconds","txSize","hasWitnessCommit","__checkMerkleRoot","__checkWitnessCommit","target","calculateTarget","actualMerkleRoot","calculateMerkleRoot","actualWitnessCommit","block","readTransaction","nTransactions","exponent","mantissa","writeUIntBE","hashes","transaction","rootHash","digestFn","results","bip174_1","utils_1","address_1","crypto_1","ecpair_1","DEFAULT_OPTS","maximumFeeRate","PsbtTransaction","__CACHE","__NON_WITNESS_UTXO_TX_CACHE","__NON_WITNESS_UTXO_BUF_CACHE","__TX_IN_CACHE","__TX","globalMap","__UNSAFE_SIGN_NONSEGWIT","setVersion","dpew","attr","those","combine","parse","satoshiPerByte","check32Bit","checkInputsForPartialSig","__EXTRACTED_TX","inputDatas","inputData","addInput","checkInvalidP2WSH","checkTxInputCache","addNonWitnessTxCache","__FEE","__FEE_RATE","outputDatas","outputData","addOutput","disableFeeCheck","isFinalized","psbt","cache","feeRate","getFeeRate","vsize","virtualSize","satoshis","toFixed","checkFees","inputFinalizeGetAmts","getTxCacheValue","idx","finalizeInput","finalScriptsFunc","getFinalScripts","getScriptFromInput","isP2SH","isP2WSH","isSegwit","checkPartialSigSighashes","clearFinalizedInput","getMeaningfulScript","getScriptFromUtxo","finalScript","decomp","lastItem","isPubkeyLike","redeemFromFinalScriptSig","scriptWitnessToWitnessStack","redeemFromFinalWitnessScript","classifyScript","meaningfulScript","pubkeyInScript","pubkeyInInput","root","derivationIsMine","bip32DerivationIsMine","pubkeyInOutput","validateSignaturesOfInput","final","mySigs","hashCache","scriptCache","sighashCache","pSig","getHashForSig","checkScriptForPubkey","keypair","hdKeyPair","sighashTypes","signInputHD","Promise","resolve","reject","promises","signInputHDAsync","then","all","signers","getSignersFromHD","signer","signInput","signInputAsync","catch","keyPair","entries","getHashAndSighashType","checkCache","toHex","toBase64","addUnknownKeyValToGlobal","addUnknownKeyValToInput","addUnknownKeyValToOutput","setLocktime","psbtBase","transactionFromBuffer","checkTxForDupeIns","checkTxEmpty","inputCount","outputCount","hasSigs","neededSigs","sigs","pkey","find","isPaymentFactory","payment","isP2MS","isP2PK","isP2PKH","isP2WPKH","isP2WSHScript","isP2SHScript","masterFingerprint","derivePath","action","throws","pSigs","scriptItems","witnessItems","item","getPsigsFromInputFinalScripts","whitelist","indexOf","scriptCheckerFactory","paymentScriptName","ioType","redeemScriptOutput","checkRedeemScript","checkWitnessScript","mustFinalize","scriptType","canFinalize","pk","ps","getSortedSigs","getPayment","witnessStackToScriptWitness","prepareFinalScripts","forValidate","prevout","text","sighashTypeToString","nonWitnessUtxoTx","nonWitnessUtxoTxFromCache","prevoutHash","utxoHash","prevoutIndex","hashForWitnessV0","signingScript","console","warn","hashForSignature","myDerivations","bipDv","node","varintLen","selfIndex","txCache","newBuf","inputAmount","nwTx","vout","outputAmount","fee","isP2SHP2WSH","pubkeyHash","decompiled","element","combiner_1","parser_1","psbtToBuffer","unknownKeyVals","addKeyVals","includes","txFromBuffer","psbtFromBuffer","keyPusher","selfSet","selfKeyVals","otherKeyVals","has","newKv","getTx","getKeySet","psbts","psbtToKeyVals","others","selfTx","selfGlobalSet","globalKeyVals","selfInputSets","inputKeyVals","selfOutputSets","outputKeyVals","other","otherTx","inputSet","outputSet","psbtFromKeyVals","globalMapKeyVals","convert","tools_1","checkKeyBuffer","keyBuf","keyNum","txCount","UNSIGNED_TX","GLOBAL_XPUB","NON_WITNESS_UTXO","WITNESS_UTXO","SIGHASH_TYPE","FINAL_SCRIPTSIG","FINAL_SCRIPTWITNESS","POR_COMMITMENT","txGetter","varSlice","getKeyValue","checkEndOfKeyValPairs","isEnd","globalKeyIndex","hexKey","unsignedTxMaps","getInputOutputCounts","inputKeyIndex","outputKeyIndex","extendedPubkey","isHard","head","level","epk","mfp","dupeSet","dupeString","currentData","rLen","sLen","isDerSigWithSighash","_offset","scriptLen","TYPE_BYTE","pubkeyTypes","globalBuffer","keyValsOrEmptyToBuffer","inputBuffers","outputBuffers","header","sortKeyVals","keyValsFromMap","keyValMap","converterFactory","keyHexSet","encodedKeyVals","sort","baddress","classify","SCRIPT_TYPES","PREVOUT_TYPES","tfMessage","__PREV_TX_SET","__INPUTS","__USE_LOW_R","setting","txHash","__canModifyInputs","txIsTransaction","__addInputUnsafe","__canModifyOutputs","__build","signParams","witnessValue","ourPubKey","signatureHash","useLowR","signed","pubKey","trySign","needsOutputs","vin","prevOutScriptType","prevOutType","posType","checkSignArgs","canSign","prepared","p2wshAlt","p2shAlt","expanded","expandOutput","signScript","P2WPKH","redeemScriptType","P2WSH","witnessScriptType","P2SH","signType","maxSignatures","P2PKH","prepareInput","getSigningData","__needsOutputs","prevTxOut","expandInput","build","setInputScript","setWitness","NONSTANDARD","__overMaximumFees","signatureHashType","signingHashType","nInputs","nOutputs","txb","setLockTime","P2MS","unmatched","parsed","fixMultisigOrder","witnessStack","ssType","wsType","P2PK","outputType","pkh1","pkh2","wpkh1","wpkh2","multisig","nullData","witnessCommitment","witnessPubKeyHash","witnessScriptHash","NULLDATA","WITNESS_COMMITMENT","partialSignature","p2wpkho","p2wsho","lastChunk","scriptSigChunks","redeemScriptChunks","HEADER","commitment","witnessScriptChunks","witnessRawScriptSig","_typeof","Symbol","iterator","_extends","source","apply","ownKeys","enumerableOnly","getOwnPropertySymbols","symbols","sym","getOwnPropertyDescriptor","_objectSpread","_defineProperty","getOwnPropertyDescriptors","defineProperties","_objectWithoutProperties","excluded","sourceKeys","_objectWithoutPropertiesLoose","sourceSymbolKeys","propertyIsEnumerable","_classCallCheck","instance","Constructor","_defineProperties","props","descriptor","_createClass","protoProps","staticProps","_possibleConstructorReturn","_assertThisInitialized","_getPrototypeOf","setPrototypeOf","getPrototypeOf","__proto__","ReferenceError","_inherits","subClass","superClass","_setPrototypeOf","React","QRCodeImpl","ErrorCorrectLevel","convertStr","charcode","fromCharCode","DEFAULT_PROPS","bgColor","fgColor","includeMargin","generatePath","margin","ops","cell","excavateModules","excavation","getImageSettings","cells","imageSettings","numCells","defaultSize","scale","height","excavate","floorX","floorY","SUPPORTS_PATH2D","Path2D","addPath","QRCodeCanvas","_React$PureComponent","_getPrototypeOf2","_this","_len","args","_key","imgLoaded","setState","_image","complete","handleImageLoad","nextProps","_this$props$imageSett","_nextProps$imageSetti","src","_this$props","qrcode","_canvas","canvas","getContext","calculatedImageSettings","pixelRatio","window","devicePixelRatio","fillStyle","fillRect","fill","rdx","cdx","state","drawImage","_this2","_this$props2","style","otherProps","canvasStyle","img","imgSrc","createElement","display","onLoad","ref","_ref","Fragment","_ref2","PureComponent","QRCodeSVG","_React$PureComponent2","_this$props3","image","xlinkHref","preserveAspectRatio","fgPath","shapeRendering","viewBox","renderAs","Component","defaultProps"],"mappings":"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","file":"static/js/18.2f95b792.chunk.js","sourcesContent":["'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst scriptNumber = require('./script_number');\nconst scriptSignature = require('./script_signature');\nconst types = require('./types');\nconst bip66 = require('bip66');\nconst ecc = require('tiny-secp256k1');\nconst pushdata = require('pushdata-bitcoin');\nconst typeforce = require('typeforce');\nexports.OPS = require('bitcoin-ops');\nconst REVERSE_OPS = require('bitcoin-ops/map');\nconst OP_INT_BASE = exports.OPS.OP_RESERVED; // OP_1 - 1\nfunction isOPInt(value) {\n  return (\n    types.Number(value) &&\n    (value === exports.OPS.OP_0 ||\n      (value >= exports.OPS.OP_1 && value <= exports.OPS.OP_16) ||\n      value === exports.OPS.OP_1NEGATE)\n  );\n}\nfunction isPushOnlyChunk(value) {\n  return types.Buffer(value) || isOPInt(value);\n}\nfunction isPushOnly(value) {\n  return types.Array(value) && value.every(isPushOnlyChunk);\n}\nexports.isPushOnly = isPushOnly;\nfunction asMinimalOP(buffer) {\n  if (buffer.length === 0) return exports.OPS.OP_0;\n  if (buffer.length !== 1) return;\n  if (buffer[0] >= 1 && buffer[0] <= 16) return OP_INT_BASE + buffer[0];\n  if (buffer[0] === 0x81) return exports.OPS.OP_1NEGATE;\n}\nfunction chunksIsBuffer(buf) {\n  return Buffer.isBuffer(buf);\n}\nfunction chunksIsArray(buf) {\n  return types.Array(buf);\n}\nfunction singleChunkIsBuffer(buf) {\n  return Buffer.isBuffer(buf);\n}\nfunction compile(chunks) {\n  // TODO: remove me\n  if (chunksIsBuffer(chunks)) return chunks;\n  typeforce(types.Array, chunks);\n  const bufferSize = chunks.reduce((accum, chunk) => {\n    // data chunk\n    if (singleChunkIsBuffer(chunk)) {\n      // adhere to BIP62.3, minimal push policy\n      if (chunk.length === 1 && asMinimalOP(chunk) !== undefined) {\n        return accum + 1;\n      }\n      return accum + pushdata.encodingLength(chunk.length) + chunk.length;\n    }\n    // opcode\n    return accum + 1;\n  }, 0.0);\n  const buffer = Buffer.allocUnsafe(bufferSize);\n  let offset = 0;\n  chunks.forEach(chunk => {\n    // data chunk\n    if (singleChunkIsBuffer(chunk)) {\n      // adhere to BIP62.3, minimal push policy\n      const opcode = asMinimalOP(chunk);\n      if (opcode !== undefined) {\n        buffer.writeUInt8(opcode, offset);\n        offset += 1;\n        return;\n      }\n      offset += pushdata.encode(buffer, chunk.length, offset);\n      chunk.copy(buffer, offset);\n      offset += chunk.length;\n      // opcode\n    } else {\n      buffer.writeUInt8(chunk, offset);\n      offset += 1;\n    }\n  });\n  if (offset !== buffer.length) throw new Error('Could not decode chunks');\n  return buffer;\n}\nexports.compile = compile;\nfunction decompile(buffer) {\n  // TODO: remove me\n  if (chunksIsArray(buffer)) return buffer;\n  typeforce(types.Buffer, buffer);\n  const chunks = [];\n  let i = 0;\n  while (i < buffer.length) {\n    const opcode = buffer[i];\n    // data chunk\n    if (opcode > exports.OPS.OP_0 && opcode <= exports.OPS.OP_PUSHDATA4) {\n      const d = pushdata.decode(buffer, i);\n      // did reading a pushDataInt fail?\n      if (d === null) return null;\n      i += d.size;\n      // attempt to read too much data?\n      if (i + d.number > buffer.length) return null;\n      const data = buffer.slice(i, i + d.number);\n      i += d.number;\n      // decompile minimally\n      const op = asMinimalOP(data);\n      if (op !== undefined) {\n        chunks.push(op);\n      } else {\n        chunks.push(data);\n      }\n      // opcode\n    } else {\n      chunks.push(opcode);\n      i += 1;\n    }\n  }\n  return chunks;\n}\nexports.decompile = decompile;\nfunction toASM(chunks) {\n  if (chunksIsBuffer(chunks)) {\n    chunks = decompile(chunks);\n  }\n  return chunks\n    .map(chunk => {\n      // data?\n      if (singleChunkIsBuffer(chunk)) {\n        const op = asMinimalOP(chunk);\n        if (op === undefined) return chunk.toString('hex');\n        chunk = op;\n      }\n      // opcode!\n      return REVERSE_OPS[chunk];\n    })\n    .join(' ');\n}\nexports.toASM = toASM;\nfunction fromASM(asm) {\n  typeforce(types.String, asm);\n  return compile(\n    asm.split(' ').map(chunkStr => {\n      // opcode?\n      if (exports.OPS[chunkStr] !== undefined) return exports.OPS[chunkStr];\n      typeforce(types.Hex, chunkStr);\n      // data!\n      return Buffer.from(chunkStr, 'hex');\n    }),\n  );\n}\nexports.fromASM = fromASM;\nfunction toStack(chunks) {\n  chunks = decompile(chunks);\n  typeforce(isPushOnly, chunks);\n  return chunks.map(op => {\n    if (singleChunkIsBuffer(op)) return op;\n    if (op === exports.OPS.OP_0) return Buffer.allocUnsafe(0);\n    return scriptNumber.encode(op - OP_INT_BASE);\n  });\n}\nexports.toStack = toStack;\nfunction isCanonicalPubKey(buffer) {\n  return ecc.isPoint(buffer);\n}\nexports.isCanonicalPubKey = isCanonicalPubKey;\nfunction isDefinedHashType(hashType) {\n  const hashTypeMod = hashType & ~0x80;\n  // return hashTypeMod > SIGHASH_ALL && hashTypeMod < SIGHASH_SINGLE\n  return hashTypeMod > 0x00 && hashTypeMod < 0x04;\n}\nexports.isDefinedHashType = isDefinedHashType;\nfunction isCanonicalScriptSignature(buffer) {\n  if (!Buffer.isBuffer(buffer)) return false;\n  if (!isDefinedHashType(buffer[buffer.length - 1])) return false;\n  return bip66.check(buffer.slice(0, -1));\n}\nexports.isCanonicalScriptSignature = isCanonicalScriptSignature;\n// tslint:disable-next-line variable-name\nexports.number = scriptNumber;\nexports.signature = scriptSignature;\n","var ERRORS = require('./errors')\nvar NATIVE = require('./native')\n\n// short-hand\nvar tfJSON = ERRORS.tfJSON\nvar TfTypeError = ERRORS.TfTypeError\nvar TfPropertyTypeError = ERRORS.TfPropertyTypeError\nvar tfSubError = ERRORS.tfSubError\nvar getValueTypeName = ERRORS.getValueTypeName\n\nvar TYPES = {\n  arrayOf: function arrayOf (type, options) {\n    type = compile(type)\n    options = options || {}\n\n    function _arrayOf (array, strict) {\n      if (!NATIVE.Array(array)) return false\n      if (NATIVE.Nil(array)) return false\n      if (options.minLength !== undefined && array.length < options.minLength) return false\n      if (options.maxLength !== undefined && array.length > options.maxLength) return false\n      if (options.length !== undefined && array.length !== options.length) return false\n\n      return array.every(function (value, i) {\n        try {\n          return typeforce(type, value, strict)\n        } catch (e) {\n          throw tfSubError(e, i)\n        }\n      })\n    }\n    _arrayOf.toJSON = function () {\n      var str = '[' + tfJSON(type) + ']'\n      if (options.length !== undefined) {\n        str += '{' + options.length + '}'\n      } else if (options.minLength !== undefined || options.maxLength !== undefined) {\n        str += '{' +\n          (options.minLength === undefined ? 0 : options.minLength) + ',' +\n          (options.maxLength === undefined ? Infinity : options.maxLength) + '}'\n      }\n      return str\n    }\n\n    return _arrayOf\n  },\n\n  maybe: function maybe (type) {\n    type = compile(type)\n\n    function _maybe (value, strict) {\n      return NATIVE.Nil(value) || type(value, strict, maybe)\n    }\n    _maybe.toJSON = function () { return '?' + tfJSON(type) }\n\n    return _maybe\n  },\n\n  map: function map (propertyType, propertyKeyType) {\n    propertyType = compile(propertyType)\n    if (propertyKeyType) propertyKeyType = compile(propertyKeyType)\n\n    function _map (value, strict) {\n      if (!NATIVE.Object(value)) return false\n      if (NATIVE.Nil(value)) return false\n\n      for (var propertyName in value) {\n        try {\n          if (propertyKeyType) {\n            typeforce(propertyKeyType, propertyName, strict)\n          }\n        } catch (e) {\n          throw tfSubError(e, propertyName, 'key')\n        }\n\n        try {\n          var propertyValue = value[propertyName]\n          typeforce(propertyType, propertyValue, strict)\n        } catch (e) {\n          throw tfSubError(e, propertyName)\n        }\n      }\n\n      return true\n    }\n\n    if (propertyKeyType) {\n      _map.toJSON = function () {\n        return '{' + tfJSON(propertyKeyType) + ': ' + tfJSON(propertyType) + '}'\n      }\n    } else {\n      _map.toJSON = function () { return '{' + tfJSON(propertyType) + '}' }\n    }\n\n    return _map\n  },\n\n  object: function object (uncompiled) {\n    var type = {}\n\n    for (var typePropertyName in uncompiled) {\n      type[typePropertyName] = compile(uncompiled[typePropertyName])\n    }\n\n    function _object (value, strict) {\n      if (!NATIVE.Object(value)) return false\n      if (NATIVE.Nil(value)) return false\n\n      var propertyName\n\n      try {\n        for (propertyName in type) {\n          var propertyType = type[propertyName]\n          var propertyValue = value[propertyName]\n\n          typeforce(propertyType, propertyValue, strict)\n        }\n      } catch (e) {\n        throw tfSubError(e, propertyName)\n      }\n\n      if (strict) {\n        for (propertyName in value) {\n          if (type[propertyName]) continue\n\n          throw new TfPropertyTypeError(undefined, propertyName)\n        }\n      }\n\n      return true\n    }\n    _object.toJSON = function () { return tfJSON(type) }\n\n    return _object\n  },\n\n  anyOf: function anyOf () {\n    var types = [].slice.call(arguments).map(compile)\n\n    function _anyOf (value, strict) {\n      return types.some(function (type) {\n        try {\n          return typeforce(type, value, strict)\n        } catch (e) {\n          return false\n        }\n      })\n    }\n    _anyOf.toJSON = function () { return types.map(tfJSON).join('|') }\n\n    return _anyOf\n  },\n\n  allOf: function allOf () {\n    var types = [].slice.call(arguments).map(compile)\n\n    function _allOf (value, strict) {\n      return types.every(function (type) {\n        try {\n          return typeforce(type, value, strict)\n        } catch (e) {\n          return false\n        }\n      })\n    }\n    _allOf.toJSON = function () { return types.map(tfJSON).join(' & ') }\n\n    return _allOf\n  },\n\n  quacksLike: function quacksLike (type) {\n    function _quacksLike (value) {\n      return type === getValueTypeName(value)\n    }\n    _quacksLike.toJSON = function () { return type }\n\n    return _quacksLike\n  },\n\n  tuple: function tuple () {\n    var types = [].slice.call(arguments).map(compile)\n\n    function _tuple (values, strict) {\n      if (NATIVE.Nil(values)) return false\n      if (NATIVE.Nil(values.length)) return false\n      if (strict && (values.length !== types.length)) return false\n\n      return types.every(function (type, i) {\n        try {\n          return typeforce(type, values[i], strict)\n        } catch (e) {\n          throw tfSubError(e, i)\n        }\n      })\n    }\n    _tuple.toJSON = function () { return '(' + types.map(tfJSON).join(', ') + ')' }\n\n    return _tuple\n  },\n\n  value: function value (expected) {\n    function _value (actual) {\n      return actual === expected\n    }\n    _value.toJSON = function () { return expected }\n\n    return _value\n  }\n}\n\n// TODO: deprecate\nTYPES.oneOf = TYPES.anyOf\n\nfunction compile (type) {\n  if (NATIVE.String(type)) {\n    if (type[0] === '?') return TYPES.maybe(type.slice(1))\n\n    return NATIVE[type] || TYPES.quacksLike(type)\n  } else if (type && NATIVE.Object(type)) {\n    if (NATIVE.Array(type)) {\n      if (type.length !== 1) throw new TypeError('Expected compile() parameter of type Array of length 1')\n      return TYPES.arrayOf(type[0])\n    }\n\n    return TYPES.object(type)\n  } else if (NATIVE.Function(type)) {\n    return type\n  }\n\n  return TYPES.value(type)\n}\n\nfunction typeforce (type, value, strict, surrogate) {\n  if (NATIVE.Function(type)) {\n    if (type(value, strict)) return true\n\n    throw new TfTypeError(surrogate || type, value)\n  }\n\n  // JIT\n  return typeforce(compile(type), value, strict)\n}\n\n// assign types to typeforce function\nfor (var typeName in NATIVE) {\n  typeforce[typeName] = NATIVE[typeName]\n}\n\nfor (typeName in TYPES) {\n  typeforce[typeName] = TYPES[typeName]\n}\n\nvar EXTRA = require('./extra')\nfor (typeName in EXTRA) {\n  typeforce[typeName] = EXTRA[typeName]\n}\n\ntypeforce.compile = compile\ntypeforce.TfTypeError = TfTypeError\ntypeforce.TfPropertyTypeError = TfPropertyTypeError\n\nmodule.exports = typeforce\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nexports.bitcoin = {\n  messagePrefix: '\\x18Bitcoin Signed Message:\\n',\n  bech32: 'bc',\n  bip32: {\n    public: 0x0488b21e,\n    private: 0x0488ade4,\n  },\n  pubKeyHash: 0x00,\n  scriptHash: 0x05,\n  wif: 0x80,\n};\nexports.regtest = {\n  messagePrefix: '\\x18Bitcoin Signed Message:\\n',\n  bech32: 'bcrt',\n  bip32: {\n    public: 0x043587cf,\n    private: 0x04358394,\n  },\n  pubKeyHash: 0x6f,\n  scriptHash: 0xc4,\n  wif: 0xef,\n};\nexports.testnet = {\n  messagePrefix: '\\x18Bitcoin Signed Message:\\n',\n  bech32: 'tb',\n  bip32: {\n    public: 0x043587cf,\n    private: 0x04358394,\n  },\n  pubKeyHash: 0x6f,\n  scriptHash: 0xc4,\n  wif: 0xef,\n};\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nvar GlobalTypes;\n(function(GlobalTypes) {\n  GlobalTypes[(GlobalTypes['UNSIGNED_TX'] = 0)] = 'UNSIGNED_TX';\n  GlobalTypes[(GlobalTypes['GLOBAL_XPUB'] = 1)] = 'GLOBAL_XPUB';\n})((GlobalTypes = exports.GlobalTypes || (exports.GlobalTypes = {})));\nexports.GLOBAL_TYPE_NAMES = ['unsignedTx', 'globalXpub'];\nvar InputTypes;\n(function(InputTypes) {\n  InputTypes[(InputTypes['NON_WITNESS_UTXO'] = 0)] = 'NON_WITNESS_UTXO';\n  InputTypes[(InputTypes['WITNESS_UTXO'] = 1)] = 'WITNESS_UTXO';\n  InputTypes[(InputTypes['PARTIAL_SIG'] = 2)] = 'PARTIAL_SIG';\n  InputTypes[(InputTypes['SIGHASH_TYPE'] = 3)] = 'SIGHASH_TYPE';\n  InputTypes[(InputTypes['REDEEM_SCRIPT'] = 4)] = 'REDEEM_SCRIPT';\n  InputTypes[(InputTypes['WITNESS_SCRIPT'] = 5)] = 'WITNESS_SCRIPT';\n  InputTypes[(InputTypes['BIP32_DERIVATION'] = 6)] = 'BIP32_DERIVATION';\n  InputTypes[(InputTypes['FINAL_SCRIPTSIG'] = 7)] = 'FINAL_SCRIPTSIG';\n  InputTypes[(InputTypes['FINAL_SCRIPTWITNESS'] = 8)] = 'FINAL_SCRIPTWITNESS';\n  InputTypes[(InputTypes['POR_COMMITMENT'] = 9)] = 'POR_COMMITMENT';\n})((InputTypes = exports.InputTypes || (exports.InputTypes = {})));\nexports.INPUT_TYPE_NAMES = [\n  'nonWitnessUtxo',\n  'witnessUtxo',\n  'partialSig',\n  'sighashType',\n  'redeemScript',\n  'witnessScript',\n  'bip32Derivation',\n  'finalScriptSig',\n  'finalScriptWitness',\n  'porCommitment',\n];\nvar OutputTypes;\n(function(OutputTypes) {\n  OutputTypes[(OutputTypes['REDEEM_SCRIPT'] = 0)] = 'REDEEM_SCRIPT';\n  OutputTypes[(OutputTypes['WITNESS_SCRIPT'] = 1)] = 'WITNESS_SCRIPT';\n  OutputTypes[(OutputTypes['BIP32_DERIVATION'] = 2)] = 'BIP32_DERIVATION';\n})((OutputTypes = exports.OutputTypes || (exports.OutputTypes = {})));\nexports.OUTPUT_TYPE_NAMES = [\n  'redeemScript',\n  'witnessScript',\n  'bip32Derivation',\n];\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst typeforce = require('typeforce');\nconst UINT31_MAX = Math.pow(2, 31) - 1;\nfunction UInt31(value) {\n  return typeforce.UInt32(value) && value <= UINT31_MAX;\n}\nexports.UInt31 = UInt31;\nfunction BIP32Path(value) {\n  return typeforce.String(value) && !!value.match(/^(m\\/)?(\\d+'?\\/)*\\d+'?$/);\n}\nexports.BIP32Path = BIP32Path;\nBIP32Path.toJSON = () => {\n  return 'BIP32 derivation path';\n};\nfunction Signer(obj) {\n  return (\n    (typeforce.Buffer(obj.publicKey) ||\n      typeof obj.getPublicKey === 'function') &&\n    typeof obj.sign === 'function'\n  );\n}\nexports.Signer = Signer;\nconst SATOSHI_MAX = 21 * 1e14;\nfunction Satoshi(value) {\n  return typeforce.UInt53(value) && value <= SATOSHI_MAX;\n}\nexports.Satoshi = Satoshi;\n// external dependent types\nexports.ECPoint = typeforce.quacksLike('Point');\n// exposed, external API\nexports.Network = typeforce.compile({\n  messagePrefix: typeforce.oneOf(typeforce.Buffer, typeforce.String),\n  bip32: {\n    public: typeforce.UInt32,\n    private: typeforce.UInt32,\n  },\n  pubKeyHash: typeforce.UInt8,\n  scriptHash: typeforce.UInt8,\n  wif: typeforce.UInt8,\n});\nexports.Buffer256bit = typeforce.BufferN(32);\nexports.Hash160bit = typeforce.BufferN(20);\nexports.Hash256bit = typeforce.BufferN(32);\nexports.Number = typeforce.Number; // tslint:disable-line variable-name\nexports.Array = typeforce.Array;\nexports.Boolean = typeforce.Boolean; // tslint:disable-line variable-name\nexports.String = typeforce.String; // tslint:disable-line variable-name\nexports.Buffer = typeforce.Buffer;\nexports.Hex = typeforce.Hex;\nexports.maybe = typeforce.maybe;\nexports.tuple = typeforce.tuple;\nexports.UInt8 = typeforce.UInt8;\nexports.UInt32 = typeforce.UInt32;\nexports.Function = typeforce.Function;\nexports.BufferN = typeforce.BufferN;\nexports.Null = typeforce.Null;\nexports.oneOf = typeforce.oneOf;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst createHash = require('create-hash');\nfunction ripemd160(buffer) {\n  try {\n    return createHash('rmd160')\n      .update(buffer)\n      .digest();\n  } catch (err) {\n    return createHash('ripemd160')\n      .update(buffer)\n      .digest();\n  }\n}\nexports.ripemd160 = ripemd160;\nfunction sha1(buffer) {\n  return createHash('sha1')\n    .update(buffer)\n    .digest();\n}\nexports.sha1 = sha1;\nfunction sha256(buffer) {\n  return createHash('sha256')\n    .update(buffer)\n    .digest();\n}\nexports.sha256 = sha256;\nfunction hash160(buffer) {\n  return ripemd160(sha256(buffer));\n}\nexports.hash160 = hash160;\nfunction hash256(buffer) {\n  return sha256(sha256(buffer));\n}\nexports.hash256 = hash256;\n","const BN = require('bn.js')\nconst EC = require('elliptic').ec\nconst secp256k1 = new EC('secp256k1')\nconst deterministicGenerateK = require('./rfc6979')\n\nconst ZERO32 = Buffer.alloc(32, 0)\nconst EC_GROUP_ORDER = Buffer.from('fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141', 'hex')\nconst EC_P = Buffer.from('fffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f', 'hex')\n\nconst n = secp256k1.curve.n\nconst nDiv2 = n.shrn(1)\nconst G = secp256k1.curve.g\n\nconst THROW_BAD_PRIVATE = 'Expected Private'\nconst THROW_BAD_POINT = 'Expected Point'\nconst THROW_BAD_TWEAK = 'Expected Tweak'\nconst THROW_BAD_HASH = 'Expected Hash'\nconst THROW_BAD_SIGNATURE = 'Expected Signature'\nconst THROW_BAD_EXTRA_DATA = 'Expected Extra Data (32 bytes)'\n\nfunction isScalar (x) {\n  return Buffer.isBuffer(x) && x.length === 32\n}\n\nfunction isOrderScalar (x) {\n  if (!isScalar(x)) return false\n  return x.compare(EC_GROUP_ORDER) < 0 // < G\n}\n\nfunction isPoint (p) {\n  if (!Buffer.isBuffer(p)) return false\n  if (p.length < 33) return false\n\n  const t = p[0]\n  const x = p.slice(1, 33)\n  if (x.compare(ZERO32) === 0) return false\n  if (x.compare(EC_P) >= 0) return false\n  if ((t === 0x02 || t === 0x03) && p.length === 33) {\n    try { decodeFrom(p) } catch (e) { return false } // TODO: temporary\n    return true\n  }\n\n  const y = p.slice(33)\n  if (y.compare(ZERO32) === 0) return false\n  if (y.compare(EC_P) >= 0) return false\n  if (t === 0x04 && p.length === 65) return true\n  return false\n}\n\nfunction __isPointCompressed (p) {\n  return p[0] !== 0x04\n}\n\nfunction isPointCompressed (p) {\n  if (!isPoint(p)) return false\n  return __isPointCompressed(p)\n}\n\nfunction isPrivate (x) {\n  if (!isScalar(x)) return false\n  return x.compare(ZERO32) > 0 && // > 0\n    x.compare(EC_GROUP_ORDER) < 0 // < G\n}\n\nfunction isSignature (value) {\n  const r = value.slice(0, 32)\n  const s = value.slice(32, 64)\n  return Buffer.isBuffer(value) && value.length === 64 &&\n    r.compare(EC_GROUP_ORDER) < 0 &&\n    s.compare(EC_GROUP_ORDER) < 0\n}\n\nfunction assumeCompression (value, pubkey) {\n  if (value === undefined && pubkey !== undefined) return __isPointCompressed(pubkey)\n  if (value === undefined) return true\n  return value\n}\n\nfunction fromBuffer (d) { return new BN(d) }\nfunction toBuffer (d) { return d.toArrayLike(Buffer, 'be', 32) }\nfunction decodeFrom (P) { return secp256k1.curve.decodePoint(P) }\nfunction getEncoded (P, compressed) { return Buffer.from(P._encode(compressed)) }\n\nfunction pointAdd (pA, pB, __compressed) {\n  if (!isPoint(pA)) throw new TypeError(THROW_BAD_POINT)\n  if (!isPoint(pB)) throw new TypeError(THROW_BAD_POINT)\n\n  const a = decodeFrom(pA)\n  const b = decodeFrom(pB)\n  const pp = a.add(b)\n  if (pp.isInfinity()) return null\n\n  const compressed = assumeCompression(__compressed, pA)\n  return getEncoded(pp, compressed)\n}\n\nfunction pointAddScalar (p, tweak, __compressed) {\n  if (!isPoint(p)) throw new TypeError(THROW_BAD_POINT)\n  if (!isOrderScalar(tweak)) throw new TypeError(THROW_BAD_TWEAK)\n\n  const compressed = assumeCompression(__compressed, p)\n  const pp = decodeFrom(p)\n  if (tweak.compare(ZERO32) === 0) return getEncoded(pp, compressed)\n\n  const tt = fromBuffer(tweak)\n  const qq = G.mul(tt)\n  const uu = pp.add(qq)\n  if (uu.isInfinity()) return null\n\n  return getEncoded(uu, compressed)\n}\n\nfunction pointCompress (p, __compressed) {\n  if (!isPoint(p)) throw new TypeError(THROW_BAD_POINT)\n\n  const pp = decodeFrom(p)\n  if (pp.isInfinity()) throw new TypeError(THROW_BAD_POINT)\n\n  const compressed = assumeCompression(__compressed, p)\n\n  return getEncoded(pp, compressed)\n}\n\nfunction pointFromScalar (d, __compressed) {\n  if (!isPrivate(d)) throw new TypeError(THROW_BAD_PRIVATE)\n\n  const dd = fromBuffer(d)\n  const pp = G.mul(dd)\n  if (pp.isInfinity()) return null\n\n  const compressed = assumeCompression(__compressed)\n  return getEncoded(pp, compressed)\n}\n\nfunction pointMultiply (p, tweak, __compressed) {\n  if (!isPoint(p)) throw new TypeError(THROW_BAD_POINT)\n  if (!isOrderScalar(tweak)) throw new TypeError(THROW_BAD_TWEAK)\n\n  const compressed = assumeCompression(__compressed, p)\n  const pp = decodeFrom(p)\n  const tt = fromBuffer(tweak)\n  const qq = pp.mul(tt)\n  if (qq.isInfinity()) return null\n\n  return getEncoded(qq, compressed)\n}\n\nfunction privateAdd (d, tweak) {\n  if (!isPrivate(d)) throw new TypeError(THROW_BAD_PRIVATE)\n  if (!isOrderScalar(tweak)) throw new TypeError(THROW_BAD_TWEAK)\n\n  const dd = fromBuffer(d)\n  const tt = fromBuffer(tweak)\n  const dt = toBuffer(dd.add(tt).umod(n))\n  if (!isPrivate(dt)) return null\n\n  return dt\n}\n\nfunction privateSub (d, tweak) {\n  if (!isPrivate(d)) throw new TypeError(THROW_BAD_PRIVATE)\n  if (!isOrderScalar(tweak)) throw new TypeError(THROW_BAD_TWEAK)\n\n  const dd = fromBuffer(d)\n  const tt = fromBuffer(tweak)\n  const dt = toBuffer(dd.sub(tt).umod(n))\n  if (!isPrivate(dt)) return null\n\n  return dt\n}\n\nfunction sign (hash, x) {\n  return __sign(hash, x)\n}\n\nfunction signWithEntropy (hash, x, addData) {\n  return __sign(hash, x, addData)\n}\n\nfunction __sign (hash, x, addData) {\n  if (!isScalar(hash)) throw new TypeError(THROW_BAD_HASH)\n  if (!isPrivate(x)) throw new TypeError(THROW_BAD_PRIVATE)\n  if (addData !== undefined && !isScalar(addData)) throw new TypeError(THROW_BAD_EXTRA_DATA)\n\n  const d = fromBuffer(x)\n  const e = fromBuffer(hash)\n\n  let r, s\n  const checkSig = function (k) {\n    const kI = fromBuffer(k)\n    const Q = G.mul(kI)\n\n    if (Q.isInfinity()) return false\n\n    r = Q.x.umod(n)\n    if (r.isZero() === 0) return false\n\n    s = kI\n      .invm(n)\n      .mul(e.add(d.mul(r)))\n      .umod(n)\n    if (s.isZero() === 0) return false\n\n    return true\n  }\n\n  deterministicGenerateK(hash, x, checkSig, isPrivate, addData)\n\n  // enforce low S values, see bip62: 'low s values in signatures'\n  if (s.cmp(nDiv2) > 0) {\n    s = n.sub(s)\n  }\n\n  const buffer = Buffer.allocUnsafe(64)\n  toBuffer(r).copy(buffer, 0)\n  toBuffer(s).copy(buffer, 32)\n  return buffer\n}\n\nfunction verify (hash, q, signature, strict) {\n  if (!isScalar(hash)) throw new TypeError(THROW_BAD_HASH)\n  if (!isPoint(q)) throw new TypeError(THROW_BAD_POINT)\n\n  // 1.4.1 Enforce r and s are both integers in the interval [1, n  1] (1, isSignature enforces '< n - 1')\n  if (!isSignature(signature)) throw new TypeError(THROW_BAD_SIGNATURE)\n\n  const Q = decodeFrom(q)\n  const r = fromBuffer(signature.slice(0, 32))\n  const s = fromBuffer(signature.slice(32, 64))\n\n  if (strict && s.cmp(nDiv2) > 0) {\n    return false\n  }\n\n  // 1.4.1 Enforce r and s are both integers in the interval [1, n  1] (2, enforces '> 0')\n  if (r.gtn(0) <= 0 /* || r.compareTo(n) >= 0 */) return false\n  if (s.gtn(0) <= 0 /* || s.compareTo(n) >= 0 */) return false\n\n  // 1.4.2 H = Hash(M), already done by the user\n  // 1.4.3 e = H\n  const e = fromBuffer(hash)\n\n  // Compute s^-1\n  const sInv = s.invm(n)\n\n  // 1.4.4 Compute u1 = es^1 mod n\n  //               u2 = rs^1 mod n\n  const u1 = e.mul(sInv).umod(n)\n  const u2 = r.mul(sInv).umod(n)\n\n  // 1.4.5 Compute R = (xR, yR)\n  //               R = u1G + u2Q\n  const R = G.mulAdd(u1, Q, u2)\n\n  // 1.4.5 (cont.) Enforce R is not at infinity\n  if (R.isInfinity()) return false\n\n  // 1.4.6 Convert the field element R.x to an integer\n  const xR = R.x\n\n  // 1.4.7 Set v = xR mod n\n  const v = xR.umod(n)\n\n  // 1.4.8 If v = r, output \"valid\", and if v != r, output \"invalid\"\n  return v.eq(r)\n}\n\nmodule.exports = {\n  isPoint,\n  isPointCompressed,\n  isPrivate,\n  pointAdd,\n  pointAddScalar,\n  pointCompress,\n  pointFromScalar,\n  pointMultiply,\n  privateAdd,\n  privateSub,\n  sign,\n  signWithEntropy,\n  verify\n}\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nfunction prop(object, name, f) {\n  Object.defineProperty(object, name, {\n    configurable: true,\n    enumerable: true,\n    get() {\n      const _value = f.call(this);\n      this[name] = _value;\n      return _value;\n    },\n    set(_value) {\n      Object.defineProperty(this, name, {\n        configurable: true,\n        enumerable: true,\n        value: _value,\n        writable: true,\n      });\n    },\n  });\n}\nexports.prop = prop;\nfunction value(f) {\n  let _value;\n  return () => {\n    if (_value !== undefined) return _value;\n    _value = f();\n    return _value;\n  };\n}\nexports.value = value;\n","module.exports = {\n\tMODE_NUMBER :\t\t1 << 0,\n\tMODE_ALPHA_NUM : \t1 << 1,\n\tMODE_8BIT_BYTE : \t1 << 2,\n\tMODE_KANJI :\t\t1 << 3\n};\n","module.exports = {\n\tL : 1,\n\tM : 0,\n\tQ : 3,\n\tH : 2\n};\n\n","var math = require('./math');\n\nfunction QRPolynomial(num, shift) {\n\n\tif (num.length == undefined) {\n\t\tthrow new Error(num.length + \"/\" + shift);\n\t}\n\n\tvar offset = 0;\n\n\twhile (offset < num.length && num[offset] == 0) {\n\t\toffset++;\n\t}\n\n\tthis.num = new Array(num.length - offset + shift);\n\tfor (var i = 0; i < num.length - offset; i++) {\n\t\tthis.num[i] = num[i + offset];\n\t}\n}\n\nQRPolynomial.prototype = {\n\n\tget : function(index) {\n\t\treturn this.num[index];\n\t},\n\t\n\tgetLength : function() {\n\t\treturn this.num.length;\n\t},\n\t\n\tmultiply : function(e) {\n\t\n\t\tvar num = new Array(this.getLength() + e.getLength() - 1);\n\t\n\t\tfor (var i = 0; i < this.getLength(); i++) {\n\t\t\tfor (var j = 0; j < e.getLength(); j++) {\n\t\t\t\tnum[i + j] ^= math.gexp(math.glog(this.get(i) ) + math.glog(e.get(j) ) );\n\t\t\t}\n\t\t}\n\t\n\t\treturn new QRPolynomial(num, 0);\n\t},\n\t\n\tmod : function(e) {\n\t\n\t\tif (this.getLength() - e.getLength() < 0) {\n\t\t\treturn this;\n\t\t}\n\t\n\t\tvar ratio = math.glog(this.get(0) ) - math.glog(e.get(0) );\n\t\n\t\tvar num = new Array(this.getLength() );\n\t\t\n\t\tfor (var i = 0; i < this.getLength(); i++) {\n\t\t\tnum[i] = this.get(i);\n\t\t}\n\t\t\n\t\tfor (var i = 0; i < e.getLength(); i++) {\n\t\t\tnum[i] ^= math.gexp(math.glog(e.get(i) ) + ratio);\n\t\t}\n\t\n\t\t// recursive call\n\t\treturn new QRPolynomial(num, 0).mod(e);\n\t}\n};\n\nmodule.exports = QRPolynomial;\n","var QRMath = {\n\n\tglog : function(n) {\n\t\n\t\tif (n < 1) {\n\t\t\tthrow new Error(\"glog(\" + n + \")\");\n\t\t}\n\t\t\n\t\treturn QRMath.LOG_TABLE[n];\n\t},\n\t\n\tgexp : function(n) {\n\t\n\t\twhile (n < 0) {\n\t\t\tn += 255;\n\t\t}\n\t\n\t\twhile (n >= 256) {\n\t\t\tn -= 255;\n\t\t}\n\t\n\t\treturn QRMath.EXP_TABLE[n];\n\t},\n\t\n\tEXP_TABLE : new Array(256),\n\t\n\tLOG_TABLE : new Array(256)\n\n};\n\t\nfor (var i = 0; i < 8; i++) {\n\tQRMath.EXP_TABLE[i] = 1 << i;\n}\nfor (var i = 8; i < 256; i++) {\n\tQRMath.EXP_TABLE[i] = QRMath.EXP_TABLE[i - 4]\n\t\t^ QRMath.EXP_TABLE[i - 5]\n\t\t^ QRMath.EXP_TABLE[i - 6]\n\t\t^ QRMath.EXP_TABLE[i - 8];\n}\nfor (var i = 0; i < 255; i++) {\n\tQRMath.LOG_TABLE[QRMath.EXP_TABLE[i] ] = i;\n}\n\nmodule.exports = QRMath;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst embed_1 = require('./embed');\nexports.embed = embed_1.p2data;\nconst p2ms_1 = require('./p2ms');\nexports.p2ms = p2ms_1.p2ms;\nconst p2pk_1 = require('./p2pk');\nexports.p2pk = p2pk_1.p2pk;\nconst p2pkh_1 = require('./p2pkh');\nexports.p2pkh = p2pkh_1.p2pkh;\nconst p2sh_1 = require('./p2sh');\nexports.p2sh = p2sh_1.p2sh;\nconst p2wpkh_1 = require('./p2wpkh');\nexports.p2wpkh = p2wpkh_1.p2wpkh;\nconst p2wsh_1 = require('./p2wsh');\nexports.p2wsh = p2wsh_1.p2wsh;\n// TODO\n// witness commitment\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst types = require('./types');\nconst typeforce = require('typeforce');\nconst varuint = require('varuint-bitcoin');\n// https://github.com/feross/buffer/blob/master/index.js#L1127\nfunction verifuint(value, max) {\n  if (typeof value !== 'number')\n    throw new Error('cannot write a non-number as a number');\n  if (value < 0)\n    throw new Error('specified a negative value for writing an unsigned value');\n  if (value > max) throw new Error('RangeError: value out of range');\n  if (Math.floor(value) !== value)\n    throw new Error('value has a fractional component');\n}\nfunction readUInt64LE(buffer, offset) {\n  const a = buffer.readUInt32LE(offset);\n  let b = buffer.readUInt32LE(offset + 4);\n  b *= 0x100000000;\n  verifuint(b + a, 0x001fffffffffffff);\n  return b + a;\n}\nexports.readUInt64LE = readUInt64LE;\nfunction writeUInt64LE(buffer, value, offset) {\n  verifuint(value, 0x001fffffffffffff);\n  buffer.writeInt32LE(value & -1, offset);\n  buffer.writeUInt32LE(Math.floor(value / 0x100000000), offset + 4);\n  return offset + 8;\n}\nexports.writeUInt64LE = writeUInt64LE;\nfunction reverseBuffer(buffer) {\n  if (buffer.length < 1) return buffer;\n  let j = buffer.length - 1;\n  let tmp = 0;\n  for (let i = 0; i < buffer.length / 2; i++) {\n    tmp = buffer[i];\n    buffer[i] = buffer[j];\n    buffer[j] = tmp;\n    j--;\n  }\n  return buffer;\n}\nexports.reverseBuffer = reverseBuffer;\nfunction cloneBuffer(buffer) {\n  const clone = Buffer.allocUnsafe(buffer.length);\n  buffer.copy(clone);\n  return clone;\n}\nexports.cloneBuffer = cloneBuffer;\n/**\n * Helper class for serialization of bitcoin data types into a pre-allocated buffer.\n */\nclass BufferWriter {\n  constructor(buffer, offset = 0) {\n    this.buffer = buffer;\n    this.offset = offset;\n    typeforce(types.tuple(types.Buffer, types.UInt32), [buffer, offset]);\n  }\n  writeUInt8(i) {\n    this.offset = this.buffer.writeUInt8(i, this.offset);\n  }\n  writeInt32(i) {\n    this.offset = this.buffer.writeInt32LE(i, this.offset);\n  }\n  writeUInt32(i) {\n    this.offset = this.buffer.writeUInt32LE(i, this.offset);\n  }\n  writeUInt64(i) {\n    this.offset = writeUInt64LE(this.buffer, i, this.offset);\n  }\n  writeVarInt(i) {\n    varuint.encode(i, this.buffer, this.offset);\n    this.offset += varuint.encode.bytes;\n  }\n  writeSlice(slice) {\n    if (this.buffer.length < this.offset + slice.length) {\n      throw new Error('Cannot write slice out of bounds');\n    }\n    this.offset += slice.copy(this.buffer, this.offset);\n  }\n  writeVarSlice(slice) {\n    this.writeVarInt(slice.length);\n    this.writeSlice(slice);\n  }\n  writeVector(vector) {\n    this.writeVarInt(vector.length);\n    vector.forEach(buf => this.writeVarSlice(buf));\n  }\n}\nexports.BufferWriter = BufferWriter;\n/**\n * Helper class for reading of bitcoin data types from a buffer.\n */\nclass BufferReader {\n  constructor(buffer, offset = 0) {\n    this.buffer = buffer;\n    this.offset = offset;\n    typeforce(types.tuple(types.Buffer, types.UInt32), [buffer, offset]);\n  }\n  readUInt8() {\n    const result = this.buffer.readUInt8(this.offset);\n    this.offset++;\n    return result;\n  }\n  readInt32() {\n    const result = this.buffer.readInt32LE(this.offset);\n    this.offset += 4;\n    return result;\n  }\n  readUInt32() {\n    const result = this.buffer.readUInt32LE(this.offset);\n    this.offset += 4;\n    return result;\n  }\n  readUInt64() {\n    const result = readUInt64LE(this.buffer, this.offset);\n    this.offset += 8;\n    return result;\n  }\n  readVarInt() {\n    const vi = varuint.decode(this.buffer, this.offset);\n    this.offset += varuint.decode.bytes;\n    return vi;\n  }\n  readSlice(n) {\n    if (this.buffer.length < this.offset + n) {\n      throw new Error('Cannot read slice out of bounds');\n    }\n    const result = this.buffer.slice(this.offset, this.offset + n);\n    this.offset += n;\n    return result;\n  }\n  readVarSlice() {\n    return this.readSlice(this.readVarInt());\n  }\n  readVector() {\n    const count = this.readVarInt();\n    const vector = [];\n    for (let i = 0; i < count; i++) vector.push(this.readVarSlice());\n    return vector;\n  }\n}\nexports.BufferReader = BufferReader;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst bufferutils_1 = require('./bufferutils');\nconst bcrypto = require('./crypto');\nconst bscript = require('./script');\nconst script_1 = require('./script');\nconst types = require('./types');\nconst typeforce = require('typeforce');\nconst varuint = require('varuint-bitcoin');\nfunction varSliceSize(someScript) {\n  const length = someScript.length;\n  return varuint.encodingLength(length) + length;\n}\nfunction vectorSize(someVector) {\n  const length = someVector.length;\n  return (\n    varuint.encodingLength(length) +\n    someVector.reduce((sum, witness) => {\n      return sum + varSliceSize(witness);\n    }, 0)\n  );\n}\nconst EMPTY_SCRIPT = Buffer.allocUnsafe(0);\nconst EMPTY_WITNESS = [];\nconst ZERO = Buffer.from(\n  '0000000000000000000000000000000000000000000000000000000000000000',\n  'hex',\n);\nconst ONE = Buffer.from(\n  '0000000000000000000000000000000000000000000000000000000000000001',\n  'hex',\n);\nconst VALUE_UINT64_MAX = Buffer.from('ffffffffffffffff', 'hex');\nconst BLANK_OUTPUT = {\n  script: EMPTY_SCRIPT,\n  valueBuffer: VALUE_UINT64_MAX,\n};\nfunction isOutput(out) {\n  return out.value !== undefined;\n}\nclass Transaction {\n  constructor() {\n    this.version = 1;\n    this.locktime = 0;\n    this.ins = [];\n    this.outs = [];\n  }\n  static fromBuffer(buffer, _NO_STRICT) {\n    const bufferReader = new bufferutils_1.BufferReader(buffer);\n    const tx = new Transaction();\n    tx.version = bufferReader.readInt32();\n    const marker = bufferReader.readUInt8();\n    const flag = bufferReader.readUInt8();\n    let hasWitnesses = false;\n    if (\n      marker === Transaction.ADVANCED_TRANSACTION_MARKER &&\n      flag === Transaction.ADVANCED_TRANSACTION_FLAG\n    ) {\n      hasWitnesses = true;\n    } else {\n      bufferReader.offset -= 2;\n    }\n    const vinLen = bufferReader.readVarInt();\n    for (let i = 0; i < vinLen; ++i) {\n      tx.ins.push({\n        hash: bufferReader.readSlice(32),\n        index: bufferReader.readUInt32(),\n        script: bufferReader.readVarSlice(),\n        sequence: bufferReader.readUInt32(),\n        witness: EMPTY_WITNESS,\n      });\n    }\n    const voutLen = bufferReader.readVarInt();\n    for (let i = 0; i < voutLen; ++i) {\n      tx.outs.push({\n        value: bufferReader.readUInt64(),\n        script: bufferReader.readVarSlice(),\n      });\n    }\n    if (hasWitnesses) {\n      for (let i = 0; i < vinLen; ++i) {\n        tx.ins[i].witness = bufferReader.readVector();\n      }\n      // was this pointless?\n      if (!tx.hasWitnesses())\n        throw new Error('Transaction has superfluous witness data');\n    }\n    tx.locktime = bufferReader.readUInt32();\n    if (_NO_STRICT) return tx;\n    if (bufferReader.offset !== buffer.length)\n      throw new Error('Transaction has unexpected data');\n    return tx;\n  }\n  static fromHex(hex) {\n    return Transaction.fromBuffer(Buffer.from(hex, 'hex'), false);\n  }\n  static isCoinbaseHash(buffer) {\n    typeforce(types.Hash256bit, buffer);\n    for (let i = 0; i < 32; ++i) {\n      if (buffer[i] !== 0) return false;\n    }\n    return true;\n  }\n  isCoinbase() {\n    return (\n      this.ins.length === 1 && Transaction.isCoinbaseHash(this.ins[0].hash)\n    );\n  }\n  addInput(hash, index, sequence, scriptSig) {\n    typeforce(\n      types.tuple(\n        types.Hash256bit,\n        types.UInt32,\n        types.maybe(types.UInt32),\n        types.maybe(types.Buffer),\n      ),\n      arguments,\n    );\n    if (types.Null(sequence)) {\n      sequence = Transaction.DEFAULT_SEQUENCE;\n    }\n    // Add the input and return the input's index\n    return (\n      this.ins.push({\n        hash,\n        index,\n        script: scriptSig || EMPTY_SCRIPT,\n        sequence: sequence,\n        witness: EMPTY_WITNESS,\n      }) - 1\n    );\n  }\n  addOutput(scriptPubKey, value) {\n    typeforce(types.tuple(types.Buffer, types.Satoshi), arguments);\n    // Add the output and return the output's index\n    return (\n      this.outs.push({\n        script: scriptPubKey,\n        value,\n      }) - 1\n    );\n  }\n  hasWitnesses() {\n    return this.ins.some(x => {\n      return x.witness.length !== 0;\n    });\n  }\n  weight() {\n    const base = this.byteLength(false);\n    const total = this.byteLength(true);\n    return base * 3 + total;\n  }\n  virtualSize() {\n    return Math.ceil(this.weight() / 4);\n  }\n  byteLength(_ALLOW_WITNESS = true) {\n    const hasWitnesses = _ALLOW_WITNESS && this.hasWitnesses();\n    return (\n      (hasWitnesses ? 10 : 8) +\n      varuint.encodingLength(this.ins.length) +\n      varuint.encodingLength(this.outs.length) +\n      this.ins.reduce((sum, input) => {\n        return sum + 40 + varSliceSize(input.script);\n      }, 0) +\n      this.outs.reduce((sum, output) => {\n        return sum + 8 + varSliceSize(output.script);\n      }, 0) +\n      (hasWitnesses\n        ? this.ins.reduce((sum, input) => {\n            return sum + vectorSize(input.witness);\n          }, 0)\n        : 0)\n    );\n  }\n  clone() {\n    const newTx = new Transaction();\n    newTx.version = this.version;\n    newTx.locktime = this.locktime;\n    newTx.ins = this.ins.map(txIn => {\n      return {\n        hash: txIn.hash,\n        index: txIn.index,\n        script: txIn.script,\n        sequence: txIn.sequence,\n        witness: txIn.witness,\n      };\n    });\n    newTx.outs = this.outs.map(txOut => {\n      return {\n        script: txOut.script,\n        value: txOut.value,\n      };\n    });\n    return newTx;\n  }\n  /**\n   * Hash transaction for signing a specific input.\n   *\n   * Bitcoin uses a different hash for each signed transaction input.\n   * This method copies the transaction, makes the necessary changes based on the\n   * hashType, and then hashes the result.\n   * This hash can then be used to sign the provided transaction input.\n   */\n  hashForSignature(inIndex, prevOutScript, hashType) {\n    typeforce(\n      types.tuple(types.UInt32, types.Buffer, /* types.UInt8 */ types.Number),\n      arguments,\n    );\n    // https://github.com/bitcoin/bitcoin/blob/master/src/test/sighash_tests.cpp#L29\n    if (inIndex >= this.ins.length) return ONE;\n    // ignore OP_CODESEPARATOR\n    const ourScript = bscript.compile(\n      bscript.decompile(prevOutScript).filter(x => {\n        return x !== script_1.OPS.OP_CODESEPARATOR;\n      }),\n    );\n    const txTmp = this.clone();\n    // SIGHASH_NONE: ignore all outputs? (wildcard payee)\n    if ((hashType & 0x1f) === Transaction.SIGHASH_NONE) {\n      txTmp.outs = [];\n      // ignore sequence numbers (except at inIndex)\n      txTmp.ins.forEach((input, i) => {\n        if (i === inIndex) return;\n        input.sequence = 0;\n      });\n      // SIGHASH_SINGLE: ignore all outputs, except at the same index?\n    } else if ((hashType & 0x1f) === Transaction.SIGHASH_SINGLE) {\n      // https://github.com/bitcoin/bitcoin/blob/master/src/test/sighash_tests.cpp#L60\n      if (inIndex >= this.outs.length) return ONE;\n      // truncate outputs after\n      txTmp.outs.length = inIndex + 1;\n      // \"blank\" outputs before\n      for (let i = 0; i < inIndex; i++) {\n        txTmp.outs[i] = BLANK_OUTPUT;\n      }\n      // ignore sequence numbers (except at inIndex)\n      txTmp.ins.forEach((input, y) => {\n        if (y === inIndex) return;\n        input.sequence = 0;\n      });\n    }\n    // SIGHASH_ANYONECANPAY: ignore inputs entirely?\n    if (hashType & Transaction.SIGHASH_ANYONECANPAY) {\n      txTmp.ins = [txTmp.ins[inIndex]];\n      txTmp.ins[0].script = ourScript;\n      // SIGHASH_ALL: only ignore input scripts\n    } else {\n      // \"blank\" others input scripts\n      txTmp.ins.forEach(input => {\n        input.script = EMPTY_SCRIPT;\n      });\n      txTmp.ins[inIndex].script = ourScript;\n    }\n    // serialize and hash\n    const buffer = Buffer.allocUnsafe(txTmp.byteLength(false) + 4);\n    buffer.writeInt32LE(hashType, buffer.length - 4);\n    txTmp.__toBuffer(buffer, 0, false);\n    return bcrypto.hash256(buffer);\n  }\n  hashForWitnessV0(inIndex, prevOutScript, value, hashType) {\n    typeforce(\n      types.tuple(types.UInt32, types.Buffer, types.Satoshi, types.UInt32),\n      arguments,\n    );\n    let tbuffer = Buffer.from([]);\n    let bufferWriter;\n    let hashOutputs = ZERO;\n    let hashPrevouts = ZERO;\n    let hashSequence = ZERO;\n    if (!(hashType & Transaction.SIGHASH_ANYONECANPAY)) {\n      tbuffer = Buffer.allocUnsafe(36 * this.ins.length);\n      bufferWriter = new bufferutils_1.BufferWriter(tbuffer, 0);\n      this.ins.forEach(txIn => {\n        bufferWriter.writeSlice(txIn.hash);\n        bufferWriter.writeUInt32(txIn.index);\n      });\n      hashPrevouts = bcrypto.hash256(tbuffer);\n    }\n    if (\n      !(hashType & Transaction.SIGHASH_ANYONECANPAY) &&\n      (hashType & 0x1f) !== Transaction.SIGHASH_SINGLE &&\n      (hashType & 0x1f) !== Transaction.SIGHASH_NONE\n    ) {\n      tbuffer = Buffer.allocUnsafe(4 * this.ins.length);\n      bufferWriter = new bufferutils_1.BufferWriter(tbuffer, 0);\n      this.ins.forEach(txIn => {\n        bufferWriter.writeUInt32(txIn.sequence);\n      });\n      hashSequence = bcrypto.hash256(tbuffer);\n    }\n    if (\n      (hashType & 0x1f) !== Transaction.SIGHASH_SINGLE &&\n      (hashType & 0x1f) !== Transaction.SIGHASH_NONE\n    ) {\n      const txOutsSize = this.outs.reduce((sum, output) => {\n        return sum + 8 + varSliceSize(output.script);\n      }, 0);\n      tbuffer = Buffer.allocUnsafe(txOutsSize);\n      bufferWriter = new bufferutils_1.BufferWriter(tbuffer, 0);\n      this.outs.forEach(out => {\n        bufferWriter.writeUInt64(out.value);\n        bufferWriter.writeVarSlice(out.script);\n      });\n      hashOutputs = bcrypto.hash256(tbuffer);\n    } else if (\n      (hashType & 0x1f) === Transaction.SIGHASH_SINGLE &&\n      inIndex < this.outs.length\n    ) {\n      const output = this.outs[inIndex];\n      tbuffer = Buffer.allocUnsafe(8 + varSliceSize(output.script));\n      bufferWriter = new bufferutils_1.BufferWriter(tbuffer, 0);\n      bufferWriter.writeUInt64(output.value);\n      bufferWriter.writeVarSlice(output.script);\n      hashOutputs = bcrypto.hash256(tbuffer);\n    }\n    tbuffer = Buffer.allocUnsafe(156 + varSliceSize(prevOutScript));\n    bufferWriter = new bufferutils_1.BufferWriter(tbuffer, 0);\n    const input = this.ins[inIndex];\n    bufferWriter.writeUInt32(this.version);\n    bufferWriter.writeSlice(hashPrevouts);\n    bufferWriter.writeSlice(hashSequence);\n    bufferWriter.writeSlice(input.hash);\n    bufferWriter.writeUInt32(input.index);\n    bufferWriter.writeVarSlice(prevOutScript);\n    bufferWriter.writeUInt64(value);\n    bufferWriter.writeUInt32(input.sequence);\n    bufferWriter.writeSlice(hashOutputs);\n    bufferWriter.writeUInt32(this.locktime);\n    bufferWriter.writeUInt32(hashType);\n    return bcrypto.hash256(tbuffer);\n  }\n  getHash(forWitness) {\n    // wtxid for coinbase is always 32 bytes of 0x00\n    if (forWitness && this.isCoinbase()) return Buffer.alloc(32, 0);\n    return bcrypto.hash256(this.__toBuffer(undefined, undefined, forWitness));\n  }\n  getId() {\n    // transaction hash's are displayed in reverse order\n    return bufferutils_1.reverseBuffer(this.getHash(false)).toString('hex');\n  }\n  toBuffer(buffer, initialOffset) {\n    return this.__toBuffer(buffer, initialOffset, true);\n  }\n  toHex() {\n    return this.toBuffer(undefined, undefined).toString('hex');\n  }\n  setInputScript(index, scriptSig) {\n    typeforce(types.tuple(types.Number, types.Buffer), arguments);\n    this.ins[index].script = scriptSig;\n  }\n  setWitness(index, witness) {\n    typeforce(types.tuple(types.Number, [types.Buffer]), arguments);\n    this.ins[index].witness = witness;\n  }\n  __toBuffer(buffer, initialOffset, _ALLOW_WITNESS = false) {\n    if (!buffer) buffer = Buffer.allocUnsafe(this.byteLength(_ALLOW_WITNESS));\n    const bufferWriter = new bufferutils_1.BufferWriter(\n      buffer,\n      initialOffset || 0,\n    );\n    bufferWriter.writeInt32(this.version);\n    const hasWitnesses = _ALLOW_WITNESS && this.hasWitnesses();\n    if (hasWitnesses) {\n      bufferWriter.writeUInt8(Transaction.ADVANCED_TRANSACTION_MARKER);\n      bufferWriter.writeUInt8(Transaction.ADVANCED_TRANSACTION_FLAG);\n    }\n    bufferWriter.writeVarInt(this.ins.length);\n    this.ins.forEach(txIn => {\n      bufferWriter.writeSlice(txIn.hash);\n      bufferWriter.writeUInt32(txIn.index);\n      bufferWriter.writeVarSlice(txIn.script);\n      bufferWriter.writeUInt32(txIn.sequence);\n    });\n    bufferWriter.writeVarInt(this.outs.length);\n    this.outs.forEach(txOut => {\n      if (isOutput(txOut)) {\n        bufferWriter.writeUInt64(txOut.value);\n      } else {\n        bufferWriter.writeSlice(txOut.valueBuffer);\n      }\n      bufferWriter.writeVarSlice(txOut.script);\n    });\n    if (hasWitnesses) {\n      this.ins.forEach(input => {\n        bufferWriter.writeVector(input.witness);\n      });\n    }\n    bufferWriter.writeUInt32(this.locktime);\n    // avoid slicing unless necessary\n    if (initialOffset !== undefined)\n      return buffer.slice(initialOffset, bufferWriter.offset);\n    return buffer;\n  }\n}\nTransaction.DEFAULT_SEQUENCE = 0xffffffff;\nTransaction.SIGHASH_ALL = 0x01;\nTransaction.SIGHASH_NONE = 0x02;\nTransaction.SIGHASH_SINGLE = 0x03;\nTransaction.SIGHASH_ANYONECANPAY = 0x80;\nTransaction.ADVANCED_TRANSACTION_MARKER = 0x00;\nTransaction.ADVANCED_TRANSACTION_FLAG = 0x01;\nexports.Transaction = Transaction;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\n// Number.MAX_SAFE_INTEGER\nconst MAX_SAFE_INTEGER = 9007199254740991;\nfunction checkUInt53(n) {\n  if (n < 0 || n > MAX_SAFE_INTEGER || n % 1 !== 0)\n    throw new RangeError('value out of range');\n}\nfunction encode(_number, buffer, offset) {\n  checkUInt53(_number);\n  if (!buffer) buffer = Buffer.allocUnsafe(encodingLength(_number));\n  if (!Buffer.isBuffer(buffer))\n    throw new TypeError('buffer must be a Buffer instance');\n  if (!offset) offset = 0;\n  // 8 bit\n  if (_number < 0xfd) {\n    buffer.writeUInt8(_number, offset);\n    Object.assign(encode, { bytes: 1 });\n    // 16 bit\n  } else if (_number <= 0xffff) {\n    buffer.writeUInt8(0xfd, offset);\n    buffer.writeUInt16LE(_number, offset + 1);\n    Object.assign(encode, { bytes: 3 });\n    // 32 bit\n  } else if (_number <= 0xffffffff) {\n    buffer.writeUInt8(0xfe, offset);\n    buffer.writeUInt32LE(_number, offset + 1);\n    Object.assign(encode, { bytes: 5 });\n    // 64 bit\n  } else {\n    buffer.writeUInt8(0xff, offset);\n    buffer.writeUInt32LE(_number >>> 0, offset + 1);\n    buffer.writeUInt32LE((_number / 0x100000000) | 0, offset + 5);\n    Object.assign(encode, { bytes: 9 });\n  }\n  return buffer;\n}\nexports.encode = encode;\nfunction decode(buffer, offset) {\n  if (!Buffer.isBuffer(buffer))\n    throw new TypeError('buffer must be a Buffer instance');\n  if (!offset) offset = 0;\n  const first = buffer.readUInt8(offset);\n  // 8 bit\n  if (first < 0xfd) {\n    Object.assign(decode, { bytes: 1 });\n    return first;\n    // 16 bit\n  } else if (first === 0xfd) {\n    Object.assign(decode, { bytes: 3 });\n    return buffer.readUInt16LE(offset + 1);\n    // 32 bit\n  } else if (first === 0xfe) {\n    Object.assign(decode, { bytes: 5 });\n    return buffer.readUInt32LE(offset + 1);\n    // 64 bit\n  } else {\n    Object.assign(decode, { bytes: 9 });\n    const lo = buffer.readUInt32LE(offset + 1);\n    const hi = buffer.readUInt32LE(offset + 5);\n    const _number = hi * 0x0100000000 + lo;\n    checkUInt53(_number);\n    return _number;\n  }\n}\nexports.decode = decode;\nfunction encodingLength(_number) {\n  checkUInt53(_number);\n  return _number < 0xfd\n    ? 1\n    : _number <= 0xffff\n    ? 3\n    : _number <= 0xffffffff\n    ? 5\n    : 9;\n}\nexports.encodingLength = encodingLength;\n","var BitByte = require('./8BitByte');\nvar RSBlock = require('./RSBlock');\nvar BitBuffer = require('./BitBuffer');\nvar util = require('./util');\nvar Polynomial = require('./Polynomial');\n\nfunction QRCode(typeNumber, errorCorrectLevel) {\n\tthis.typeNumber = typeNumber;\n\tthis.errorCorrectLevel = errorCorrectLevel;\n\tthis.modules = null;\n\tthis.moduleCount = 0;\n\tthis.dataCache = null;\n\tthis.dataList = [];\n}\n\n// for client side minification\nvar proto = QRCode.prototype;\n\nproto.addData = function(data) {\n\tvar newData = new BitByte(data);\n\tthis.dataList.push(newData);\n\tthis.dataCache = null;\n};\n\nproto.isDark = function(row, col) {\n\tif (row < 0 || this.moduleCount <= row || col < 0 || this.moduleCount <= col) {\n\t\tthrow new Error(row + \",\" + col);\n\t}\n\treturn this.modules[row][col];\n};\n\nproto.getModuleCount = function() {\n\treturn this.moduleCount;\n};\n\nproto.make = function() {\n\t// Calculate automatically typeNumber if provided is < 1\n\tif (this.typeNumber < 1 ){\n\t\tvar typeNumber = 1;\n\t\tfor (typeNumber = 1; typeNumber < 40; typeNumber++) {\n\t\t\tvar rsBlocks = RSBlock.getRSBlocks(typeNumber, this.errorCorrectLevel);\n\n\t\t\tvar buffer = new BitBuffer();\n\t\t\tvar totalDataCount = 0;\n\t\t\tfor (var i = 0; i < rsBlocks.length; i++) {\n\t\t\t\ttotalDataCount += rsBlocks[i].dataCount;\n\t\t\t}\n\n\t\t\tfor (var i = 0; i < this.dataList.length; i++) {\n\t\t\t\tvar data = this.dataList[i];\n\t\t\t\tbuffer.put(data.mode, 4);\n\t\t\t\tbuffer.put(data.getLength(), util.getLengthInBits(data.mode, typeNumber) );\n\t\t\t\tdata.write(buffer);\n\t\t\t}\n\t\t\tif (buffer.getLengthInBits() <= totalDataCount * 8)\n\t\t\t\tbreak;\n\t\t}\n\t\tthis.typeNumber = typeNumber;\n\t}\n\tthis.makeImpl(false, this.getBestMaskPattern() );\n};\n\nproto.makeImpl = function(test, maskPattern) {\n\t\n\tthis.moduleCount = this.typeNumber * 4 + 17;\n\tthis.modules = new Array(this.moduleCount);\n\t\n\tfor (var row = 0; row < this.moduleCount; row++) {\n\t\t\n\t\tthis.modules[row] = new Array(this.moduleCount);\n\t\t\n\t\tfor (var col = 0; col < this.moduleCount; col++) {\n\t\t\tthis.modules[row][col] = null;//(col + row) % 3;\n\t\t}\n\t}\n\n\tthis.setupPositionProbePattern(0, 0);\n\tthis.setupPositionProbePattern(this.moduleCount - 7, 0);\n\tthis.setupPositionProbePattern(0, this.moduleCount - 7);\n\tthis.setupPositionAdjustPattern();\n\tthis.setupTimingPattern();\n\tthis.setupTypeInfo(test, maskPattern);\n\t\n\tif (this.typeNumber >= 7) {\n\t\tthis.setupTypeNumber(test);\n\t}\n\n\tif (this.dataCache == null) {\n\t\tthis.dataCache = QRCode.createData(this.typeNumber, this.errorCorrectLevel, this.dataList);\n\t}\n\n\tthis.mapData(this.dataCache, maskPattern);\n};\n\nproto.setupPositionProbePattern = function(row, col)  {\n\t\n\tfor (var r = -1; r <= 7; r++) {\n\t\t\n\t\tif (row + r <= -1 || this.moduleCount <= row + r) continue;\n\t\t\n\t\tfor (var c = -1; c <= 7; c++) {\n\t\t\t\n\t\t\tif (col + c <= -1 || this.moduleCount <= col + c) continue;\n\t\t\t\n\t\t\tif ( (0 <= r && r <= 6 && (c == 0 || c == 6) )\n\t\t\t\t\t|| (0 <= c && c <= 6 && (r == 0 || r == 6) )\n\t\t\t\t\t|| (2 <= r && r <= 4 && 2 <= c && c <= 4) ) {\n\t\t\t\tthis.modules[row + r][col + c] = true;\n\t\t\t} else {\n\t\t\t\tthis.modules[row + r][col + c] = false;\n\t\t\t}\n\t\t}\t\t\n\t}\t\t\n};\n\nproto.getBestMaskPattern = function() {\n\n\tvar minLostPoint = 0;\n\tvar pattern = 0;\n\n\tfor (var i = 0; i < 8; i++) {\n\t\t\n\t\tthis.makeImpl(true, i);\n\n\t\tvar lostPoint = util.getLostPoint(this);\n\n\t\tif (i == 0 || minLostPoint >  lostPoint) {\n\t\t\tminLostPoint = lostPoint;\n\t\t\tpattern = i;\n\t\t}\n\t}\n\n\treturn pattern;\n};\n\nproto.createMovieClip = function(target_mc, instance_name, depth) {\n\n\tvar qr_mc = target_mc.createEmptyMovieClip(instance_name, depth);\n\tvar cs = 1;\n\n\tthis.make();\n\n\tfor (var row = 0; row < this.modules.length; row++) {\n\t\t\n\t\tvar y = row * cs;\n\t\t\n\t\tfor (var col = 0; col < this.modules[row].length; col++) {\n\n\t\t\tvar x = col * cs;\n\t\t\tvar dark = this.modules[row][col];\n\t\t\n\t\t\tif (dark) {\n\t\t\t\tqr_mc.beginFill(0, 100);\n\t\t\t\tqr_mc.moveTo(x, y);\n\t\t\t\tqr_mc.lineTo(x + cs, y);\n\t\t\t\tqr_mc.lineTo(x + cs, y + cs);\n\t\t\t\tqr_mc.lineTo(x, y + cs);\n\t\t\t\tqr_mc.endFill();\n\t\t\t}\n\t\t}\n\t}\n\t\n\treturn qr_mc;\n};\n\nproto.setupTimingPattern = function() {\n\t\n\tfor (var r = 8; r < this.moduleCount - 8; r++) {\n\t\tif (this.modules[r][6] != null) {\n\t\t\tcontinue;\n\t\t}\n\t\tthis.modules[r][6] = (r % 2 == 0);\n\t}\n\n\tfor (var c = 8; c < this.moduleCount - 8; c++) {\n\t\tif (this.modules[6][c] != null) {\n\t\t\tcontinue;\n\t\t}\n\t\tthis.modules[6][c] = (c % 2 == 0);\n\t}\n};\n\nproto.setupPositionAdjustPattern = function() {\n\n\tvar pos = util.getPatternPosition(this.typeNumber);\n\t\n\tfor (var i = 0; i < pos.length; i++) {\n\t\n\t\tfor (var j = 0; j < pos.length; j++) {\n\t\t\n\t\t\tvar row = pos[i];\n\t\t\tvar col = pos[j];\n\t\t\t\n\t\t\tif (this.modules[row][col] != null) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\t\n\t\t\tfor (var r = -2; r <= 2; r++) {\n\t\t\t\n\t\t\t\tfor (var c = -2; c <= 2; c++) {\n\t\t\t\t\n\t\t\t\t\tif (r == -2 || r == 2 || c == -2 || c == 2\n\t\t\t\t\t\t\t|| (r == 0 && c == 0) ) {\n\t\t\t\t\t\tthis.modules[row + r][col + c] = true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.modules[row + r][col + c] = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n};\n\nproto.setupTypeNumber = function(test) {\n\n\tvar bits = util.getBCHTypeNumber(this.typeNumber);\n\n\tfor (var i = 0; i < 18; i++) {\n\t\tvar mod = (!test && ( (bits >> i) & 1) == 1);\n\t\tthis.modules[Math.floor(i / 3)][i % 3 + this.moduleCount - 8 - 3] = mod;\n\t}\n\n\tfor (var i = 0; i < 18; i++) {\n\t\tvar mod = (!test && ( (bits >> i) & 1) == 1);\n\t\tthis.modules[i % 3 + this.moduleCount - 8 - 3][Math.floor(i / 3)] = mod;\n\t}\n};\n\nproto.setupTypeInfo = function(test, maskPattern) {\n\n\tvar data = (this.errorCorrectLevel << 3) | maskPattern;\n\tvar bits = util.getBCHTypeInfo(data);\n\n\t// vertical\t\t\n\tfor (var i = 0; i < 15; i++) {\n\n\t\tvar mod = (!test && ( (bits >> i) & 1) == 1);\n\n\t\tif (i < 6) {\n\t\t\tthis.modules[i][8] = mod;\n\t\t} else if (i < 8) {\n\t\t\tthis.modules[i + 1][8] = mod;\n\t\t} else {\n\t\t\tthis.modules[this.moduleCount - 15 + i][8] = mod;\n\t\t}\n\t}\n\n\t// horizontal\n\tfor (var i = 0; i < 15; i++) {\n\n\t\tvar mod = (!test && ( (bits >> i) & 1) == 1);\n\t\t\n\t\tif (i < 8) {\n\t\t\tthis.modules[8][this.moduleCount - i - 1] = mod;\n\t\t} else if (i < 9) {\n\t\t\tthis.modules[8][15 - i - 1 + 1] = mod;\n\t\t} else {\n\t\t\tthis.modules[8][15 - i - 1] = mod;\n\t\t}\n\t}\n\n\t// fixed module\n\tthis.modules[this.moduleCount - 8][8] = (!test);\n};\n\nproto.mapData = function(data, maskPattern) {\n\t\n\tvar inc = -1;\n\tvar row = this.moduleCount - 1;\n\tvar bitIndex = 7;\n\tvar byteIndex = 0;\n\t\n\tfor (var col = this.moduleCount - 1; col > 0; col -= 2) {\n\n\t\tif (col == 6) col--;\n\n\t\twhile (true) {\n\n\t\t\tfor (var c = 0; c < 2; c++) {\n\t\t\t\t\n\t\t\t\tif (this.modules[row][col - c] == null) {\n\t\t\t\t\t\n\t\t\t\t\tvar dark = false;\n\n\t\t\t\t\tif (byteIndex < data.length) {\n\t\t\t\t\t\tdark = ( ( (data[byteIndex] >>> bitIndex) & 1) == 1);\n\t\t\t\t\t}\n\n\t\t\t\t\tvar mask = util.getMask(maskPattern, row, col - c);\n\n\t\t\t\t\tif (mask) {\n\t\t\t\t\t\tdark = !dark;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tthis.modules[row][col - c] = dark;\n\t\t\t\t\tbitIndex--;\n\n\t\t\t\t\tif (bitIndex == -1) {\n\t\t\t\t\t\tbyteIndex++;\n\t\t\t\t\t\tbitIndex = 7;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\trow += inc;\n\n\t\t\tif (row < 0 || this.moduleCount <= row) {\n\t\t\t\trow -= inc;\n\t\t\t\tinc = -inc;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n};\n\nQRCode.PAD0 = 0xEC;\nQRCode.PAD1 = 0x11;\n\nQRCode.createData = function(typeNumber, errorCorrectLevel, dataList) {\n\t\n\tvar rsBlocks = RSBlock.getRSBlocks(typeNumber, errorCorrectLevel);\n\t\n\tvar buffer = new BitBuffer();\n\t\n\tfor (var i = 0; i < dataList.length; i++) {\n\t\tvar data = dataList[i];\n\t\tbuffer.put(data.mode, 4);\n\t\tbuffer.put(data.getLength(), util.getLengthInBits(data.mode, typeNumber) );\n\t\tdata.write(buffer);\n\t}\n\n\t// calc num max data.\n\tvar totalDataCount = 0;\n\tfor (var i = 0; i < rsBlocks.length; i++) {\n\t\ttotalDataCount += rsBlocks[i].dataCount;\n\t}\n\n\tif (buffer.getLengthInBits() > totalDataCount * 8) {\n\t\tthrow new Error(\"code length overflow. (\"\n\t\t\t+ buffer.getLengthInBits()\n\t\t\t+ \">\"\n\t\t\t+  totalDataCount * 8\n\t\t\t+ \")\");\n\t}\n\n\t// end code\n\tif (buffer.getLengthInBits() + 4 <= totalDataCount * 8) {\n\t\tbuffer.put(0, 4);\n\t}\n\n\t// padding\n\twhile (buffer.getLengthInBits() % 8 != 0) {\n\t\tbuffer.putBit(false);\n\t}\n\n\t// padding\n\twhile (true) {\n\t\t\n\t\tif (buffer.getLengthInBits() >= totalDataCount * 8) {\n\t\t\tbreak;\n\t\t}\n\t\tbuffer.put(QRCode.PAD0, 8);\n\t\t\n\t\tif (buffer.getLengthInBits() >= totalDataCount * 8) {\n\t\t\tbreak;\n\t\t}\n\t\tbuffer.put(QRCode.PAD1, 8);\n\t}\n\n\treturn QRCode.createBytes(buffer, rsBlocks);\n};\n\nQRCode.createBytes = function(buffer, rsBlocks) {\n\n\tvar offset = 0;\n\t\n\tvar maxDcCount = 0;\n\tvar maxEcCount = 0;\n\t\n\tvar dcdata = new Array(rsBlocks.length);\n\tvar ecdata = new Array(rsBlocks.length);\n\t\n\tfor (var r = 0; r < rsBlocks.length; r++) {\n\n\t\tvar dcCount = rsBlocks[r].dataCount;\n\t\tvar ecCount = rsBlocks[r].totalCount - dcCount;\n\n\t\tmaxDcCount = Math.max(maxDcCount, dcCount);\n\t\tmaxEcCount = Math.max(maxEcCount, ecCount);\n\t\t\n\t\tdcdata[r] = new Array(dcCount);\n\t\t\n\t\tfor (var i = 0; i < dcdata[r].length; i++) {\n\t\t\tdcdata[r][i] = 0xff & buffer.buffer[i + offset];\n\t\t}\n\t\toffset += dcCount;\n\t\t\n\t\tvar rsPoly = util.getErrorCorrectPolynomial(ecCount);\n\t\tvar rawPoly = new Polynomial(dcdata[r], rsPoly.getLength() - 1);\n\n\t\tvar modPoly = rawPoly.mod(rsPoly);\n\t\tecdata[r] = new Array(rsPoly.getLength() - 1);\n\t\tfor (var i = 0; i < ecdata[r].length; i++) {\n            var modIndex = i + modPoly.getLength() - ecdata[r].length;\n\t\t\tecdata[r][i] = (modIndex >= 0)? modPoly.get(modIndex) : 0;\n\t\t}\n\n\t}\n\t\n\tvar totalCodeCount = 0;\n\tfor (var i = 0; i < rsBlocks.length; i++) {\n\t\ttotalCodeCount += rsBlocks[i].totalCount;\n\t}\n\n\tvar data = new Array(totalCodeCount);\n\tvar index = 0;\n\n\tfor (var i = 0; i < maxDcCount; i++) {\n\t\tfor (var r = 0; r < rsBlocks.length; r++) {\n\t\t\tif (i < dcdata[r].length) {\n\t\t\t\tdata[index++] = dcdata[r][i];\n\t\t\t}\n\t\t}\n\t}\n\n\tfor (var i = 0; i < maxEcCount; i++) {\n\t\tfor (var r = 0; r < rsBlocks.length; r++) {\n\t\t\tif (i < ecdata[r].length) {\n\t\t\t\tdata[index++] = ecdata[r][i];\n\t\t\t}\n\t\t}\n\t}\n\n\treturn data;\n};\n\nmodule.exports = QRCode;\n\n","var mode = require('./mode');\n\nfunction QR8bitByte(data) {\n\tthis.mode = mode.MODE_8BIT_BYTE;\n\tthis.data = data;\n}\n\nQR8bitByte.prototype = {\n\n\tgetLength : function(buffer) {\n\t\treturn this.data.length;\n\t},\n\t\n\twrite : function(buffer) {\n\t\tfor (var i = 0; i < this.data.length; i++) {\n\t\t\t// not JIS ...\n\t\t\tbuffer.put(this.data.charCodeAt(i), 8);\n\t\t}\n\t}\n};\n\nmodule.exports = QR8bitByte;\n\n","// ErrorCorrectLevel\nvar ECL = require('./ErrorCorrectLevel');\n\nfunction QRRSBlock(totalCount, dataCount) {\n\tthis.totalCount = totalCount;\n\tthis.dataCount  = dataCount;\n}\n\nQRRSBlock.RS_BLOCK_TABLE = [\n\n\t// L\n\t// M\n\t// Q\n\t// H\n\n\t// 1\n\t[1, 26, 19],\n\t[1, 26, 16],\n\t[1, 26, 13],\n\t[1, 26, 9],\n\t\n\t// 2\n\t[1, 44, 34],\n\t[1, 44, 28],\n\t[1, 44, 22],\n\t[1, 44, 16],\n\n\t// 3\n\t[1, 70, 55],\n\t[1, 70, 44],\n\t[2, 35, 17],\n\t[2, 35, 13],\n\n\t// 4\t\t\n\t[1, 100, 80],\n\t[2, 50, 32],\n\t[2, 50, 24],\n\t[4, 25, 9],\n\t\n\t// 5\n\t[1, 134, 108],\n\t[2, 67, 43],\n\t[2, 33, 15, 2, 34, 16],\n\t[2, 33, 11, 2, 34, 12],\n\t\n\t// 6\n\t[2, 86, 68],\n\t[4, 43, 27],\n\t[4, 43, 19],\n\t[4, 43, 15],\n\t\n\t// 7\t\t\n\t[2, 98, 78],\n\t[4, 49, 31],\n\t[2, 32, 14, 4, 33, 15],\n\t[4, 39, 13, 1, 40, 14],\n\t\n\t// 8\n\t[2, 121, 97],\n\t[2, 60, 38, 2, 61, 39],\n\t[4, 40, 18, 2, 41, 19],\n\t[4, 40, 14, 2, 41, 15],\n\t\n\t// 9\n\t[2, 146, 116],\n\t[3, 58, 36, 2, 59, 37],\n\t[4, 36, 16, 4, 37, 17],\n\t[4, 36, 12, 4, 37, 13],\n\t\n\t// 10\t\t\n\t[2, 86, 68, 2, 87, 69],\n\t[4, 69, 43, 1, 70, 44],\n\t[6, 43, 19, 2, 44, 20],\n\t[6, 43, 15, 2, 44, 16],\n\n\t// 11\n\t[4, 101, 81],\n\t[1, 80, 50, 4, 81, 51],\n\t[4, 50, 22, 4, 51, 23],\n\t[3, 36, 12, 8, 37, 13],\n\n\t// 12\n\t[2, 116, 92, 2, 117, 93],\n\t[6, 58, 36, 2, 59, 37],\n\t[4, 46, 20, 6, 47, 21],\n\t[7, 42, 14, 4, 43, 15],\n\n\t// 13\n\t[4, 133, 107],\n\t[8, 59, 37, 1, 60, 38],\n\t[8, 44, 20, 4, 45, 21],\n\t[12, 33, 11, 4, 34, 12],\n\n\t// 14\n\t[3, 145, 115, 1, 146, 116],\n\t[4, 64, 40, 5, 65, 41],\n\t[11, 36, 16, 5, 37, 17],\n\t[11, 36, 12, 5, 37, 13],\n\n\t// 15\n\t[5, 109, 87, 1, 110, 88],\n\t[5, 65, 41, 5, 66, 42],\n\t[5, 54, 24, 7, 55, 25],\n\t[11, 36, 12],\n\n\t// 16\n\t[5, 122, 98, 1, 123, 99],\n\t[7, 73, 45, 3, 74, 46],\n\t[15, 43, 19, 2, 44, 20],\n\t[3, 45, 15, 13, 46, 16],\n\n\t// 17\n\t[1, 135, 107, 5, 136, 108],\n\t[10, 74, 46, 1, 75, 47],\n\t[1, 50, 22, 15, 51, 23],\n\t[2, 42, 14, 17, 43, 15],\n\n\t// 18\n\t[5, 150, 120, 1, 151, 121],\n\t[9, 69, 43, 4, 70, 44],\n\t[17, 50, 22, 1, 51, 23],\n\t[2, 42, 14, 19, 43, 15],\n\n\t// 19\n\t[3, 141, 113, 4, 142, 114],\n\t[3, 70, 44, 11, 71, 45],\n\t[17, 47, 21, 4, 48, 22],\n\t[9, 39, 13, 16, 40, 14],\n\n\t// 20\n\t[3, 135, 107, 5, 136, 108],\n\t[3, 67, 41, 13, 68, 42],\n\t[15, 54, 24, 5, 55, 25],\n\t[15, 43, 15, 10, 44, 16],\n\n\t// 21\n\t[4, 144, 116, 4, 145, 117],\n\t[17, 68, 42],\n\t[17, 50, 22, 6, 51, 23],\n\t[19, 46, 16, 6, 47, 17],\n\n\t// 22\n\t[2, 139, 111, 7, 140, 112],\n\t[17, 74, 46],\n\t[7, 54, 24, 16, 55, 25],\n\t[34, 37, 13],\n\n\t// 23\n\t[4, 151, 121, 5, 152, 122],\n\t[4, 75, 47, 14, 76, 48],\n\t[11, 54, 24, 14, 55, 25],\n\t[16, 45, 15, 14, 46, 16],\n\n\t// 24\n\t[6, 147, 117, 4, 148, 118],\n\t[6, 73, 45, 14, 74, 46],\n\t[11, 54, 24, 16, 55, 25],\n\t[30, 46, 16, 2, 47, 17],\n\n\t// 25\n\t[8, 132, 106, 4, 133, 107],\n\t[8, 75, 47, 13, 76, 48],\n\t[7, 54, 24, 22, 55, 25],\n\t[22, 45, 15, 13, 46, 16],\n\n\t// 26\n\t[10, 142, 114, 2, 143, 115],\n\t[19, 74, 46, 4, 75, 47],\n\t[28, 50, 22, 6, 51, 23],\n\t[33, 46, 16, 4, 47, 17],\n\n\t// 27\n\t[8, 152, 122, 4, 153, 123],\n\t[22, 73, 45, 3, 74, 46],\n\t[8, 53, 23, 26, 54, 24],\n\t[12, 45, 15, 28, 46, 16],\n\n\t// 28\n\t[3, 147, 117, 10, 148, 118],\n\t[3, 73, 45, 23, 74, 46],\n\t[4, 54, 24, 31, 55, 25],\n\t[11, 45, 15, 31, 46, 16],\n\n\t// 29\n\t[7, 146, 116, 7, 147, 117],\n\t[21, 73, 45, 7, 74, 46],\n\t[1, 53, 23, 37, 54, 24],\n\t[19, 45, 15, 26, 46, 16],\n\n\t// 30\n\t[5, 145, 115, 10, 146, 116],\n\t[19, 75, 47, 10, 76, 48],\n\t[15, 54, 24, 25, 55, 25],\n\t[23, 45, 15, 25, 46, 16],\n\n\t// 31\n\t[13, 145, 115, 3, 146, 116],\n\t[2, 74, 46, 29, 75, 47],\n\t[42, 54, 24, 1, 55, 25],\n\t[23, 45, 15, 28, 46, 16],\n\n\t// 32\n\t[17, 145, 115],\n\t[10, 74, 46, 23, 75, 47],\n\t[10, 54, 24, 35, 55, 25],\n\t[19, 45, 15, 35, 46, 16],\n\n\t// 33\n\t[17, 145, 115, 1, 146, 116],\n\t[14, 74, 46, 21, 75, 47],\n\t[29, 54, 24, 19, 55, 25],\n\t[11, 45, 15, 46, 46, 16],\n\n\t// 34\n\t[13, 145, 115, 6, 146, 116],\n\t[14, 74, 46, 23, 75, 47],\n\t[44, 54, 24, 7, 55, 25],\n\t[59, 46, 16, 1, 47, 17],\n\n\t// 35\n\t[12, 151, 121, 7, 152, 122],\n\t[12, 75, 47, 26, 76, 48],\n\t[39, 54, 24, 14, 55, 25],\n\t[22, 45, 15, 41, 46, 16],\n\n\t// 36\n\t[6, 151, 121, 14, 152, 122],\n\t[6, 75, 47, 34, 76, 48],\n\t[46, 54, 24, 10, 55, 25],\n\t[2, 45, 15, 64, 46, 16],\n\n\t// 37\n\t[17, 152, 122, 4, 153, 123],\n\t[29, 74, 46, 14, 75, 47],\n\t[49, 54, 24, 10, 55, 25],\n\t[24, 45, 15, 46, 46, 16],\n\n\t// 38\n\t[4, 152, 122, 18, 153, 123],\n\t[13, 74, 46, 32, 75, 47],\n\t[48, 54, 24, 14, 55, 25],\n\t[42, 45, 15, 32, 46, 16],\n\n\t// 39\n\t[20, 147, 117, 4, 148, 118],\n\t[40, 75, 47, 7, 76, 48],\n\t[43, 54, 24, 22, 55, 25],\n\t[10, 45, 15, 67, 46, 16],\n\n\t// 40\n\t[19, 148, 118, 6, 149, 119],\n\t[18, 75, 47, 31, 76, 48],\n\t[34, 54, 24, 34, 55, 25],\n\t[20, 45, 15, 61, 46, 16]\n];\n\nQRRSBlock.getRSBlocks = function(typeNumber, errorCorrectLevel) {\n\t\n\tvar rsBlock = QRRSBlock.getRsBlockTable(typeNumber, errorCorrectLevel);\n\t\n\tif (rsBlock == undefined) {\n\t\tthrow new Error(\"bad rs block @ typeNumber:\" + typeNumber + \"/errorCorrectLevel:\" + errorCorrectLevel);\n\t}\n\n\tvar length = rsBlock.length / 3;\n\t\n\tvar list = new Array();\n\t\n\tfor (var i = 0; i < length; i++) {\n\n\t\tvar count = rsBlock[i * 3 + 0];\n\t\tvar totalCount = rsBlock[i * 3 + 1];\n\t\tvar dataCount  = rsBlock[i * 3 + 2];\n\n\t\tfor (var j = 0; j < count; j++) {\n\t\t\tlist.push(new QRRSBlock(totalCount, dataCount) );\t\n\t\t}\n\t}\n\t\n\treturn list;\n}\n\nQRRSBlock.getRsBlockTable = function(typeNumber, errorCorrectLevel) {\n\n\tswitch(errorCorrectLevel) {\n\tcase ECL.L :\n\t\treturn QRRSBlock.RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 0];\n\tcase ECL.M :\n\t\treturn QRRSBlock.RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 1];\n\tcase ECL.Q :\n\t\treturn QRRSBlock.RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 2];\n\tcase ECL.H :\n\t\treturn QRRSBlock.RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 3];\n\tdefault :\n\t\treturn undefined;\n\t}\n}\n\nmodule.exports = QRRSBlock;\n","function QRBitBuffer() {\n\tthis.buffer = new Array();\n\tthis.length = 0;\n}\n\nQRBitBuffer.prototype = {\n\n\tget : function(index) {\n\t\tvar bufIndex = Math.floor(index / 8);\n\t\treturn ( (this.buffer[bufIndex] >>> (7 - index % 8) ) & 1) == 1;\n\t},\n\t\n\tput : function(num, length) {\n\t\tfor (var i = 0; i < length; i++) {\n\t\t\tthis.putBit( ( (num >>> (length - i - 1) ) & 1) == 1);\n\t\t}\n\t},\n\t\n\tgetLengthInBits : function() {\n\t\treturn this.length;\n\t},\n\t\n\tputBit : function(bit) {\n\t\n\t\tvar bufIndex = Math.floor(this.length / 8);\n\t\tif (this.buffer.length <= bufIndex) {\n\t\t\tthis.buffer.push(0);\n\t\t}\n\t\n\t\tif (bit) {\n\t\t\tthis.buffer[bufIndex] |= (0x80 >>> (this.length % 8) );\n\t\t}\n\t\n\t\tthis.length++;\n\t}\n};\n\nmodule.exports = QRBitBuffer;\n","var Mode = require('./mode');\nvar Polynomial = require('./Polynomial');\nvar math = require('./math');\n\nvar QRMaskPattern = {\n\tPATTERN000 : 0,\n\tPATTERN001 : 1,\n\tPATTERN010 : 2,\n\tPATTERN011 : 3,\n\tPATTERN100 : 4,\n\tPATTERN101 : 5,\n\tPATTERN110 : 6,\n\tPATTERN111 : 7\n};\n\nvar QRUtil = {\n\n    PATTERN_POSITION_TABLE : [\n\t    [],\n\t    [6, 18],\n\t    [6, 22],\n\t    [6, 26],\n\t    [6, 30],\n\t    [6, 34],\n\t    [6, 22, 38],\n\t    [6, 24, 42],\n\t    [6, 26, 46],\n\t    [6, 28, 50],\n\t    [6, 30, 54],\t\t\n\t    [6, 32, 58],\n\t    [6, 34, 62],\n\t    [6, 26, 46, 66],\n\t    [6, 26, 48, 70],\n\t    [6, 26, 50, 74],\n\t    [6, 30, 54, 78],\n\t    [6, 30, 56, 82],\n\t    [6, 30, 58, 86],\n\t    [6, 34, 62, 90],\n\t    [6, 28, 50, 72, 94],\n\t    [6, 26, 50, 74, 98],\n\t    [6, 30, 54, 78, 102],\n\t    [6, 28, 54, 80, 106],\n\t    [6, 32, 58, 84, 110],\n\t    [6, 30, 58, 86, 114],\n\t    [6, 34, 62, 90, 118],\n\t    [6, 26, 50, 74, 98, 122],\n\t    [6, 30, 54, 78, 102, 126],\n\t    [6, 26, 52, 78, 104, 130],\n\t    [6, 30, 56, 82, 108, 134],\n\t    [6, 34, 60, 86, 112, 138],\n\t    [6, 30, 58, 86, 114, 142],\n\t    [6, 34, 62, 90, 118, 146],\n\t    [6, 30, 54, 78, 102, 126, 150],\n\t    [6, 24, 50, 76, 102, 128, 154],\n\t    [6, 28, 54, 80, 106, 132, 158],\n\t    [6, 32, 58, 84, 110, 136, 162],\n\t    [6, 26, 54, 82, 110, 138, 166],\n\t    [6, 30, 58, 86, 114, 142, 170]\n    ],\n\n    G15 : (1 << 10) | (1 << 8) | (1 << 5) | (1 << 4) | (1 << 2) | (1 << 1) | (1 << 0),\n    G18 : (1 << 12) | (1 << 11) | (1 << 10) | (1 << 9) | (1 << 8) | (1 << 5) | (1 << 2) | (1 << 0),\n    G15_MASK : (1 << 14) | (1 << 12) | (1 << 10)\t| (1 << 4) | (1 << 1),\n\n    getBCHTypeInfo : function(data) {\n\t    var d = data << 10;\n\t    while (QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G15) >= 0) {\n\t\t    d ^= (QRUtil.G15 << (QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G15) ) ); \t\n\t    }\n\t    return ( (data << 10) | d) ^ QRUtil.G15_MASK;\n    },\n\n    getBCHTypeNumber : function(data) {\n\t    var d = data << 12;\n\t    while (QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G18) >= 0) {\n\t\t    d ^= (QRUtil.G18 << (QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G18) ) ); \t\n\t    }\n\t    return (data << 12) | d;\n    },\n\n    getBCHDigit : function(data) {\n\n\t    var digit = 0;\n\n\t    while (data != 0) {\n\t\t    digit++;\n\t\t    data >>>= 1;\n\t    }\n\n\t    return digit;\n    },\n\n    getPatternPosition : function(typeNumber) {\n\t    return QRUtil.PATTERN_POSITION_TABLE[typeNumber - 1];\n    },\n\n    getMask : function(maskPattern, i, j) {\n\t    \n\t    switch (maskPattern) {\n\t\t    \n\t    case QRMaskPattern.PATTERN000 : return (i + j) % 2 == 0;\n\t    case QRMaskPattern.PATTERN001 : return i % 2 == 0;\n\t    case QRMaskPattern.PATTERN010 : return j % 3 == 0;\n\t    case QRMaskPattern.PATTERN011 : return (i + j) % 3 == 0;\n\t    case QRMaskPattern.PATTERN100 : return (Math.floor(i / 2) + Math.floor(j / 3) ) % 2 == 0;\n\t    case QRMaskPattern.PATTERN101 : return (i * j) % 2 + (i * j) % 3 == 0;\n\t    case QRMaskPattern.PATTERN110 : return ( (i * j) % 2 + (i * j) % 3) % 2 == 0;\n\t    case QRMaskPattern.PATTERN111 : return ( (i * j) % 3 + (i + j) % 2) % 2 == 0;\n\n\t    default :\n\t\t    throw new Error(\"bad maskPattern:\" + maskPattern);\n\t    }\n    },\n\n    getErrorCorrectPolynomial : function(errorCorrectLength) {\n\n\t    var a = new Polynomial([1], 0);\n\n\t    for (var i = 0; i < errorCorrectLength; i++) {\n\t\t    a = a.multiply(new Polynomial([1, math.gexp(i)], 0) );\n\t    }\n\n\t    return a;\n    },\n\n    getLengthInBits : function(mode, type) {\n\n\t    if (1 <= type && type < 10) {\n\n\t\t    // 1 - 9\n\n\t\t    switch(mode) {\n\t\t    case Mode.MODE_NUMBER \t: return 10;\n\t\t    case Mode.MODE_ALPHA_NUM \t: return 9;\n\t\t    case Mode.MODE_8BIT_BYTE\t: return 8;\n\t\t    case Mode.MODE_KANJI  \t: return 8;\n\t\t    default :\n\t\t\t    throw new Error(\"mode:\" + mode);\n\t\t    }\n\n\t    } else if (type < 27) {\n\n\t\t    // 10 - 26\n\n\t\t    switch(mode) {\n\t\t    case Mode.MODE_NUMBER \t: return 12;\n\t\t    case Mode.MODE_ALPHA_NUM \t: return 11;\n\t\t    case Mode.MODE_8BIT_BYTE\t: return 16;\n\t\t    case Mode.MODE_KANJI  \t: return 10;\n\t\t    default :\n\t\t\t    throw new Error(\"mode:\" + mode);\n\t\t    }\n\n\t    } else if (type < 41) {\n\n\t\t    // 27 - 40\n\n\t\t    switch(mode) {\n\t\t    case Mode.MODE_NUMBER \t: return 14;\n\t\t    case Mode.MODE_ALPHA_NUM\t: return 13;\n\t\t    case Mode.MODE_8BIT_BYTE\t: return 16;\n\t\t    case Mode.MODE_KANJI  \t: return 12;\n\t\t    default :\n\t\t\t    throw new Error(\"mode:\" + mode);\n\t\t    }\n\n\t    } else {\n\t\t    throw new Error(\"type:\" + type);\n\t    }\n    },\n\n    getLostPoint : function(qrCode) {\n\t    \n\t    var moduleCount = qrCode.getModuleCount();\n\t    \n\t    var lostPoint = 0;\n\t    \n\t    // LEVEL1\n\t    \n\t    for (var row = 0; row < moduleCount; row++) {\n\n\t\t    for (var col = 0; col < moduleCount; col++) {\n\n\t\t\t    var sameCount = 0;\n\t\t\t    var dark = qrCode.isDark(row, col);\n\n\t\t\t\tfor (var r = -1; r <= 1; r++) {\n\n\t\t\t\t    if (row + r < 0 || moduleCount <= row + r) {\n\t\t\t\t\t    continue;\n\t\t\t\t    }\n\n\t\t\t\t    for (var c = -1; c <= 1; c++) {\n\n\t\t\t\t\t    if (col + c < 0 || moduleCount <= col + c) {\n\t\t\t\t\t\t    continue;\n\t\t\t\t\t    }\n\n\t\t\t\t\t    if (r == 0 && c == 0) {\n\t\t\t\t\t\t    continue;\n\t\t\t\t\t    }\n\n\t\t\t\t\t    if (dark == qrCode.isDark(row + r, col + c) ) {\n\t\t\t\t\t\t    sameCount++;\n\t\t\t\t\t    }\n\t\t\t\t    }\n\t\t\t    }\n\n\t\t\t    if (sameCount > 5) {\n\t\t\t\t    lostPoint += (3 + sameCount - 5);\n\t\t\t    }\n\t\t    }\n\t    }\n\n\t    // LEVEL2\n\n\t    for (var row = 0; row < moduleCount - 1; row++) {\n\t\t    for (var col = 0; col < moduleCount - 1; col++) {\n\t\t\t    var count = 0;\n\t\t\t    if (qrCode.isDark(row,     col    ) ) count++;\n\t\t\t    if (qrCode.isDark(row + 1, col    ) ) count++;\n\t\t\t    if (qrCode.isDark(row,     col + 1) ) count++;\n\t\t\t    if (qrCode.isDark(row + 1, col + 1) ) count++;\n\t\t\t    if (count == 0 || count == 4) {\n\t\t\t\t    lostPoint += 3;\n\t\t\t    }\n\t\t    }\n\t    }\n\n\t    // LEVEL3\n\n\t    for (var row = 0; row < moduleCount; row++) {\n\t\t    for (var col = 0; col < moduleCount - 6; col++) {\n\t\t\t    if (qrCode.isDark(row, col)\n\t\t\t\t\t    && !qrCode.isDark(row, col + 1)\n\t\t\t\t\t    &&  qrCode.isDark(row, col + 2)\n\t\t\t\t\t    &&  qrCode.isDark(row, col + 3)\n\t\t\t\t\t    &&  qrCode.isDark(row, col + 4)\n\t\t\t\t\t    && !qrCode.isDark(row, col + 5)\n\t\t\t\t\t    &&  qrCode.isDark(row, col + 6) ) {\n\t\t\t\t    lostPoint += 40;\n\t\t\t    }\n\t\t    }\n\t    }\n\n\t    for (var col = 0; col < moduleCount; col++) {\n\t\t    for (var row = 0; row < moduleCount - 6; row++) {\n\t\t\t    if (qrCode.isDark(row, col)\n\t\t\t\t\t    && !qrCode.isDark(row + 1, col)\n\t\t\t\t\t    &&  qrCode.isDark(row + 2, col)\n\t\t\t\t\t    &&  qrCode.isDark(row + 3, col)\n\t\t\t\t\t    &&  qrCode.isDark(row + 4, col)\n\t\t\t\t\t    && !qrCode.isDark(row + 5, col)\n\t\t\t\t\t    &&  qrCode.isDark(row + 6, col) ) {\n\t\t\t\t    lostPoint += 40;\n\t\t\t    }\n\t\t    }\n\t    }\n\n\t    // LEVEL4\n\t    \n\t    var darkCount = 0;\n\n\t    for (var col = 0; col < moduleCount; col++) {\n\t\t    for (var row = 0; row < moduleCount; row++) {\n\t\t\t    if (qrCode.isDark(row, col) ) {\n\t\t\t\t    darkCount++;\n\t\t\t    }\n\t\t    }\n\t    }\n\t    \n\t    var ratio = Math.abs(100 * darkCount / moduleCount / moduleCount - 50) / 5;\n\t    lostPoint += ratio * 10;\n\n\t    return lostPoint;\t\t\n    }\n};\n\nmodule.exports = QRUtil;\n","var types = {\n  Array: function (value) { return value !== null && value !== undefined && value.constructor === Array },\n  Boolean: function (value) { return typeof value === 'boolean' },\n  Function: function (value) { return typeof value === 'function' },\n  Nil: function (value) { return value === undefined || value === null },\n  Number: function (value) { return typeof value === 'number' },\n  Object: function (value) { return typeof value === 'object' },\n  String: function (value) { return typeof value === 'string' },\n  '': function () { return true }\n}\n\n// TODO: deprecate\ntypes.Null = types.Nil\n\nfor (var typeName in types) {\n  types[typeName].toJSON = function (t) {\n    return t\n  }.bind(null, typeName)\n}\n\nmodule.exports = types\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst networks = require('./networks');\nconst payments = require('./payments');\nconst bscript = require('./script');\nconst types = require('./types');\nconst bech32 = require('bech32');\nconst bs58check = require('bs58check');\nconst typeforce = require('typeforce');\nfunction fromBase58Check(address) {\n  const payload = bs58check.decode(address);\n  // TODO: 4.0.0, move to \"toOutputScript\"\n  if (payload.length < 21) throw new TypeError(address + ' is too short');\n  if (payload.length > 21) throw new TypeError(address + ' is too long');\n  const version = payload.readUInt8(0);\n  const hash = payload.slice(1);\n  return { version, hash };\n}\nexports.fromBase58Check = fromBase58Check;\nfunction fromBech32(address) {\n  const result = bech32.decode(address);\n  const data = bech32.fromWords(result.words.slice(1));\n  return {\n    version: result.words[0],\n    prefix: result.prefix,\n    data: Buffer.from(data),\n  };\n}\nexports.fromBech32 = fromBech32;\nfunction toBase58Check(hash, version) {\n  typeforce(types.tuple(types.Hash160bit, types.UInt8), arguments);\n  const payload = Buffer.allocUnsafe(21);\n  payload.writeUInt8(version, 0);\n  hash.copy(payload, 1);\n  return bs58check.encode(payload);\n}\nexports.toBase58Check = toBase58Check;\nfunction toBech32(data, version, prefix) {\n  const words = bech32.toWords(data);\n  words.unshift(version);\n  return bech32.encode(prefix, words);\n}\nexports.toBech32 = toBech32;\nfunction fromOutputScript(output, network) {\n  // TODO: Network\n  network = network || networks.bitcoin;\n  try {\n    return payments.p2pkh({ output, network }).address;\n  } catch (e) {}\n  try {\n    return payments.p2sh({ output, network }).address;\n  } catch (e) {}\n  try {\n    return payments.p2wpkh({ output, network }).address;\n  } catch (e) {}\n  try {\n    return payments.p2wsh({ output, network }).address;\n  } catch (e) {}\n  throw new Error(bscript.toASM(output) + ' has no matching Address');\n}\nexports.fromOutputScript = fromOutputScript;\nfunction toOutputScript(address, network) {\n  network = network || networks.bitcoin;\n  let decodeBase58;\n  let decodeBech32;\n  try {\n    decodeBase58 = fromBase58Check(address);\n  } catch (e) {}\n  if (decodeBase58) {\n    if (decodeBase58.version === network.pubKeyHash)\n      return payments.p2pkh({ hash: decodeBase58.hash }).output;\n    if (decodeBase58.version === network.scriptHash)\n      return payments.p2sh({ hash: decodeBase58.hash }).output;\n  } else {\n    try {\n      decodeBech32 = fromBech32(address);\n    } catch (e) {}\n    if (decodeBech32) {\n      if (decodeBech32.prefix !== network.bech32)\n        throw new Error(address + ' has an invalid prefix');\n      if (decodeBech32.version === 0) {\n        if (decodeBech32.data.length === 20)\n          return payments.p2wpkh({ hash: decodeBech32.data }).output;\n        if (decodeBech32.data.length === 32)\n          return payments.p2wsh({ hash: decodeBech32.data }).output;\n      }\n    }\n  }\n  throw new Error(address + ' has no matching Script');\n}\nexports.toOutputScript = toOutputScript;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst NETWORKS = require('./networks');\nconst types = require('./types');\nconst ecc = require('tiny-secp256k1');\nconst randomBytes = require('randombytes');\nconst typeforce = require('typeforce');\nconst wif = require('wif');\nconst isOptions = typeforce.maybe(\n  typeforce.compile({\n    compressed: types.maybe(types.Boolean),\n    network: types.maybe(types.Network),\n  }),\n);\nclass ECPair {\n  constructor(__D, __Q, options) {\n    this.__D = __D;\n    this.__Q = __Q;\n    this.lowR = false;\n    if (options === undefined) options = {};\n    this.compressed =\n      options.compressed === undefined ? true : options.compressed;\n    this.network = options.network || NETWORKS.bitcoin;\n    if (__Q !== undefined) this.__Q = ecc.pointCompress(__Q, this.compressed);\n  }\n  get privateKey() {\n    return this.__D;\n  }\n  get publicKey() {\n    if (!this.__Q) this.__Q = ecc.pointFromScalar(this.__D, this.compressed);\n    return this.__Q;\n  }\n  toWIF() {\n    if (!this.__D) throw new Error('Missing private key');\n    return wif.encode(this.network.wif, this.__D, this.compressed);\n  }\n  sign(hash, lowR) {\n    if (!this.__D) throw new Error('Missing private key');\n    if (lowR === undefined) lowR = this.lowR;\n    if (lowR === false) {\n      return ecc.sign(hash, this.__D);\n    } else {\n      let sig = ecc.sign(hash, this.__D);\n      const extraData = Buffer.alloc(32, 0);\n      let counter = 0;\n      // if first try is lowR, skip the loop\n      // for second try and on, add extra entropy counting up\n      while (sig[0] > 0x7f) {\n        counter++;\n        extraData.writeUIntLE(counter, 0, 6);\n        sig = ecc.signWithEntropy(hash, this.__D, extraData);\n      }\n      return sig;\n    }\n  }\n  verify(hash, signature) {\n    return ecc.verify(hash, this.publicKey, signature);\n  }\n}\nfunction fromPrivateKey(buffer, options) {\n  typeforce(types.Buffer256bit, buffer);\n  if (!ecc.isPrivate(buffer))\n    throw new TypeError('Private key not in range [1, n)');\n  typeforce(isOptions, options);\n  return new ECPair(buffer, undefined, options);\n}\nexports.fromPrivateKey = fromPrivateKey;\nfunction fromPublicKey(buffer, options) {\n  typeforce(ecc.isPoint, buffer);\n  typeforce(isOptions, options);\n  return new ECPair(undefined, buffer, options);\n}\nexports.fromPublicKey = fromPublicKey;\nfunction fromWIF(wifString, network) {\n  const decoded = wif.decode(wifString);\n  const version = decoded.version;\n  // list of networks?\n  if (types.Array(network)) {\n    network = network\n      .filter(x => {\n        return version === x.wif;\n      })\n      .pop();\n    if (!network) throw new Error('Unknown network version');\n    // otherwise, assume a network object (or default to bitcoin)\n  } else {\n    network = network || NETWORKS.bitcoin;\n    if (version !== network.wif) throw new Error('Invalid network version');\n  }\n  return fromPrivateKey(decoded.privateKey, {\n    compressed: decoded.compressed,\n    network: network,\n  });\n}\nexports.fromWIF = fromWIF;\nfunction makeRandom(options) {\n  typeforce(isOptions, options);\n  if (options === undefined) options = {};\n  const rng = options.rng || randomBytes;\n  let d;\n  do {\n    d = rng(32);\n    typeforce(types.Buffer256bit, d);\n  } while (!ecc.isPrivate(d));\n  return fromPrivateKey(d, options);\n}\nexports.makeRandom = makeRandom;\n","'use strict'\nvar Buffer = require('safe-buffer').Buffer\n\n// Number.MAX_SAFE_INTEGER\nvar MAX_SAFE_INTEGER = 9007199254740991\n\nfunction checkUInt53 (n) {\n  if (n < 0 || n > MAX_SAFE_INTEGER || n % 1 !== 0) throw new RangeError('value out of range')\n}\n\nfunction encode (number, buffer, offset) {\n  checkUInt53(number)\n\n  if (!buffer) buffer = Buffer.allocUnsafe(encodingLength(number))\n  if (!Buffer.isBuffer(buffer)) throw new TypeError('buffer must be a Buffer instance')\n  if (!offset) offset = 0\n\n  // 8 bit\n  if (number < 0xfd) {\n    buffer.writeUInt8(number, offset)\n    encode.bytes = 1\n\n  // 16 bit\n  } else if (number <= 0xffff) {\n    buffer.writeUInt8(0xfd, offset)\n    buffer.writeUInt16LE(number, offset + 1)\n    encode.bytes = 3\n\n  // 32 bit\n  } else if (number <= 0xffffffff) {\n    buffer.writeUInt8(0xfe, offset)\n    buffer.writeUInt32LE(number, offset + 1)\n    encode.bytes = 5\n\n  // 64 bit\n  } else {\n    buffer.writeUInt8(0xff, offset)\n    buffer.writeUInt32LE(number >>> 0, offset + 1)\n    buffer.writeUInt32LE((number / 0x100000000) | 0, offset + 5)\n    encode.bytes = 9\n  }\n\n  return buffer\n}\n\nfunction decode (buffer, offset) {\n  if (!Buffer.isBuffer(buffer)) throw new TypeError('buffer must be a Buffer instance')\n  if (!offset) offset = 0\n\n  var first = buffer.readUInt8(offset)\n\n  // 8 bit\n  if (first < 0xfd) {\n    decode.bytes = 1\n    return first\n\n  // 16 bit\n  } else if (first === 0xfd) {\n    decode.bytes = 3\n    return buffer.readUInt16LE(offset + 1)\n\n  // 32 bit\n  } else if (first === 0xfe) {\n    decode.bytes = 5\n    return buffer.readUInt32LE(offset + 1)\n\n  // 64 bit\n  } else {\n    decode.bytes = 9\n    var lo = buffer.readUInt32LE(offset + 1)\n    var hi = buffer.readUInt32LE(offset + 5)\n    var number = hi * 0x0100000000 + lo\n    checkUInt53(number)\n\n    return number\n  }\n}\n\nfunction encodingLength (number) {\n  checkUInt53(number)\n\n  return (\n    number < 0xfd ? 1\n      : number <= 0xffff ? 3\n        : number <= 0xffffffff ? 5\n          : 9\n  )\n}\n\nmodule.exports = { encode: encode, decode: decode, encodingLength: encodingLength }\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst typeFields_1 = require('../typeFields');\nconst globalXpub = require('./global/globalXpub');\nconst unsignedTx = require('./global/unsignedTx');\nconst finalScriptSig = require('./input/finalScriptSig');\nconst finalScriptWitness = require('./input/finalScriptWitness');\nconst nonWitnessUtxo = require('./input/nonWitnessUtxo');\nconst partialSig = require('./input/partialSig');\nconst porCommitment = require('./input/porCommitment');\nconst sighashType = require('./input/sighashType');\nconst witnessUtxo = require('./input/witnessUtxo');\nconst bip32Derivation = require('./shared/bip32Derivation');\nconst checkPubkey = require('./shared/checkPubkey');\nconst redeemScript = require('./shared/redeemScript');\nconst witnessScript = require('./shared/witnessScript');\nconst globals = {\n  unsignedTx,\n  globalXpub,\n  // pass an Array of key bytes that require pubkey beside the key\n  checkPubkey: checkPubkey.makeChecker([]),\n};\nexports.globals = globals;\nconst inputs = {\n  nonWitnessUtxo,\n  partialSig,\n  sighashType,\n  finalScriptSig,\n  finalScriptWitness,\n  porCommitment,\n  witnessUtxo,\n  bip32Derivation: bip32Derivation.makeConverter(\n    typeFields_1.InputTypes.BIP32_DERIVATION,\n  ),\n  redeemScript: redeemScript.makeConverter(\n    typeFields_1.InputTypes.REDEEM_SCRIPT,\n  ),\n  witnessScript: witnessScript.makeConverter(\n    typeFields_1.InputTypes.WITNESS_SCRIPT,\n  ),\n  checkPubkey: checkPubkey.makeChecker([\n    typeFields_1.InputTypes.PARTIAL_SIG,\n    typeFields_1.InputTypes.BIP32_DERIVATION,\n  ]),\n};\nexports.inputs = inputs;\nconst outputs = {\n  bip32Derivation: bip32Derivation.makeConverter(\n    typeFields_1.OutputTypes.BIP32_DERIVATION,\n  ),\n  redeemScript: redeemScript.makeConverter(\n    typeFields_1.OutputTypes.REDEEM_SCRIPT,\n  ),\n  witnessScript: witnessScript.makeConverter(\n    typeFields_1.OutputTypes.WITNESS_SCRIPT,\n  ),\n  checkPubkey: checkPubkey.makeChecker([\n    typeFields_1.OutputTypes.BIP32_DERIVATION,\n  ]),\n};\nexports.outputs = outputs;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst varuint = require('./varint');\nexports.range = n => [...Array(n).keys()];\nfunction reverseBuffer(buffer) {\n  if (buffer.length < 1) return buffer;\n  let j = buffer.length - 1;\n  let tmp = 0;\n  for (let i = 0; i < buffer.length / 2; i++) {\n    tmp = buffer[i];\n    buffer[i] = buffer[j];\n    buffer[j] = tmp;\n    j--;\n  }\n  return buffer;\n}\nexports.reverseBuffer = reverseBuffer;\nfunction keyValsToBuffer(keyVals) {\n  const buffers = keyVals.map(keyValToBuffer);\n  buffers.push(Buffer.from([0]));\n  return Buffer.concat(buffers);\n}\nexports.keyValsToBuffer = keyValsToBuffer;\nfunction keyValToBuffer(keyVal) {\n  const keyLen = keyVal.key.length;\n  const valLen = keyVal.value.length;\n  const keyVarIntLen = varuint.encodingLength(keyLen);\n  const valVarIntLen = varuint.encodingLength(valLen);\n  const buffer = Buffer.allocUnsafe(\n    keyVarIntLen + keyLen + valVarIntLen + valLen,\n  );\n  varuint.encode(keyLen, buffer, 0);\n  keyVal.key.copy(buffer, keyVarIntLen);\n  varuint.encode(valLen, buffer, keyVarIntLen + keyLen);\n  keyVal.value.copy(buffer, keyVarIntLen + keyLen + valVarIntLen);\n  return buffer;\n}\nexports.keyValToBuffer = keyValToBuffer;\n// https://github.com/feross/buffer/blob/master/index.js#L1127\nfunction verifuint(value, max) {\n  if (typeof value !== 'number')\n    throw new Error('cannot write a non-number as a number');\n  if (value < 0)\n    throw new Error('specified a negative value for writing an unsigned value');\n  if (value > max) throw new Error('RangeError: value out of range');\n  if (Math.floor(value) !== value)\n    throw new Error('value has a fractional component');\n}\nfunction readUInt64LE(buffer, offset) {\n  const a = buffer.readUInt32LE(offset);\n  let b = buffer.readUInt32LE(offset + 4);\n  b *= 0x100000000;\n  verifuint(b + a, 0x001fffffffffffff);\n  return b + a;\n}\nexports.readUInt64LE = readUInt64LE;\nfunction writeUInt64LE(buffer, value, offset) {\n  verifuint(value, 0x001fffffffffffff);\n  buffer.writeInt32LE(value & -1, offset);\n  buffer.writeUInt32LE(Math.floor(value / 0x100000000), offset + 4);\n  return offset + 8;\n}\nexports.writeUInt64LE = writeUInt64LE;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst input = require('./input');\nexports.input = input;\nconst output = require('./output');\nexports.output = output;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst input = require('./input');\nexports.input = input;\nconst output = require('./output');\nexports.output = output;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst input = require('./input');\nexports.input = input;\nconst output = require('./output');\nexports.output = output;\n","var native = require('./native')\n\nfunction getTypeName (fn) {\n  return fn.name || fn.toString().match(/function (.*?)\\s*\\(/)[1]\n}\n\nfunction getValueTypeName (value) {\n  return native.Nil(value) ? '' : getTypeName(value.constructor)\n}\n\nfunction getValue (value) {\n  if (native.Function(value)) return ''\n  if (native.String(value)) return JSON.stringify(value)\n  if (value && native.Object(value)) return ''\n  return value\n}\n\nfunction captureStackTrace (e, t) {\n  if (Error.captureStackTrace) {\n    Error.captureStackTrace(e, t)\n  }\n}\n\nfunction tfJSON (type) {\n  if (native.Function(type)) return type.toJSON ? type.toJSON() : getTypeName(type)\n  if (native.Array(type)) return 'Array'\n  if (type && native.Object(type)) return 'Object'\n\n  return type !== undefined ? type : ''\n}\n\nfunction tfErrorString (type, value, valueTypeName) {\n  var valueJson = getValue(value)\n\n  return 'Expected ' + tfJSON(type) + ', got' +\n    (valueTypeName !== '' ? ' ' + valueTypeName : '') +\n    (valueJson !== '' ? ' ' + valueJson : '')\n}\n\nfunction TfTypeError (type, value, valueTypeName) {\n  valueTypeName = valueTypeName || getValueTypeName(value)\n  this.message = tfErrorString(type, value, valueTypeName)\n\n  captureStackTrace(this, TfTypeError)\n  this.__type = type\n  this.__value = value\n  this.__valueTypeName = valueTypeName\n}\n\nTfTypeError.prototype = Object.create(Error.prototype)\nTfTypeError.prototype.constructor = TfTypeError\n\nfunction tfPropertyErrorString (type, label, name, value, valueTypeName) {\n  var description = '\" of type '\n  if (label === 'key') description = '\" with key type '\n\n  return tfErrorString('property \"' + tfJSON(name) + description + tfJSON(type), value, valueTypeName)\n}\n\nfunction TfPropertyTypeError (type, property, label, value, valueTypeName) {\n  if (type) {\n    valueTypeName = valueTypeName || getValueTypeName(value)\n    this.message = tfPropertyErrorString(type, label, property, value, valueTypeName)\n  } else {\n    this.message = 'Unexpected property \"' + property + '\"'\n  }\n\n  captureStackTrace(this, TfTypeError)\n  this.__label = label\n  this.__property = property\n  this.__type = type\n  this.__value = value\n  this.__valueTypeName = valueTypeName\n}\n\nTfPropertyTypeError.prototype = Object.create(Error.prototype)\nTfPropertyTypeError.prototype.constructor = TfTypeError\n\nfunction tfCustomError (expected, actual) {\n  return new TfTypeError(expected, {}, actual)\n}\n\nfunction tfSubError (e, property, label) {\n  // sub child?\n  if (e instanceof TfPropertyTypeError) {\n    property = property + '.' + e.__property\n\n    e = new TfPropertyTypeError(\n      e.__type, property, e.__label, e.__value, e.__valueTypeName\n    )\n\n  // child?\n  } else if (e instanceof TfTypeError) {\n    e = new TfPropertyTypeError(\n      e.__type, property, label, e.__value, e.__valueTypeName\n    )\n  }\n\n  captureStackTrace(e)\n  return e\n}\n\nmodule.exports = {\n  TfTypeError: TfTypeError,\n  TfPropertyTypeError: TfPropertyTypeError,\n  tfCustomError: tfCustomError,\n  tfSubError: tfSubError,\n  tfJSON: tfJSON,\n  getValueTypeName: getValueTypeName\n}\n","var bs58check = require('bs58check')\n\nfunction decodeRaw (buffer, version) {\n  // check version only if defined\n  if (version !== undefined && buffer[0] !== version) throw new Error('Invalid network version')\n\n  // uncompressed\n  if (buffer.length === 33) {\n    return {\n      version: buffer[0],\n      privateKey: buffer.slice(1, 33),\n      compressed: false\n    }\n  }\n\n  // invalid length\n  if (buffer.length !== 34) throw new Error('Invalid WIF length')\n\n  // invalid compression flag\n  if (buffer[33] !== 0x01) throw new Error('Invalid compression flag')\n\n  return {\n    version: buffer[0],\n    privateKey: buffer.slice(1, 33),\n    compressed: true\n  }\n}\n\nfunction encodeRaw (version, privateKey, compressed) {\n  var result = new Buffer(compressed ? 34 : 33)\n\n  result.writeUInt8(version, 0)\n  privateKey.copy(result, 1)\n\n  if (compressed) {\n    result[33] = 0x01\n  }\n\n  return result\n}\n\nfunction decode (string, version) {\n  return decodeRaw(bs58check.decode(string), version)\n}\n\nfunction encode (version, privateKey, compressed) {\n  if (typeof version === 'number') return bs58check.encode(encodeRaw(version, privateKey, compressed))\n\n  return bs58check.encode(\n    encodeRaw(\n      version.version,\n      version.privateKey,\n      version.compressed\n    )\n  )\n}\n\nmodule.exports = {\n  decode: decode,\n  decodeRaw: decodeRaw,\n  encode: encode,\n  encodeRaw: encodeRaw\n}\n","'use strict';\nfunction __export(m) {\n  for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, '__esModule', { value: true });\n__export(require('./fromBuffer'));\n__export(require('./toBuffer'));\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst converter = require('./converter');\nfunction checkForInput(inputs, inputIndex) {\n  const input = inputs[inputIndex];\n  if (input === undefined) throw new Error(`No input #${inputIndex}`);\n  return input;\n}\nexports.checkForInput = checkForInput;\nfunction checkForOutput(outputs, outputIndex) {\n  const output = outputs[outputIndex];\n  if (output === undefined) throw new Error(`No output #${outputIndex}`);\n  return output;\n}\nexports.checkForOutput = checkForOutput;\nfunction checkHasKey(checkKeyVal, keyVals, enumLength) {\n  if (checkKeyVal.key[0] < enumLength) {\n    throw new Error(\n      `Use the method for your specific key instead of addUnknownKeyVal*`,\n    );\n  }\n  if (\n    keyVals &&\n    keyVals.filter(kv => kv.key.equals(checkKeyVal.key)).length !== 0\n  ) {\n    throw new Error(`Duplicate Key: ${checkKeyVal.key.toString('hex')}`);\n  }\n}\nexports.checkHasKey = checkHasKey;\nfunction getEnumLength(myenum) {\n  let count = 0;\n  Object.keys(myenum).forEach(val => {\n    if (Number(isNaN(Number(val)))) {\n      count++;\n    }\n  });\n  return count;\n}\nexports.getEnumLength = getEnumLength;\nfunction inputCheckUncleanFinalized(inputIndex, input) {\n  let result = false;\n  if (input.nonWitnessUtxo || input.witnessUtxo) {\n    const needScriptSig = !!input.redeemScript;\n    const needWitnessScript = !!input.witnessScript;\n    const scriptSigOK = !needScriptSig || !!input.finalScriptSig;\n    const witnessScriptOK = !needWitnessScript || !!input.finalScriptWitness;\n    const hasOneFinal = !!input.finalScriptSig || !!input.finalScriptWitness;\n    result = scriptSigOK && witnessScriptOK && hasOneFinal;\n  }\n  if (result === false) {\n    throw new Error(\n      `Input #${inputIndex} has too much or too little data to clean`,\n    );\n  }\n}\nexports.inputCheckUncleanFinalized = inputCheckUncleanFinalized;\nfunction throwForUpdateMaker(typeName, name, expected, data) {\n  throw new Error(\n    `Data for ${typeName} key ${name} is incorrect: Expected ` +\n      `${expected} and got ${JSON.stringify(data)}`,\n  );\n}\nfunction updateMaker(typeName) {\n  return (updateData, mainData) => {\n    for (const name of Object.keys(updateData)) {\n      // @ts-ignore\n      const data = updateData[name];\n      // @ts-ignore\n      const { canAdd, canAddToArray, check, expected } =\n        // @ts-ignore\n        converter[typeName + 's'][name] || {};\n      const isArray = !!canAddToArray;\n      // If unknown data. ignore and do not add\n      if (check) {\n        if (isArray) {\n          if (\n            !Array.isArray(data) ||\n            // @ts-ignore\n            (mainData[name] && !Array.isArray(mainData[name]))\n          ) {\n            throw new Error(`Key type ${name} must be an array`);\n          }\n          if (!data.every(check)) {\n            throwForUpdateMaker(typeName, name, expected, data);\n          }\n          // @ts-ignore\n          const arr = mainData[name] || [];\n          const dupeCheckSet = new Set();\n          if (!data.every(v => canAddToArray(arr, v, dupeCheckSet))) {\n            throw new Error('Can not add duplicate data to array');\n          }\n          // @ts-ignore\n          mainData[name] = arr.concat(data);\n        } else {\n          if (!check(data)) {\n            throwForUpdateMaker(typeName, name, expected, data);\n          }\n          if (!canAdd(mainData, data)) {\n            throw new Error(`Can not add duplicate data to ${typeName}`);\n          }\n          // @ts-ignore\n          mainData[name] = data;\n        }\n      }\n    }\n  };\n}\nexports.updateGlobal = updateMaker('global');\nexports.updateInput = updateMaker('input');\nexports.updateOutput = updateMaker('output');\nfunction addInputAttributes(inputs, data) {\n  const index = inputs.length - 1;\n  const input = checkForInput(inputs, index);\n  exports.updateInput(data, input);\n}\nexports.addInputAttributes = addInputAttributes;\nfunction addOutputAttributes(outputs, data) {\n  const index = outputs.length - 1;\n  const output = checkForInput(outputs, index);\n  exports.updateOutput(data, output);\n}\nexports.addOutputAttributes = addOutputAttributes;\nfunction defaultVersionSetter(version, txBuf) {\n  if (!Buffer.isBuffer(txBuf) || txBuf.length < 4) {\n    throw new Error('Set Version: Invalid Transaction');\n  }\n  txBuf.writeUInt32LE(version, 0);\n  return txBuf;\n}\nexports.defaultVersionSetter = defaultVersionSetter;\nfunction defaultLocktimeSetter(locktime, txBuf) {\n  if (!Buffer.isBuffer(txBuf) || txBuf.length < 4) {\n    throw new Error('Set Locktime: Invalid Transaction');\n  }\n  txBuf.writeUInt32LE(locktime, txBuf.length - 4);\n  return txBuf;\n}\nexports.defaultLocktimeSetter = defaultLocktimeSetter;\n","'use strict';\n// OP_0 {pubKeyHash}\nObject.defineProperty(exports, '__esModule', { value: true });\nconst bscript = require('../../script');\nconst script_1 = require('../../script');\nfunction check(script) {\n  const buffer = bscript.compile(script);\n  return (\n    buffer.length === 22 &&\n    buffer[0] === script_1.OPS.OP_0 &&\n    buffer[1] === 0x14\n  );\n}\nexports.check = check;\ncheck.toJSON = () => {\n  return 'Witness pubKeyHash output';\n};\n","'use strict';\n// OP_0 {scriptHash}\nObject.defineProperty(exports, '__esModule', { value: true });\nconst bscript = require('../../script');\nconst script_1 = require('../../script');\nfunction check(script) {\n  const buffer = bscript.compile(script);\n  return (\n    buffer.length === 34 &&\n    buffer[0] === script_1.OPS.OP_0 &&\n    buffer[1] === 0x20\n  );\n}\nexports.check = check;\ncheck.toJSON = () => {\n  return 'Witness scriptHash output';\n};\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst bip32 = require('bip32');\nexports.bip32 = bip32;\nconst address = require('./address');\nexports.address = address;\nconst crypto = require('./crypto');\nexports.crypto = crypto;\nconst ECPair = require('./ecpair');\nexports.ECPair = ECPair;\nconst networks = require('./networks');\nexports.networks = networks;\nconst payments = require('./payments');\nexports.payments = payments;\nconst script = require('./script');\nexports.script = script;\nvar block_1 = require('./block');\nexports.Block = block_1.Block;\nvar psbt_1 = require('./psbt');\nexports.Psbt = psbt_1.Psbt;\nvar script_1 = require('./script');\nexports.opcodes = script_1.OPS;\nvar transaction_1 = require('./transaction');\nexports.Transaction = transaction_1.Transaction;\nvar transaction_builder_1 = require('./transaction_builder');\nexports.TransactionBuilder = transaction_builder_1.TransactionBuilder;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar bip32_1 = require(\"./bip32\");\nexports.fromSeed = bip32_1.fromSeed;\nexports.fromBase58 = bip32_1.fromBase58;\nexports.fromPublicKey = bip32_1.fromPublicKey;\nexports.fromPrivateKey = bip32_1.fromPrivateKey;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst crypto = require(\"./crypto\");\nconst bs58check = require('bs58check');\nconst ecc = require('tiny-secp256k1');\nconst typeforce = require('typeforce');\nconst wif = require('wif');\nconst UINT256_TYPE = typeforce.BufferN(32);\nconst NETWORK_TYPE = typeforce.compile({\n    wif: typeforce.UInt8,\n    bip32: {\n        public: typeforce.UInt32,\n        private: typeforce.UInt32,\n    },\n});\nconst BITCOIN = {\n    messagePrefix: '\\x18Bitcoin Signed Message:\\n',\n    bech32: 'bc',\n    bip32: {\n        public: 0x0488b21e,\n        private: 0x0488ade4,\n    },\n    pubKeyHash: 0x00,\n    scriptHash: 0x05,\n    wif: 0x80,\n};\nconst HIGHEST_BIT = 0x80000000;\nconst UINT31_MAX = Math.pow(2, 31) - 1;\nfunction BIP32Path(value) {\n    return (typeforce.String(value) && value.match(/^(m\\/)?(\\d+'?\\/)*\\d+'?$/) !== null);\n}\nfunction UInt31(value) {\n    return typeforce.UInt32(value) && value <= UINT31_MAX;\n}\nclass BIP32 {\n    constructor(__D, __Q, chainCode, network, __DEPTH = 0, __INDEX = 0, __PARENT_FINGERPRINT = 0x00000000) {\n        this.__D = __D;\n        this.__Q = __Q;\n        this.chainCode = chainCode;\n        this.network = network;\n        this.__DEPTH = __DEPTH;\n        this.__INDEX = __INDEX;\n        this.__PARENT_FINGERPRINT = __PARENT_FINGERPRINT;\n        typeforce(NETWORK_TYPE, network);\n        this.lowR = false;\n    }\n    get depth() {\n        return this.__DEPTH;\n    }\n    get index() {\n        return this.__INDEX;\n    }\n    get parentFingerprint() {\n        return this.__PARENT_FINGERPRINT;\n    }\n    get publicKey() {\n        if (this.__Q === undefined)\n            this.__Q = ecc.pointFromScalar(this.__D, true);\n        return this.__Q;\n    }\n    get privateKey() {\n        return this.__D;\n    }\n    get identifier() {\n        return crypto.hash160(this.publicKey);\n    }\n    get fingerprint() {\n        return this.identifier.slice(0, 4);\n    }\n    get compressed() {\n        return true;\n    }\n    // Private === not neutered\n    // Public === neutered\n    isNeutered() {\n        return this.__D === undefined;\n    }\n    neutered() {\n        return fromPublicKeyLocal(this.publicKey, this.chainCode, this.network, this.depth, this.index, this.parentFingerprint);\n    }\n    toBase58() {\n        const network = this.network;\n        const version = !this.isNeutered()\n            ? network.bip32.private\n            : network.bip32.public;\n        const buffer = Buffer.allocUnsafe(78);\n        // 4 bytes: version bytes\n        buffer.writeUInt32BE(version, 0);\n        // 1 byte: depth: 0x00 for master nodes, 0x01 for level-1 descendants, ....\n        buffer.writeUInt8(this.depth, 4);\n        // 4 bytes: the fingerprint of the parent's key (0x00000000 if master key)\n        buffer.writeUInt32BE(this.parentFingerprint, 5);\n        // 4 bytes: child number. This is the number i in xi = xpar/i, with xi the key being serialized.\n        // This is encoded in big endian. (0x00000000 if master key)\n        buffer.writeUInt32BE(this.index, 9);\n        // 32 bytes: the chain code\n        this.chainCode.copy(buffer, 13);\n        // 33 bytes: the public key or private key data\n        if (!this.isNeutered()) {\n            // 0x00 + k for private keys\n            buffer.writeUInt8(0, 45);\n            this.privateKey.copy(buffer, 46);\n            // 33 bytes: the public key\n        }\n        else {\n            // X9.62 encoding for public keys\n            this.publicKey.copy(buffer, 45);\n        }\n        return bs58check.encode(buffer);\n    }\n    toWIF() {\n        if (!this.privateKey)\n            throw new TypeError('Missing private key');\n        return wif.encode(this.network.wif, this.privateKey, true);\n    }\n    // https://github.com/bitcoin/bips/blob/master/bip-0032.mediawiki#child-key-derivation-ckd-functions\n    derive(index) {\n        typeforce(typeforce.UInt32, index);\n        const isHardened = index >= HIGHEST_BIT;\n        const data = Buffer.allocUnsafe(37);\n        // Hardened child\n        if (isHardened) {\n            if (this.isNeutered())\n                throw new TypeError('Missing private key for hardened child key');\n            // data = 0x00 || ser256(kpar) || ser32(index)\n            data[0] = 0x00;\n            this.privateKey.copy(data, 1);\n            data.writeUInt32BE(index, 33);\n            // Normal child\n        }\n        else {\n            // data = serP(point(kpar)) || ser32(index)\n            //      = serP(Kpar) || ser32(index)\n            this.publicKey.copy(data, 0);\n            data.writeUInt32BE(index, 33);\n        }\n        const I = crypto.hmacSHA512(this.chainCode, data);\n        const IL = I.slice(0, 32);\n        const IR = I.slice(32);\n        // if parse256(IL) >= n, proceed with the next value for i\n        if (!ecc.isPrivate(IL))\n            return this.derive(index + 1);\n        // Private parent key -> private child key\n        let hd;\n        if (!this.isNeutered()) {\n            // ki = parse256(IL) + kpar (mod n)\n            const ki = ecc.privateAdd(this.privateKey, IL);\n            // In case ki == 0, proceed with the next value for i\n            if (ki == null)\n                return this.derive(index + 1);\n            hd = fromPrivateKeyLocal(ki, IR, this.network, this.depth + 1, index, this.fingerprint.readUInt32BE(0));\n            // Public parent key -> public child key\n        }\n        else {\n            // Ki = point(parse256(IL)) + Kpar\n            //    = G*IL + Kpar\n            const Ki = ecc.pointAddScalar(this.publicKey, IL, true);\n            // In case Ki is the point at infinity, proceed with the next value for i\n            if (Ki === null)\n                return this.derive(index + 1);\n            hd = fromPublicKeyLocal(Ki, IR, this.network, this.depth + 1, index, this.fingerprint.readUInt32BE(0));\n        }\n        return hd;\n    }\n    deriveHardened(index) {\n        typeforce(UInt31, index);\n        // Only derives hardened private keys by default\n        return this.derive(index + HIGHEST_BIT);\n    }\n    derivePath(path) {\n        typeforce(BIP32Path, path);\n        let splitPath = path.split('/');\n        if (splitPath[0] === 'm') {\n            if (this.parentFingerprint)\n                throw new TypeError('Expected master, got child');\n            splitPath = splitPath.slice(1);\n        }\n        return splitPath.reduce((prevHd, indexStr) => {\n            let index;\n            if (indexStr.slice(-1) === `'`) {\n                index = parseInt(indexStr.slice(0, -1), 10);\n                return prevHd.deriveHardened(index);\n            }\n            else {\n                index = parseInt(indexStr, 10);\n                return prevHd.derive(index);\n            }\n        }, this);\n    }\n    sign(hash, lowR) {\n        if (!this.privateKey)\n            throw new Error('Missing private key');\n        if (lowR === undefined)\n            lowR = this.lowR;\n        if (lowR === false) {\n            return ecc.sign(hash, this.privateKey);\n        }\n        else {\n            let sig = ecc.sign(hash, this.privateKey);\n            const extraData = Buffer.alloc(32, 0);\n            let counter = 0;\n            // if first try is lowR, skip the loop\n            // for second try and on, add extra entropy counting up\n            while (sig[0] > 0x7f) {\n                counter++;\n                extraData.writeUIntLE(counter, 0, 6);\n                sig = ecc.signWithEntropy(hash, this.privateKey, extraData);\n            }\n            return sig;\n        }\n    }\n    verify(hash, signature) {\n        return ecc.verify(hash, this.publicKey, signature);\n    }\n}\nfunction fromBase58(inString, network) {\n    const buffer = bs58check.decode(inString);\n    if (buffer.length !== 78)\n        throw new TypeError('Invalid buffer length');\n    network = network || BITCOIN;\n    // 4 bytes: version bytes\n    const version = buffer.readUInt32BE(0);\n    if (version !== network.bip32.private && version !== network.bip32.public)\n        throw new TypeError('Invalid network version');\n    // 1 byte: depth: 0x00 for master nodes, 0x01 for level-1 descendants, ...\n    const depth = buffer[4];\n    // 4 bytes: the fingerprint of the parent's key (0x00000000 if master key)\n    const parentFingerprint = buffer.readUInt32BE(5);\n    if (depth === 0) {\n        if (parentFingerprint !== 0x00000000)\n            throw new TypeError('Invalid parent fingerprint');\n    }\n    // 4 bytes: child number. This is the number i in xi = xpar/i, with xi the key being serialized.\n    // This is encoded in MSB order. (0x00000000 if master key)\n    const index = buffer.readUInt32BE(9);\n    if (depth === 0 && index !== 0)\n        throw new TypeError('Invalid index');\n    // 32 bytes: the chain code\n    const chainCode = buffer.slice(13, 45);\n    let hd;\n    // 33 bytes: private key data (0x00 + k)\n    if (version === network.bip32.private) {\n        if (buffer.readUInt8(45) !== 0x00)\n            throw new TypeError('Invalid private key');\n        const k = buffer.slice(46, 78);\n        hd = fromPrivateKeyLocal(k, chainCode, network, depth, index, parentFingerprint);\n        // 33 bytes: public key data (0x02 + X or 0x03 + X)\n    }\n    else {\n        const X = buffer.slice(45, 78);\n        hd = fromPublicKeyLocal(X, chainCode, network, depth, index, parentFingerprint);\n    }\n    return hd;\n}\nexports.fromBase58 = fromBase58;\nfunction fromPrivateKey(privateKey, chainCode, network) {\n    return fromPrivateKeyLocal(privateKey, chainCode, network);\n}\nexports.fromPrivateKey = fromPrivateKey;\nfunction fromPrivateKeyLocal(privateKey, chainCode, network, depth, index, parentFingerprint) {\n    typeforce({\n        privateKey: UINT256_TYPE,\n        chainCode: UINT256_TYPE,\n    }, { privateKey, chainCode });\n    network = network || BITCOIN;\n    if (!ecc.isPrivate(privateKey))\n        throw new TypeError('Private key not in range [1, n)');\n    return new BIP32(privateKey, undefined, chainCode, network, depth, index, parentFingerprint);\n}\nfunction fromPublicKey(publicKey, chainCode, network) {\n    return fromPublicKeyLocal(publicKey, chainCode, network);\n}\nexports.fromPublicKey = fromPublicKey;\nfunction fromPublicKeyLocal(publicKey, chainCode, network, depth, index, parentFingerprint) {\n    typeforce({\n        publicKey: typeforce.BufferN(33),\n        chainCode: UINT256_TYPE,\n    }, { publicKey, chainCode });\n    network = network || BITCOIN;\n    // verify the X coordinate is a point on the curve\n    if (!ecc.isPoint(publicKey))\n        throw new TypeError('Point is not on the curve');\n    return new BIP32(undefined, publicKey, chainCode, network, depth, index, parentFingerprint);\n}\nfunction fromSeed(seed, network) {\n    typeforce(typeforce.Buffer, seed);\n    if (seed.length < 16)\n        throw new TypeError('Seed should be at least 128 bits');\n    if (seed.length > 64)\n        throw new TypeError('Seed should be at most 512 bits');\n    network = network || BITCOIN;\n    const I = crypto.hmacSHA512(Buffer.from('Bitcoin seed', 'utf8'), seed);\n    const IL = I.slice(0, 32);\n    const IR = I.slice(32);\n    return fromPrivateKey(IL, IR, network);\n}\nexports.fromSeed = fromSeed;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst createHash = require('create-hash');\nconst createHmac = require('create-hmac');\nfunction hash160(buffer) {\n    const sha256Hash = createHash('sha256')\n        .update(buffer)\n        .digest();\n    try {\n        return createHash('rmd160')\n            .update(sha256Hash)\n            .digest();\n    }\n    catch (err) {\n        return createHash('ripemd160')\n            .update(sha256Hash)\n            .digest();\n    }\n}\nexports.hash160 = hash160;\nfunction hmacSHA512(key, data) {\n    return createHmac('sha512', key)\n        .update(data)\n        .digest();\n}\nexports.hmacSHA512 = hmacSHA512;\n","(function (module, exports) {\n  'use strict';\n\n  // Utils\n  function assert (val, msg) {\n    if (!val) throw new Error(msg || 'Assertion failed');\n  }\n\n  // Could use `inherits` module, but don't want to move from single file\n  // architecture yet.\n  function inherits (ctor, superCtor) {\n    ctor.super_ = superCtor;\n    var TempCtor = function () {};\n    TempCtor.prototype = superCtor.prototype;\n    ctor.prototype = new TempCtor();\n    ctor.prototype.constructor = ctor;\n  }\n\n  // BN\n\n  function BN (number, base, endian) {\n    if (BN.isBN(number)) {\n      return number;\n    }\n\n    this.negative = 0;\n    this.words = null;\n    this.length = 0;\n\n    // Reduction context\n    this.red = null;\n\n    if (number !== null) {\n      if (base === 'le' || base === 'be') {\n        endian = base;\n        base = 10;\n      }\n\n      this._init(number || 0, base || 10, endian || 'be');\n    }\n  }\n  if (typeof module === 'object') {\n    module.exports = BN;\n  } else {\n    exports.BN = BN;\n  }\n\n  BN.BN = BN;\n  BN.wordSize = 26;\n\n  var Buffer;\n  try {\n    Buffer = require('buffer').Buffer;\n  } catch (e) {\n  }\n\n  BN.isBN = function isBN (num) {\n    if (num instanceof BN) {\n      return true;\n    }\n\n    return num !== null && typeof num === 'object' &&\n      num.constructor.wordSize === BN.wordSize && Array.isArray(num.words);\n  };\n\n  BN.max = function max (left, right) {\n    if (left.cmp(right) > 0) return left;\n    return right;\n  };\n\n  BN.min = function min (left, right) {\n    if (left.cmp(right) < 0) return left;\n    return right;\n  };\n\n  BN.prototype._init = function init (number, base, endian) {\n    if (typeof number === 'number') {\n      return this._initNumber(number, base, endian);\n    }\n\n    if (typeof number === 'object') {\n      return this._initArray(number, base, endian);\n    }\n\n    if (base === 'hex') {\n      base = 16;\n    }\n    assert(base === (base | 0) && base >= 2 && base <= 36);\n\n    number = number.toString().replace(/\\s+/g, '');\n    var start = 0;\n    if (number[0] === '-') {\n      start++;\n    }\n\n    if (base === 16) {\n      this._parseHex(number, start);\n    } else {\n      this._parseBase(number, base, start);\n    }\n\n    if (number[0] === '-') {\n      this.negative = 1;\n    }\n\n    this.strip();\n\n    if (endian !== 'le') return;\n\n    this._initArray(this.toArray(), base, endian);\n  };\n\n  BN.prototype._initNumber = function _initNumber (number, base, endian) {\n    if (number < 0) {\n      this.negative = 1;\n      number = -number;\n    }\n    if (number < 0x4000000) {\n      this.words = [ number & 0x3ffffff ];\n      this.length = 1;\n    } else if (number < 0x10000000000000) {\n      this.words = [\n        number & 0x3ffffff,\n        (number / 0x4000000) & 0x3ffffff\n      ];\n      this.length = 2;\n    } else {\n      assert(number < 0x20000000000000); // 2 ^ 53 (unsafe)\n      this.words = [\n        number & 0x3ffffff,\n        (number / 0x4000000) & 0x3ffffff,\n        1\n      ];\n      this.length = 3;\n    }\n\n    if (endian !== 'le') return;\n\n    // Reverse the bytes\n    this._initArray(this.toArray(), base, endian);\n  };\n\n  BN.prototype._initArray = function _initArray (number, base, endian) {\n    // Perhaps a Uint8Array\n    assert(typeof number.length === 'number');\n    if (number.length <= 0) {\n      this.words = [ 0 ];\n      this.length = 1;\n      return this;\n    }\n\n    this.length = Math.ceil(number.length / 3);\n    this.words = new Array(this.length);\n    for (var i = 0; i < this.length; i++) {\n      this.words[i] = 0;\n    }\n\n    var j, w;\n    var off = 0;\n    if (endian === 'be') {\n      for (i = number.length - 1, j = 0; i >= 0; i -= 3) {\n        w = number[i] | (number[i - 1] << 8) | (number[i - 2] << 16);\n        this.words[j] |= (w << off) & 0x3ffffff;\n        this.words[j + 1] = (w >>> (26 - off)) & 0x3ffffff;\n        off += 24;\n        if (off >= 26) {\n          off -= 26;\n          j++;\n        }\n      }\n    } else if (endian === 'le') {\n      for (i = 0, j = 0; i < number.length; i += 3) {\n        w = number[i] | (number[i + 1] << 8) | (number[i + 2] << 16);\n        this.words[j] |= (w << off) & 0x3ffffff;\n        this.words[j + 1] = (w >>> (26 - off)) & 0x3ffffff;\n        off += 24;\n        if (off >= 26) {\n          off -= 26;\n          j++;\n        }\n      }\n    }\n    return this.strip();\n  };\n\n  function parseHex (str, start, end) {\n    var r = 0;\n    var len = Math.min(str.length, end);\n    for (var i = start; i < len; i++) {\n      var c = str.charCodeAt(i) - 48;\n\n      r <<= 4;\n\n      // 'a' - 'f'\n      if (c >= 49 && c <= 54) {\n        r |= c - 49 + 0xa;\n\n      // 'A' - 'F'\n      } else if (c >= 17 && c <= 22) {\n        r |= c - 17 + 0xa;\n\n      // '0' - '9'\n      } else {\n        r |= c & 0xf;\n      }\n    }\n    return r;\n  }\n\n  BN.prototype._parseHex = function _parseHex (number, start) {\n    // Create possibly bigger array to ensure that it fits the number\n    this.length = Math.ceil((number.length - start) / 6);\n    this.words = new Array(this.length);\n    for (var i = 0; i < this.length; i++) {\n      this.words[i] = 0;\n    }\n\n    var j, w;\n    // Scan 24-bit chunks and add them to the number\n    var off = 0;\n    for (i = number.length - 6, j = 0; i >= start; i -= 6) {\n      w = parseHex(number, i, i + 6);\n      this.words[j] |= (w << off) & 0x3ffffff;\n      // NOTE: `0x3fffff` is intentional here, 26bits max shift + 24bit hex limb\n      this.words[j + 1] |= w >>> (26 - off) & 0x3fffff;\n      off += 24;\n      if (off >= 26) {\n        off -= 26;\n        j++;\n      }\n    }\n    if (i + 6 !== start) {\n      w = parseHex(number, start, i + 6);\n      this.words[j] |= (w << off) & 0x3ffffff;\n      this.words[j + 1] |= w >>> (26 - off) & 0x3fffff;\n    }\n    this.strip();\n  };\n\n  function parseBase (str, start, end, mul) {\n    var r = 0;\n    var len = Math.min(str.length, end);\n    for (var i = start; i < len; i++) {\n      var c = str.charCodeAt(i) - 48;\n\n      r *= mul;\n\n      // 'a'\n      if (c >= 49) {\n        r += c - 49 + 0xa;\n\n      // 'A'\n      } else if (c >= 17) {\n        r += c - 17 + 0xa;\n\n      // '0' - '9'\n      } else {\n        r += c;\n      }\n    }\n    return r;\n  }\n\n  BN.prototype._parseBase = function _parseBase (number, base, start) {\n    // Initialize as zero\n    this.words = [ 0 ];\n    this.length = 1;\n\n    // Find length of limb in base\n    for (var limbLen = 0, limbPow = 1; limbPow <= 0x3ffffff; limbPow *= base) {\n      limbLen++;\n    }\n    limbLen--;\n    limbPow = (limbPow / base) | 0;\n\n    var total = number.length - start;\n    var mod = total % limbLen;\n    var end = Math.min(total, total - mod) + start;\n\n    var word = 0;\n    for (var i = start; i < end; i += limbLen) {\n      word = parseBase(number, i, i + limbLen, base);\n\n      this.imuln(limbPow);\n      if (this.words[0] + word < 0x4000000) {\n        this.words[0] += word;\n      } else {\n        this._iaddn(word);\n      }\n    }\n\n    if (mod !== 0) {\n      var pow = 1;\n      word = parseBase(number, i, number.length, base);\n\n      for (i = 0; i < mod; i++) {\n        pow *= base;\n      }\n\n      this.imuln(pow);\n      if (this.words[0] + word < 0x4000000) {\n        this.words[0] += word;\n      } else {\n        this._iaddn(word);\n      }\n    }\n  };\n\n  BN.prototype.copy = function copy (dest) {\n    dest.words = new Array(this.length);\n    for (var i = 0; i < this.length; i++) {\n      dest.words[i] = this.words[i];\n    }\n    dest.length = this.length;\n    dest.negative = this.negative;\n    dest.red = this.red;\n  };\n\n  BN.prototype.clone = function clone () {\n    var r = new BN(null);\n    this.copy(r);\n    return r;\n  };\n\n  BN.prototype._expand = function _expand (size) {\n    while (this.length < size) {\n      this.words[this.length++] = 0;\n    }\n    return this;\n  };\n\n  // Remove leading `0` from `this`\n  BN.prototype.strip = function strip () {\n    while (this.length > 1 && this.words[this.length - 1] === 0) {\n      this.length--;\n    }\n    return this._normSign();\n  };\n\n  BN.prototype._normSign = function _normSign () {\n    // -0 = 0\n    if (this.length === 1 && this.words[0] === 0) {\n      this.negative = 0;\n    }\n    return this;\n  };\n\n  BN.prototype.inspect = function inspect () {\n    return (this.red ? '<BN-R: ' : '<BN: ') + this.toString(16) + '>';\n  };\n\n  /*\n\n  var zeros = [];\n  var groupSizes = [];\n  var groupBases = [];\n\n  var s = '';\n  var i = -1;\n  while (++i < BN.wordSize) {\n    zeros[i] = s;\n    s += '0';\n  }\n  groupSizes[0] = 0;\n  groupSizes[1] = 0;\n  groupBases[0] = 0;\n  groupBases[1] = 0;\n  var base = 2 - 1;\n  while (++base < 36 + 1) {\n    var groupSize = 0;\n    var groupBase = 1;\n    while (groupBase < (1 << BN.wordSize) / base) {\n      groupBase *= base;\n      groupSize += 1;\n    }\n    groupSizes[base] = groupSize;\n    groupBases[base] = groupBase;\n  }\n\n  */\n\n  var zeros = [\n    '',\n    '0',\n    '00',\n    '000',\n    '0000',\n    '00000',\n    '000000',\n    '0000000',\n    '00000000',\n    '000000000',\n    '0000000000',\n    '00000000000',\n    '000000000000',\n    '0000000000000',\n    '00000000000000',\n    '000000000000000',\n    '0000000000000000',\n    '00000000000000000',\n    '000000000000000000',\n    '0000000000000000000',\n    '00000000000000000000',\n    '000000000000000000000',\n    '0000000000000000000000',\n    '00000000000000000000000',\n    '000000000000000000000000',\n    '0000000000000000000000000'\n  ];\n\n  var groupSizes = [\n    0, 0,\n    25, 16, 12, 11, 10, 9, 8,\n    8, 7, 7, 7, 7, 6, 6,\n    6, 6, 6, 6, 6, 5, 5,\n    5, 5, 5, 5, 5, 5, 5,\n    5, 5, 5, 5, 5, 5, 5\n  ];\n\n  var groupBases = [\n    0, 0,\n    33554432, 43046721, 16777216, 48828125, 60466176, 40353607, 16777216,\n    43046721, 10000000, 19487171, 35831808, 62748517, 7529536, 11390625,\n    16777216, 24137569, 34012224, 47045881, 64000000, 4084101, 5153632,\n    6436343, 7962624, 9765625, 11881376, 14348907, 17210368, 20511149,\n    24300000, 28629151, 33554432, 39135393, 45435424, 52521875, 60466176\n  ];\n\n  BN.prototype.toString = function toString (base, padding) {\n    base = base || 10;\n    padding = padding | 0 || 1;\n\n    var out;\n    if (base === 16 || base === 'hex') {\n      out = '';\n      var off = 0;\n      var carry = 0;\n      for (var i = 0; i < this.length; i++) {\n        var w = this.words[i];\n        var word = (((w << off) | carry) & 0xffffff).toString(16);\n        carry = (w >>> (24 - off)) & 0xffffff;\n        if (carry !== 0 || i !== this.length - 1) {\n          out = zeros[6 - word.length] + word + out;\n        } else {\n          out = word + out;\n        }\n        off += 2;\n        if (off >= 26) {\n          off -= 26;\n          i--;\n        }\n      }\n      if (carry !== 0) {\n        out = carry.toString(16) + out;\n      }\n      while (out.length % padding !== 0) {\n        out = '0' + out;\n      }\n      if (this.negative !== 0) {\n        out = '-' + out;\n      }\n      return out;\n    }\n\n    if (base === (base | 0) && base >= 2 && base <= 36) {\n      // var groupSize = Math.floor(BN.wordSize * Math.LN2 / Math.log(base));\n      var groupSize = groupSizes[base];\n      // var groupBase = Math.pow(base, groupSize);\n      var groupBase = groupBases[base];\n      out = '';\n      var c = this.clone();\n      c.negative = 0;\n      while (!c.isZero()) {\n        var r = c.modn(groupBase).toString(base);\n        c = c.idivn(groupBase);\n\n        if (!c.isZero()) {\n          out = zeros[groupSize - r.length] + r + out;\n        } else {\n          out = r + out;\n        }\n      }\n      if (this.isZero()) {\n        out = '0' + out;\n      }\n      while (out.length % padding !== 0) {\n        out = '0' + out;\n      }\n      if (this.negative !== 0) {\n        out = '-' + out;\n      }\n      return out;\n    }\n\n    assert(false, 'Base should be between 2 and 36');\n  };\n\n  BN.prototype.toNumber = function toNumber () {\n    var ret = this.words[0];\n    if (this.length === 2) {\n      ret += this.words[1] * 0x4000000;\n    } else if (this.length === 3 && this.words[2] === 0x01) {\n      // NOTE: at this stage it is known that the top bit is set\n      ret += 0x10000000000000 + (this.words[1] * 0x4000000);\n    } else if (this.length > 2) {\n      assert(false, 'Number can only safely store up to 53 bits');\n    }\n    return (this.negative !== 0) ? -ret : ret;\n  };\n\n  BN.prototype.toJSON = function toJSON () {\n    return this.toString(16);\n  };\n\n  BN.prototype.toBuffer = function toBuffer (endian, length) {\n    assert(typeof Buffer !== 'undefined');\n    return this.toArrayLike(Buffer, endian, length);\n  };\n\n  BN.prototype.toArray = function toArray (endian, length) {\n    return this.toArrayLike(Array, endian, length);\n  };\n\n  BN.prototype.toArrayLike = function toArrayLike (ArrayType, endian, length) {\n    var byteLength = this.byteLength();\n    var reqLength = length || Math.max(1, byteLength);\n    assert(byteLength <= reqLength, 'byte array longer than desired length');\n    assert(reqLength > 0, 'Requested array length <= 0');\n\n    this.strip();\n    var littleEndian = endian === 'le';\n    var res = new ArrayType(reqLength);\n\n    var b, i;\n    var q = this.clone();\n    if (!littleEndian) {\n      // Assume big-endian\n      for (i = 0; i < reqLength - byteLength; i++) {\n        res[i] = 0;\n      }\n\n      for (i = 0; !q.isZero(); i++) {\n        b = q.andln(0xff);\n        q.iushrn(8);\n\n        res[reqLength - i - 1] = b;\n      }\n    } else {\n      for (i = 0; !q.isZero(); i++) {\n        b = q.andln(0xff);\n        q.iushrn(8);\n\n        res[i] = b;\n      }\n\n      for (; i < reqLength; i++) {\n        res[i] = 0;\n      }\n    }\n\n    return res;\n  };\n\n  if (Math.clz32) {\n    BN.prototype._countBits = function _countBits (w) {\n      return 32 - Math.clz32(w);\n    };\n  } else {\n    BN.prototype._countBits = function _countBits (w) {\n      var t = w;\n      var r = 0;\n      if (t >= 0x1000) {\n        r += 13;\n        t >>>= 13;\n      }\n      if (t >= 0x40) {\n        r += 7;\n        t >>>= 7;\n      }\n      if (t >= 0x8) {\n        r += 4;\n        t >>>= 4;\n      }\n      if (t >= 0x02) {\n        r += 2;\n        t >>>= 2;\n      }\n      return r + t;\n    };\n  }\n\n  BN.prototype._zeroBits = function _zeroBits (w) {\n    // Short-cut\n    if (w === 0) return 26;\n\n    var t = w;\n    var r = 0;\n    if ((t & 0x1fff) === 0) {\n      r += 13;\n      t >>>= 13;\n    }\n    if ((t & 0x7f) === 0) {\n      r += 7;\n      t >>>= 7;\n    }\n    if ((t & 0xf) === 0) {\n      r += 4;\n      t >>>= 4;\n    }\n    if ((t & 0x3) === 0) {\n      r += 2;\n      t >>>= 2;\n    }\n    if ((t & 0x1) === 0) {\n      r++;\n    }\n    return r;\n  };\n\n  // Return number of used bits in a BN\n  BN.prototype.bitLength = function bitLength () {\n    var w = this.words[this.length - 1];\n    var hi = this._countBits(w);\n    return (this.length - 1) * 26 + hi;\n  };\n\n  function toBitArray (num) {\n    var w = new Array(num.bitLength());\n\n    for (var bit = 0; bit < w.length; bit++) {\n      var off = (bit / 26) | 0;\n      var wbit = bit % 26;\n\n      w[bit] = (num.words[off] & (1 << wbit)) >>> wbit;\n    }\n\n    return w;\n  }\n\n  // Number of trailing zero bits\n  BN.prototype.zeroBits = function zeroBits () {\n    if (this.isZero()) return 0;\n\n    var r = 0;\n    for (var i = 0; i < this.length; i++) {\n      var b = this._zeroBits(this.words[i]);\n      r += b;\n      if (b !== 26) break;\n    }\n    return r;\n  };\n\n  BN.prototype.byteLength = function byteLength () {\n    return Math.ceil(this.bitLength() / 8);\n  };\n\n  BN.prototype.toTwos = function toTwos (width) {\n    if (this.negative !== 0) {\n      return this.abs().inotn(width).iaddn(1);\n    }\n    return this.clone();\n  };\n\n  BN.prototype.fromTwos = function fromTwos (width) {\n    if (this.testn(width - 1)) {\n      return this.notn(width).iaddn(1).ineg();\n    }\n    return this.clone();\n  };\n\n  BN.prototype.isNeg = function isNeg () {\n    return this.negative !== 0;\n  };\n\n  // Return negative clone of `this`\n  BN.prototype.neg = function neg () {\n    return this.clone().ineg();\n  };\n\n  BN.prototype.ineg = function ineg () {\n    if (!this.isZero()) {\n      this.negative ^= 1;\n    }\n\n    return this;\n  };\n\n  // Or `num` with `this` in-place\n  BN.prototype.iuor = function iuor (num) {\n    while (this.length < num.length) {\n      this.words[this.length++] = 0;\n    }\n\n    for (var i = 0; i < num.length; i++) {\n      this.words[i] = this.words[i] | num.words[i];\n    }\n\n    return this.strip();\n  };\n\n  BN.prototype.ior = function ior (num) {\n    assert((this.negative | num.negative) === 0);\n    return this.iuor(num);\n  };\n\n  // Or `num` with `this`\n  BN.prototype.or = function or (num) {\n    if (this.length > num.length) return this.clone().ior(num);\n    return num.clone().ior(this);\n  };\n\n  BN.prototype.uor = function uor (num) {\n    if (this.length > num.length) return this.clone().iuor(num);\n    return num.clone().iuor(this);\n  };\n\n  // And `num` with `this` in-place\n  BN.prototype.iuand = function iuand (num) {\n    // b = min-length(num, this)\n    var b;\n    if (this.length > num.length) {\n      b = num;\n    } else {\n      b = this;\n    }\n\n    for (var i = 0; i < b.length; i++) {\n      this.words[i] = this.words[i] & num.words[i];\n    }\n\n    this.length = b.length;\n\n    return this.strip();\n  };\n\n  BN.prototype.iand = function iand (num) {\n    assert((this.negative | num.negative) === 0);\n    return this.iuand(num);\n  };\n\n  // And `num` with `this`\n  BN.prototype.and = function and (num) {\n    if (this.length > num.length) return this.clone().iand(num);\n    return num.clone().iand(this);\n  };\n\n  BN.prototype.uand = function uand (num) {\n    if (this.length > num.length) return this.clone().iuand(num);\n    return num.clone().iuand(this);\n  };\n\n  // Xor `num` with `this` in-place\n  BN.prototype.iuxor = function iuxor (num) {\n    // a.length > b.length\n    var a;\n    var b;\n    if (this.length > num.length) {\n      a = this;\n      b = num;\n    } else {\n      a = num;\n      b = this;\n    }\n\n    for (var i = 0; i < b.length; i++) {\n      this.words[i] = a.words[i] ^ b.words[i];\n    }\n\n    if (this !== a) {\n      for (; i < a.length; i++) {\n        this.words[i] = a.words[i];\n      }\n    }\n\n    this.length = a.length;\n\n    return this.strip();\n  };\n\n  BN.prototype.ixor = function ixor (num) {\n    assert((this.negative | num.negative) === 0);\n    return this.iuxor(num);\n  };\n\n  // Xor `num` with `this`\n  BN.prototype.xor = function xor (num) {\n    if (this.length > num.length) return this.clone().ixor(num);\n    return num.clone().ixor(this);\n  };\n\n  BN.prototype.uxor = function uxor (num) {\n    if (this.length > num.length) return this.clone().iuxor(num);\n    return num.clone().iuxor(this);\n  };\n\n  // Not ``this`` with ``width`` bitwidth\n  BN.prototype.inotn = function inotn (width) {\n    assert(typeof width === 'number' && width >= 0);\n\n    var bytesNeeded = Math.ceil(width / 26) | 0;\n    var bitsLeft = width % 26;\n\n    // Extend the buffer with leading zeroes\n    this._expand(bytesNeeded);\n\n    if (bitsLeft > 0) {\n      bytesNeeded--;\n    }\n\n    // Handle complete words\n    for (var i = 0; i < bytesNeeded; i++) {\n      this.words[i] = ~this.words[i] & 0x3ffffff;\n    }\n\n    // Handle the residue\n    if (bitsLeft > 0) {\n      this.words[i] = ~this.words[i] & (0x3ffffff >> (26 - bitsLeft));\n    }\n\n    // And remove leading zeroes\n    return this.strip();\n  };\n\n  BN.prototype.notn = function notn (width) {\n    return this.clone().inotn(width);\n  };\n\n  // Set `bit` of `this`\n  BN.prototype.setn = function setn (bit, val) {\n    assert(typeof bit === 'number' && bit >= 0);\n\n    var off = (bit / 26) | 0;\n    var wbit = bit % 26;\n\n    this._expand(off + 1);\n\n    if (val) {\n      this.words[off] = this.words[off] | (1 << wbit);\n    } else {\n      this.words[off] = this.words[off] & ~(1 << wbit);\n    }\n\n    return this.strip();\n  };\n\n  // Add `num` to `this` in-place\n  BN.prototype.iadd = function iadd (num) {\n    var r;\n\n    // negative + positive\n    if (this.negative !== 0 && num.negative === 0) {\n      this.negative = 0;\n      r = this.isub(num);\n      this.negative ^= 1;\n      return this._normSign();\n\n    // positive + negative\n    } else if (this.negative === 0 && num.negative !== 0) {\n      num.negative = 0;\n      r = this.isub(num);\n      num.negative = 1;\n      return r._normSign();\n    }\n\n    // a.length > b.length\n    var a, b;\n    if (this.length > num.length) {\n      a = this;\n      b = num;\n    } else {\n      a = num;\n      b = this;\n    }\n\n    var carry = 0;\n    for (var i = 0; i < b.length; i++) {\n      r = (a.words[i] | 0) + (b.words[i] | 0) + carry;\n      this.words[i] = r & 0x3ffffff;\n      carry = r >>> 26;\n    }\n    for (; carry !== 0 && i < a.length; i++) {\n      r = (a.words[i] | 0) + carry;\n      this.words[i] = r & 0x3ffffff;\n      carry = r >>> 26;\n    }\n\n    this.length = a.length;\n    if (carry !== 0) {\n      this.words[this.length] = carry;\n      this.length++;\n    // Copy the rest of the words\n    } else if (a !== this) {\n      for (; i < a.length; i++) {\n        this.words[i] = a.words[i];\n      }\n    }\n\n    return this;\n  };\n\n  // Add `num` to `this`\n  BN.prototype.add = function add (num) {\n    var res;\n    if (num.negative !== 0 && this.negative === 0) {\n      num.negative = 0;\n      res = this.sub(num);\n      num.negative ^= 1;\n      return res;\n    } else if (num.negative === 0 && this.negative !== 0) {\n      this.negative = 0;\n      res = num.sub(this);\n      this.negative = 1;\n      return res;\n    }\n\n    if (this.length > num.length) return this.clone().iadd(num);\n\n    return num.clone().iadd(this);\n  };\n\n  // Subtract `num` from `this` in-place\n  BN.prototype.isub = function isub (num) {\n    // this - (-num) = this + num\n    if (num.negative !== 0) {\n      num.negative = 0;\n      var r = this.iadd(num);\n      num.negative = 1;\n      return r._normSign();\n\n    // -this - num = -(this + num)\n    } else if (this.negative !== 0) {\n      this.negative = 0;\n      this.iadd(num);\n      this.negative = 1;\n      return this._normSign();\n    }\n\n    // At this point both numbers are positive\n    var cmp = this.cmp(num);\n\n    // Optimization - zeroify\n    if (cmp === 0) {\n      this.negative = 0;\n      this.length = 1;\n      this.words[0] = 0;\n      return this;\n    }\n\n    // a > b\n    var a, b;\n    if (cmp > 0) {\n      a = this;\n      b = num;\n    } else {\n      a = num;\n      b = this;\n    }\n\n    var carry = 0;\n    for (var i = 0; i < b.length; i++) {\n      r = (a.words[i] | 0) - (b.words[i] | 0) + carry;\n      carry = r >> 26;\n      this.words[i] = r & 0x3ffffff;\n    }\n    for (; carry !== 0 && i < a.length; i++) {\n      r = (a.words[i] | 0) + carry;\n      carry = r >> 26;\n      this.words[i] = r & 0x3ffffff;\n    }\n\n    // Copy rest of the words\n    if (carry === 0 && i < a.length && a !== this) {\n      for (; i < a.length; i++) {\n        this.words[i] = a.words[i];\n      }\n    }\n\n    this.length = Math.max(this.length, i);\n\n    if (a !== this) {\n      this.negative = 1;\n    }\n\n    return this.strip();\n  };\n\n  // Subtract `num` from `this`\n  BN.prototype.sub = function sub (num) {\n    return this.clone().isub(num);\n  };\n\n  function smallMulTo (self, num, out) {\n    out.negative = num.negative ^ self.negative;\n    var len = (self.length + num.length) | 0;\n    out.length = len;\n    len = (len - 1) | 0;\n\n    // Peel one iteration (compiler can't do it, because of code complexity)\n    var a = self.words[0] | 0;\n    var b = num.words[0] | 0;\n    var r = a * b;\n\n    var lo = r & 0x3ffffff;\n    var carry = (r / 0x4000000) | 0;\n    out.words[0] = lo;\n\n    for (var k = 1; k < len; k++) {\n      // Sum all words with the same `i + j = k` and accumulate `ncarry`,\n      // note that ncarry could be >= 0x3ffffff\n      var ncarry = carry >>> 26;\n      var rword = carry & 0x3ffffff;\n      var maxJ = Math.min(k, num.length - 1);\n      for (var j = Math.max(0, k - self.length + 1); j <= maxJ; j++) {\n        var i = (k - j) | 0;\n        a = self.words[i] | 0;\n        b = num.words[j] | 0;\n        r = a * b + rword;\n        ncarry += (r / 0x4000000) | 0;\n        rword = r & 0x3ffffff;\n      }\n      out.words[k] = rword | 0;\n      carry = ncarry | 0;\n    }\n    if (carry !== 0) {\n      out.words[k] = carry | 0;\n    } else {\n      out.length--;\n    }\n\n    return out.strip();\n  }\n\n  // TODO(indutny): it may be reasonable to omit it for users who don't need\n  // to work with 256-bit numbers, otherwise it gives 20% improvement for 256-bit\n  // multiplication (like elliptic secp256k1).\n  var comb10MulTo = function comb10MulTo (self, num, out) {\n    var a = self.words;\n    var b = num.words;\n    var o = out.words;\n    var c = 0;\n    var lo;\n    var mid;\n    var hi;\n    var a0 = a[0] | 0;\n    var al0 = a0 & 0x1fff;\n    var ah0 = a0 >>> 13;\n    var a1 = a[1] | 0;\n    var al1 = a1 & 0x1fff;\n    var ah1 = a1 >>> 13;\n    var a2 = a[2] | 0;\n    var al2 = a2 & 0x1fff;\n    var ah2 = a2 >>> 13;\n    var a3 = a[3] | 0;\n    var al3 = a3 & 0x1fff;\n    var ah3 = a3 >>> 13;\n    var a4 = a[4] | 0;\n    var al4 = a4 & 0x1fff;\n    var ah4 = a4 >>> 13;\n    var a5 = a[5] | 0;\n    var al5 = a5 & 0x1fff;\n    var ah5 = a5 >>> 13;\n    var a6 = a[6] | 0;\n    var al6 = a6 & 0x1fff;\n    var ah6 = a6 >>> 13;\n    var a7 = a[7] | 0;\n    var al7 = a7 & 0x1fff;\n    var ah7 = a7 >>> 13;\n    var a8 = a[8] | 0;\n    var al8 = a8 & 0x1fff;\n    var ah8 = a8 >>> 13;\n    var a9 = a[9] | 0;\n    var al9 = a9 & 0x1fff;\n    var ah9 = a9 >>> 13;\n    var b0 = b[0] | 0;\n    var bl0 = b0 & 0x1fff;\n    var bh0 = b0 >>> 13;\n    var b1 = b[1] | 0;\n    var bl1 = b1 & 0x1fff;\n    var bh1 = b1 >>> 13;\n    var b2 = b[2] | 0;\n    var bl2 = b2 & 0x1fff;\n    var bh2 = b2 >>> 13;\n    var b3 = b[3] | 0;\n    var bl3 = b3 & 0x1fff;\n    var bh3 = b3 >>> 13;\n    var b4 = b[4] | 0;\n    var bl4 = b4 & 0x1fff;\n    var bh4 = b4 >>> 13;\n    var b5 = b[5] | 0;\n    var bl5 = b5 & 0x1fff;\n    var bh5 = b5 >>> 13;\n    var b6 = b[6] | 0;\n    var bl6 = b6 & 0x1fff;\n    var bh6 = b6 >>> 13;\n    var b7 = b[7] | 0;\n    var bl7 = b7 & 0x1fff;\n    var bh7 = b7 >>> 13;\n    var b8 = b[8] | 0;\n    var bl8 = b8 & 0x1fff;\n    var bh8 = b8 >>> 13;\n    var b9 = b[9] | 0;\n    var bl9 = b9 & 0x1fff;\n    var bh9 = b9 >>> 13;\n\n    out.negative = self.negative ^ num.negative;\n    out.length = 19;\n    /* k = 0 */\n    lo = Math.imul(al0, bl0);\n    mid = Math.imul(al0, bh0);\n    mid = (mid + Math.imul(ah0, bl0)) | 0;\n    hi = Math.imul(ah0, bh0);\n    var w0 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w0 >>> 26)) | 0;\n    w0 &= 0x3ffffff;\n    /* k = 1 */\n    lo = Math.imul(al1, bl0);\n    mid = Math.imul(al1, bh0);\n    mid = (mid + Math.imul(ah1, bl0)) | 0;\n    hi = Math.imul(ah1, bh0);\n    lo = (lo + Math.imul(al0, bl1)) | 0;\n    mid = (mid + Math.imul(al0, bh1)) | 0;\n    mid = (mid + Math.imul(ah0, bl1)) | 0;\n    hi = (hi + Math.imul(ah0, bh1)) | 0;\n    var w1 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w1 >>> 26)) | 0;\n    w1 &= 0x3ffffff;\n    /* k = 2 */\n    lo = Math.imul(al2, bl0);\n    mid = Math.imul(al2, bh0);\n    mid = (mid + Math.imul(ah2, bl0)) | 0;\n    hi = Math.imul(ah2, bh0);\n    lo = (lo + Math.imul(al1, bl1)) | 0;\n    mid = (mid + Math.imul(al1, bh1)) | 0;\n    mid = (mid + Math.imul(ah1, bl1)) | 0;\n    hi = (hi + Math.imul(ah1, bh1)) | 0;\n    lo = (lo + Math.imul(al0, bl2)) | 0;\n    mid = (mid + Math.imul(al0, bh2)) | 0;\n    mid = (mid + Math.imul(ah0, bl2)) | 0;\n    hi = (hi + Math.imul(ah0, bh2)) | 0;\n    var w2 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w2 >>> 26)) | 0;\n    w2 &= 0x3ffffff;\n    /* k = 3 */\n    lo = Math.imul(al3, bl0);\n    mid = Math.imul(al3, bh0);\n    mid = (mid + Math.imul(ah3, bl0)) | 0;\n    hi = Math.imul(ah3, bh0);\n    lo = (lo + Math.imul(al2, bl1)) | 0;\n    mid = (mid + Math.imul(al2, bh1)) | 0;\n    mid = (mid + Math.imul(ah2, bl1)) | 0;\n    hi = (hi + Math.imul(ah2, bh1)) | 0;\n    lo = (lo + Math.imul(al1, bl2)) | 0;\n    mid = (mid + Math.imul(al1, bh2)) | 0;\n    mid = (mid + Math.imul(ah1, bl2)) | 0;\n    hi = (hi + Math.imul(ah1, bh2)) | 0;\n    lo = (lo + Math.imul(al0, bl3)) | 0;\n    mid = (mid + Math.imul(al0, bh3)) | 0;\n    mid = (mid + Math.imul(ah0, bl3)) | 0;\n    hi = (hi + Math.imul(ah0, bh3)) | 0;\n    var w3 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w3 >>> 26)) | 0;\n    w3 &= 0x3ffffff;\n    /* k = 4 */\n    lo = Math.imul(al4, bl0);\n    mid = Math.imul(al4, bh0);\n    mid = (mid + Math.imul(ah4, bl0)) | 0;\n    hi = Math.imul(ah4, bh0);\n    lo = (lo + Math.imul(al3, bl1)) | 0;\n    mid = (mid + Math.imul(al3, bh1)) | 0;\n    mid = (mid + Math.imul(ah3, bl1)) | 0;\n    hi = (hi + Math.imul(ah3, bh1)) | 0;\n    lo = (lo + Math.imul(al2, bl2)) | 0;\n    mid = (mid + Math.imul(al2, bh2)) | 0;\n    mid = (mid + Math.imul(ah2, bl2)) | 0;\n    hi = (hi + Math.imul(ah2, bh2)) | 0;\n    lo = (lo + Math.imul(al1, bl3)) | 0;\n    mid = (mid + Math.imul(al1, bh3)) | 0;\n    mid = (mid + Math.imul(ah1, bl3)) | 0;\n    hi = (hi + Math.imul(ah1, bh3)) | 0;\n    lo = (lo + Math.imul(al0, bl4)) | 0;\n    mid = (mid + Math.imul(al0, bh4)) | 0;\n    mid = (mid + Math.imul(ah0, bl4)) | 0;\n    hi = (hi + Math.imul(ah0, bh4)) | 0;\n    var w4 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w4 >>> 26)) | 0;\n    w4 &= 0x3ffffff;\n    /* k = 5 */\n    lo = Math.imul(al5, bl0);\n    mid = Math.imul(al5, bh0);\n    mid = (mid + Math.imul(ah5, bl0)) | 0;\n    hi = Math.imul(ah5, bh0);\n    lo = (lo + Math.imul(al4, bl1)) | 0;\n    mid = (mid + Math.imul(al4, bh1)) | 0;\n    mid = (mid + Math.imul(ah4, bl1)) | 0;\n    hi = (hi + Math.imul(ah4, bh1)) | 0;\n    lo = (lo + Math.imul(al3, bl2)) | 0;\n    mid = (mid + Math.imul(al3, bh2)) | 0;\n    mid = (mid + Math.imul(ah3, bl2)) | 0;\n    hi = (hi + Math.imul(ah3, bh2)) | 0;\n    lo = (lo + Math.imul(al2, bl3)) | 0;\n    mid = (mid + Math.imul(al2, bh3)) | 0;\n    mid = (mid + Math.imul(ah2, bl3)) | 0;\n    hi = (hi + Math.imul(ah2, bh3)) | 0;\n    lo = (lo + Math.imul(al1, bl4)) | 0;\n    mid = (mid + Math.imul(al1, bh4)) | 0;\n    mid = (mid + Math.imul(ah1, bl4)) | 0;\n    hi = (hi + Math.imul(ah1, bh4)) | 0;\n    lo = (lo + Math.imul(al0, bl5)) | 0;\n    mid = (mid + Math.imul(al0, bh5)) | 0;\n    mid = (mid + Math.imul(ah0, bl5)) | 0;\n    hi = (hi + Math.imul(ah0, bh5)) | 0;\n    var w5 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w5 >>> 26)) | 0;\n    w5 &= 0x3ffffff;\n    /* k = 6 */\n    lo = Math.imul(al6, bl0);\n    mid = Math.imul(al6, bh0);\n    mid = (mid + Math.imul(ah6, bl0)) | 0;\n    hi = Math.imul(ah6, bh0);\n    lo = (lo + Math.imul(al5, bl1)) | 0;\n    mid = (mid + Math.imul(al5, bh1)) | 0;\n    mid = (mid + Math.imul(ah5, bl1)) | 0;\n    hi = (hi + Math.imul(ah5, bh1)) | 0;\n    lo = (lo + Math.imul(al4, bl2)) | 0;\n    mid = (mid + Math.imul(al4, bh2)) | 0;\n    mid = (mid + Math.imul(ah4, bl2)) | 0;\n    hi = (hi + Math.imul(ah4, bh2)) | 0;\n    lo = (lo + Math.imul(al3, bl3)) | 0;\n    mid = (mid + Math.imul(al3, bh3)) | 0;\n    mid = (mid + Math.imul(ah3, bl3)) | 0;\n    hi = (hi + Math.imul(ah3, bh3)) | 0;\n    lo = (lo + Math.imul(al2, bl4)) | 0;\n    mid = (mid + Math.imul(al2, bh4)) | 0;\n    mid = (mid + Math.imul(ah2, bl4)) | 0;\n    hi = (hi + Math.imul(ah2, bh4)) | 0;\n    lo = (lo + Math.imul(al1, bl5)) | 0;\n    mid = (mid + Math.imul(al1, bh5)) | 0;\n    mid = (mid + Math.imul(ah1, bl5)) | 0;\n    hi = (hi + Math.imul(ah1, bh5)) | 0;\n    lo = (lo + Math.imul(al0, bl6)) | 0;\n    mid = (mid + Math.imul(al0, bh6)) | 0;\n    mid = (mid + Math.imul(ah0, bl6)) | 0;\n    hi = (hi + Math.imul(ah0, bh6)) | 0;\n    var w6 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w6 >>> 26)) | 0;\n    w6 &= 0x3ffffff;\n    /* k = 7 */\n    lo = Math.imul(al7, bl0);\n    mid = Math.imul(al7, bh0);\n    mid = (mid + Math.imul(ah7, bl0)) | 0;\n    hi = Math.imul(ah7, bh0);\n    lo = (lo + Math.imul(al6, bl1)) | 0;\n    mid = (mid + Math.imul(al6, bh1)) | 0;\n    mid = (mid + Math.imul(ah6, bl1)) | 0;\n    hi = (hi + Math.imul(ah6, bh1)) | 0;\n    lo = (lo + Math.imul(al5, bl2)) | 0;\n    mid = (mid + Math.imul(al5, bh2)) | 0;\n    mid = (mid + Math.imul(ah5, bl2)) | 0;\n    hi = (hi + Math.imul(ah5, bh2)) | 0;\n    lo = (lo + Math.imul(al4, bl3)) | 0;\n    mid = (mid + Math.imul(al4, bh3)) | 0;\n    mid = (mid + Math.imul(ah4, bl3)) | 0;\n    hi = (hi + Math.imul(ah4, bh3)) | 0;\n    lo = (lo + Math.imul(al3, bl4)) | 0;\n    mid = (mid + Math.imul(al3, bh4)) | 0;\n    mid = (mid + Math.imul(ah3, bl4)) | 0;\n    hi = (hi + Math.imul(ah3, bh4)) | 0;\n    lo = (lo + Math.imul(al2, bl5)) | 0;\n    mid = (mid + Math.imul(al2, bh5)) | 0;\n    mid = (mid + Math.imul(ah2, bl5)) | 0;\n    hi = (hi + Math.imul(ah2, bh5)) | 0;\n    lo = (lo + Math.imul(al1, bl6)) | 0;\n    mid = (mid + Math.imul(al1, bh6)) | 0;\n    mid = (mid + Math.imul(ah1, bl6)) | 0;\n    hi = (hi + Math.imul(ah1, bh6)) | 0;\n    lo = (lo + Math.imul(al0, bl7)) | 0;\n    mid = (mid + Math.imul(al0, bh7)) | 0;\n    mid = (mid + Math.imul(ah0, bl7)) | 0;\n    hi = (hi + Math.imul(ah0, bh7)) | 0;\n    var w7 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w7 >>> 26)) | 0;\n    w7 &= 0x3ffffff;\n    /* k = 8 */\n    lo = Math.imul(al8, bl0);\n    mid = Math.imul(al8, bh0);\n    mid = (mid + Math.imul(ah8, bl0)) | 0;\n    hi = Math.imul(ah8, bh0);\n    lo = (lo + Math.imul(al7, bl1)) | 0;\n    mid = (mid + Math.imul(al7, bh1)) | 0;\n    mid = (mid + Math.imul(ah7, bl1)) | 0;\n    hi = (hi + Math.imul(ah7, bh1)) | 0;\n    lo = (lo + Math.imul(al6, bl2)) | 0;\n    mid = (mid + Math.imul(al6, bh2)) | 0;\n    mid = (mid + Math.imul(ah6, bl2)) | 0;\n    hi = (hi + Math.imul(ah6, bh2)) | 0;\n    lo = (lo + Math.imul(al5, bl3)) | 0;\n    mid = (mid + Math.imul(al5, bh3)) | 0;\n    mid = (mid + Math.imul(ah5, bl3)) | 0;\n    hi = (hi + Math.imul(ah5, bh3)) | 0;\n    lo = (lo + Math.imul(al4, bl4)) | 0;\n    mid = (mid + Math.imul(al4, bh4)) | 0;\n    mid = (mid + Math.imul(ah4, bl4)) | 0;\n    hi = (hi + Math.imul(ah4, bh4)) | 0;\n    lo = (lo + Math.imul(al3, bl5)) | 0;\n    mid = (mid + Math.imul(al3, bh5)) | 0;\n    mid = (mid + Math.imul(ah3, bl5)) | 0;\n    hi = (hi + Math.imul(ah3, bh5)) | 0;\n    lo = (lo + Math.imul(al2, bl6)) | 0;\n    mid = (mid + Math.imul(al2, bh6)) | 0;\n    mid = (mid + Math.imul(ah2, bl6)) | 0;\n    hi = (hi + Math.imul(ah2, bh6)) | 0;\n    lo = (lo + Math.imul(al1, bl7)) | 0;\n    mid = (mid + Math.imul(al1, bh7)) | 0;\n    mid = (mid + Math.imul(ah1, bl7)) | 0;\n    hi = (hi + Math.imul(ah1, bh7)) | 0;\n    lo = (lo + Math.imul(al0, bl8)) | 0;\n    mid = (mid + Math.imul(al0, bh8)) | 0;\n    mid = (mid + Math.imul(ah0, bl8)) | 0;\n    hi = (hi + Math.imul(ah0, bh8)) | 0;\n    var w8 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w8 >>> 26)) | 0;\n    w8 &= 0x3ffffff;\n    /* k = 9 */\n    lo = Math.imul(al9, bl0);\n    mid = Math.imul(al9, bh0);\n    mid = (mid + Math.imul(ah9, bl0)) | 0;\n    hi = Math.imul(ah9, bh0);\n    lo = (lo + Math.imul(al8, bl1)) | 0;\n    mid = (mid + Math.imul(al8, bh1)) | 0;\n    mid = (mid + Math.imul(ah8, bl1)) | 0;\n    hi = (hi + Math.imul(ah8, bh1)) | 0;\n    lo = (lo + Math.imul(al7, bl2)) | 0;\n    mid = (mid + Math.imul(al7, bh2)) | 0;\n    mid = (mid + Math.imul(ah7, bl2)) | 0;\n    hi = (hi + Math.imul(ah7, bh2)) | 0;\n    lo = (lo + Math.imul(al6, bl3)) | 0;\n    mid = (mid + Math.imul(al6, bh3)) | 0;\n    mid = (mid + Math.imul(ah6, bl3)) | 0;\n    hi = (hi + Math.imul(ah6, bh3)) | 0;\n    lo = (lo + Math.imul(al5, bl4)) | 0;\n    mid = (mid + Math.imul(al5, bh4)) | 0;\n    mid = (mid + Math.imul(ah5, bl4)) | 0;\n    hi = (hi + Math.imul(ah5, bh4)) | 0;\n    lo = (lo + Math.imul(al4, bl5)) | 0;\n    mid = (mid + Math.imul(al4, bh5)) | 0;\n    mid = (mid + Math.imul(ah4, bl5)) | 0;\n    hi = (hi + Math.imul(ah4, bh5)) | 0;\n    lo = (lo + Math.imul(al3, bl6)) | 0;\n    mid = (mid + Math.imul(al3, bh6)) | 0;\n    mid = (mid + Math.imul(ah3, bl6)) | 0;\n    hi = (hi + Math.imul(ah3, bh6)) | 0;\n    lo = (lo + Math.imul(al2, bl7)) | 0;\n    mid = (mid + Math.imul(al2, bh7)) | 0;\n    mid = (mid + Math.imul(ah2, bl7)) | 0;\n    hi = (hi + Math.imul(ah2, bh7)) | 0;\n    lo = (lo + Math.imul(al1, bl8)) | 0;\n    mid = (mid + Math.imul(al1, bh8)) | 0;\n    mid = (mid + Math.imul(ah1, bl8)) | 0;\n    hi = (hi + Math.imul(ah1, bh8)) | 0;\n    lo = (lo + Math.imul(al0, bl9)) | 0;\n    mid = (mid + Math.imul(al0, bh9)) | 0;\n    mid = (mid + Math.imul(ah0, bl9)) | 0;\n    hi = (hi + Math.imul(ah0, bh9)) | 0;\n    var w9 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w9 >>> 26)) | 0;\n    w9 &= 0x3ffffff;\n    /* k = 10 */\n    lo = Math.imul(al9, bl1);\n    mid = Math.imul(al9, bh1);\n    mid = (mid + Math.imul(ah9, bl1)) | 0;\n    hi = Math.imul(ah9, bh1);\n    lo = (lo + Math.imul(al8, bl2)) | 0;\n    mid = (mid + Math.imul(al8, bh2)) | 0;\n    mid = (mid + Math.imul(ah8, bl2)) | 0;\n    hi = (hi + Math.imul(ah8, bh2)) | 0;\n    lo = (lo + Math.imul(al7, bl3)) | 0;\n    mid = (mid + Math.imul(al7, bh3)) | 0;\n    mid = (mid + Math.imul(ah7, bl3)) | 0;\n    hi = (hi + Math.imul(ah7, bh3)) | 0;\n    lo = (lo + Math.imul(al6, bl4)) | 0;\n    mid = (mid + Math.imul(al6, bh4)) | 0;\n    mid = (mid + Math.imul(ah6, bl4)) | 0;\n    hi = (hi + Math.imul(ah6, bh4)) | 0;\n    lo = (lo + Math.imul(al5, bl5)) | 0;\n    mid = (mid + Math.imul(al5, bh5)) | 0;\n    mid = (mid + Math.imul(ah5, bl5)) | 0;\n    hi = (hi + Math.imul(ah5, bh5)) | 0;\n    lo = (lo + Math.imul(al4, bl6)) | 0;\n    mid = (mid + Math.imul(al4, bh6)) | 0;\n    mid = (mid + Math.imul(ah4, bl6)) | 0;\n    hi = (hi + Math.imul(ah4, bh6)) | 0;\n    lo = (lo + Math.imul(al3, bl7)) | 0;\n    mid = (mid + Math.imul(al3, bh7)) | 0;\n    mid = (mid + Math.imul(ah3, bl7)) | 0;\n    hi = (hi + Math.imul(ah3, bh7)) | 0;\n    lo = (lo + Math.imul(al2, bl8)) | 0;\n    mid = (mid + Math.imul(al2, bh8)) | 0;\n    mid = (mid + Math.imul(ah2, bl8)) | 0;\n    hi = (hi + Math.imul(ah2, bh8)) | 0;\n    lo = (lo + Math.imul(al1, bl9)) | 0;\n    mid = (mid + Math.imul(al1, bh9)) | 0;\n    mid = (mid + Math.imul(ah1, bl9)) | 0;\n    hi = (hi + Math.imul(ah1, bh9)) | 0;\n    var w10 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w10 >>> 26)) | 0;\n    w10 &= 0x3ffffff;\n    /* k = 11 */\n    lo = Math.imul(al9, bl2);\n    mid = Math.imul(al9, bh2);\n    mid = (mid + Math.imul(ah9, bl2)) | 0;\n    hi = Math.imul(ah9, bh2);\n    lo = (lo + Math.imul(al8, bl3)) | 0;\n    mid = (mid + Math.imul(al8, bh3)) | 0;\n    mid = (mid + Math.imul(ah8, bl3)) | 0;\n    hi = (hi + Math.imul(ah8, bh3)) | 0;\n    lo = (lo + Math.imul(al7, bl4)) | 0;\n    mid = (mid + Math.imul(al7, bh4)) | 0;\n    mid = (mid + Math.imul(ah7, bl4)) | 0;\n    hi = (hi + Math.imul(ah7, bh4)) | 0;\n    lo = (lo + Math.imul(al6, bl5)) | 0;\n    mid = (mid + Math.imul(al6, bh5)) | 0;\n    mid = (mid + Math.imul(ah6, bl5)) | 0;\n    hi = (hi + Math.imul(ah6, bh5)) | 0;\n    lo = (lo + Math.imul(al5, bl6)) | 0;\n    mid = (mid + Math.imul(al5, bh6)) | 0;\n    mid = (mid + Math.imul(ah5, bl6)) | 0;\n    hi = (hi + Math.imul(ah5, bh6)) | 0;\n    lo = (lo + Math.imul(al4, bl7)) | 0;\n    mid = (mid + Math.imul(al4, bh7)) | 0;\n    mid = (mid + Math.imul(ah4, bl7)) | 0;\n    hi = (hi + Math.imul(ah4, bh7)) | 0;\n    lo = (lo + Math.imul(al3, bl8)) | 0;\n    mid = (mid + Math.imul(al3, bh8)) | 0;\n    mid = (mid + Math.imul(ah3, bl8)) | 0;\n    hi = (hi + Math.imul(ah3, bh8)) | 0;\n    lo = (lo + Math.imul(al2, bl9)) | 0;\n    mid = (mid + Math.imul(al2, bh9)) | 0;\n    mid = (mid + Math.imul(ah2, bl9)) | 0;\n    hi = (hi + Math.imul(ah2, bh9)) | 0;\n    var w11 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w11 >>> 26)) | 0;\n    w11 &= 0x3ffffff;\n    /* k = 12 */\n    lo = Math.imul(al9, bl3);\n    mid = Math.imul(al9, bh3);\n    mid = (mid + Math.imul(ah9, bl3)) | 0;\n    hi = Math.imul(ah9, bh3);\n    lo = (lo + Math.imul(al8, bl4)) | 0;\n    mid = (mid + Math.imul(al8, bh4)) | 0;\n    mid = (mid + Math.imul(ah8, bl4)) | 0;\n    hi = (hi + Math.imul(ah8, bh4)) | 0;\n    lo = (lo + Math.imul(al7, bl5)) | 0;\n    mid = (mid + Math.imul(al7, bh5)) | 0;\n    mid = (mid + Math.imul(ah7, bl5)) | 0;\n    hi = (hi + Math.imul(ah7, bh5)) | 0;\n    lo = (lo + Math.imul(al6, bl6)) | 0;\n    mid = (mid + Math.imul(al6, bh6)) | 0;\n    mid = (mid + Math.imul(ah6, bl6)) | 0;\n    hi = (hi + Math.imul(ah6, bh6)) | 0;\n    lo = (lo + Math.imul(al5, bl7)) | 0;\n    mid = (mid + Math.imul(al5, bh7)) | 0;\n    mid = (mid + Math.imul(ah5, bl7)) | 0;\n    hi = (hi + Math.imul(ah5, bh7)) | 0;\n    lo = (lo + Math.imul(al4, bl8)) | 0;\n    mid = (mid + Math.imul(al4, bh8)) | 0;\n    mid = (mid + Math.imul(ah4, bl8)) | 0;\n    hi = (hi + Math.imul(ah4, bh8)) | 0;\n    lo = (lo + Math.imul(al3, bl9)) | 0;\n    mid = (mid + Math.imul(al3, bh9)) | 0;\n    mid = (mid + Math.imul(ah3, bl9)) | 0;\n    hi = (hi + Math.imul(ah3, bh9)) | 0;\n    var w12 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w12 >>> 26)) | 0;\n    w12 &= 0x3ffffff;\n    /* k = 13 */\n    lo = Math.imul(al9, bl4);\n    mid = Math.imul(al9, bh4);\n    mid = (mid + Math.imul(ah9, bl4)) | 0;\n    hi = Math.imul(ah9, bh4);\n    lo = (lo + Math.imul(al8, bl5)) | 0;\n    mid = (mid + Math.imul(al8, bh5)) | 0;\n    mid = (mid + Math.imul(ah8, bl5)) | 0;\n    hi = (hi + Math.imul(ah8, bh5)) | 0;\n    lo = (lo + Math.imul(al7, bl6)) | 0;\n    mid = (mid + Math.imul(al7, bh6)) | 0;\n    mid = (mid + Math.imul(ah7, bl6)) | 0;\n    hi = (hi + Math.imul(ah7, bh6)) | 0;\n    lo = (lo + Math.imul(al6, bl7)) | 0;\n    mid = (mid + Math.imul(al6, bh7)) | 0;\n    mid = (mid + Math.imul(ah6, bl7)) | 0;\n    hi = (hi + Math.imul(ah6, bh7)) | 0;\n    lo = (lo + Math.imul(al5, bl8)) | 0;\n    mid = (mid + Math.imul(al5, bh8)) | 0;\n    mid = (mid + Math.imul(ah5, bl8)) | 0;\n    hi = (hi + Math.imul(ah5, bh8)) | 0;\n    lo = (lo + Math.imul(al4, bl9)) | 0;\n    mid = (mid + Math.imul(al4, bh9)) | 0;\n    mid = (mid + Math.imul(ah4, bl9)) | 0;\n    hi = (hi + Math.imul(ah4, bh9)) | 0;\n    var w13 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w13 >>> 26)) | 0;\n    w13 &= 0x3ffffff;\n    /* k = 14 */\n    lo = Math.imul(al9, bl5);\n    mid = Math.imul(al9, bh5);\n    mid = (mid + Math.imul(ah9, bl5)) | 0;\n    hi = Math.imul(ah9, bh5);\n    lo = (lo + Math.imul(al8, bl6)) | 0;\n    mid = (mid + Math.imul(al8, bh6)) | 0;\n    mid = (mid + Math.imul(ah8, bl6)) | 0;\n    hi = (hi + Math.imul(ah8, bh6)) | 0;\n    lo = (lo + Math.imul(al7, bl7)) | 0;\n    mid = (mid + Math.imul(al7, bh7)) | 0;\n    mid = (mid + Math.imul(ah7, bl7)) | 0;\n    hi = (hi + Math.imul(ah7, bh7)) | 0;\n    lo = (lo + Math.imul(al6, bl8)) | 0;\n    mid = (mid + Math.imul(al6, bh8)) | 0;\n    mid = (mid + Math.imul(ah6, bl8)) | 0;\n    hi = (hi + Math.imul(ah6, bh8)) | 0;\n    lo = (lo + Math.imul(al5, bl9)) | 0;\n    mid = (mid + Math.imul(al5, bh9)) | 0;\n    mid = (mid + Math.imul(ah5, bl9)) | 0;\n    hi = (hi + Math.imul(ah5, bh9)) | 0;\n    var w14 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w14 >>> 26)) | 0;\n    w14 &= 0x3ffffff;\n    /* k = 15 */\n    lo = Math.imul(al9, bl6);\n    mid = Math.imul(al9, bh6);\n    mid = (mid + Math.imul(ah9, bl6)) | 0;\n    hi = Math.imul(ah9, bh6);\n    lo = (lo + Math.imul(al8, bl7)) | 0;\n    mid = (mid + Math.imul(al8, bh7)) | 0;\n    mid = (mid + Math.imul(ah8, bl7)) | 0;\n    hi = (hi + Math.imul(ah8, bh7)) | 0;\n    lo = (lo + Math.imul(al7, bl8)) | 0;\n    mid = (mid + Math.imul(al7, bh8)) | 0;\n    mid = (mid + Math.imul(ah7, bl8)) | 0;\n    hi = (hi + Math.imul(ah7, bh8)) | 0;\n    lo = (lo + Math.imul(al6, bl9)) | 0;\n    mid = (mid + Math.imul(al6, bh9)) | 0;\n    mid = (mid + Math.imul(ah6, bl9)) | 0;\n    hi = (hi + Math.imul(ah6, bh9)) | 0;\n    var w15 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w15 >>> 26)) | 0;\n    w15 &= 0x3ffffff;\n    /* k = 16 */\n    lo = Math.imul(al9, bl7);\n    mid = Math.imul(al9, bh7);\n    mid = (mid + Math.imul(ah9, bl7)) | 0;\n    hi = Math.imul(ah9, bh7);\n    lo = (lo + Math.imul(al8, bl8)) | 0;\n    mid = (mid + Math.imul(al8, bh8)) | 0;\n    mid = (mid + Math.imul(ah8, bl8)) | 0;\n    hi = (hi + Math.imul(ah8, bh8)) | 0;\n    lo = (lo + Math.imul(al7, bl9)) | 0;\n    mid = (mid + Math.imul(al7, bh9)) | 0;\n    mid = (mid + Math.imul(ah7, bl9)) | 0;\n    hi = (hi + Math.imul(ah7, bh9)) | 0;\n    var w16 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w16 >>> 26)) | 0;\n    w16 &= 0x3ffffff;\n    /* k = 17 */\n    lo = Math.imul(al9, bl8);\n    mid = Math.imul(al9, bh8);\n    mid = (mid + Math.imul(ah9, bl8)) | 0;\n    hi = Math.imul(ah9, bh8);\n    lo = (lo + Math.imul(al8, bl9)) | 0;\n    mid = (mid + Math.imul(al8, bh9)) | 0;\n    mid = (mid + Math.imul(ah8, bl9)) | 0;\n    hi = (hi + Math.imul(ah8, bh9)) | 0;\n    var w17 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w17 >>> 26)) | 0;\n    w17 &= 0x3ffffff;\n    /* k = 18 */\n    lo = Math.imul(al9, bl9);\n    mid = Math.imul(al9, bh9);\n    mid = (mid + Math.imul(ah9, bl9)) | 0;\n    hi = Math.imul(ah9, bh9);\n    var w18 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w18 >>> 26)) | 0;\n    w18 &= 0x3ffffff;\n    o[0] = w0;\n    o[1] = w1;\n    o[2] = w2;\n    o[3] = w3;\n    o[4] = w4;\n    o[5] = w5;\n    o[6] = w6;\n    o[7] = w7;\n    o[8] = w8;\n    o[9] = w9;\n    o[10] = w10;\n    o[11] = w11;\n    o[12] = w12;\n    o[13] = w13;\n    o[14] = w14;\n    o[15] = w15;\n    o[16] = w16;\n    o[17] = w17;\n    o[18] = w18;\n    if (c !== 0) {\n      o[19] = c;\n      out.length++;\n    }\n    return out;\n  };\n\n  // Polyfill comb\n  if (!Math.imul) {\n    comb10MulTo = smallMulTo;\n  }\n\n  function bigMulTo (self, num, out) {\n    out.negative = num.negative ^ self.negative;\n    out.length = self.length + num.length;\n\n    var carry = 0;\n    var hncarry = 0;\n    for (var k = 0; k < out.length - 1; k++) {\n      // Sum all words with the same `i + j = k` and accumulate `ncarry`,\n      // note that ncarry could be >= 0x3ffffff\n      var ncarry = hncarry;\n      hncarry = 0;\n      var rword = carry & 0x3ffffff;\n      var maxJ = Math.min(k, num.length - 1);\n      for (var j = Math.max(0, k - self.length + 1); j <= maxJ; j++) {\n        var i = k - j;\n        var a = self.words[i] | 0;\n        var b = num.words[j] | 0;\n        var r = a * b;\n\n        var lo = r & 0x3ffffff;\n        ncarry = (ncarry + ((r / 0x4000000) | 0)) | 0;\n        lo = (lo + rword) | 0;\n        rword = lo & 0x3ffffff;\n        ncarry = (ncarry + (lo >>> 26)) | 0;\n\n        hncarry += ncarry >>> 26;\n        ncarry &= 0x3ffffff;\n      }\n      out.words[k] = rword;\n      carry = ncarry;\n      ncarry = hncarry;\n    }\n    if (carry !== 0) {\n      out.words[k] = carry;\n    } else {\n      out.length--;\n    }\n\n    return out.strip();\n  }\n\n  function jumboMulTo (self, num, out) {\n    var fftm = new FFTM();\n    return fftm.mulp(self, num, out);\n  }\n\n  BN.prototype.mulTo = function mulTo (num, out) {\n    var res;\n    var len = this.length + num.length;\n    if (this.length === 10 && num.length === 10) {\n      res = comb10MulTo(this, num, out);\n    } else if (len < 63) {\n      res = smallMulTo(this, num, out);\n    } else if (len < 1024) {\n      res = bigMulTo(this, num, out);\n    } else {\n      res = jumboMulTo(this, num, out);\n    }\n\n    return res;\n  };\n\n  // Cooley-Tukey algorithm for FFT\n  // slightly revisited to rely on looping instead of recursion\n\n  function FFTM (x, y) {\n    this.x = x;\n    this.y = y;\n  }\n\n  FFTM.prototype.makeRBT = function makeRBT (N) {\n    var t = new Array(N);\n    var l = BN.prototype._countBits(N) - 1;\n    for (var i = 0; i < N; i++) {\n      t[i] = this.revBin(i, l, N);\n    }\n\n    return t;\n  };\n\n  // Returns binary-reversed representation of `x`\n  FFTM.prototype.revBin = function revBin (x, l, N) {\n    if (x === 0 || x === N - 1) return x;\n\n    var rb = 0;\n    for (var i = 0; i < l; i++) {\n      rb |= (x & 1) << (l - i - 1);\n      x >>= 1;\n    }\n\n    return rb;\n  };\n\n  // Performs \"tweedling\" phase, therefore 'emulating'\n  // behaviour of the recursive algorithm\n  FFTM.prototype.permute = function permute (rbt, rws, iws, rtws, itws, N) {\n    for (var i = 0; i < N; i++) {\n      rtws[i] = rws[rbt[i]];\n      itws[i] = iws[rbt[i]];\n    }\n  };\n\n  FFTM.prototype.transform = function transform (rws, iws, rtws, itws, N, rbt) {\n    this.permute(rbt, rws, iws, rtws, itws, N);\n\n    for (var s = 1; s < N; s <<= 1) {\n      var l = s << 1;\n\n      var rtwdf = Math.cos(2 * Math.PI / l);\n      var itwdf = Math.sin(2 * Math.PI / l);\n\n      for (var p = 0; p < N; p += l) {\n        var rtwdf_ = rtwdf;\n        var itwdf_ = itwdf;\n\n        for (var j = 0; j < s; j++) {\n          var re = rtws[p + j];\n          var ie = itws[p + j];\n\n          var ro = rtws[p + j + s];\n          var io = itws[p + j + s];\n\n          var rx = rtwdf_ * ro - itwdf_ * io;\n\n          io = rtwdf_ * io + itwdf_ * ro;\n          ro = rx;\n\n          rtws[p + j] = re + ro;\n          itws[p + j] = ie + io;\n\n          rtws[p + j + s] = re - ro;\n          itws[p + j + s] = ie - io;\n\n          /* jshint maxdepth : false */\n          if (j !== l) {\n            rx = rtwdf * rtwdf_ - itwdf * itwdf_;\n\n            itwdf_ = rtwdf * itwdf_ + itwdf * rtwdf_;\n            rtwdf_ = rx;\n          }\n        }\n      }\n    }\n  };\n\n  FFTM.prototype.guessLen13b = function guessLen13b (n, m) {\n    var N = Math.max(m, n) | 1;\n    var odd = N & 1;\n    var i = 0;\n    for (N = N / 2 | 0; N; N = N >>> 1) {\n      i++;\n    }\n\n    return 1 << i + 1 + odd;\n  };\n\n  FFTM.prototype.conjugate = function conjugate (rws, iws, N) {\n    if (N <= 1) return;\n\n    for (var i = 0; i < N / 2; i++) {\n      var t = rws[i];\n\n      rws[i] = rws[N - i - 1];\n      rws[N - i - 1] = t;\n\n      t = iws[i];\n\n      iws[i] = -iws[N - i - 1];\n      iws[N - i - 1] = -t;\n    }\n  };\n\n  FFTM.prototype.normalize13b = function normalize13b (ws, N) {\n    var carry = 0;\n    for (var i = 0; i < N / 2; i++) {\n      var w = Math.round(ws[2 * i + 1] / N) * 0x2000 +\n        Math.round(ws[2 * i] / N) +\n        carry;\n\n      ws[i] = w & 0x3ffffff;\n\n      if (w < 0x4000000) {\n        carry = 0;\n      } else {\n        carry = w / 0x4000000 | 0;\n      }\n    }\n\n    return ws;\n  };\n\n  FFTM.prototype.convert13b = function convert13b (ws, len, rws, N) {\n    var carry = 0;\n    for (var i = 0; i < len; i++) {\n      carry = carry + (ws[i] | 0);\n\n      rws[2 * i] = carry & 0x1fff; carry = carry >>> 13;\n      rws[2 * i + 1] = carry & 0x1fff; carry = carry >>> 13;\n    }\n\n    // Pad with zeroes\n    for (i = 2 * len; i < N; ++i) {\n      rws[i] = 0;\n    }\n\n    assert(carry === 0);\n    assert((carry & ~0x1fff) === 0);\n  };\n\n  FFTM.prototype.stub = function stub (N) {\n    var ph = new Array(N);\n    for (var i = 0; i < N; i++) {\n      ph[i] = 0;\n    }\n\n    return ph;\n  };\n\n  FFTM.prototype.mulp = function mulp (x, y, out) {\n    var N = 2 * this.guessLen13b(x.length, y.length);\n\n    var rbt = this.makeRBT(N);\n\n    var _ = this.stub(N);\n\n    var rws = new Array(N);\n    var rwst = new Array(N);\n    var iwst = new Array(N);\n\n    var nrws = new Array(N);\n    var nrwst = new Array(N);\n    var niwst = new Array(N);\n\n    var rmws = out.words;\n    rmws.length = N;\n\n    this.convert13b(x.words, x.length, rws, N);\n    this.convert13b(y.words, y.length, nrws, N);\n\n    this.transform(rws, _, rwst, iwst, N, rbt);\n    this.transform(nrws, _, nrwst, niwst, N, rbt);\n\n    for (var i = 0; i < N; i++) {\n      var rx = rwst[i] * nrwst[i] - iwst[i] * niwst[i];\n      iwst[i] = rwst[i] * niwst[i] + iwst[i] * nrwst[i];\n      rwst[i] = rx;\n    }\n\n    this.conjugate(rwst, iwst, N);\n    this.transform(rwst, iwst, rmws, _, N, rbt);\n    this.conjugate(rmws, _, N);\n    this.normalize13b(rmws, N);\n\n    out.negative = x.negative ^ y.negative;\n    out.length = x.length + y.length;\n    return out.strip();\n  };\n\n  // Multiply `this` by `num`\n  BN.prototype.mul = function mul (num) {\n    var out = new BN(null);\n    out.words = new Array(this.length + num.length);\n    return this.mulTo(num, out);\n  };\n\n  // Multiply employing FFT\n  BN.prototype.mulf = function mulf (num) {\n    var out = new BN(null);\n    out.words = new Array(this.length + num.length);\n    return jumboMulTo(this, num, out);\n  };\n\n  // In-place Multiplication\n  BN.prototype.imul = function imul (num) {\n    return this.clone().mulTo(num, this);\n  };\n\n  BN.prototype.imuln = function imuln (num) {\n    assert(typeof num === 'number');\n    assert(num < 0x4000000);\n\n    // Carry\n    var carry = 0;\n    for (var i = 0; i < this.length; i++) {\n      var w = (this.words[i] | 0) * num;\n      var lo = (w & 0x3ffffff) + (carry & 0x3ffffff);\n      carry >>= 26;\n      carry += (w / 0x4000000) | 0;\n      // NOTE: lo is 27bit maximum\n      carry += lo >>> 26;\n      this.words[i] = lo & 0x3ffffff;\n    }\n\n    if (carry !== 0) {\n      this.words[i] = carry;\n      this.length++;\n    }\n\n    return this;\n  };\n\n  BN.prototype.muln = function muln (num) {\n    return this.clone().imuln(num);\n  };\n\n  // `this` * `this`\n  BN.prototype.sqr = function sqr () {\n    return this.mul(this);\n  };\n\n  // `this` * `this` in-place\n  BN.prototype.isqr = function isqr () {\n    return this.imul(this.clone());\n  };\n\n  // Math.pow(`this`, `num`)\n  BN.prototype.pow = function pow (num) {\n    var w = toBitArray(num);\n    if (w.length === 0) return new BN(1);\n\n    // Skip leading zeroes\n    var res = this;\n    for (var i = 0; i < w.length; i++, res = res.sqr()) {\n      if (w[i] !== 0) break;\n    }\n\n    if (++i < w.length) {\n      for (var q = res.sqr(); i < w.length; i++, q = q.sqr()) {\n        if (w[i] === 0) continue;\n\n        res = res.mul(q);\n      }\n    }\n\n    return res;\n  };\n\n  // Shift-left in-place\n  BN.prototype.iushln = function iushln (bits) {\n    assert(typeof bits === 'number' && bits >= 0);\n    var r = bits % 26;\n    var s = (bits - r) / 26;\n    var carryMask = (0x3ffffff >>> (26 - r)) << (26 - r);\n    var i;\n\n    if (r !== 0) {\n      var carry = 0;\n\n      for (i = 0; i < this.length; i++) {\n        var newCarry = this.words[i] & carryMask;\n        var c = ((this.words[i] | 0) - newCarry) << r;\n        this.words[i] = c | carry;\n        carry = newCarry >>> (26 - r);\n      }\n\n      if (carry) {\n        this.words[i] = carry;\n        this.length++;\n      }\n    }\n\n    if (s !== 0) {\n      for (i = this.length - 1; i >= 0; i--) {\n        this.words[i + s] = this.words[i];\n      }\n\n      for (i = 0; i < s; i++) {\n        this.words[i] = 0;\n      }\n\n      this.length += s;\n    }\n\n    return this.strip();\n  };\n\n  BN.prototype.ishln = function ishln (bits) {\n    // TODO(indutny): implement me\n    assert(this.negative === 0);\n    return this.iushln(bits);\n  };\n\n  // Shift-right in-place\n  // NOTE: `hint` is a lowest bit before trailing zeroes\n  // NOTE: if `extended` is present - it will be filled with destroyed bits\n  BN.prototype.iushrn = function iushrn (bits, hint, extended) {\n    assert(typeof bits === 'number' && bits >= 0);\n    var h;\n    if (hint) {\n      h = (hint - (hint % 26)) / 26;\n    } else {\n      h = 0;\n    }\n\n    var r = bits % 26;\n    var s = Math.min((bits - r) / 26, this.length);\n    var mask = 0x3ffffff ^ ((0x3ffffff >>> r) << r);\n    var maskedWords = extended;\n\n    h -= s;\n    h = Math.max(0, h);\n\n    // Extended mode, copy masked part\n    if (maskedWords) {\n      for (var i = 0; i < s; i++) {\n        maskedWords.words[i] = this.words[i];\n      }\n      maskedWords.length = s;\n    }\n\n    if (s === 0) {\n      // No-op, we should not move anything at all\n    } else if (this.length > s) {\n      this.length -= s;\n      for (i = 0; i < this.length; i++) {\n        this.words[i] = this.words[i + s];\n      }\n    } else {\n      this.words[0] = 0;\n      this.length = 1;\n    }\n\n    var carry = 0;\n    for (i = this.length - 1; i >= 0 && (carry !== 0 || i >= h); i--) {\n      var word = this.words[i] | 0;\n      this.words[i] = (carry << (26 - r)) | (word >>> r);\n      carry = word & mask;\n    }\n\n    // Push carried bits as a mask\n    if (maskedWords && carry !== 0) {\n      maskedWords.words[maskedWords.length++] = carry;\n    }\n\n    if (this.length === 0) {\n      this.words[0] = 0;\n      this.length = 1;\n    }\n\n    return this.strip();\n  };\n\n  BN.prototype.ishrn = function ishrn (bits, hint, extended) {\n    // TODO(indutny): implement me\n    assert(this.negative === 0);\n    return this.iushrn(bits, hint, extended);\n  };\n\n  // Shift-left\n  BN.prototype.shln = function shln (bits) {\n    return this.clone().ishln(bits);\n  };\n\n  BN.prototype.ushln = function ushln (bits) {\n    return this.clone().iushln(bits);\n  };\n\n  // Shift-right\n  BN.prototype.shrn = function shrn (bits) {\n    return this.clone().ishrn(bits);\n  };\n\n  BN.prototype.ushrn = function ushrn (bits) {\n    return this.clone().iushrn(bits);\n  };\n\n  // Test if n bit is set\n  BN.prototype.testn = function testn (bit) {\n    assert(typeof bit === 'number' && bit >= 0);\n    var r = bit % 26;\n    var s = (bit - r) / 26;\n    var q = 1 << r;\n\n    // Fast case: bit is much higher than all existing words\n    if (this.length <= s) return false;\n\n    // Check bit and return\n    var w = this.words[s];\n\n    return !!(w & q);\n  };\n\n  // Return only lowers bits of number (in-place)\n  BN.prototype.imaskn = function imaskn (bits) {\n    assert(typeof bits === 'number' && bits >= 0);\n    var r = bits % 26;\n    var s = (bits - r) / 26;\n\n    assert(this.negative === 0, 'imaskn works only with positive numbers');\n\n    if (this.length <= s) {\n      return this;\n    }\n\n    if (r !== 0) {\n      s++;\n    }\n    this.length = Math.min(s, this.length);\n\n    if (r !== 0) {\n      var mask = 0x3ffffff ^ ((0x3ffffff >>> r) << r);\n      this.words[this.length - 1] &= mask;\n    }\n\n    return this.strip();\n  };\n\n  // Return only lowers bits of number\n  BN.prototype.maskn = function maskn (bits) {\n    return this.clone().imaskn(bits);\n  };\n\n  // Add plain number `num` to `this`\n  BN.prototype.iaddn = function iaddn (num) {\n    assert(typeof num === 'number');\n    assert(num < 0x4000000);\n    if (num < 0) return this.isubn(-num);\n\n    // Possible sign change\n    if (this.negative !== 0) {\n      if (this.length === 1 && (this.words[0] | 0) < num) {\n        this.words[0] = num - (this.words[0] | 0);\n        this.negative = 0;\n        return this;\n      }\n\n      this.negative = 0;\n      this.isubn(num);\n      this.negative = 1;\n      return this;\n    }\n\n    // Add without checks\n    return this._iaddn(num);\n  };\n\n  BN.prototype._iaddn = function _iaddn (num) {\n    this.words[0] += num;\n\n    // Carry\n    for (var i = 0; i < this.length && this.words[i] >= 0x4000000; i++) {\n      this.words[i] -= 0x4000000;\n      if (i === this.length - 1) {\n        this.words[i + 1] = 1;\n      } else {\n        this.words[i + 1]++;\n      }\n    }\n    this.length = Math.max(this.length, i + 1);\n\n    return this;\n  };\n\n  // Subtract plain number `num` from `this`\n  BN.prototype.isubn = function isubn (num) {\n    assert(typeof num === 'number');\n    assert(num < 0x4000000);\n    if (num < 0) return this.iaddn(-num);\n\n    if (this.negative !== 0) {\n      this.negative = 0;\n      this.iaddn(num);\n      this.negative = 1;\n      return this;\n    }\n\n    this.words[0] -= num;\n\n    if (this.length === 1 && this.words[0] < 0) {\n      this.words[0] = -this.words[0];\n      this.negative = 1;\n    } else {\n      // Carry\n      for (var i = 0; i < this.length && this.words[i] < 0; i++) {\n        this.words[i] += 0x4000000;\n        this.words[i + 1] -= 1;\n      }\n    }\n\n    return this.strip();\n  };\n\n  BN.prototype.addn = function addn (num) {\n    return this.clone().iaddn(num);\n  };\n\n  BN.prototype.subn = function subn (num) {\n    return this.clone().isubn(num);\n  };\n\n  BN.prototype.iabs = function iabs () {\n    this.negative = 0;\n\n    return this;\n  };\n\n  BN.prototype.abs = function abs () {\n    return this.clone().iabs();\n  };\n\n  BN.prototype._ishlnsubmul = function _ishlnsubmul (num, mul, shift) {\n    var len = num.length + shift;\n    var i;\n\n    this._expand(len);\n\n    var w;\n    var carry = 0;\n    for (i = 0; i < num.length; i++) {\n      w = (this.words[i + shift] | 0) + carry;\n      var right = (num.words[i] | 0) * mul;\n      w -= right & 0x3ffffff;\n      carry = (w >> 26) - ((right / 0x4000000) | 0);\n      this.words[i + shift] = w & 0x3ffffff;\n    }\n    for (; i < this.length - shift; i++) {\n      w = (this.words[i + shift] | 0) + carry;\n      carry = w >> 26;\n      this.words[i + shift] = w & 0x3ffffff;\n    }\n\n    if (carry === 0) return this.strip();\n\n    // Subtraction overflow\n    assert(carry === -1);\n    carry = 0;\n    for (i = 0; i < this.length; i++) {\n      w = -(this.words[i] | 0) + carry;\n      carry = w >> 26;\n      this.words[i] = w & 0x3ffffff;\n    }\n    this.negative = 1;\n\n    return this.strip();\n  };\n\n  BN.prototype._wordDiv = function _wordDiv (num, mode) {\n    var shift = this.length - num.length;\n\n    var a = this.clone();\n    var b = num;\n\n    // Normalize\n    var bhi = b.words[b.length - 1] | 0;\n    var bhiBits = this._countBits(bhi);\n    shift = 26 - bhiBits;\n    if (shift !== 0) {\n      b = b.ushln(shift);\n      a.iushln(shift);\n      bhi = b.words[b.length - 1] | 0;\n    }\n\n    // Initialize quotient\n    var m = a.length - b.length;\n    var q;\n\n    if (mode !== 'mod') {\n      q = new BN(null);\n      q.length = m + 1;\n      q.words = new Array(q.length);\n      for (var i = 0; i < q.length; i++) {\n        q.words[i] = 0;\n      }\n    }\n\n    var diff = a.clone()._ishlnsubmul(b, 1, m);\n    if (diff.negative === 0) {\n      a = diff;\n      if (q) {\n        q.words[m] = 1;\n      }\n    }\n\n    for (var j = m - 1; j >= 0; j--) {\n      var qj = (a.words[b.length + j] | 0) * 0x4000000 +\n        (a.words[b.length + j - 1] | 0);\n\n      // NOTE: (qj / bhi) is (0x3ffffff * 0x4000000 + 0x3ffffff) / 0x2000000 max\n      // (0x7ffffff)\n      qj = Math.min((qj / bhi) | 0, 0x3ffffff);\n\n      a._ishlnsubmul(b, qj, j);\n      while (a.negative !== 0) {\n        qj--;\n        a.negative = 0;\n        a._ishlnsubmul(b, 1, j);\n        if (!a.isZero()) {\n          a.negative ^= 1;\n        }\n      }\n      if (q) {\n        q.words[j] = qj;\n      }\n    }\n    if (q) {\n      q.strip();\n    }\n    a.strip();\n\n    // Denormalize\n    if (mode !== 'div' && shift !== 0) {\n      a.iushrn(shift);\n    }\n\n    return {\n      div: q || null,\n      mod: a\n    };\n  };\n\n  // NOTE: 1) `mode` can be set to `mod` to request mod only,\n  //       to `div` to request div only, or be absent to\n  //       request both div & mod\n  //       2) `positive` is true if unsigned mod is requested\n  BN.prototype.divmod = function divmod (num, mode, positive) {\n    assert(!num.isZero());\n\n    if (this.isZero()) {\n      return {\n        div: new BN(0),\n        mod: new BN(0)\n      };\n    }\n\n    var div, mod, res;\n    if (this.negative !== 0 && num.negative === 0) {\n      res = this.neg().divmod(num, mode);\n\n      if (mode !== 'mod') {\n        div = res.div.neg();\n      }\n\n      if (mode !== 'div') {\n        mod = res.mod.neg();\n        if (positive && mod.negative !== 0) {\n          mod.iadd(num);\n        }\n      }\n\n      return {\n        div: div,\n        mod: mod\n      };\n    }\n\n    if (this.negative === 0 && num.negative !== 0) {\n      res = this.divmod(num.neg(), mode);\n\n      if (mode !== 'mod') {\n        div = res.div.neg();\n      }\n\n      return {\n        div: div,\n        mod: res.mod\n      };\n    }\n\n    if ((this.negative & num.negative) !== 0) {\n      res = this.neg().divmod(num.neg(), mode);\n\n      if (mode !== 'div') {\n        mod = res.mod.neg();\n        if (positive && mod.negative !== 0) {\n          mod.isub(num);\n        }\n      }\n\n      return {\n        div: res.div,\n        mod: mod\n      };\n    }\n\n    // Both numbers are positive at this point\n\n    // Strip both numbers to approximate shift value\n    if (num.length > this.length || this.cmp(num) < 0) {\n      return {\n        div: new BN(0),\n        mod: this\n      };\n    }\n\n    // Very short reduction\n    if (num.length === 1) {\n      if (mode === 'div') {\n        return {\n          div: this.divn(num.words[0]),\n          mod: null\n        };\n      }\n\n      if (mode === 'mod') {\n        return {\n          div: null,\n          mod: new BN(this.modn(num.words[0]))\n        };\n      }\n\n      return {\n        div: this.divn(num.words[0]),\n        mod: new BN(this.modn(num.words[0]))\n      };\n    }\n\n    return this._wordDiv(num, mode);\n  };\n\n  // Find `this` / `num`\n  BN.prototype.div = function div (num) {\n    return this.divmod(num, 'div', false).div;\n  };\n\n  // Find `this` % `num`\n  BN.prototype.mod = function mod (num) {\n    return this.divmod(num, 'mod', false).mod;\n  };\n\n  BN.prototype.umod = function umod (num) {\n    return this.divmod(num, 'mod', true).mod;\n  };\n\n  // Find Round(`this` / `num`)\n  BN.prototype.divRound = function divRound (num) {\n    var dm = this.divmod(num);\n\n    // Fast case - exact division\n    if (dm.mod.isZero()) return dm.div;\n\n    var mod = dm.div.negative !== 0 ? dm.mod.isub(num) : dm.mod;\n\n    var half = num.ushrn(1);\n    var r2 = num.andln(1);\n    var cmp = mod.cmp(half);\n\n    // Round down\n    if (cmp < 0 || r2 === 1 && cmp === 0) return dm.div;\n\n    // Round up\n    return dm.div.negative !== 0 ? dm.div.isubn(1) : dm.div.iaddn(1);\n  };\n\n  BN.prototype.modn = function modn (num) {\n    assert(num <= 0x3ffffff);\n    var p = (1 << 26) % num;\n\n    var acc = 0;\n    for (var i = this.length - 1; i >= 0; i--) {\n      acc = (p * acc + (this.words[i] | 0)) % num;\n    }\n\n    return acc;\n  };\n\n  // In-place division by number\n  BN.prototype.idivn = function idivn (num) {\n    assert(num <= 0x3ffffff);\n\n    var carry = 0;\n    for (var i = this.length - 1; i >= 0; i--) {\n      var w = (this.words[i] | 0) + carry * 0x4000000;\n      this.words[i] = (w / num) | 0;\n      carry = w % num;\n    }\n\n    return this.strip();\n  };\n\n  BN.prototype.divn = function divn (num) {\n    return this.clone().idivn(num);\n  };\n\n  BN.prototype.egcd = function egcd (p) {\n    assert(p.negative === 0);\n    assert(!p.isZero());\n\n    var x = this;\n    var y = p.clone();\n\n    if (x.negative !== 0) {\n      x = x.umod(p);\n    } else {\n      x = x.clone();\n    }\n\n    // A * x + B * y = x\n    var A = new BN(1);\n    var B = new BN(0);\n\n    // C * x + D * y = y\n    var C = new BN(0);\n    var D = new BN(1);\n\n    var g = 0;\n\n    while (x.isEven() && y.isEven()) {\n      x.iushrn(1);\n      y.iushrn(1);\n      ++g;\n    }\n\n    var yp = y.clone();\n    var xp = x.clone();\n\n    while (!x.isZero()) {\n      for (var i = 0, im = 1; (x.words[0] & im) === 0 && i < 26; ++i, im <<= 1);\n      if (i > 0) {\n        x.iushrn(i);\n        while (i-- > 0) {\n          if (A.isOdd() || B.isOdd()) {\n            A.iadd(yp);\n            B.isub(xp);\n          }\n\n          A.iushrn(1);\n          B.iushrn(1);\n        }\n      }\n\n      for (var j = 0, jm = 1; (y.words[0] & jm) === 0 && j < 26; ++j, jm <<= 1);\n      if (j > 0) {\n        y.iushrn(j);\n        while (j-- > 0) {\n          if (C.isOdd() || D.isOdd()) {\n            C.iadd(yp);\n            D.isub(xp);\n          }\n\n          C.iushrn(1);\n          D.iushrn(1);\n        }\n      }\n\n      if (x.cmp(y) >= 0) {\n        x.isub(y);\n        A.isub(C);\n        B.isub(D);\n      } else {\n        y.isub(x);\n        C.isub(A);\n        D.isub(B);\n      }\n    }\n\n    return {\n      a: C,\n      b: D,\n      gcd: y.iushln(g)\n    };\n  };\n\n  // This is reduced incarnation of the binary EEA\n  // above, designated to invert members of the\n  // _prime_ fields F(p) at a maximal speed\n  BN.prototype._invmp = function _invmp (p) {\n    assert(p.negative === 0);\n    assert(!p.isZero());\n\n    var a = this;\n    var b = p.clone();\n\n    if (a.negative !== 0) {\n      a = a.umod(p);\n    } else {\n      a = a.clone();\n    }\n\n    var x1 = new BN(1);\n    var x2 = new BN(0);\n\n    var delta = b.clone();\n\n    while (a.cmpn(1) > 0 && b.cmpn(1) > 0) {\n      for (var i = 0, im = 1; (a.words[0] & im) === 0 && i < 26; ++i, im <<= 1);\n      if (i > 0) {\n        a.iushrn(i);\n        while (i-- > 0) {\n          if (x1.isOdd()) {\n            x1.iadd(delta);\n          }\n\n          x1.iushrn(1);\n        }\n      }\n\n      for (var j = 0, jm = 1; (b.words[0] & jm) === 0 && j < 26; ++j, jm <<= 1);\n      if (j > 0) {\n        b.iushrn(j);\n        while (j-- > 0) {\n          if (x2.isOdd()) {\n            x2.iadd(delta);\n          }\n\n          x2.iushrn(1);\n        }\n      }\n\n      if (a.cmp(b) >= 0) {\n        a.isub(b);\n        x1.isub(x2);\n      } else {\n        b.isub(a);\n        x2.isub(x1);\n      }\n    }\n\n    var res;\n    if (a.cmpn(1) === 0) {\n      res = x1;\n    } else {\n      res = x2;\n    }\n\n    if (res.cmpn(0) < 0) {\n      res.iadd(p);\n    }\n\n    return res;\n  };\n\n  BN.prototype.gcd = function gcd (num) {\n    if (this.isZero()) return num.abs();\n    if (num.isZero()) return this.abs();\n\n    var a = this.clone();\n    var b = num.clone();\n    a.negative = 0;\n    b.negative = 0;\n\n    // Remove common factor of two\n    for (var shift = 0; a.isEven() && b.isEven(); shift++) {\n      a.iushrn(1);\n      b.iushrn(1);\n    }\n\n    do {\n      while (a.isEven()) {\n        a.iushrn(1);\n      }\n      while (b.isEven()) {\n        b.iushrn(1);\n      }\n\n      var r = a.cmp(b);\n      if (r < 0) {\n        // Swap `a` and `b` to make `a` always bigger than `b`\n        var t = a;\n        a = b;\n        b = t;\n      } else if (r === 0 || b.cmpn(1) === 0) {\n        break;\n      }\n\n      a.isub(b);\n    } while (true);\n\n    return b.iushln(shift);\n  };\n\n  // Invert number in the field F(num)\n  BN.prototype.invm = function invm (num) {\n    return this.egcd(num).a.umod(num);\n  };\n\n  BN.prototype.isEven = function isEven () {\n    return (this.words[0] & 1) === 0;\n  };\n\n  BN.prototype.isOdd = function isOdd () {\n    return (this.words[0] & 1) === 1;\n  };\n\n  // And first word and num\n  BN.prototype.andln = function andln (num) {\n    return this.words[0] & num;\n  };\n\n  // Increment at the bit position in-line\n  BN.prototype.bincn = function bincn (bit) {\n    assert(typeof bit === 'number');\n    var r = bit % 26;\n    var s = (bit - r) / 26;\n    var q = 1 << r;\n\n    // Fast case: bit is much higher than all existing words\n    if (this.length <= s) {\n      this._expand(s + 1);\n      this.words[s] |= q;\n      return this;\n    }\n\n    // Add bit and propagate, if needed\n    var carry = q;\n    for (var i = s; carry !== 0 && i < this.length; i++) {\n      var w = this.words[i] | 0;\n      w += carry;\n      carry = w >>> 26;\n      w &= 0x3ffffff;\n      this.words[i] = w;\n    }\n    if (carry !== 0) {\n      this.words[i] = carry;\n      this.length++;\n    }\n    return this;\n  };\n\n  BN.prototype.isZero = function isZero () {\n    return this.length === 1 && this.words[0] === 0;\n  };\n\n  BN.prototype.cmpn = function cmpn (num) {\n    var negative = num < 0;\n\n    if (this.negative !== 0 && !negative) return -1;\n    if (this.negative === 0 && negative) return 1;\n\n    this.strip();\n\n    var res;\n    if (this.length > 1) {\n      res = 1;\n    } else {\n      if (negative) {\n        num = -num;\n      }\n\n      assert(num <= 0x3ffffff, 'Number is too big');\n\n      var w = this.words[0] | 0;\n      res = w === num ? 0 : w < num ? -1 : 1;\n    }\n    if (this.negative !== 0) return -res | 0;\n    return res;\n  };\n\n  // Compare two numbers and return:\n  // 1 - if `this` > `num`\n  // 0 - if `this` == `num`\n  // -1 - if `this` < `num`\n  BN.prototype.cmp = function cmp (num) {\n    if (this.negative !== 0 && num.negative === 0) return -1;\n    if (this.negative === 0 && num.negative !== 0) return 1;\n\n    var res = this.ucmp(num);\n    if (this.negative !== 0) return -res | 0;\n    return res;\n  };\n\n  // Unsigned comparison\n  BN.prototype.ucmp = function ucmp (num) {\n    // At this point both numbers have the same sign\n    if (this.length > num.length) return 1;\n    if (this.length < num.length) return -1;\n\n    var res = 0;\n    for (var i = this.length - 1; i >= 0; i--) {\n      var a = this.words[i] | 0;\n      var b = num.words[i] | 0;\n\n      if (a === b) continue;\n      if (a < b) {\n        res = -1;\n      } else if (a > b) {\n        res = 1;\n      }\n      break;\n    }\n    return res;\n  };\n\n  BN.prototype.gtn = function gtn (num) {\n    return this.cmpn(num) === 1;\n  };\n\n  BN.prototype.gt = function gt (num) {\n    return this.cmp(num) === 1;\n  };\n\n  BN.prototype.gten = function gten (num) {\n    return this.cmpn(num) >= 0;\n  };\n\n  BN.prototype.gte = function gte (num) {\n    return this.cmp(num) >= 0;\n  };\n\n  BN.prototype.ltn = function ltn (num) {\n    return this.cmpn(num) === -1;\n  };\n\n  BN.prototype.lt = function lt (num) {\n    return this.cmp(num) === -1;\n  };\n\n  BN.prototype.lten = function lten (num) {\n    return this.cmpn(num) <= 0;\n  };\n\n  BN.prototype.lte = function lte (num) {\n    return this.cmp(num) <= 0;\n  };\n\n  BN.prototype.eqn = function eqn (num) {\n    return this.cmpn(num) === 0;\n  };\n\n  BN.prototype.eq = function eq (num) {\n    return this.cmp(num) === 0;\n  };\n\n  //\n  // A reduce context, could be using montgomery or something better, depending\n  // on the `m` itself.\n  //\n  BN.red = function red (num) {\n    return new Red(num);\n  };\n\n  BN.prototype.toRed = function toRed (ctx) {\n    assert(!this.red, 'Already a number in reduction context');\n    assert(this.negative === 0, 'red works only with positives');\n    return ctx.convertTo(this)._forceRed(ctx);\n  };\n\n  BN.prototype.fromRed = function fromRed () {\n    assert(this.red, 'fromRed works only with numbers in reduction context');\n    return this.red.convertFrom(this);\n  };\n\n  BN.prototype._forceRed = function _forceRed (ctx) {\n    this.red = ctx;\n    return this;\n  };\n\n  BN.prototype.forceRed = function forceRed (ctx) {\n    assert(!this.red, 'Already a number in reduction context');\n    return this._forceRed(ctx);\n  };\n\n  BN.prototype.redAdd = function redAdd (num) {\n    assert(this.red, 'redAdd works only with red numbers');\n    return this.red.add(this, num);\n  };\n\n  BN.prototype.redIAdd = function redIAdd (num) {\n    assert(this.red, 'redIAdd works only with red numbers');\n    return this.red.iadd(this, num);\n  };\n\n  BN.prototype.redSub = function redSub (num) {\n    assert(this.red, 'redSub works only with red numbers');\n    return this.red.sub(this, num);\n  };\n\n  BN.prototype.redISub = function redISub (num) {\n    assert(this.red, 'redISub works only with red numbers');\n    return this.red.isub(this, num);\n  };\n\n  BN.prototype.redShl = function redShl (num) {\n    assert(this.red, 'redShl works only with red numbers');\n    return this.red.shl(this, num);\n  };\n\n  BN.prototype.redMul = function redMul (num) {\n    assert(this.red, 'redMul works only with red numbers');\n    this.red._verify2(this, num);\n    return this.red.mul(this, num);\n  };\n\n  BN.prototype.redIMul = function redIMul (num) {\n    assert(this.red, 'redMul works only with red numbers');\n    this.red._verify2(this, num);\n    return this.red.imul(this, num);\n  };\n\n  BN.prototype.redSqr = function redSqr () {\n    assert(this.red, 'redSqr works only with red numbers');\n    this.red._verify1(this);\n    return this.red.sqr(this);\n  };\n\n  BN.prototype.redISqr = function redISqr () {\n    assert(this.red, 'redISqr works only with red numbers');\n    this.red._verify1(this);\n    return this.red.isqr(this);\n  };\n\n  // Square root over p\n  BN.prototype.redSqrt = function redSqrt () {\n    assert(this.red, 'redSqrt works only with red numbers');\n    this.red._verify1(this);\n    return this.red.sqrt(this);\n  };\n\n  BN.prototype.redInvm = function redInvm () {\n    assert(this.red, 'redInvm works only with red numbers');\n    this.red._verify1(this);\n    return this.red.invm(this);\n  };\n\n  // Return negative clone of `this` % `red modulo`\n  BN.prototype.redNeg = function redNeg () {\n    assert(this.red, 'redNeg works only with red numbers');\n    this.red._verify1(this);\n    return this.red.neg(this);\n  };\n\n  BN.prototype.redPow = function redPow (num) {\n    assert(this.red && !num.red, 'redPow(normalNum)');\n    this.red._verify1(this);\n    return this.red.pow(this, num);\n  };\n\n  // Prime numbers with efficient reduction\n  var primes = {\n    k256: null,\n    p224: null,\n    p192: null,\n    p25519: null\n  };\n\n  // Pseudo-Mersenne prime\n  function MPrime (name, p) {\n    // P = 2 ^ N - K\n    this.name = name;\n    this.p = new BN(p, 16);\n    this.n = this.p.bitLength();\n    this.k = new BN(1).iushln(this.n).isub(this.p);\n\n    this.tmp = this._tmp();\n  }\n\n  MPrime.prototype._tmp = function _tmp () {\n    var tmp = new BN(null);\n    tmp.words = new Array(Math.ceil(this.n / 13));\n    return tmp;\n  };\n\n  MPrime.prototype.ireduce = function ireduce (num) {\n    // Assumes that `num` is less than `P^2`\n    // num = HI * (2 ^ N - K) + HI * K + LO = HI * K + LO (mod P)\n    var r = num;\n    var rlen;\n\n    do {\n      this.split(r, this.tmp);\n      r = this.imulK(r);\n      r = r.iadd(this.tmp);\n      rlen = r.bitLength();\n    } while (rlen > this.n);\n\n    var cmp = rlen < this.n ? -1 : r.ucmp(this.p);\n    if (cmp === 0) {\n      r.words[0] = 0;\n      r.length = 1;\n    } else if (cmp > 0) {\n      r.isub(this.p);\n    } else {\n      if (r.strip !== undefined) {\n        // r is BN v4 instance\n        r.strip();\n      } else {\n        // r is BN v5 instance\n        r._strip();\n      }\n    }\n\n    return r;\n  };\n\n  MPrime.prototype.split = function split (input, out) {\n    input.iushrn(this.n, 0, out);\n  };\n\n  MPrime.prototype.imulK = function imulK (num) {\n    return num.imul(this.k);\n  };\n\n  function K256 () {\n    MPrime.call(\n      this,\n      'k256',\n      'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f');\n  }\n  inherits(K256, MPrime);\n\n  K256.prototype.split = function split (input, output) {\n    // 256 = 9 * 26 + 22\n    var mask = 0x3fffff;\n\n    var outLen = Math.min(input.length, 9);\n    for (var i = 0; i < outLen; i++) {\n      output.words[i] = input.words[i];\n    }\n    output.length = outLen;\n\n    if (input.length <= 9) {\n      input.words[0] = 0;\n      input.length = 1;\n      return;\n    }\n\n    // Shift by 9 limbs\n    var prev = input.words[9];\n    output.words[output.length++] = prev & mask;\n\n    for (i = 10; i < input.length; i++) {\n      var next = input.words[i] | 0;\n      input.words[i - 10] = ((next & mask) << 4) | (prev >>> 22);\n      prev = next;\n    }\n    prev >>>= 22;\n    input.words[i - 10] = prev;\n    if (prev === 0 && input.length > 10) {\n      input.length -= 10;\n    } else {\n      input.length -= 9;\n    }\n  };\n\n  K256.prototype.imulK = function imulK (num) {\n    // K = 0x1000003d1 = [ 0x40, 0x3d1 ]\n    num.words[num.length] = 0;\n    num.words[num.length + 1] = 0;\n    num.length += 2;\n\n    // bounded at: 0x40 * 0x3ffffff + 0x3d0 = 0x100000390\n    var lo = 0;\n    for (var i = 0; i < num.length; i++) {\n      var w = num.words[i] | 0;\n      lo += w * 0x3d1;\n      num.words[i] = lo & 0x3ffffff;\n      lo = w * 0x40 + ((lo / 0x4000000) | 0);\n    }\n\n    // Fast length reduction\n    if (num.words[num.length - 1] === 0) {\n      num.length--;\n      if (num.words[num.length - 1] === 0) {\n        num.length--;\n      }\n    }\n    return num;\n  };\n\n  function P224 () {\n    MPrime.call(\n      this,\n      'p224',\n      'ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001');\n  }\n  inherits(P224, MPrime);\n\n  function P192 () {\n    MPrime.call(\n      this,\n      'p192',\n      'ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff');\n  }\n  inherits(P192, MPrime);\n\n  function P25519 () {\n    // 2 ^ 255 - 19\n    MPrime.call(\n      this,\n      '25519',\n      '7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed');\n  }\n  inherits(P25519, MPrime);\n\n  P25519.prototype.imulK = function imulK (num) {\n    // K = 0x13\n    var carry = 0;\n    for (var i = 0; i < num.length; i++) {\n      var hi = (num.words[i] | 0) * 0x13 + carry;\n      var lo = hi & 0x3ffffff;\n      hi >>>= 26;\n\n      num.words[i] = lo;\n      carry = hi;\n    }\n    if (carry !== 0) {\n      num.words[num.length++] = carry;\n    }\n    return num;\n  };\n\n  // Exported mostly for testing purposes, use plain name instead\n  BN._prime = function prime (name) {\n    // Cached version of prime\n    if (primes[name]) return primes[name];\n\n    var prime;\n    if (name === 'k256') {\n      prime = new K256();\n    } else if (name === 'p224') {\n      prime = new P224();\n    } else if (name === 'p192') {\n      prime = new P192();\n    } else if (name === 'p25519') {\n      prime = new P25519();\n    } else {\n      throw new Error('Unknown prime ' + name);\n    }\n    primes[name] = prime;\n\n    return prime;\n  };\n\n  //\n  // Base reduction engine\n  //\n  function Red (m) {\n    if (typeof m === 'string') {\n      var prime = BN._prime(m);\n      this.m = prime.p;\n      this.prime = prime;\n    } else {\n      assert(m.gtn(1), 'modulus must be greater than 1');\n      this.m = m;\n      this.prime = null;\n    }\n  }\n\n  Red.prototype._verify1 = function _verify1 (a) {\n    assert(a.negative === 0, 'red works only with positives');\n    assert(a.red, 'red works only with red numbers');\n  };\n\n  Red.prototype._verify2 = function _verify2 (a, b) {\n    assert((a.negative | b.negative) === 0, 'red works only with positives');\n    assert(a.red && a.red === b.red,\n      'red works only with red numbers');\n  };\n\n  Red.prototype.imod = function imod (a) {\n    if (this.prime) return this.prime.ireduce(a)._forceRed(this);\n    return a.umod(this.m)._forceRed(this);\n  };\n\n  Red.prototype.neg = function neg (a) {\n    if (a.isZero()) {\n      return a.clone();\n    }\n\n    return this.m.sub(a)._forceRed(this);\n  };\n\n  Red.prototype.add = function add (a, b) {\n    this._verify2(a, b);\n\n    var res = a.add(b);\n    if (res.cmp(this.m) >= 0) {\n      res.isub(this.m);\n    }\n    return res._forceRed(this);\n  };\n\n  Red.prototype.iadd = function iadd (a, b) {\n    this._verify2(a, b);\n\n    var res = a.iadd(b);\n    if (res.cmp(this.m) >= 0) {\n      res.isub(this.m);\n    }\n    return res;\n  };\n\n  Red.prototype.sub = function sub (a, b) {\n    this._verify2(a, b);\n\n    var res = a.sub(b);\n    if (res.cmpn(0) < 0) {\n      res.iadd(this.m);\n    }\n    return res._forceRed(this);\n  };\n\n  Red.prototype.isub = function isub (a, b) {\n    this._verify2(a, b);\n\n    var res = a.isub(b);\n    if (res.cmpn(0) < 0) {\n      res.iadd(this.m);\n    }\n    return res;\n  };\n\n  Red.prototype.shl = function shl (a, num) {\n    this._verify1(a);\n    return this.imod(a.ushln(num));\n  };\n\n  Red.prototype.imul = function imul (a, b) {\n    this._verify2(a, b);\n    return this.imod(a.imul(b));\n  };\n\n  Red.prototype.mul = function mul (a, b) {\n    this._verify2(a, b);\n    return this.imod(a.mul(b));\n  };\n\n  Red.prototype.isqr = function isqr (a) {\n    return this.imul(a, a.clone());\n  };\n\n  Red.prototype.sqr = function sqr (a) {\n    return this.mul(a, a);\n  };\n\n  Red.prototype.sqrt = function sqrt (a) {\n    if (a.isZero()) return a.clone();\n\n    var mod3 = this.m.andln(3);\n    assert(mod3 % 2 === 1);\n\n    // Fast case\n    if (mod3 === 3) {\n      var pow = this.m.add(new BN(1)).iushrn(2);\n      return this.pow(a, pow);\n    }\n\n    // Tonelli-Shanks algorithm (Totally unoptimized and slow)\n    //\n    // Find Q and S, that Q * 2 ^ S = (P - 1)\n    var q = this.m.subn(1);\n    var s = 0;\n    while (!q.isZero() && q.andln(1) === 0) {\n      s++;\n      q.iushrn(1);\n    }\n    assert(!q.isZero());\n\n    var one = new BN(1).toRed(this);\n    var nOne = one.redNeg();\n\n    // Find quadratic non-residue\n    // NOTE: Max is such because of generalized Riemann hypothesis.\n    var lpow = this.m.subn(1).iushrn(1);\n    var z = this.m.bitLength();\n    z = new BN(2 * z * z).toRed(this);\n\n    while (this.pow(z, lpow).cmp(nOne) !== 0) {\n      z.redIAdd(nOne);\n    }\n\n    var c = this.pow(z, q);\n    var r = this.pow(a, q.addn(1).iushrn(1));\n    var t = this.pow(a, q);\n    var m = s;\n    while (t.cmp(one) !== 0) {\n      var tmp = t;\n      for (var i = 0; tmp.cmp(one) !== 0; i++) {\n        tmp = tmp.redSqr();\n      }\n      assert(i < m);\n      var b = this.pow(c, new BN(1).iushln(m - i - 1));\n\n      r = r.redMul(b);\n      c = b.redSqr();\n      t = t.redMul(c);\n      m = i;\n    }\n\n    return r;\n  };\n\n  Red.prototype.invm = function invm (a) {\n    var inv = a._invmp(this.m);\n    if (inv.negative !== 0) {\n      inv.negative = 0;\n      return this.imod(inv).redNeg();\n    } else {\n      return this.imod(inv);\n    }\n  };\n\n  Red.prototype.pow = function pow (a, num) {\n    if (num.isZero()) return new BN(1).toRed(this);\n    if (num.cmpn(1) === 0) return a.clone();\n\n    var windowSize = 4;\n    var wnd = new Array(1 << windowSize);\n    wnd[0] = new BN(1).toRed(this);\n    wnd[1] = a;\n    for (var i = 2; i < wnd.length; i++) {\n      wnd[i] = this.mul(wnd[i - 1], a);\n    }\n\n    var res = wnd[0];\n    var current = 0;\n    var currentLen = 0;\n    var start = num.bitLength() % 26;\n    if (start === 0) {\n      start = 26;\n    }\n\n    for (i = num.length - 1; i >= 0; i--) {\n      var word = num.words[i];\n      for (var j = start - 1; j >= 0; j--) {\n        var bit = (word >> j) & 1;\n        if (res !== wnd[0]) {\n          res = this.sqr(res);\n        }\n\n        if (bit === 0 && current === 0) {\n          currentLen = 0;\n          continue;\n        }\n\n        current <<= 1;\n        current |= bit;\n        currentLen++;\n        if (currentLen !== windowSize && (i !== 0 || j !== 0)) continue;\n\n        res = this.mul(res, wnd[current]);\n        currentLen = 0;\n        current = 0;\n      }\n      start = 26;\n    }\n\n    return res;\n  };\n\n  Red.prototype.convertTo = function convertTo (num) {\n    var r = num.umod(this.m);\n\n    return r === num ? r.clone() : r;\n  };\n\n  Red.prototype.convertFrom = function convertFrom (num) {\n    var res = num.clone();\n    res.red = null;\n    return res;\n  };\n\n  //\n  // Montgomery method engine\n  //\n\n  BN.mont = function mont (num) {\n    return new Mont(num);\n  };\n\n  function Mont (m) {\n    Red.call(this, m);\n\n    this.shift = this.m.bitLength();\n    if (this.shift % 26 !== 0) {\n      this.shift += 26 - (this.shift % 26);\n    }\n\n    this.r = new BN(1).iushln(this.shift);\n    this.r2 = this.imod(this.r.sqr());\n    this.rinv = this.r._invmp(this.m);\n\n    this.minv = this.rinv.mul(this.r).isubn(1).div(this.m);\n    this.minv = this.minv.umod(this.r);\n    this.minv = this.r.sub(this.minv);\n  }\n  inherits(Mont, Red);\n\n  Mont.prototype.convertTo = function convertTo (num) {\n    return this.imod(num.ushln(this.shift));\n  };\n\n  Mont.prototype.convertFrom = function convertFrom (num) {\n    var r = this.imod(num.mul(this.rinv));\n    r.red = null;\n    return r;\n  };\n\n  Mont.prototype.imul = function imul (a, b) {\n    if (a.isZero() || b.isZero()) {\n      a.words[0] = 0;\n      a.length = 1;\n      return a;\n    }\n\n    var t = a.imul(b);\n    var c = t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);\n    var u = t.isub(c).iushrn(this.shift);\n    var res = u;\n\n    if (u.cmp(this.m) >= 0) {\n      res = u.isub(this.m);\n    } else if (u.cmpn(0) < 0) {\n      res = u.iadd(this.m);\n    }\n\n    return res._forceRed(this);\n  };\n\n  Mont.prototype.mul = function mul (a, b) {\n    if (a.isZero() || b.isZero()) return new BN(0)._forceRed(this);\n\n    var t = a.mul(b);\n    var c = t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);\n    var u = t.isub(c).iushrn(this.shift);\n    var res = u;\n    if (u.cmp(this.m) >= 0) {\n      res = u.isub(this.m);\n    } else if (u.cmpn(0) < 0) {\n      res = u.iadd(this.m);\n    }\n\n    return res._forceRed(this);\n  };\n\n  Mont.prototype.invm = function invm (a) {\n    // (AR)^-1 * R^2 = (A^-1 * R^-1) * R^2 = A^-1 * R\n    var res = this.imod(a._invmp(this.m).mul(this.r2));\n    return res._forceRed(this);\n  };\n})(typeof module === 'undefined' || module, this);\n","const createHmac = require('create-hmac')\n\nconst ONE1 = Buffer.alloc(1, 1)\nconst ZERO1 = Buffer.alloc(1, 0)\n\n// https://tools.ietf.org/html/rfc6979#section-3.2\nfunction deterministicGenerateK (hash, x, checkSig, isPrivate, extraEntropy) {\n  // Step A, ignored as hash already provided\n  // Step B\n  // Step C\n  let k = Buffer.alloc(32, 0)\n  let v = Buffer.alloc(32, 1)\n\n  // Step D\n  k = createHmac('sha256', k)\n    .update(v)\n    .update(ZERO1)\n    .update(x)\n    .update(hash)\n    .update(extraEntropy || '')\n    .digest()\n\n  // Step E\n  v = createHmac('sha256', k).update(v).digest()\n\n  // Step F\n  k = createHmac('sha256', k)\n    .update(v)\n    .update(ONE1)\n    .update(x)\n    .update(hash)\n    .update(extraEntropy || '')\n    .digest()\n\n  // Step G\n  v = createHmac('sha256', k).update(v).digest()\n\n  // Step H1/H2a, ignored as tlen === qlen (256 bit)\n  // Step H2b\n  v = createHmac('sha256', k).update(v).digest()\n\n  let T = v\n\n  // Step H3, repeat until T is within the interval [1, n - 1] and is suitable for ECDSA\n  while (!isPrivate(T) || !checkSig(T)) {\n    k = createHmac('sha256', k)\n      .update(v)\n      .update(ZERO1)\n      .digest()\n\n    v = createHmac('sha256', k).update(v).digest()\n\n    // Step H1/H2a, again, ignored as tlen === qlen (256 bit)\n    // Step H2b again\n    v = createHmac('sha256', k).update(v).digest()\n    T = v\n  }\n\n  return T\n}\n\nmodule.exports = deterministicGenerateK\n","var NATIVE = require('./native')\nvar ERRORS = require('./errors')\n\nfunction _Buffer (value) {\n  return Buffer.isBuffer(value)\n}\n\nfunction Hex (value) {\n  return typeof value === 'string' && /^([0-9a-f]{2})+$/i.test(value)\n}\n\nfunction _LengthN (type, length) {\n  var name = type.toJSON()\n\n  function Length (value) {\n    if (!type(value)) return false\n    if (value.length === length) return true\n\n    throw ERRORS.tfCustomError(name + '(Length: ' + length + ')', name + '(Length: ' + value.length + ')')\n  }\n  Length.toJSON = function () { return name }\n\n  return Length\n}\n\nvar _ArrayN = _LengthN.bind(null, NATIVE.Array)\nvar _BufferN = _LengthN.bind(null, _Buffer)\nvar _HexN = _LengthN.bind(null, Hex)\nvar _StringN = _LengthN.bind(null, NATIVE.String)\n\nfunction Range (a, b, f) {\n  f = f || NATIVE.Number\n  function _range (value, strict) {\n    return f(value, strict) && (value > a) && (value < b)\n  }\n  _range.toJSON = function () {\n    return `${f.toJSON()} between [${a}, ${b}]`\n  }\n  return _range\n}\n\nvar INT53_MAX = Math.pow(2, 53) - 1\n\nfunction Finite (value) {\n  return typeof value === 'number' && isFinite(value)\n}\nfunction Int8 (value) { return ((value << 24) >> 24) === value }\nfunction Int16 (value) { return ((value << 16) >> 16) === value }\nfunction Int32 (value) { return (value | 0) === value }\nfunction Int53 (value) {\n  return typeof value === 'number' &&\n    value >= -INT53_MAX &&\n    value <= INT53_MAX &&\n    Math.floor(value) === value\n}\nfunction UInt8 (value) { return (value & 0xff) === value }\nfunction UInt16 (value) { return (value & 0xffff) === value }\nfunction UInt32 (value) { return (value >>> 0) === value }\nfunction UInt53 (value) {\n  return typeof value === 'number' &&\n    value >= 0 &&\n    value <= INT53_MAX &&\n    Math.floor(value) === value\n}\n\nvar types = {\n  ArrayN: _ArrayN,\n  Buffer: _Buffer,\n  BufferN: _BufferN,\n  Finite: Finite,\n  Hex: Hex,\n  HexN: _HexN,\n  Int8: Int8,\n  Int16: Int16,\n  Int32: Int32,\n  Int53: Int53,\n  Range: Range,\n  StringN: _StringN,\n  UInt8: UInt8,\n  UInt16: UInt16,\n  UInt32: UInt32,\n  UInt53: UInt53\n}\n\nfor (var typeName in types) {\n  types[typeName].toJSON = function (t) {\n    return t\n  }.bind(null, typeName)\n}\n\nmodule.exports = types\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst networks_1 = require('../networks');\nconst bscript = require('../script');\nconst lazy = require('./lazy');\nconst typef = require('typeforce');\nconst OPS = bscript.OPS;\nfunction stacksEqual(a, b) {\n  if (a.length !== b.length) return false;\n  return a.every((x, i) => {\n    return x.equals(b[i]);\n  });\n}\n// output: OP_RETURN ...\nfunction p2data(a, opts) {\n  if (!a.data && !a.output) throw new TypeError('Not enough data');\n  opts = Object.assign({ validate: true }, opts || {});\n  typef(\n    {\n      network: typef.maybe(typef.Object),\n      output: typef.maybe(typef.Buffer),\n      data: typef.maybe(typef.arrayOf(typef.Buffer)),\n    },\n    a,\n  );\n  const network = a.network || networks_1.bitcoin;\n  const o = { name: 'embed', network };\n  lazy.prop(o, 'output', () => {\n    if (!a.data) return;\n    return bscript.compile([OPS.OP_RETURN].concat(a.data));\n  });\n  lazy.prop(o, 'data', () => {\n    if (!a.output) return;\n    return bscript.decompile(a.output).slice(1);\n  });\n  // extended validation\n  if (opts.validate) {\n    if (a.output) {\n      const chunks = bscript.decompile(a.output);\n      if (chunks[0] !== OPS.OP_RETURN) throw new TypeError('Output is invalid');\n      if (!chunks.slice(1).every(typef.Buffer))\n        throw new TypeError('Output is invalid');\n      if (a.data && !stacksEqual(a.data, o.data))\n        throw new TypeError('Data mismatch');\n    }\n  }\n  return Object.assign(o, a);\n}\nexports.p2data = p2data;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nfunction decode(buffer, maxLength, minimal) {\n  maxLength = maxLength || 4;\n  minimal = minimal === undefined ? true : minimal;\n  const length = buffer.length;\n  if (length === 0) return 0;\n  if (length > maxLength) throw new TypeError('Script number overflow');\n  if (minimal) {\n    if ((buffer[length - 1] & 0x7f) === 0) {\n      if (length <= 1 || (buffer[length - 2] & 0x80) === 0)\n        throw new Error('Non-minimally encoded script number');\n    }\n  }\n  // 40-bit\n  if (length === 5) {\n    const a = buffer.readUInt32LE(0);\n    const b = buffer.readUInt8(4);\n    if (b & 0x80) return -((b & ~0x80) * 0x100000000 + a);\n    return b * 0x100000000 + a;\n  }\n  // 32-bit / 24-bit / 16-bit / 8-bit\n  let result = 0;\n  for (let i = 0; i < length; ++i) {\n    result |= buffer[i] << (8 * i);\n  }\n  if (buffer[length - 1] & 0x80)\n    return -(result & ~(0x80 << (8 * (length - 1))));\n  return result;\n}\nexports.decode = decode;\nfunction scriptNumSize(i) {\n  return i > 0x7fffffff\n    ? 5\n    : i > 0x7fffff\n    ? 4\n    : i > 0x7fff\n    ? 3\n    : i > 0x7f\n    ? 2\n    : i > 0x00\n    ? 1\n    : 0;\n}\nfunction encode(_number) {\n  let value = Math.abs(_number);\n  const size = scriptNumSize(value);\n  const buffer = Buffer.allocUnsafe(size);\n  const negative = _number < 0;\n  for (let i = 0; i < size; ++i) {\n    buffer.writeUInt8(value & 0xff, i);\n    value >>= 8;\n  }\n  if (buffer[size - 1] & 0x80) {\n    buffer.writeUInt8(negative ? 0x80 : 0x00, size - 1);\n  } else if (negative) {\n    buffer[size - 1] |= 0x80;\n  }\n  return buffer;\n}\nexports.encode = encode;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst types = require('./types');\nconst bip66 = require('bip66');\nconst typeforce = require('typeforce');\nconst ZERO = Buffer.alloc(1, 0);\nfunction toDER(x) {\n  let i = 0;\n  while (x[i] === 0) ++i;\n  if (i === x.length) return ZERO;\n  x = x.slice(i);\n  if (x[0] & 0x80) return Buffer.concat([ZERO, x], 1 + x.length);\n  return x;\n}\nfunction fromDER(x) {\n  if (x[0] === 0x00) x = x.slice(1);\n  const buffer = Buffer.alloc(32, 0);\n  const bstart = Math.max(0, 32 - x.length);\n  x.copy(buffer, bstart);\n  return buffer;\n}\n// BIP62: 1 byte hashType flag (only 0x01, 0x02, 0x03, 0x81, 0x82 and 0x83 are allowed)\nfunction decode(buffer) {\n  const hashType = buffer.readUInt8(buffer.length - 1);\n  const hashTypeMod = hashType & ~0x80;\n  if (hashTypeMod <= 0 || hashTypeMod >= 4)\n    throw new Error('Invalid hashType ' + hashType);\n  const decoded = bip66.decode(buffer.slice(0, -1));\n  const r = fromDER(decoded.r);\n  const s = fromDER(decoded.s);\n  const signature = Buffer.concat([r, s], 64);\n  return { signature, hashType };\n}\nexports.decode = decode;\nfunction encode(signature, hashType) {\n  typeforce(\n    {\n      signature: types.BufferN(64),\n      hashType: types.UInt8,\n    },\n    { signature, hashType },\n  );\n  const hashTypeMod = hashType & ~0x80;\n  if (hashTypeMod <= 0 || hashTypeMod >= 4)\n    throw new Error('Invalid hashType ' + hashType);\n  const hashTypeBuffer = Buffer.allocUnsafe(1);\n  hashTypeBuffer.writeUInt8(hashType, 0);\n  const r = toDER(signature.slice(0, 32));\n  const s = toDER(signature.slice(32, 64));\n  return Buffer.concat([bip66.encode(r, s), hashTypeBuffer]);\n}\nexports.encode = encode;\n","var OPS = require('bitcoin-ops')\n\nfunction encodingLength (i) {\n  return i < OPS.OP_PUSHDATA1 ? 1\n  : i <= 0xff ? 2\n  : i <= 0xffff ? 3\n  : 5\n}\n\nfunction encode (buffer, number, offset) {\n  var size = encodingLength(number)\n\n  // ~6 bit\n  if (size === 1) {\n    buffer.writeUInt8(number, offset)\n\n  // 8 bit\n  } else if (size === 2) {\n    buffer.writeUInt8(OPS.OP_PUSHDATA1, offset)\n    buffer.writeUInt8(number, offset + 1)\n\n  // 16 bit\n  } else if (size === 3) {\n    buffer.writeUInt8(OPS.OP_PUSHDATA2, offset)\n    buffer.writeUInt16LE(number, offset + 1)\n\n  // 32 bit\n  } else {\n    buffer.writeUInt8(OPS.OP_PUSHDATA4, offset)\n    buffer.writeUInt32LE(number, offset + 1)\n  }\n\n  return size\n}\n\nfunction decode (buffer, offset) {\n  var opcode = buffer.readUInt8(offset)\n  var number, size\n\n  // ~6 bit\n  if (opcode < OPS.OP_PUSHDATA1) {\n    number = opcode\n    size = 1\n\n  // 8 bit\n  } else if (opcode === OPS.OP_PUSHDATA1) {\n    if (offset + 2 > buffer.length) return null\n    number = buffer.readUInt8(offset + 1)\n    size = 2\n\n  // 16 bit\n  } else if (opcode === OPS.OP_PUSHDATA2) {\n    if (offset + 3 > buffer.length) return null\n    number = buffer.readUInt16LE(offset + 1)\n    size = 3\n\n  // 32 bit\n  } else {\n    if (offset + 5 > buffer.length) return null\n    if (opcode !== OPS.OP_PUSHDATA4) throw new Error('Unexpected opcode')\n\n    number = buffer.readUInt32LE(offset + 1)\n    size = 5\n  }\n\n  return {\n    opcode: opcode,\n    number: number,\n    size: size\n  }\n}\n\nmodule.exports = {\n  encodingLength: encodingLength,\n  encode: encode,\n  decode: decode\n}\n","var OPS = require('./index.json')\n\nvar map = {}\nfor (var op in OPS) {\n  var code = OPS[op]\n  map[code] = op\n}\n\nmodule.exports = map\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst networks_1 = require('../networks');\nconst bscript = require('../script');\nconst lazy = require('./lazy');\nconst OPS = bscript.OPS;\nconst typef = require('typeforce');\nconst ecc = require('tiny-secp256k1');\nconst OP_INT_BASE = OPS.OP_RESERVED; // OP_1 - 1\nfunction stacksEqual(a, b) {\n  if (a.length !== b.length) return false;\n  return a.every((x, i) => {\n    return x.equals(b[i]);\n  });\n}\n// input: OP_0 [signatures ...]\n// output: m [pubKeys ...] n OP_CHECKMULTISIG\nfunction p2ms(a, opts) {\n  if (\n    !a.input &&\n    !a.output &&\n    !(a.pubkeys && a.m !== undefined) &&\n    !a.signatures\n  )\n    throw new TypeError('Not enough data');\n  opts = Object.assign({ validate: true }, opts || {});\n  function isAcceptableSignature(x) {\n    return (\n      bscript.isCanonicalScriptSignature(x) ||\n      (opts.allowIncomplete && x === OPS.OP_0) !== undefined\n    );\n  }\n  typef(\n    {\n      network: typef.maybe(typef.Object),\n      m: typef.maybe(typef.Number),\n      n: typef.maybe(typef.Number),\n      output: typef.maybe(typef.Buffer),\n      pubkeys: typef.maybe(typef.arrayOf(ecc.isPoint)),\n      signatures: typef.maybe(typef.arrayOf(isAcceptableSignature)),\n      input: typef.maybe(typef.Buffer),\n    },\n    a,\n  );\n  const network = a.network || networks_1.bitcoin;\n  const o = { network };\n  let chunks = [];\n  let decoded = false;\n  function decode(output) {\n    if (decoded) return;\n    decoded = true;\n    chunks = bscript.decompile(output);\n    o.m = chunks[0] - OP_INT_BASE;\n    o.n = chunks[chunks.length - 2] - OP_INT_BASE;\n    o.pubkeys = chunks.slice(1, -2);\n  }\n  lazy.prop(o, 'output', () => {\n    if (!a.m) return;\n    if (!o.n) return;\n    if (!a.pubkeys) return;\n    return bscript.compile(\n      [].concat(\n        OP_INT_BASE + a.m,\n        a.pubkeys,\n        OP_INT_BASE + o.n,\n        OPS.OP_CHECKMULTISIG,\n      ),\n    );\n  });\n  lazy.prop(o, 'm', () => {\n    if (!o.output) return;\n    decode(o.output);\n    return o.m;\n  });\n  lazy.prop(o, 'n', () => {\n    if (!o.pubkeys) return;\n    return o.pubkeys.length;\n  });\n  lazy.prop(o, 'pubkeys', () => {\n    if (!a.output) return;\n    decode(a.output);\n    return o.pubkeys;\n  });\n  lazy.prop(o, 'signatures', () => {\n    if (!a.input) return;\n    return bscript.decompile(a.input).slice(1);\n  });\n  lazy.prop(o, 'input', () => {\n    if (!a.signatures) return;\n    return bscript.compile([OPS.OP_0].concat(a.signatures));\n  });\n  lazy.prop(o, 'witness', () => {\n    if (!o.input) return;\n    return [];\n  });\n  lazy.prop(o, 'name', () => {\n    if (!o.m || !o.n) return;\n    return `p2ms(${o.m} of ${o.n})`;\n  });\n  // extended validation\n  if (opts.validate) {\n    if (a.output) {\n      decode(a.output);\n      if (!typef.Number(chunks[0])) throw new TypeError('Output is invalid');\n      if (!typef.Number(chunks[chunks.length - 2]))\n        throw new TypeError('Output is invalid');\n      if (chunks[chunks.length - 1] !== OPS.OP_CHECKMULTISIG)\n        throw new TypeError('Output is invalid');\n      if (o.m <= 0 || o.n > 16 || o.m > o.n || o.n !== chunks.length - 3)\n        throw new TypeError('Output is invalid');\n      if (!o.pubkeys.every(x => ecc.isPoint(x)))\n        throw new TypeError('Output is invalid');\n      if (a.m !== undefined && a.m !== o.m) throw new TypeError('m mismatch');\n      if (a.n !== undefined && a.n !== o.n) throw new TypeError('n mismatch');\n      if (a.pubkeys && !stacksEqual(a.pubkeys, o.pubkeys))\n        throw new TypeError('Pubkeys mismatch');\n    }\n    if (a.pubkeys) {\n      if (a.n !== undefined && a.n !== a.pubkeys.length)\n        throw new TypeError('Pubkey count mismatch');\n      o.n = a.pubkeys.length;\n      if (o.n < o.m) throw new TypeError('Pubkey count cannot be less than m');\n    }\n    if (a.signatures) {\n      if (a.signatures.length < o.m)\n        throw new TypeError('Not enough signatures provided');\n      if (a.signatures.length > o.m)\n        throw new TypeError('Too many signatures provided');\n    }\n    if (a.input) {\n      if (a.input[0] !== OPS.OP_0) throw new TypeError('Input is invalid');\n      if (\n        o.signatures.length === 0 ||\n        !o.signatures.every(isAcceptableSignature)\n      )\n        throw new TypeError('Input has invalid signature(s)');\n      if (a.signatures && !stacksEqual(a.signatures, o.signatures))\n        throw new TypeError('Signature mismatch');\n      if (a.m !== undefined && a.m !== a.signatures.length)\n        throw new TypeError('Signature count mismatch');\n    }\n  }\n  return Object.assign(o, a);\n}\nexports.p2ms = p2ms;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst networks_1 = require('../networks');\nconst bscript = require('../script');\nconst lazy = require('./lazy');\nconst typef = require('typeforce');\nconst OPS = bscript.OPS;\nconst ecc = require('tiny-secp256k1');\n// input: {signature}\n// output: {pubKey} OP_CHECKSIG\nfunction p2pk(a, opts) {\n  if (!a.input && !a.output && !a.pubkey && !a.input && !a.signature)\n    throw new TypeError('Not enough data');\n  opts = Object.assign({ validate: true }, opts || {});\n  typef(\n    {\n      network: typef.maybe(typef.Object),\n      output: typef.maybe(typef.Buffer),\n      pubkey: typef.maybe(ecc.isPoint),\n      signature: typef.maybe(bscript.isCanonicalScriptSignature),\n      input: typef.maybe(typef.Buffer),\n    },\n    a,\n  );\n  const _chunks = lazy.value(() => {\n    return bscript.decompile(a.input);\n  });\n  const network = a.network || networks_1.bitcoin;\n  const o = { name: 'p2pk', network };\n  lazy.prop(o, 'output', () => {\n    if (!a.pubkey) return;\n    return bscript.compile([a.pubkey, OPS.OP_CHECKSIG]);\n  });\n  lazy.prop(o, 'pubkey', () => {\n    if (!a.output) return;\n    return a.output.slice(1, -1);\n  });\n  lazy.prop(o, 'signature', () => {\n    if (!a.input) return;\n    return _chunks()[0];\n  });\n  lazy.prop(o, 'input', () => {\n    if (!a.signature) return;\n    return bscript.compile([a.signature]);\n  });\n  lazy.prop(o, 'witness', () => {\n    if (!o.input) return;\n    return [];\n  });\n  // extended validation\n  if (opts.validate) {\n    if (a.output) {\n      if (a.output[a.output.length - 1] !== OPS.OP_CHECKSIG)\n        throw new TypeError('Output is invalid');\n      if (!ecc.isPoint(o.pubkey))\n        throw new TypeError('Output pubkey is invalid');\n      if (a.pubkey && !a.pubkey.equals(o.pubkey))\n        throw new TypeError('Pubkey mismatch');\n    }\n    if (a.signature) {\n      if (a.input && !a.input.equals(o.input))\n        throw new TypeError('Signature mismatch');\n    }\n    if (a.input) {\n      if (_chunks().length !== 1) throw new TypeError('Input is invalid');\n      if (!bscript.isCanonicalScriptSignature(o.signature))\n        throw new TypeError('Input has invalid signature');\n    }\n  }\n  return Object.assign(o, a);\n}\nexports.p2pk = p2pk;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst bcrypto = require('../crypto');\nconst networks_1 = require('../networks');\nconst bscript = require('../script');\nconst lazy = require('./lazy');\nconst typef = require('typeforce');\nconst OPS = bscript.OPS;\nconst ecc = require('tiny-secp256k1');\nconst bs58check = require('bs58check');\n// input: {signature} {pubkey}\n// output: OP_DUP OP_HASH160 {hash160(pubkey)} OP_EQUALVERIFY OP_CHECKSIG\nfunction p2pkh(a, opts) {\n  if (!a.address && !a.hash && !a.output && !a.pubkey && !a.input)\n    throw new TypeError('Not enough data');\n  opts = Object.assign({ validate: true }, opts || {});\n  typef(\n    {\n      network: typef.maybe(typef.Object),\n      address: typef.maybe(typef.String),\n      hash: typef.maybe(typef.BufferN(20)),\n      output: typef.maybe(typef.BufferN(25)),\n      pubkey: typef.maybe(ecc.isPoint),\n      signature: typef.maybe(bscript.isCanonicalScriptSignature),\n      input: typef.maybe(typef.Buffer),\n    },\n    a,\n  );\n  const _address = lazy.value(() => {\n    const payload = bs58check.decode(a.address);\n    const version = payload.readUInt8(0);\n    const hash = payload.slice(1);\n    return { version, hash };\n  });\n  const _chunks = lazy.value(() => {\n    return bscript.decompile(a.input);\n  });\n  const network = a.network || networks_1.bitcoin;\n  const o = { name: 'p2pkh', network };\n  lazy.prop(o, 'address', () => {\n    if (!o.hash) return;\n    const payload = Buffer.allocUnsafe(21);\n    payload.writeUInt8(network.pubKeyHash, 0);\n    o.hash.copy(payload, 1);\n    return bs58check.encode(payload);\n  });\n  lazy.prop(o, 'hash', () => {\n    if (a.output) return a.output.slice(3, 23);\n    if (a.address) return _address().hash;\n    if (a.pubkey || o.pubkey) return bcrypto.hash160(a.pubkey || o.pubkey);\n  });\n  lazy.prop(o, 'output', () => {\n    if (!o.hash) return;\n    return bscript.compile([\n      OPS.OP_DUP,\n      OPS.OP_HASH160,\n      o.hash,\n      OPS.OP_EQUALVERIFY,\n      OPS.OP_CHECKSIG,\n    ]);\n  });\n  lazy.prop(o, 'pubkey', () => {\n    if (!a.input) return;\n    return _chunks()[1];\n  });\n  lazy.prop(o, 'signature', () => {\n    if (!a.input) return;\n    return _chunks()[0];\n  });\n  lazy.prop(o, 'input', () => {\n    if (!a.pubkey) return;\n    if (!a.signature) return;\n    return bscript.compile([a.signature, a.pubkey]);\n  });\n  lazy.prop(o, 'witness', () => {\n    if (!o.input) return;\n    return [];\n  });\n  // extended validation\n  if (opts.validate) {\n    let hash = Buffer.from([]);\n    if (a.address) {\n      if (_address().version !== network.pubKeyHash)\n        throw new TypeError('Invalid version or Network mismatch');\n      if (_address().hash.length !== 20) throw new TypeError('Invalid address');\n      hash = _address().hash;\n    }\n    if (a.hash) {\n      if (hash.length > 0 && !hash.equals(a.hash))\n        throw new TypeError('Hash mismatch');\n      else hash = a.hash;\n    }\n    if (a.output) {\n      if (\n        a.output.length !== 25 ||\n        a.output[0] !== OPS.OP_DUP ||\n        a.output[1] !== OPS.OP_HASH160 ||\n        a.output[2] !== 0x14 ||\n        a.output[23] !== OPS.OP_EQUALVERIFY ||\n        a.output[24] !== OPS.OP_CHECKSIG\n      )\n        throw new TypeError('Output is invalid');\n      const hash2 = a.output.slice(3, 23);\n      if (hash.length > 0 && !hash.equals(hash2))\n        throw new TypeError('Hash mismatch');\n      else hash = hash2;\n    }\n    if (a.pubkey) {\n      const pkh = bcrypto.hash160(a.pubkey);\n      if (hash.length > 0 && !hash.equals(pkh))\n        throw new TypeError('Hash mismatch');\n      else hash = pkh;\n    }\n    if (a.input) {\n      const chunks = _chunks();\n      if (chunks.length !== 2) throw new TypeError('Input is invalid');\n      if (!bscript.isCanonicalScriptSignature(chunks[0]))\n        throw new TypeError('Input has invalid signature');\n      if (!ecc.isPoint(chunks[1]))\n        throw new TypeError('Input has invalid pubkey');\n      if (a.signature && !a.signature.equals(chunks[0]))\n        throw new TypeError('Signature mismatch');\n      if (a.pubkey && !a.pubkey.equals(chunks[1]))\n        throw new TypeError('Pubkey mismatch');\n      const pkh = bcrypto.hash160(chunks[1]);\n      if (hash.length > 0 && !hash.equals(pkh))\n        throw new TypeError('Hash mismatch');\n    }\n  }\n  return Object.assign(o, a);\n}\nexports.p2pkh = p2pkh;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst bcrypto = require('../crypto');\nconst networks_1 = require('../networks');\nconst bscript = require('../script');\nconst lazy = require('./lazy');\nconst typef = require('typeforce');\nconst OPS = bscript.OPS;\nconst bs58check = require('bs58check');\nfunction stacksEqual(a, b) {\n  if (a.length !== b.length) return false;\n  return a.every((x, i) => {\n    return x.equals(b[i]);\n  });\n}\n// input: [redeemScriptSig ...] {redeemScript}\n// witness: <?>\n// output: OP_HASH160 {hash160(redeemScript)} OP_EQUAL\nfunction p2sh(a, opts) {\n  if (!a.address && !a.hash && !a.output && !a.redeem && !a.input)\n    throw new TypeError('Not enough data');\n  opts = Object.assign({ validate: true }, opts || {});\n  typef(\n    {\n      network: typef.maybe(typef.Object),\n      address: typef.maybe(typef.String),\n      hash: typef.maybe(typef.BufferN(20)),\n      output: typef.maybe(typef.BufferN(23)),\n      redeem: typef.maybe({\n        network: typef.maybe(typef.Object),\n        output: typef.maybe(typef.Buffer),\n        input: typef.maybe(typef.Buffer),\n        witness: typef.maybe(typef.arrayOf(typef.Buffer)),\n      }),\n      input: typef.maybe(typef.Buffer),\n      witness: typef.maybe(typef.arrayOf(typef.Buffer)),\n    },\n    a,\n  );\n  let network = a.network;\n  if (!network) {\n    network = (a.redeem && a.redeem.network) || networks_1.bitcoin;\n  }\n  const o = { network };\n  const _address = lazy.value(() => {\n    const payload = bs58check.decode(a.address);\n    const version = payload.readUInt8(0);\n    const hash = payload.slice(1);\n    return { version, hash };\n  });\n  const _chunks = lazy.value(() => {\n    return bscript.decompile(a.input);\n  });\n  const _redeem = lazy.value(() => {\n    const chunks = _chunks();\n    return {\n      network,\n      output: chunks[chunks.length - 1],\n      input: bscript.compile(chunks.slice(0, -1)),\n      witness: a.witness || [],\n    };\n  });\n  // output dependents\n  lazy.prop(o, 'address', () => {\n    if (!o.hash) return;\n    const payload = Buffer.allocUnsafe(21);\n    payload.writeUInt8(o.network.scriptHash, 0);\n    o.hash.copy(payload, 1);\n    return bs58check.encode(payload);\n  });\n  lazy.prop(o, 'hash', () => {\n    // in order of least effort\n    if (a.output) return a.output.slice(2, 22);\n    if (a.address) return _address().hash;\n    if (o.redeem && o.redeem.output) return bcrypto.hash160(o.redeem.output);\n  });\n  lazy.prop(o, 'output', () => {\n    if (!o.hash) return;\n    return bscript.compile([OPS.OP_HASH160, o.hash, OPS.OP_EQUAL]);\n  });\n  // input dependents\n  lazy.prop(o, 'redeem', () => {\n    if (!a.input) return;\n    return _redeem();\n  });\n  lazy.prop(o, 'input', () => {\n    if (!a.redeem || !a.redeem.input || !a.redeem.output) return;\n    return bscript.compile(\n      [].concat(bscript.decompile(a.redeem.input), a.redeem.output),\n    );\n  });\n  lazy.prop(o, 'witness', () => {\n    if (o.redeem && o.redeem.witness) return o.redeem.witness;\n    if (o.input) return [];\n  });\n  lazy.prop(o, 'name', () => {\n    const nameParts = ['p2sh'];\n    if (o.redeem !== undefined) nameParts.push(o.redeem.name);\n    return nameParts.join('-');\n  });\n  if (opts.validate) {\n    let hash = Buffer.from([]);\n    if (a.address) {\n      if (_address().version !== network.scriptHash)\n        throw new TypeError('Invalid version or Network mismatch');\n      if (_address().hash.length !== 20) throw new TypeError('Invalid address');\n      hash = _address().hash;\n    }\n    if (a.hash) {\n      if (hash.length > 0 && !hash.equals(a.hash))\n        throw new TypeError('Hash mismatch');\n      else hash = a.hash;\n    }\n    if (a.output) {\n      if (\n        a.output.length !== 23 ||\n        a.output[0] !== OPS.OP_HASH160 ||\n        a.output[1] !== 0x14 ||\n        a.output[22] !== OPS.OP_EQUAL\n      )\n        throw new TypeError('Output is invalid');\n      const hash2 = a.output.slice(2, 22);\n      if (hash.length > 0 && !hash.equals(hash2))\n        throw new TypeError('Hash mismatch');\n      else hash = hash2;\n    }\n    // inlined to prevent 'no-inner-declarations' failing\n    const checkRedeem = redeem => {\n      // is the redeem output empty/invalid?\n      if (redeem.output) {\n        const decompile = bscript.decompile(redeem.output);\n        if (!decompile || decompile.length < 1)\n          throw new TypeError('Redeem.output too short');\n        // match hash against other sources\n        const hash2 = bcrypto.hash160(redeem.output);\n        if (hash.length > 0 && !hash.equals(hash2))\n          throw new TypeError('Hash mismatch');\n        else hash = hash2;\n      }\n      if (redeem.input) {\n        const hasInput = redeem.input.length > 0;\n        const hasWitness = redeem.witness && redeem.witness.length > 0;\n        if (!hasInput && !hasWitness) throw new TypeError('Empty input');\n        if (hasInput && hasWitness)\n          throw new TypeError('Input and witness provided');\n        if (hasInput) {\n          const richunks = bscript.decompile(redeem.input);\n          if (!bscript.isPushOnly(richunks))\n            throw new TypeError('Non push-only scriptSig');\n        }\n      }\n    };\n    if (a.input) {\n      const chunks = _chunks();\n      if (!chunks || chunks.length < 1) throw new TypeError('Input too short');\n      if (!Buffer.isBuffer(_redeem().output))\n        throw new TypeError('Input is invalid');\n      checkRedeem(_redeem());\n    }\n    if (a.redeem) {\n      if (a.redeem.network && a.redeem.network !== network)\n        throw new TypeError('Network mismatch');\n      if (a.input) {\n        const redeem = _redeem();\n        if (a.redeem.output && !a.redeem.output.equals(redeem.output))\n          throw new TypeError('Redeem.output mismatch');\n        if (a.redeem.input && !a.redeem.input.equals(redeem.input))\n          throw new TypeError('Redeem.input mismatch');\n      }\n      checkRedeem(a.redeem);\n    }\n    if (a.witness) {\n      if (\n        a.redeem &&\n        a.redeem.witness &&\n        !stacksEqual(a.redeem.witness, a.witness)\n      )\n        throw new TypeError('Witness and redeem.witness mismatch');\n    }\n  }\n  return Object.assign(o, a);\n}\nexports.p2sh = p2sh;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst bcrypto = require('../crypto');\nconst networks_1 = require('../networks');\nconst bscript = require('../script');\nconst lazy = require('./lazy');\nconst typef = require('typeforce');\nconst OPS = bscript.OPS;\nconst ecc = require('tiny-secp256k1');\nconst bech32 = require('bech32');\nconst EMPTY_BUFFER = Buffer.alloc(0);\n// witness: {signature} {pubKey}\n// input: <>\n// output: OP_0 {pubKeyHash}\nfunction p2wpkh(a, opts) {\n  if (!a.address && !a.hash && !a.output && !a.pubkey && !a.witness)\n    throw new TypeError('Not enough data');\n  opts = Object.assign({ validate: true }, opts || {});\n  typef(\n    {\n      address: typef.maybe(typef.String),\n      hash: typef.maybe(typef.BufferN(20)),\n      input: typef.maybe(typef.BufferN(0)),\n      network: typef.maybe(typef.Object),\n      output: typef.maybe(typef.BufferN(22)),\n      pubkey: typef.maybe(ecc.isPoint),\n      signature: typef.maybe(bscript.isCanonicalScriptSignature),\n      witness: typef.maybe(typef.arrayOf(typef.Buffer)),\n    },\n    a,\n  );\n  const _address = lazy.value(() => {\n    const result = bech32.decode(a.address);\n    const version = result.words.shift();\n    const data = bech32.fromWords(result.words);\n    return {\n      version,\n      prefix: result.prefix,\n      data: Buffer.from(data),\n    };\n  });\n  const network = a.network || networks_1.bitcoin;\n  const o = { name: 'p2wpkh', network };\n  lazy.prop(o, 'address', () => {\n    if (!o.hash) return;\n    const words = bech32.toWords(o.hash);\n    words.unshift(0x00);\n    return bech32.encode(network.bech32, words);\n  });\n  lazy.prop(o, 'hash', () => {\n    if (a.output) return a.output.slice(2, 22);\n    if (a.address) return _address().data;\n    if (a.pubkey || o.pubkey) return bcrypto.hash160(a.pubkey || o.pubkey);\n  });\n  lazy.prop(o, 'output', () => {\n    if (!o.hash) return;\n    return bscript.compile([OPS.OP_0, o.hash]);\n  });\n  lazy.prop(o, 'pubkey', () => {\n    if (a.pubkey) return a.pubkey;\n    if (!a.witness) return;\n    return a.witness[1];\n  });\n  lazy.prop(o, 'signature', () => {\n    if (!a.witness) return;\n    return a.witness[0];\n  });\n  lazy.prop(o, 'input', () => {\n    if (!o.witness) return;\n    return EMPTY_BUFFER;\n  });\n  lazy.prop(o, 'witness', () => {\n    if (!a.pubkey) return;\n    if (!a.signature) return;\n    return [a.signature, a.pubkey];\n  });\n  // extended validation\n  if (opts.validate) {\n    let hash = Buffer.from([]);\n    if (a.address) {\n      if (network && network.bech32 !== _address().prefix)\n        throw new TypeError('Invalid prefix or Network mismatch');\n      if (_address().version !== 0x00)\n        throw new TypeError('Invalid address version');\n      if (_address().data.length !== 20)\n        throw new TypeError('Invalid address data');\n      hash = _address().data;\n    }\n    if (a.hash) {\n      if (hash.length > 0 && !hash.equals(a.hash))\n        throw new TypeError('Hash mismatch');\n      else hash = a.hash;\n    }\n    if (a.output) {\n      if (\n        a.output.length !== 22 ||\n        a.output[0] !== OPS.OP_0 ||\n        a.output[1] !== 0x14\n      )\n        throw new TypeError('Output is invalid');\n      if (hash.length > 0 && !hash.equals(a.output.slice(2)))\n        throw new TypeError('Hash mismatch');\n      else hash = a.output.slice(2);\n    }\n    if (a.pubkey) {\n      const pkh = bcrypto.hash160(a.pubkey);\n      if (hash.length > 0 && !hash.equals(pkh))\n        throw new TypeError('Hash mismatch');\n      else hash = pkh;\n      if (!ecc.isPoint(a.pubkey) || a.pubkey.length !== 33)\n        throw new TypeError('Invalid pubkey for p2wpkh');\n    }\n    if (a.witness) {\n      if (a.witness.length !== 2) throw new TypeError('Witness is invalid');\n      if (!bscript.isCanonicalScriptSignature(a.witness[0]))\n        throw new TypeError('Witness has invalid signature');\n      if (!ecc.isPoint(a.witness[1]) || a.witness[1].length !== 33)\n        throw new TypeError('Witness has invalid pubkey');\n      if (a.signature && !a.signature.equals(a.witness[0]))\n        throw new TypeError('Signature mismatch');\n      if (a.pubkey && !a.pubkey.equals(a.witness[1]))\n        throw new TypeError('Pubkey mismatch');\n      const pkh = bcrypto.hash160(a.witness[1]);\n      if (hash.length > 0 && !hash.equals(pkh))\n        throw new TypeError('Hash mismatch');\n    }\n  }\n  return Object.assign(o, a);\n}\nexports.p2wpkh = p2wpkh;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst bcrypto = require('../crypto');\nconst networks_1 = require('../networks');\nconst bscript = require('../script');\nconst lazy = require('./lazy');\nconst typef = require('typeforce');\nconst OPS = bscript.OPS;\nconst ecc = require('tiny-secp256k1');\nconst bech32 = require('bech32');\nconst EMPTY_BUFFER = Buffer.alloc(0);\nfunction stacksEqual(a, b) {\n  if (a.length !== b.length) return false;\n  return a.every((x, i) => {\n    return x.equals(b[i]);\n  });\n}\nfunction chunkHasUncompressedPubkey(chunk) {\n  if (\n    Buffer.isBuffer(chunk) &&\n    chunk.length === 65 &&\n    chunk[0] === 0x04 &&\n    ecc.isPoint(chunk)\n  ) {\n    return true;\n  } else {\n    return false;\n  }\n}\n// input: <>\n// witness: [redeemScriptSig ...] {redeemScript}\n// output: OP_0 {sha256(redeemScript)}\nfunction p2wsh(a, opts) {\n  if (!a.address && !a.hash && !a.output && !a.redeem && !a.witness)\n    throw new TypeError('Not enough data');\n  opts = Object.assign({ validate: true }, opts || {});\n  typef(\n    {\n      network: typef.maybe(typef.Object),\n      address: typef.maybe(typef.String),\n      hash: typef.maybe(typef.BufferN(32)),\n      output: typef.maybe(typef.BufferN(34)),\n      redeem: typef.maybe({\n        input: typef.maybe(typef.Buffer),\n        network: typef.maybe(typef.Object),\n        output: typef.maybe(typef.Buffer),\n        witness: typef.maybe(typef.arrayOf(typef.Buffer)),\n      }),\n      input: typef.maybe(typef.BufferN(0)),\n      witness: typef.maybe(typef.arrayOf(typef.Buffer)),\n    },\n    a,\n  );\n  const _address = lazy.value(() => {\n    const result = bech32.decode(a.address);\n    const version = result.words.shift();\n    const data = bech32.fromWords(result.words);\n    return {\n      version,\n      prefix: result.prefix,\n      data: Buffer.from(data),\n    };\n  });\n  const _rchunks = lazy.value(() => {\n    return bscript.decompile(a.redeem.input);\n  });\n  let network = a.network;\n  if (!network) {\n    network = (a.redeem && a.redeem.network) || networks_1.bitcoin;\n  }\n  const o = { network };\n  lazy.prop(o, 'address', () => {\n    if (!o.hash) return;\n    const words = bech32.toWords(o.hash);\n    words.unshift(0x00);\n    return bech32.encode(network.bech32, words);\n  });\n  lazy.prop(o, 'hash', () => {\n    if (a.output) return a.output.slice(2);\n    if (a.address) return _address().data;\n    if (o.redeem && o.redeem.output) return bcrypto.sha256(o.redeem.output);\n  });\n  lazy.prop(o, 'output', () => {\n    if (!o.hash) return;\n    return bscript.compile([OPS.OP_0, o.hash]);\n  });\n  lazy.prop(o, 'redeem', () => {\n    if (!a.witness) return;\n    return {\n      output: a.witness[a.witness.length - 1],\n      input: EMPTY_BUFFER,\n      witness: a.witness.slice(0, -1),\n    };\n  });\n  lazy.prop(o, 'input', () => {\n    if (!o.witness) return;\n    return EMPTY_BUFFER;\n  });\n  lazy.prop(o, 'witness', () => {\n    // transform redeem input to witness stack?\n    if (\n      a.redeem &&\n      a.redeem.input &&\n      a.redeem.input.length > 0 &&\n      a.redeem.output &&\n      a.redeem.output.length > 0\n    ) {\n      const stack = bscript.toStack(_rchunks());\n      // assign, and blank the existing input\n      o.redeem = Object.assign({ witness: stack }, a.redeem);\n      o.redeem.input = EMPTY_BUFFER;\n      return [].concat(stack, a.redeem.output);\n    }\n    if (!a.redeem) return;\n    if (!a.redeem.output) return;\n    if (!a.redeem.witness) return;\n    return [].concat(a.redeem.witness, a.redeem.output);\n  });\n  lazy.prop(o, 'name', () => {\n    const nameParts = ['p2wsh'];\n    if (o.redeem !== undefined) nameParts.push(o.redeem.name);\n    return nameParts.join('-');\n  });\n  // extended validation\n  if (opts.validate) {\n    let hash = Buffer.from([]);\n    if (a.address) {\n      if (_address().prefix !== network.bech32)\n        throw new TypeError('Invalid prefix or Network mismatch');\n      if (_address().version !== 0x00)\n        throw new TypeError('Invalid address version');\n      if (_address().data.length !== 32)\n        throw new TypeError('Invalid address data');\n      hash = _address().data;\n    }\n    if (a.hash) {\n      if (hash.length > 0 && !hash.equals(a.hash))\n        throw new TypeError('Hash mismatch');\n      else hash = a.hash;\n    }\n    if (a.output) {\n      if (\n        a.output.length !== 34 ||\n        a.output[0] !== OPS.OP_0 ||\n        a.output[1] !== 0x20\n      )\n        throw new TypeError('Output is invalid');\n      const hash2 = a.output.slice(2);\n      if (hash.length > 0 && !hash.equals(hash2))\n        throw new TypeError('Hash mismatch');\n      else hash = hash2;\n    }\n    if (a.redeem) {\n      if (a.redeem.network && a.redeem.network !== network)\n        throw new TypeError('Network mismatch');\n      // is there two redeem sources?\n      if (\n        a.redeem.input &&\n        a.redeem.input.length > 0 &&\n        a.redeem.witness &&\n        a.redeem.witness.length > 0\n      )\n        throw new TypeError('Ambiguous witness source');\n      // is the redeem output non-empty?\n      if (a.redeem.output) {\n        if (bscript.decompile(a.redeem.output).length === 0)\n          throw new TypeError('Redeem.output is invalid');\n        // match hash against other sources\n        const hash2 = bcrypto.sha256(a.redeem.output);\n        if (hash.length > 0 && !hash.equals(hash2))\n          throw new TypeError('Hash mismatch');\n        else hash = hash2;\n      }\n      if (a.redeem.input && !bscript.isPushOnly(_rchunks()))\n        throw new TypeError('Non push-only scriptSig');\n      if (\n        a.witness &&\n        a.redeem.witness &&\n        !stacksEqual(a.witness, a.redeem.witness)\n      )\n        throw new TypeError('Witness and redeem.witness mismatch');\n      if (\n        (a.redeem.input && _rchunks().some(chunkHasUncompressedPubkey)) ||\n        (a.redeem.output &&\n          (bscript.decompile(a.redeem.output) || []).some(\n            chunkHasUncompressedPubkey,\n          ))\n      ) {\n        throw new TypeError(\n          'redeem.input or redeem.output contains uncompressed pubkey',\n        );\n      }\n    }\n    if (a.witness && a.witness.length > 0) {\n      const wScript = a.witness[a.witness.length - 1];\n      if (a.redeem && a.redeem.output && !a.redeem.output.equals(wScript))\n        throw new TypeError('Witness and redeem.output mismatch');\n      if (\n        a.witness.some(chunkHasUncompressedPubkey) ||\n        (bscript.decompile(wScript) || []).some(chunkHasUncompressedPubkey)\n      )\n        throw new TypeError('Witness contains uncompressed pubkey');\n    }\n  }\n  return Object.assign(o, a);\n}\nexports.p2wsh = p2wsh;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst bufferutils_1 = require('./bufferutils');\nconst bcrypto = require('./crypto');\nconst transaction_1 = require('./transaction');\nconst types = require('./types');\nconst fastMerkleRoot = require('merkle-lib/fastRoot');\nconst typeforce = require('typeforce');\nconst varuint = require('varuint-bitcoin');\nconst errorMerkleNoTxes = new TypeError(\n  'Cannot compute merkle root for zero transactions',\n);\nconst errorWitnessNotSegwit = new TypeError(\n  'Cannot compute witness commit for non-segwit block',\n);\nclass Block {\n  constructor() {\n    this.version = 1;\n    this.prevHash = undefined;\n    this.merkleRoot = undefined;\n    this.timestamp = 0;\n    this.witnessCommit = undefined;\n    this.bits = 0;\n    this.nonce = 0;\n    this.transactions = undefined;\n  }\n  static fromBuffer(buffer) {\n    if (buffer.length < 80) throw new Error('Buffer too small (< 80 bytes)');\n    const bufferReader = new bufferutils_1.BufferReader(buffer);\n    const block = new Block();\n    block.version = bufferReader.readInt32();\n    block.prevHash = bufferReader.readSlice(32);\n    block.merkleRoot = bufferReader.readSlice(32);\n    block.timestamp = bufferReader.readUInt32();\n    block.bits = bufferReader.readUInt32();\n    block.nonce = bufferReader.readUInt32();\n    if (buffer.length === 80) return block;\n    const readTransaction = () => {\n      const tx = transaction_1.Transaction.fromBuffer(\n        bufferReader.buffer.slice(bufferReader.offset),\n        true,\n      );\n      bufferReader.offset += tx.byteLength();\n      return tx;\n    };\n    const nTransactions = bufferReader.readVarInt();\n    block.transactions = [];\n    for (let i = 0; i < nTransactions; ++i) {\n      const tx = readTransaction();\n      block.transactions.push(tx);\n    }\n    const witnessCommit = block.getWitnessCommit();\n    // This Block contains a witness commit\n    if (witnessCommit) block.witnessCommit = witnessCommit;\n    return block;\n  }\n  static fromHex(hex) {\n    return Block.fromBuffer(Buffer.from(hex, 'hex'));\n  }\n  static calculateTarget(bits) {\n    const exponent = ((bits & 0xff000000) >> 24) - 3;\n    const mantissa = bits & 0x007fffff;\n    const target = Buffer.alloc(32, 0);\n    target.writeUIntBE(mantissa, 29 - exponent, 3);\n    return target;\n  }\n  static calculateMerkleRoot(transactions, forWitness) {\n    typeforce([{ getHash: types.Function }], transactions);\n    if (transactions.length === 0) throw errorMerkleNoTxes;\n    if (forWitness && !txesHaveWitnessCommit(transactions))\n      throw errorWitnessNotSegwit;\n    const hashes = transactions.map(transaction =>\n      transaction.getHash(forWitness),\n    );\n    const rootHash = fastMerkleRoot(hashes, bcrypto.hash256);\n    return forWitness\n      ? bcrypto.hash256(\n          Buffer.concat([rootHash, transactions[0].ins[0].witness[0]]),\n        )\n      : rootHash;\n  }\n  getWitnessCommit() {\n    if (!txesHaveWitnessCommit(this.transactions)) return null;\n    // The merkle root for the witness data is in an OP_RETURN output.\n    // There is no rule for the index of the output, so use filter to find it.\n    // The root is prepended with 0xaa21a9ed so check for 0x6a24aa21a9ed\n    // If multiple commits are found, the output with highest index is assumed.\n    const witnessCommits = this.transactions[0].outs\n      .filter(out =>\n        out.script.slice(0, 6).equals(Buffer.from('6a24aa21a9ed', 'hex')),\n      )\n      .map(out => out.script.slice(6, 38));\n    if (witnessCommits.length === 0) return null;\n    // Use the commit with the highest output (should only be one though)\n    const result = witnessCommits[witnessCommits.length - 1];\n    if (!(result instanceof Buffer && result.length === 32)) return null;\n    return result;\n  }\n  hasWitnessCommit() {\n    if (\n      this.witnessCommit instanceof Buffer &&\n      this.witnessCommit.length === 32\n    )\n      return true;\n    if (this.getWitnessCommit() !== null) return true;\n    return false;\n  }\n  hasWitness() {\n    return anyTxHasWitness(this.transactions);\n  }\n  weight() {\n    const base = this.byteLength(false, false);\n    const total = this.byteLength(false, true);\n    return base * 3 + total;\n  }\n  byteLength(headersOnly, allowWitness = true) {\n    if (headersOnly || !this.transactions) return 80;\n    return (\n      80 +\n      varuint.encodingLength(this.transactions.length) +\n      this.transactions.reduce((a, x) => a + x.byteLength(allowWitness), 0)\n    );\n  }\n  getHash() {\n    return bcrypto.hash256(this.toBuffer(true));\n  }\n  getId() {\n    return bufferutils_1.reverseBuffer(this.getHash()).toString('hex');\n  }\n  getUTCDate() {\n    const date = new Date(0); // epoch\n    date.setUTCSeconds(this.timestamp);\n    return date;\n  }\n  // TODO: buffer, offset compatibility\n  toBuffer(headersOnly) {\n    const buffer = Buffer.allocUnsafe(this.byteLength(headersOnly));\n    const bufferWriter = new bufferutils_1.BufferWriter(buffer);\n    bufferWriter.writeInt32(this.version);\n    bufferWriter.writeSlice(this.prevHash);\n    bufferWriter.writeSlice(this.merkleRoot);\n    bufferWriter.writeUInt32(this.timestamp);\n    bufferWriter.writeUInt32(this.bits);\n    bufferWriter.writeUInt32(this.nonce);\n    if (headersOnly || !this.transactions) return buffer;\n    varuint.encode(this.transactions.length, buffer, bufferWriter.offset);\n    bufferWriter.offset += varuint.encode.bytes;\n    this.transactions.forEach(tx => {\n      const txSize = tx.byteLength(); // TODO: extract from toBuffer?\n      tx.toBuffer(buffer, bufferWriter.offset);\n      bufferWriter.offset += txSize;\n    });\n    return buffer;\n  }\n  toHex(headersOnly) {\n    return this.toBuffer(headersOnly).toString('hex');\n  }\n  checkTxRoots() {\n    // If the Block has segwit transactions but no witness commit,\n    // there's no way it can be valid, so fail the check.\n    const hasWitnessCommit = this.hasWitnessCommit();\n    if (!hasWitnessCommit && this.hasWitness()) return false;\n    return (\n      this.__checkMerkleRoot() &&\n      (hasWitnessCommit ? this.__checkWitnessCommit() : true)\n    );\n  }\n  checkProofOfWork() {\n    const hash = bufferutils_1.reverseBuffer(this.getHash());\n    const target = Block.calculateTarget(this.bits);\n    return hash.compare(target) <= 0;\n  }\n  __checkMerkleRoot() {\n    if (!this.transactions) throw errorMerkleNoTxes;\n    const actualMerkleRoot = Block.calculateMerkleRoot(this.transactions);\n    return this.merkleRoot.compare(actualMerkleRoot) === 0;\n  }\n  __checkWitnessCommit() {\n    if (!this.transactions) throw errorMerkleNoTxes;\n    if (!this.hasWitnessCommit()) throw errorWitnessNotSegwit;\n    const actualWitnessCommit = Block.calculateMerkleRoot(\n      this.transactions,\n      true,\n    );\n    return this.witnessCommit.compare(actualWitnessCommit) === 0;\n  }\n}\nexports.Block = Block;\nfunction txesHaveWitnessCommit(transactions) {\n  return (\n    transactions instanceof Array &&\n    transactions[0] &&\n    transactions[0].ins &&\n    transactions[0].ins instanceof Array &&\n    transactions[0].ins[0] &&\n    transactions[0].ins[0].witness &&\n    transactions[0].ins[0].witness instanceof Array &&\n    transactions[0].ins[0].witness.length > 0\n  );\n}\nfunction anyTxHasWitness(transactions) {\n  return (\n    transactions instanceof Array &&\n    transactions.some(\n      tx =>\n        typeof tx === 'object' &&\n        tx.ins instanceof Array &&\n        tx.ins.some(\n          input =>\n            typeof input === 'object' &&\n            input.witness instanceof Array &&\n            input.witness.length > 0,\n        ),\n    )\n  );\n}\n","// constant-space merkle root calculation algorithm\nmodule.exports = function fastRoot (values, digestFn) {\n  if (!Array.isArray(values)) throw TypeError('Expected values Array')\n  if (typeof digestFn !== 'function') throw TypeError('Expected digest Function')\n\n  var length = values.length\n  var results = values.concat()\n\n  while (length > 1) {\n    var j = 0\n\n    for (var i = 0; i < length; i += 2, ++j) {\n      var left = results[i]\n      var right = i + 1 === length ? left : results[i + 1]\n      var data = Buffer.concat([left, right])\n\n      results[j] = digestFn(data)\n    }\n\n    length = j\n  }\n\n  return results[0]\n}\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst bip174_1 = require('bip174');\nconst varuint = require('bip174/src/lib/converter/varint');\nconst utils_1 = require('bip174/src/lib/utils');\nconst address_1 = require('./address');\nconst bufferutils_1 = require('./bufferutils');\nconst crypto_1 = require('./crypto');\nconst ecpair_1 = require('./ecpair');\nconst networks_1 = require('./networks');\nconst payments = require('./payments');\nconst bscript = require('./script');\nconst transaction_1 = require('./transaction');\n/**\n * These are the default arguments for a Psbt instance.\n */\nconst DEFAULT_OPTS = {\n  /**\n   * A bitcoinjs Network object. This is only used if you pass an `address`\n   * parameter to addOutput. Otherwise it is not needed and can be left default.\n   */\n  network: networks_1.bitcoin,\n  /**\n   * When extractTransaction is called, the fee rate is checked.\n   * THIS IS NOT TO BE RELIED ON.\n   * It is only here as a last ditch effort to prevent sending a 500 BTC fee etc.\n   */\n  maximumFeeRate: 5000,\n};\n/**\n * Psbt class can parse and generate a PSBT binary based off of the BIP174.\n * There are 6 roles that this class fulfills. (Explained in BIP174)\n *\n * Creator: This can be done with `new Psbt()`\n * Updater: This can be done with `psbt.addInput(input)`, `psbt.addInputs(inputs)`,\n *   `psbt.addOutput(output)`, `psbt.addOutputs(outputs)` when you are looking to\n *   add new inputs and outputs to the PSBT, and `psbt.updateGlobal(itemObject)`,\n *   `psbt.updateInput(itemObject)`, `psbt.updateOutput(itemObject)`\n *   addInput requires hash: Buffer | string; and index: number; as attributes\n *   and can also include any attributes that are used in updateInput method.\n *   addOutput requires script: Buffer; and value: number; and likewise can include\n *   data for updateOutput.\n *   For a list of what attributes should be what types. Check the bip174 library.\n *   Also, check the integration tests for some examples of usage.\n * Signer: There are a few methods. signAllInputs and signAllInputsAsync, which will search all input\n *   information for your pubkey or pubkeyhash, and only sign inputs where it finds\n *   your info. Or you can explicitly sign a specific input with signInput and\n *   signInputAsync. For the async methods you can create a SignerAsync object\n *   and use something like a hardware wallet to sign with. (You must implement this)\n * Combiner: psbts can be combined easily with `psbt.combine(psbt2, psbt3, psbt4 ...)`\n *   the psbt calling combine will always have precedence when a conflict occurs.\n *   Combine checks if the internal bitcoin transaction is the same, so be sure that\n *   all sequences, version, locktime, etc. are the same before combining.\n * Input Finalizer: This role is fairly important. Not only does it need to construct\n *   the input scriptSigs and witnesses, but it SHOULD verify the signatures etc.\n *   Before running `psbt.finalizeAllInputs()` please run `psbt.validateSignaturesOfAllInputs()`\n *   Running any finalize method will delete any data in the input(s) that are no longer\n *   needed due to the finalized scripts containing the information.\n * Transaction Extractor: This role will perform some checks before returning a\n *   Transaction object. Such as fee rate not being larger than maximumFeeRate etc.\n */\nclass Psbt {\n  constructor(opts = {}, data = new bip174_1.Psbt(new PsbtTransaction())) {\n    this.data = data;\n    // set defaults\n    this.opts = Object.assign({}, DEFAULT_OPTS, opts);\n    this.__CACHE = {\n      __NON_WITNESS_UTXO_TX_CACHE: [],\n      __NON_WITNESS_UTXO_BUF_CACHE: [],\n      __TX_IN_CACHE: {},\n      __TX: this.data.globalMap.unsignedTx.tx,\n      // Old TransactionBuilder behavior was to not confirm input values\n      // before signing. Even though we highly encourage people to get\n      // the full parent transaction to verify values, the ability to\n      // sign non-segwit inputs without the full transaction was often\n      // requested. So the only way to activate is to use @ts-ignore.\n      // We will disable exporting the Psbt when unsafe sign is active.\n      // because it is not BIP174 compliant.\n      __UNSAFE_SIGN_NONSEGWIT: false,\n    };\n    if (this.data.inputs.length === 0) this.setVersion(2);\n    // Make data hidden when enumerating\n    const dpew = (obj, attr, enumerable, writable) =>\n      Object.defineProperty(obj, attr, {\n        enumerable,\n        writable,\n      });\n    dpew(this, '__CACHE', false, true);\n    dpew(this, 'opts', false, true);\n  }\n  static fromBase64(data, opts = {}) {\n    const buffer = Buffer.from(data, 'base64');\n    return this.fromBuffer(buffer, opts);\n  }\n  static fromHex(data, opts = {}) {\n    const buffer = Buffer.from(data, 'hex');\n    return this.fromBuffer(buffer, opts);\n  }\n  static fromBuffer(buffer, opts = {}) {\n    const psbtBase = bip174_1.Psbt.fromBuffer(buffer, transactionFromBuffer);\n    const psbt = new Psbt(opts, psbtBase);\n    checkTxForDupeIns(psbt.__CACHE.__TX, psbt.__CACHE);\n    return psbt;\n  }\n  get inputCount() {\n    return this.data.inputs.length;\n  }\n  get version() {\n    return this.__CACHE.__TX.version;\n  }\n  set version(version) {\n    this.setVersion(version);\n  }\n  get locktime() {\n    return this.__CACHE.__TX.locktime;\n  }\n  set locktime(locktime) {\n    this.setLocktime(locktime);\n  }\n  get txInputs() {\n    return this.__CACHE.__TX.ins.map(input => ({\n      hash: bufferutils_1.cloneBuffer(input.hash),\n      index: input.index,\n      sequence: input.sequence,\n    }));\n  }\n  get txOutputs() {\n    return this.__CACHE.__TX.outs.map(output => {\n      let address;\n      try {\n        address = address_1.fromOutputScript(output.script, this.opts.network);\n      } catch (_) {}\n      return {\n        script: bufferutils_1.cloneBuffer(output.script),\n        value: output.value,\n        address,\n      };\n    });\n  }\n  combine(...those) {\n    this.data.combine(...those.map(o => o.data));\n    return this;\n  }\n  clone() {\n    // TODO: more efficient cloning\n    const res = Psbt.fromBuffer(this.data.toBuffer());\n    res.opts = JSON.parse(JSON.stringify(this.opts));\n    return res;\n  }\n  setMaximumFeeRate(satoshiPerByte) {\n    check32Bit(satoshiPerByte); // 42.9 BTC per byte IS excessive... so throw\n    this.opts.maximumFeeRate = satoshiPerByte;\n  }\n  setVersion(version) {\n    check32Bit(version);\n    checkInputsForPartialSig(this.data.inputs, 'setVersion');\n    const c = this.__CACHE;\n    c.__TX.version = version;\n    c.__EXTRACTED_TX = undefined;\n    return this;\n  }\n  setLocktime(locktime) {\n    check32Bit(locktime);\n    checkInputsForPartialSig(this.data.inputs, 'setLocktime');\n    const c = this.__CACHE;\n    c.__TX.locktime = locktime;\n    c.__EXTRACTED_TX = undefined;\n    return this;\n  }\n  setInputSequence(inputIndex, sequence) {\n    check32Bit(sequence);\n    checkInputsForPartialSig(this.data.inputs, 'setInputSequence');\n    const c = this.__CACHE;\n    if (c.__TX.ins.length <= inputIndex) {\n      throw new Error('Input index too high');\n    }\n    c.__TX.ins[inputIndex].sequence = sequence;\n    c.__EXTRACTED_TX = undefined;\n    return this;\n  }\n  addInputs(inputDatas) {\n    inputDatas.forEach(inputData => this.addInput(inputData));\n    return this;\n  }\n  addInput(inputData) {\n    if (\n      arguments.length > 1 ||\n      !inputData ||\n      inputData.hash === undefined ||\n      inputData.index === undefined\n    ) {\n      throw new Error(\n        `Invalid arguments for Psbt.addInput. ` +\n          `Requires single object with at least [hash] and [index]`,\n      );\n    }\n    checkInputsForPartialSig(this.data.inputs, 'addInput');\n    if (inputData.witnessScript) checkInvalidP2WSH(inputData.witnessScript);\n    const c = this.__CACHE;\n    this.data.addInput(inputData);\n    const txIn = c.__TX.ins[c.__TX.ins.length - 1];\n    checkTxInputCache(c, txIn);\n    const inputIndex = this.data.inputs.length - 1;\n    const input = this.data.inputs[inputIndex];\n    if (input.nonWitnessUtxo) {\n      addNonWitnessTxCache(this.__CACHE, input, inputIndex);\n    }\n    c.__FEE = undefined;\n    c.__FEE_RATE = undefined;\n    c.__EXTRACTED_TX = undefined;\n    return this;\n  }\n  addOutputs(outputDatas) {\n    outputDatas.forEach(outputData => this.addOutput(outputData));\n    return this;\n  }\n  addOutput(outputData) {\n    if (\n      arguments.length > 1 ||\n      !outputData ||\n      outputData.value === undefined ||\n      (outputData.address === undefined && outputData.script === undefined)\n    ) {\n      throw new Error(\n        `Invalid arguments for Psbt.addOutput. ` +\n          `Requires single object with at least [script or address] and [value]`,\n      );\n    }\n    checkInputsForPartialSig(this.data.inputs, 'addOutput');\n    const { address } = outputData;\n    if (typeof address === 'string') {\n      const { network } = this.opts;\n      const script = address_1.toOutputScript(address, network);\n      outputData = Object.assign(outputData, { script });\n    }\n    const c = this.__CACHE;\n    this.data.addOutput(outputData);\n    c.__FEE = undefined;\n    c.__FEE_RATE = undefined;\n    c.__EXTRACTED_TX = undefined;\n    return this;\n  }\n  extractTransaction(disableFeeCheck) {\n    if (!this.data.inputs.every(isFinalized)) throw new Error('Not finalized');\n    const c = this.__CACHE;\n    if (!disableFeeCheck) {\n      checkFees(this, c, this.opts);\n    }\n    if (c.__EXTRACTED_TX) return c.__EXTRACTED_TX;\n    const tx = c.__TX.clone();\n    inputFinalizeGetAmts(this.data.inputs, tx, c, true);\n    return tx;\n  }\n  getFeeRate() {\n    return getTxCacheValue(\n      '__FEE_RATE',\n      'fee rate',\n      this.data.inputs,\n      this.__CACHE,\n    );\n  }\n  getFee() {\n    return getTxCacheValue('__FEE', 'fee', this.data.inputs, this.__CACHE);\n  }\n  finalizeAllInputs() {\n    utils_1.checkForInput(this.data.inputs, 0); // making sure we have at least one\n    range(this.data.inputs.length).forEach(idx => this.finalizeInput(idx));\n    return this;\n  }\n  finalizeInput(inputIndex, finalScriptsFunc = getFinalScripts) {\n    const input = utils_1.checkForInput(this.data.inputs, inputIndex);\n    const { script, isP2SH, isP2WSH, isSegwit } = getScriptFromInput(\n      inputIndex,\n      input,\n      this.__CACHE,\n    );\n    if (!script) throw new Error(`No script found for input #${inputIndex}`);\n    checkPartialSigSighashes(input);\n    const { finalScriptSig, finalScriptWitness } = finalScriptsFunc(\n      inputIndex,\n      input,\n      script,\n      isSegwit,\n      isP2SH,\n      isP2WSH,\n    );\n    if (finalScriptSig) this.data.updateInput(inputIndex, { finalScriptSig });\n    if (finalScriptWitness)\n      this.data.updateInput(inputIndex, { finalScriptWitness });\n    if (!finalScriptSig && !finalScriptWitness)\n      throw new Error(`Unknown error finalizing input #${inputIndex}`);\n    this.data.clearFinalizedInput(inputIndex);\n    return this;\n  }\n  getInputType(inputIndex) {\n    const input = utils_1.checkForInput(this.data.inputs, inputIndex);\n    const script = getScriptFromUtxo(inputIndex, input, this.__CACHE);\n    const result = getMeaningfulScript(\n      script,\n      inputIndex,\n      'input',\n      input.redeemScript || redeemFromFinalScriptSig(input.finalScriptSig),\n      input.witnessScript ||\n        redeemFromFinalWitnessScript(input.finalScriptWitness),\n    );\n    const type = result.type === 'raw' ? '' : result.type + '-';\n    const mainType = classifyScript(result.meaningfulScript);\n    return type + mainType;\n  }\n  inputHasPubkey(inputIndex, pubkey) {\n    const input = utils_1.checkForInput(this.data.inputs, inputIndex);\n    return pubkeyInInput(pubkey, input, inputIndex, this.__CACHE);\n  }\n  inputHasHDKey(inputIndex, root) {\n    const input = utils_1.checkForInput(this.data.inputs, inputIndex);\n    const derivationIsMine = bip32DerivationIsMine(root);\n    return (\n      !!input.bip32Derivation && input.bip32Derivation.some(derivationIsMine)\n    );\n  }\n  outputHasPubkey(outputIndex, pubkey) {\n    const output = utils_1.checkForOutput(this.data.outputs, outputIndex);\n    return pubkeyInOutput(pubkey, output, outputIndex, this.__CACHE);\n  }\n  outputHasHDKey(outputIndex, root) {\n    const output = utils_1.checkForOutput(this.data.outputs, outputIndex);\n    const derivationIsMine = bip32DerivationIsMine(root);\n    return (\n      !!output.bip32Derivation && output.bip32Derivation.some(derivationIsMine)\n    );\n  }\n  validateSignaturesOfAllInputs() {\n    utils_1.checkForInput(this.data.inputs, 0); // making sure we have at least one\n    const results = range(this.data.inputs.length).map(idx =>\n      this.validateSignaturesOfInput(idx),\n    );\n    return results.reduce((final, res) => res === true && final, true);\n  }\n  validateSignaturesOfInput(inputIndex, pubkey) {\n    const input = this.data.inputs[inputIndex];\n    const partialSig = (input || {}).partialSig;\n    if (!input || !partialSig || partialSig.length < 1)\n      throw new Error('No signatures to validate');\n    const mySigs = pubkey\n      ? partialSig.filter(sig => sig.pubkey.equals(pubkey))\n      : partialSig;\n    if (mySigs.length < 1) throw new Error('No signatures for this pubkey');\n    const results = [];\n    let hashCache;\n    let scriptCache;\n    let sighashCache;\n    for (const pSig of mySigs) {\n      const sig = bscript.signature.decode(pSig.signature);\n      const { hash, script } =\n        sighashCache !== sig.hashType\n          ? getHashForSig(\n              inputIndex,\n              Object.assign({}, input, { sighashType: sig.hashType }),\n              this.__CACHE,\n              true,\n            )\n          : { hash: hashCache, script: scriptCache };\n      sighashCache = sig.hashType;\n      hashCache = hash;\n      scriptCache = script;\n      checkScriptForPubkey(pSig.pubkey, script, 'verify');\n      const keypair = ecpair_1.fromPublicKey(pSig.pubkey);\n      results.push(keypair.verify(hash, sig.signature));\n    }\n    return results.every(res => res === true);\n  }\n  signAllInputsHD(\n    hdKeyPair,\n    sighashTypes = [transaction_1.Transaction.SIGHASH_ALL],\n  ) {\n    if (!hdKeyPair || !hdKeyPair.publicKey || !hdKeyPair.fingerprint) {\n      throw new Error('Need HDSigner to sign input');\n    }\n    const results = [];\n    for (const i of range(this.data.inputs.length)) {\n      try {\n        this.signInputHD(i, hdKeyPair, sighashTypes);\n        results.push(true);\n      } catch (err) {\n        results.push(false);\n      }\n    }\n    if (results.every(v => v === false)) {\n      throw new Error('No inputs were signed');\n    }\n    return this;\n  }\n  signAllInputsHDAsync(\n    hdKeyPair,\n    sighashTypes = [transaction_1.Transaction.SIGHASH_ALL],\n  ) {\n    return new Promise((resolve, reject) => {\n      if (!hdKeyPair || !hdKeyPair.publicKey || !hdKeyPair.fingerprint) {\n        return reject(new Error('Need HDSigner to sign input'));\n      }\n      const results = [];\n      const promises = [];\n      for (const i of range(this.data.inputs.length)) {\n        promises.push(\n          this.signInputHDAsync(i, hdKeyPair, sighashTypes).then(\n            () => {\n              results.push(true);\n            },\n            () => {\n              results.push(false);\n            },\n          ),\n        );\n      }\n      return Promise.all(promises).then(() => {\n        if (results.every(v => v === false)) {\n          return reject(new Error('No inputs were signed'));\n        }\n        resolve();\n      });\n    });\n  }\n  signInputHD(\n    inputIndex,\n    hdKeyPair,\n    sighashTypes = [transaction_1.Transaction.SIGHASH_ALL],\n  ) {\n    if (!hdKeyPair || !hdKeyPair.publicKey || !hdKeyPair.fingerprint) {\n      throw new Error('Need HDSigner to sign input');\n    }\n    const signers = getSignersFromHD(inputIndex, this.data.inputs, hdKeyPair);\n    signers.forEach(signer => this.signInput(inputIndex, signer, sighashTypes));\n    return this;\n  }\n  signInputHDAsync(\n    inputIndex,\n    hdKeyPair,\n    sighashTypes = [transaction_1.Transaction.SIGHASH_ALL],\n  ) {\n    return new Promise((resolve, reject) => {\n      if (!hdKeyPair || !hdKeyPair.publicKey || !hdKeyPair.fingerprint) {\n        return reject(new Error('Need HDSigner to sign input'));\n      }\n      const signers = getSignersFromHD(inputIndex, this.data.inputs, hdKeyPair);\n      const promises = signers.map(signer =>\n        this.signInputAsync(inputIndex, signer, sighashTypes),\n      );\n      return Promise.all(promises)\n        .then(() => {\n          resolve();\n        })\n        .catch(reject);\n    });\n  }\n  signAllInputs(\n    keyPair,\n    sighashTypes = [transaction_1.Transaction.SIGHASH_ALL],\n  ) {\n    if (!keyPair || !keyPair.publicKey)\n      throw new Error('Need Signer to sign input');\n    // TODO: Add a pubkey/pubkeyhash cache to each input\n    // as input information is added, then eventually\n    // optimize this method.\n    const results = [];\n    for (const i of range(this.data.inputs.length)) {\n      try {\n        this.signInput(i, keyPair, sighashTypes);\n        results.push(true);\n      } catch (err) {\n        results.push(false);\n      }\n    }\n    if (results.every(v => v === false)) {\n      throw new Error('No inputs were signed');\n    }\n    return this;\n  }\n  signAllInputsAsync(\n    keyPair,\n    sighashTypes = [transaction_1.Transaction.SIGHASH_ALL],\n  ) {\n    return new Promise((resolve, reject) => {\n      if (!keyPair || !keyPair.publicKey)\n        return reject(new Error('Need Signer to sign input'));\n      // TODO: Add a pubkey/pubkeyhash cache to each input\n      // as input information is added, then eventually\n      // optimize this method.\n      const results = [];\n      const promises = [];\n      for (const [i] of this.data.inputs.entries()) {\n        promises.push(\n          this.signInputAsync(i, keyPair, sighashTypes).then(\n            () => {\n              results.push(true);\n            },\n            () => {\n              results.push(false);\n            },\n          ),\n        );\n      }\n      return Promise.all(promises).then(() => {\n        if (results.every(v => v === false)) {\n          return reject(new Error('No inputs were signed'));\n        }\n        resolve();\n      });\n    });\n  }\n  signInput(\n    inputIndex,\n    keyPair,\n    sighashTypes = [transaction_1.Transaction.SIGHASH_ALL],\n  ) {\n    if (!keyPair || !keyPair.publicKey)\n      throw new Error('Need Signer to sign input');\n    const { hash, sighashType } = getHashAndSighashType(\n      this.data.inputs,\n      inputIndex,\n      keyPair.publicKey,\n      this.__CACHE,\n      sighashTypes,\n    );\n    const partialSig = [\n      {\n        pubkey: keyPair.publicKey,\n        signature: bscript.signature.encode(keyPair.sign(hash), sighashType),\n      },\n    ];\n    this.data.updateInput(inputIndex, { partialSig });\n    return this;\n  }\n  signInputAsync(\n    inputIndex,\n    keyPair,\n    sighashTypes = [transaction_1.Transaction.SIGHASH_ALL],\n  ) {\n    return Promise.resolve().then(() => {\n      if (!keyPair || !keyPair.publicKey)\n        throw new Error('Need Signer to sign input');\n      const { hash, sighashType } = getHashAndSighashType(\n        this.data.inputs,\n        inputIndex,\n        keyPair.publicKey,\n        this.__CACHE,\n        sighashTypes,\n      );\n      return Promise.resolve(keyPair.sign(hash)).then(signature => {\n        const partialSig = [\n          {\n            pubkey: keyPair.publicKey,\n            signature: bscript.signature.encode(signature, sighashType),\n          },\n        ];\n        this.data.updateInput(inputIndex, { partialSig });\n      });\n    });\n  }\n  toBuffer() {\n    checkCache(this.__CACHE);\n    return this.data.toBuffer();\n  }\n  toHex() {\n    checkCache(this.__CACHE);\n    return this.data.toHex();\n  }\n  toBase64() {\n    checkCache(this.__CACHE);\n    return this.data.toBase64();\n  }\n  updateGlobal(updateData) {\n    this.data.updateGlobal(updateData);\n    return this;\n  }\n  updateInput(inputIndex, updateData) {\n    if (updateData.witnessScript) checkInvalidP2WSH(updateData.witnessScript);\n    this.data.updateInput(inputIndex, updateData);\n    if (updateData.nonWitnessUtxo) {\n      addNonWitnessTxCache(\n        this.__CACHE,\n        this.data.inputs[inputIndex],\n        inputIndex,\n      );\n    }\n    return this;\n  }\n  updateOutput(outputIndex, updateData) {\n    this.data.updateOutput(outputIndex, updateData);\n    return this;\n  }\n  addUnknownKeyValToGlobal(keyVal) {\n    this.data.addUnknownKeyValToGlobal(keyVal);\n    return this;\n  }\n  addUnknownKeyValToInput(inputIndex, keyVal) {\n    this.data.addUnknownKeyValToInput(inputIndex, keyVal);\n    return this;\n  }\n  addUnknownKeyValToOutput(outputIndex, keyVal) {\n    this.data.addUnknownKeyValToOutput(outputIndex, keyVal);\n    return this;\n  }\n  clearFinalizedInput(inputIndex) {\n    this.data.clearFinalizedInput(inputIndex);\n    return this;\n  }\n}\nexports.Psbt = Psbt;\n/**\n * This function is needed to pass to the bip174 base class's fromBuffer.\n * It takes the \"transaction buffer\" portion of the psbt buffer and returns a\n * Transaction (From the bip174 library) interface.\n */\nconst transactionFromBuffer = buffer => new PsbtTransaction(buffer);\n/**\n * This class implements the Transaction interface from bip174 library.\n * It contains a bitcoinjs-lib Transaction object.\n */\nclass PsbtTransaction {\n  constructor(buffer = Buffer.from([2, 0, 0, 0, 0, 0, 0, 0, 0, 0])) {\n    this.tx = transaction_1.Transaction.fromBuffer(buffer);\n    checkTxEmpty(this.tx);\n    Object.defineProperty(this, 'tx', {\n      enumerable: false,\n      writable: true,\n    });\n  }\n  getInputOutputCounts() {\n    return {\n      inputCount: this.tx.ins.length,\n      outputCount: this.tx.outs.length,\n    };\n  }\n  addInput(input) {\n    if (\n      input.hash === undefined ||\n      input.index === undefined ||\n      (!Buffer.isBuffer(input.hash) && typeof input.hash !== 'string') ||\n      typeof input.index !== 'number'\n    ) {\n      throw new Error('Error adding input.');\n    }\n    const hash =\n      typeof input.hash === 'string'\n        ? bufferutils_1.reverseBuffer(Buffer.from(input.hash, 'hex'))\n        : input.hash;\n    this.tx.addInput(hash, input.index, input.sequence);\n  }\n  addOutput(output) {\n    if (\n      output.script === undefined ||\n      output.value === undefined ||\n      !Buffer.isBuffer(output.script) ||\n      typeof output.value !== 'number'\n    ) {\n      throw new Error('Error adding output.');\n    }\n    this.tx.addOutput(output.script, output.value);\n  }\n  toBuffer() {\n    return this.tx.toBuffer();\n  }\n}\nfunction canFinalize(input, script, scriptType) {\n  switch (scriptType) {\n    case 'pubkey':\n    case 'pubkeyhash':\n    case 'witnesspubkeyhash':\n      return hasSigs(1, input.partialSig);\n    case 'multisig':\n      const p2ms = payments.p2ms({ output: script });\n      return hasSigs(p2ms.m, input.partialSig, p2ms.pubkeys);\n    default:\n      return false;\n  }\n}\nfunction checkCache(cache) {\n  if (cache.__UNSAFE_SIGN_NONSEGWIT !== false) {\n    throw new Error('Not BIP174 compliant, can not export');\n  }\n}\nfunction hasSigs(neededSigs, partialSig, pubkeys) {\n  if (!partialSig) return false;\n  let sigs;\n  if (pubkeys) {\n    sigs = pubkeys\n      .map(pkey => {\n        const pubkey = ecpair_1.fromPublicKey(pkey, { compressed: true })\n          .publicKey;\n        return partialSig.find(pSig => pSig.pubkey.equals(pubkey));\n      })\n      .filter(v => !!v);\n  } else {\n    sigs = partialSig;\n  }\n  if (sigs.length > neededSigs) throw new Error('Too many signatures');\n  return sigs.length === neededSigs;\n}\nfunction isFinalized(input) {\n  return !!input.finalScriptSig || !!input.finalScriptWitness;\n}\nfunction isPaymentFactory(payment) {\n  return script => {\n    try {\n      payment({ output: script });\n      return true;\n    } catch (err) {\n      return false;\n    }\n  };\n}\nconst isP2MS = isPaymentFactory(payments.p2ms);\nconst isP2PK = isPaymentFactory(payments.p2pk);\nconst isP2PKH = isPaymentFactory(payments.p2pkh);\nconst isP2WPKH = isPaymentFactory(payments.p2wpkh);\nconst isP2WSHScript = isPaymentFactory(payments.p2wsh);\nconst isP2SHScript = isPaymentFactory(payments.p2sh);\nfunction bip32DerivationIsMine(root) {\n  return d => {\n    if (!d.masterFingerprint.equals(root.fingerprint)) return false;\n    if (!root.derivePath(d.path).publicKey.equals(d.pubkey)) return false;\n    return true;\n  };\n}\nfunction check32Bit(num) {\n  if (\n    typeof num !== 'number' ||\n    num !== Math.floor(num) ||\n    num > 0xffffffff ||\n    num < 0\n  ) {\n    throw new Error('Invalid 32 bit integer');\n  }\n}\nfunction checkFees(psbt, cache, opts) {\n  const feeRate = cache.__FEE_RATE || psbt.getFeeRate();\n  const vsize = cache.__EXTRACTED_TX.virtualSize();\n  const satoshis = feeRate * vsize;\n  if (feeRate >= opts.maximumFeeRate) {\n    throw new Error(\n      `Warning: You are paying around ${(satoshis / 1e8).toFixed(8)} in ` +\n        `fees, which is ${feeRate} satoshi per byte for a transaction ` +\n        `with a VSize of ${vsize} bytes (segwit counted as 0.25 byte per ` +\n        `byte). Use setMaximumFeeRate method to raise your threshold, or ` +\n        `pass true to the first arg of extractTransaction.`,\n    );\n  }\n}\nfunction checkInputsForPartialSig(inputs, action) {\n  inputs.forEach(input => {\n    let throws = false;\n    let pSigs = [];\n    if ((input.partialSig || []).length === 0) {\n      if (!input.finalScriptSig && !input.finalScriptWitness) return;\n      pSigs = getPsigsFromInputFinalScripts(input);\n    } else {\n      pSigs = input.partialSig;\n    }\n    pSigs.forEach(pSig => {\n      const { hashType } = bscript.signature.decode(pSig.signature);\n      const whitelist = [];\n      const isAnyoneCanPay =\n        hashType & transaction_1.Transaction.SIGHASH_ANYONECANPAY;\n      if (isAnyoneCanPay) whitelist.push('addInput');\n      const hashMod = hashType & 0x1f;\n      switch (hashMod) {\n        case transaction_1.Transaction.SIGHASH_ALL:\n          break;\n        case transaction_1.Transaction.SIGHASH_SINGLE:\n        case transaction_1.Transaction.SIGHASH_NONE:\n          whitelist.push('addOutput');\n          whitelist.push('setInputSequence');\n          break;\n      }\n      if (whitelist.indexOf(action) === -1) {\n        throws = true;\n      }\n    });\n    if (throws) {\n      throw new Error('Can not modify transaction, signatures exist.');\n    }\n  });\n}\nfunction checkPartialSigSighashes(input) {\n  if (!input.sighashType || !input.partialSig) return;\n  const { partialSig, sighashType } = input;\n  partialSig.forEach(pSig => {\n    const { hashType } = bscript.signature.decode(pSig.signature);\n    if (sighashType !== hashType) {\n      throw new Error('Signature sighash does not match input sighash type');\n    }\n  });\n}\nfunction checkScriptForPubkey(pubkey, script, action) {\n  if (!pubkeyInScript(pubkey, script)) {\n    throw new Error(\n      `Can not ${action} for this input with the key ${pubkey.toString('hex')}`,\n    );\n  }\n}\nfunction checkTxEmpty(tx) {\n  const isEmpty = tx.ins.every(\n    input =>\n      input.script &&\n      input.script.length === 0 &&\n      input.witness &&\n      input.witness.length === 0,\n  );\n  if (!isEmpty) {\n    throw new Error('Format Error: Transaction ScriptSigs are not empty');\n  }\n}\nfunction checkTxForDupeIns(tx, cache) {\n  tx.ins.forEach(input => {\n    checkTxInputCache(cache, input);\n  });\n}\nfunction checkTxInputCache(cache, input) {\n  const key =\n    bufferutils_1.reverseBuffer(Buffer.from(input.hash)).toString('hex') +\n    ':' +\n    input.index;\n  if (cache.__TX_IN_CACHE[key]) throw new Error('Duplicate input detected.');\n  cache.__TX_IN_CACHE[key] = 1;\n}\nfunction scriptCheckerFactory(payment, paymentScriptName) {\n  return (inputIndex, scriptPubKey, redeemScript, ioType) => {\n    const redeemScriptOutput = payment({\n      redeem: { output: redeemScript },\n    }).output;\n    if (!scriptPubKey.equals(redeemScriptOutput)) {\n      throw new Error(\n        `${paymentScriptName} for ${ioType} #${inputIndex} doesn't match the scriptPubKey in the prevout`,\n      );\n    }\n  };\n}\nconst checkRedeemScript = scriptCheckerFactory(payments.p2sh, 'Redeem script');\nconst checkWitnessScript = scriptCheckerFactory(\n  payments.p2wsh,\n  'Witness script',\n);\nfunction getTxCacheValue(key, name, inputs, c) {\n  if (!inputs.every(isFinalized))\n    throw new Error(`PSBT must be finalized to calculate ${name}`);\n  if (key === '__FEE_RATE' && c.__FEE_RATE) return c.__FEE_RATE;\n  if (key === '__FEE' && c.__FEE) return c.__FEE;\n  let tx;\n  let mustFinalize = true;\n  if (c.__EXTRACTED_TX) {\n    tx = c.__EXTRACTED_TX;\n    mustFinalize = false;\n  } else {\n    tx = c.__TX.clone();\n  }\n  inputFinalizeGetAmts(inputs, tx, c, mustFinalize);\n  if (key === '__FEE_RATE') return c.__FEE_RATE;\n  else if (key === '__FEE') return c.__FEE;\n}\nfunction getFinalScripts(inputIndex, input, script, isSegwit, isP2SH, isP2WSH) {\n  const scriptType = classifyScript(script);\n  if (!canFinalize(input, script, scriptType))\n    throw new Error(`Can not finalize input #${inputIndex}`);\n  return prepareFinalScripts(\n    script,\n    scriptType,\n    input.partialSig,\n    isSegwit,\n    isP2SH,\n    isP2WSH,\n  );\n}\nfunction prepareFinalScripts(\n  script,\n  scriptType,\n  partialSig,\n  isSegwit,\n  isP2SH,\n  isP2WSH,\n) {\n  let finalScriptSig;\n  let finalScriptWitness;\n  // Wow, the payments API is very handy\n  const payment = getPayment(script, scriptType, partialSig);\n  const p2wsh = !isP2WSH ? null : payments.p2wsh({ redeem: payment });\n  const p2sh = !isP2SH ? null : payments.p2sh({ redeem: p2wsh || payment });\n  if (isSegwit) {\n    if (p2wsh) {\n      finalScriptWitness = witnessStackToScriptWitness(p2wsh.witness);\n    } else {\n      finalScriptWitness = witnessStackToScriptWitness(payment.witness);\n    }\n    if (p2sh) {\n      finalScriptSig = p2sh.input;\n    }\n  } else {\n    if (p2sh) {\n      finalScriptSig = p2sh.input;\n    } else {\n      finalScriptSig = payment.input;\n    }\n  }\n  return {\n    finalScriptSig,\n    finalScriptWitness,\n  };\n}\nfunction getHashAndSighashType(\n  inputs,\n  inputIndex,\n  pubkey,\n  cache,\n  sighashTypes,\n) {\n  const input = utils_1.checkForInput(inputs, inputIndex);\n  const { hash, sighashType, script } = getHashForSig(\n    inputIndex,\n    input,\n    cache,\n    false,\n    sighashTypes,\n  );\n  checkScriptForPubkey(pubkey, script, 'sign');\n  return {\n    hash,\n    sighashType,\n  };\n}\nfunction getHashForSig(inputIndex, input, cache, forValidate, sighashTypes) {\n  const unsignedTx = cache.__TX;\n  const sighashType =\n    input.sighashType || transaction_1.Transaction.SIGHASH_ALL;\n  if (sighashTypes && sighashTypes.indexOf(sighashType) < 0) {\n    const str = sighashTypeToString(sighashType);\n    throw new Error(\n      `Sighash type is not allowed. Retry the sign method passing the ` +\n        `sighashTypes array of whitelisted types. Sighash type: ${str}`,\n    );\n  }\n  let hash;\n  let prevout;\n  if (input.nonWitnessUtxo) {\n    const nonWitnessUtxoTx = nonWitnessUtxoTxFromCache(\n      cache,\n      input,\n      inputIndex,\n    );\n    const prevoutHash = unsignedTx.ins[inputIndex].hash;\n    const utxoHash = nonWitnessUtxoTx.getHash();\n    // If a non-witness UTXO is provided, its hash must match the hash specified in the prevout\n    if (!prevoutHash.equals(utxoHash)) {\n      throw new Error(\n        `Non-witness UTXO hash for input #${inputIndex} doesn't match the hash specified in the prevout`,\n      );\n    }\n    const prevoutIndex = unsignedTx.ins[inputIndex].index;\n    prevout = nonWitnessUtxoTx.outs[prevoutIndex];\n  } else if (input.witnessUtxo) {\n    prevout = input.witnessUtxo;\n  } else {\n    throw new Error('Need a Utxo input item for signing');\n  }\n  const { meaningfulScript, type } = getMeaningfulScript(\n    prevout.script,\n    inputIndex,\n    'input',\n    input.redeemScript,\n    input.witnessScript,\n  );\n  if (['p2sh-p2wsh', 'p2wsh'].indexOf(type) >= 0) {\n    hash = unsignedTx.hashForWitnessV0(\n      inputIndex,\n      meaningfulScript,\n      prevout.value,\n      sighashType,\n    );\n  } else if (isP2WPKH(meaningfulScript)) {\n    // P2WPKH uses the P2PKH template for prevoutScript when signing\n    const signingScript = payments.p2pkh({ hash: meaningfulScript.slice(2) })\n      .output;\n    hash = unsignedTx.hashForWitnessV0(\n      inputIndex,\n      signingScript,\n      prevout.value,\n      sighashType,\n    );\n  } else {\n    // non-segwit\n    if (\n      input.nonWitnessUtxo === undefined &&\n      cache.__UNSAFE_SIGN_NONSEGWIT === false\n    )\n      throw new Error(\n        `Input #${inputIndex} has witnessUtxo but non-segwit script: ` +\n          `${meaningfulScript.toString('hex')}`,\n      );\n    if (!forValidate && cache.__UNSAFE_SIGN_NONSEGWIT !== false)\n      console.warn(\n        'Warning: Signing non-segwit inputs without the full parent transaction ' +\n          'means there is a chance that a miner could feed you incorrect information ' +\n          'to trick you into paying large fees. This behavior is the same as the old ' +\n          'TransactionBuilder class when signing non-segwit scripts. You are not ' +\n          'able to export this Psbt with toBuffer|toBase64|toHex since it is not ' +\n          'BIP174 compliant.\\n*********************\\nPROCEED WITH CAUTION!\\n' +\n          '*********************',\n      );\n    hash = unsignedTx.hashForSignature(\n      inputIndex,\n      meaningfulScript,\n      sighashType,\n    );\n  }\n  return {\n    script: meaningfulScript,\n    sighashType,\n    hash,\n  };\n}\nfunction getPayment(script, scriptType, partialSig) {\n  let payment;\n  switch (scriptType) {\n    case 'multisig':\n      const sigs = getSortedSigs(script, partialSig);\n      payment = payments.p2ms({\n        output: script,\n        signatures: sigs,\n      });\n      break;\n    case 'pubkey':\n      payment = payments.p2pk({\n        output: script,\n        signature: partialSig[0].signature,\n      });\n      break;\n    case 'pubkeyhash':\n      payment = payments.p2pkh({\n        output: script,\n        pubkey: partialSig[0].pubkey,\n        signature: partialSig[0].signature,\n      });\n      break;\n    case 'witnesspubkeyhash':\n      payment = payments.p2wpkh({\n        output: script,\n        pubkey: partialSig[0].pubkey,\n        signature: partialSig[0].signature,\n      });\n      break;\n  }\n  return payment;\n}\nfunction getPsigsFromInputFinalScripts(input) {\n  const scriptItems = !input.finalScriptSig\n    ? []\n    : bscript.decompile(input.finalScriptSig) || [];\n  const witnessItems = !input.finalScriptWitness\n    ? []\n    : bscript.decompile(input.finalScriptWitness) || [];\n  return scriptItems\n    .concat(witnessItems)\n    .filter(item => {\n      return Buffer.isBuffer(item) && bscript.isCanonicalScriptSignature(item);\n    })\n    .map(sig => ({ signature: sig }));\n}\nfunction getScriptFromInput(inputIndex, input, cache) {\n  const unsignedTx = cache.__TX;\n  const res = {\n    script: null,\n    isSegwit: false,\n    isP2SH: false,\n    isP2WSH: false,\n  };\n  res.isP2SH = !!input.redeemScript;\n  res.isP2WSH = !!input.witnessScript;\n  if (input.witnessScript) {\n    res.script = input.witnessScript;\n  } else if (input.redeemScript) {\n    res.script = input.redeemScript;\n  } else {\n    if (input.nonWitnessUtxo) {\n      const nonWitnessUtxoTx = nonWitnessUtxoTxFromCache(\n        cache,\n        input,\n        inputIndex,\n      );\n      const prevoutIndex = unsignedTx.ins[inputIndex].index;\n      res.script = nonWitnessUtxoTx.outs[prevoutIndex].script;\n    } else if (input.witnessUtxo) {\n      res.script = input.witnessUtxo.script;\n    }\n  }\n  if (input.witnessScript || isP2WPKH(res.script)) {\n    res.isSegwit = true;\n  }\n  return res;\n}\nfunction getSignersFromHD(inputIndex, inputs, hdKeyPair) {\n  const input = utils_1.checkForInput(inputs, inputIndex);\n  if (!input.bip32Derivation || input.bip32Derivation.length === 0) {\n    throw new Error('Need bip32Derivation to sign with HD');\n  }\n  const myDerivations = input.bip32Derivation\n    .map(bipDv => {\n      if (bipDv.masterFingerprint.equals(hdKeyPair.fingerprint)) {\n        return bipDv;\n      } else {\n        return;\n      }\n    })\n    .filter(v => !!v);\n  if (myDerivations.length === 0) {\n    throw new Error(\n      'Need one bip32Derivation masterFingerprint to match the HDSigner fingerprint',\n    );\n  }\n  const signers = myDerivations.map(bipDv => {\n    const node = hdKeyPair.derivePath(bipDv.path);\n    if (!bipDv.pubkey.equals(node.publicKey)) {\n      throw new Error('pubkey did not match bip32Derivation');\n    }\n    return node;\n  });\n  return signers;\n}\nfunction getSortedSigs(script, partialSig) {\n  const p2ms = payments.p2ms({ output: script });\n  // for each pubkey in order of p2ms script\n  return p2ms.pubkeys\n    .map(pk => {\n      // filter partialSig array by pubkey being equal\n      return (\n        partialSig.filter(ps => {\n          return ps.pubkey.equals(pk);\n        })[0] || {}\n      ).signature;\n      // Any pubkey without a match will return undefined\n      // this last filter removes all the undefined items in the array.\n    })\n    .filter(v => !!v);\n}\nfunction scriptWitnessToWitnessStack(buffer) {\n  let offset = 0;\n  function readSlice(n) {\n    offset += n;\n    return buffer.slice(offset - n, offset);\n  }\n  function readVarInt() {\n    const vi = varuint.decode(buffer, offset);\n    offset += varuint.decode.bytes;\n    return vi;\n  }\n  function readVarSlice() {\n    return readSlice(readVarInt());\n  }\n  function readVector() {\n    const count = readVarInt();\n    const vector = [];\n    for (let i = 0; i < count; i++) vector.push(readVarSlice());\n    return vector;\n  }\n  return readVector();\n}\nfunction sighashTypeToString(sighashType) {\n  let text =\n    sighashType & transaction_1.Transaction.SIGHASH_ANYONECANPAY\n      ? 'SIGHASH_ANYONECANPAY | '\n      : '';\n  const sigMod = sighashType & 0x1f;\n  switch (sigMod) {\n    case transaction_1.Transaction.SIGHASH_ALL:\n      text += 'SIGHASH_ALL';\n      break;\n    case transaction_1.Transaction.SIGHASH_SINGLE:\n      text += 'SIGHASH_SINGLE';\n      break;\n    case transaction_1.Transaction.SIGHASH_NONE:\n      text += 'SIGHASH_NONE';\n      break;\n  }\n  return text;\n}\nfunction witnessStackToScriptWitness(witness) {\n  let buffer = Buffer.allocUnsafe(0);\n  function writeSlice(slice) {\n    buffer = Buffer.concat([buffer, Buffer.from(slice)]);\n  }\n  function writeVarInt(i) {\n    const currentLen = buffer.length;\n    const varintLen = varuint.encodingLength(i);\n    buffer = Buffer.concat([buffer, Buffer.allocUnsafe(varintLen)]);\n    varuint.encode(i, buffer, currentLen);\n  }\n  function writeVarSlice(slice) {\n    writeVarInt(slice.length);\n    writeSlice(slice);\n  }\n  function writeVector(vector) {\n    writeVarInt(vector.length);\n    vector.forEach(writeVarSlice);\n  }\n  writeVector(witness);\n  return buffer;\n}\nfunction addNonWitnessTxCache(cache, input, inputIndex) {\n  cache.__NON_WITNESS_UTXO_BUF_CACHE[inputIndex] = input.nonWitnessUtxo;\n  const tx = transaction_1.Transaction.fromBuffer(input.nonWitnessUtxo);\n  cache.__NON_WITNESS_UTXO_TX_CACHE[inputIndex] = tx;\n  const self = cache;\n  const selfIndex = inputIndex;\n  delete input.nonWitnessUtxo;\n  Object.defineProperty(input, 'nonWitnessUtxo', {\n    enumerable: true,\n    get() {\n      const buf = self.__NON_WITNESS_UTXO_BUF_CACHE[selfIndex];\n      const txCache = self.__NON_WITNESS_UTXO_TX_CACHE[selfIndex];\n      if (buf !== undefined) {\n        return buf;\n      } else {\n        const newBuf = txCache.toBuffer();\n        self.__NON_WITNESS_UTXO_BUF_CACHE[selfIndex] = newBuf;\n        return newBuf;\n      }\n    },\n    set(data) {\n      self.__NON_WITNESS_UTXO_BUF_CACHE[selfIndex] = data;\n    },\n  });\n}\nfunction inputFinalizeGetAmts(inputs, tx, cache, mustFinalize) {\n  let inputAmount = 0;\n  inputs.forEach((input, idx) => {\n    if (mustFinalize && input.finalScriptSig)\n      tx.ins[idx].script = input.finalScriptSig;\n    if (mustFinalize && input.finalScriptWitness) {\n      tx.ins[idx].witness = scriptWitnessToWitnessStack(\n        input.finalScriptWitness,\n      );\n    }\n    if (input.witnessUtxo) {\n      inputAmount += input.witnessUtxo.value;\n    } else if (input.nonWitnessUtxo) {\n      const nwTx = nonWitnessUtxoTxFromCache(cache, input, idx);\n      const vout = tx.ins[idx].index;\n      const out = nwTx.outs[vout];\n      inputAmount += out.value;\n    }\n  });\n  const outputAmount = tx.outs.reduce((total, o) => total + o.value, 0);\n  const fee = inputAmount - outputAmount;\n  if (fee < 0) {\n    throw new Error('Outputs are spending more than Inputs');\n  }\n  const bytes = tx.virtualSize();\n  cache.__FEE = fee;\n  cache.__EXTRACTED_TX = tx;\n  cache.__FEE_RATE = Math.floor(fee / bytes);\n}\nfunction nonWitnessUtxoTxFromCache(cache, input, inputIndex) {\n  const c = cache.__NON_WITNESS_UTXO_TX_CACHE;\n  if (!c[inputIndex]) {\n    addNonWitnessTxCache(cache, input, inputIndex);\n  }\n  return c[inputIndex];\n}\nfunction getScriptFromUtxo(inputIndex, input, cache) {\n  if (input.witnessUtxo !== undefined) {\n    return input.witnessUtxo.script;\n  } else if (input.nonWitnessUtxo !== undefined) {\n    const nonWitnessUtxoTx = nonWitnessUtxoTxFromCache(\n      cache,\n      input,\n      inputIndex,\n    );\n    return nonWitnessUtxoTx.outs[cache.__TX.ins[inputIndex].index].script;\n  } else {\n    throw new Error(\"Can't find pubkey in input without Utxo data\");\n  }\n}\nfunction pubkeyInInput(pubkey, input, inputIndex, cache) {\n  const script = getScriptFromUtxo(inputIndex, input, cache);\n  const { meaningfulScript } = getMeaningfulScript(\n    script,\n    inputIndex,\n    'input',\n    input.redeemScript,\n    input.witnessScript,\n  );\n  return pubkeyInScript(pubkey, meaningfulScript);\n}\nfunction pubkeyInOutput(pubkey, output, outputIndex, cache) {\n  const script = cache.__TX.outs[outputIndex].script;\n  const { meaningfulScript } = getMeaningfulScript(\n    script,\n    outputIndex,\n    'output',\n    output.redeemScript,\n    output.witnessScript,\n  );\n  return pubkeyInScript(pubkey, meaningfulScript);\n}\nfunction redeemFromFinalScriptSig(finalScript) {\n  if (!finalScript) return;\n  const decomp = bscript.decompile(finalScript);\n  if (!decomp) return;\n  const lastItem = decomp[decomp.length - 1];\n  if (\n    !Buffer.isBuffer(lastItem) ||\n    isPubkeyLike(lastItem) ||\n    isSigLike(lastItem)\n  )\n    return;\n  const sDecomp = bscript.decompile(lastItem);\n  if (!sDecomp) return;\n  return lastItem;\n}\nfunction redeemFromFinalWitnessScript(finalScript) {\n  if (!finalScript) return;\n  const decomp = scriptWitnessToWitnessStack(finalScript);\n  const lastItem = decomp[decomp.length - 1];\n  if (isPubkeyLike(lastItem)) return;\n  const sDecomp = bscript.decompile(lastItem);\n  if (!sDecomp) return;\n  return lastItem;\n}\nfunction isPubkeyLike(buf) {\n  return buf.length === 33 && bscript.isCanonicalPubKey(buf);\n}\nfunction isSigLike(buf) {\n  return bscript.isCanonicalScriptSignature(buf);\n}\nfunction getMeaningfulScript(\n  script,\n  index,\n  ioType,\n  redeemScript,\n  witnessScript,\n) {\n  const isP2SH = isP2SHScript(script);\n  const isP2SHP2WSH = isP2SH && redeemScript && isP2WSHScript(redeemScript);\n  const isP2WSH = isP2WSHScript(script);\n  if (isP2SH && redeemScript === undefined)\n    throw new Error('scriptPubkey is P2SH but redeemScript missing');\n  if ((isP2WSH || isP2SHP2WSH) && witnessScript === undefined)\n    throw new Error(\n      'scriptPubkey or redeemScript is P2WSH but witnessScript missing',\n    );\n  let meaningfulScript;\n  if (isP2SHP2WSH) {\n    meaningfulScript = witnessScript;\n    checkRedeemScript(index, script, redeemScript, ioType);\n    checkWitnessScript(index, redeemScript, witnessScript, ioType);\n    checkInvalidP2WSH(meaningfulScript);\n  } else if (isP2WSH) {\n    meaningfulScript = witnessScript;\n    checkWitnessScript(index, script, witnessScript, ioType);\n    checkInvalidP2WSH(meaningfulScript);\n  } else if (isP2SH) {\n    meaningfulScript = redeemScript;\n    checkRedeemScript(index, script, redeemScript, ioType);\n  } else {\n    meaningfulScript = script;\n  }\n  return {\n    meaningfulScript,\n    type: isP2SHP2WSH\n      ? 'p2sh-p2wsh'\n      : isP2SH\n      ? 'p2sh'\n      : isP2WSH\n      ? 'p2wsh'\n      : 'raw',\n  };\n}\nfunction checkInvalidP2WSH(script) {\n  if (isP2WPKH(script) || isP2SHScript(script)) {\n    throw new Error('P2WPKH or P2SH can not be contained within P2WSH');\n  }\n}\nfunction pubkeyInScript(pubkey, script) {\n  const pubkeyHash = crypto_1.hash160(pubkey);\n  const decompiled = bscript.decompile(script);\n  if (decompiled === null) throw new Error('Unknown script error');\n  return decompiled.some(element => {\n    if (typeof element === 'number') return false;\n    return element.equals(pubkey) || element.equals(pubkeyHash);\n  });\n}\nfunction classifyScript(script) {\n  if (isP2WPKH(script)) return 'witnesspubkeyhash';\n  if (isP2PKH(script)) return 'pubkeyhash';\n  if (isP2MS(script)) return 'multisig';\n  if (isP2PK(script)) return 'pubkey';\n  return 'nonstandard';\n}\nfunction range(n) {\n  return [...Array(n).keys()];\n}\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst combiner_1 = require('./combiner');\nconst parser_1 = require('./parser');\nconst typeFields_1 = require('./typeFields');\nconst utils_1 = require('./utils');\nclass Psbt {\n  constructor(tx) {\n    this.inputs = [];\n    this.outputs = [];\n    this.globalMap = {\n      unsignedTx: tx,\n    };\n  }\n  static fromBase64(data, txFromBuffer) {\n    const buffer = Buffer.from(data, 'base64');\n    return this.fromBuffer(buffer, txFromBuffer);\n  }\n  static fromHex(data, txFromBuffer) {\n    const buffer = Buffer.from(data, 'hex');\n    return this.fromBuffer(buffer, txFromBuffer);\n  }\n  static fromBuffer(buffer, txFromBuffer) {\n    const results = parser_1.psbtFromBuffer(buffer, txFromBuffer);\n    const psbt = new this(results.globalMap.unsignedTx);\n    Object.assign(psbt, results);\n    return psbt;\n  }\n  toBase64() {\n    const buffer = this.toBuffer();\n    return buffer.toString('base64');\n  }\n  toHex() {\n    const buffer = this.toBuffer();\n    return buffer.toString('hex');\n  }\n  toBuffer() {\n    return parser_1.psbtToBuffer(this);\n  }\n  updateGlobal(updateData) {\n    utils_1.updateGlobal(updateData, this.globalMap);\n    return this;\n  }\n  updateInput(inputIndex, updateData) {\n    const input = utils_1.checkForInput(this.inputs, inputIndex);\n    utils_1.updateInput(updateData, input);\n    return this;\n  }\n  updateOutput(outputIndex, updateData) {\n    const output = utils_1.checkForOutput(this.outputs, outputIndex);\n    utils_1.updateOutput(updateData, output);\n    return this;\n  }\n  addUnknownKeyValToGlobal(keyVal) {\n    utils_1.checkHasKey(\n      keyVal,\n      this.globalMap.unknownKeyVals,\n      utils_1.getEnumLength(typeFields_1.GlobalTypes),\n    );\n    if (!this.globalMap.unknownKeyVals) this.globalMap.unknownKeyVals = [];\n    this.globalMap.unknownKeyVals.push(keyVal);\n    return this;\n  }\n  addUnknownKeyValToInput(inputIndex, keyVal) {\n    const input = utils_1.checkForInput(this.inputs, inputIndex);\n    utils_1.checkHasKey(\n      keyVal,\n      input.unknownKeyVals,\n      utils_1.getEnumLength(typeFields_1.InputTypes),\n    );\n    if (!input.unknownKeyVals) input.unknownKeyVals = [];\n    input.unknownKeyVals.push(keyVal);\n    return this;\n  }\n  addUnknownKeyValToOutput(outputIndex, keyVal) {\n    const output = utils_1.checkForOutput(this.outputs, outputIndex);\n    utils_1.checkHasKey(\n      keyVal,\n      output.unknownKeyVals,\n      utils_1.getEnumLength(typeFields_1.OutputTypes),\n    );\n    if (!output.unknownKeyVals) output.unknownKeyVals = [];\n    output.unknownKeyVals.push(keyVal);\n    return this;\n  }\n  addInput(inputData) {\n    this.globalMap.unsignedTx.addInput(inputData);\n    this.inputs.push({\n      unknownKeyVals: [],\n    });\n    const addKeyVals = inputData.unknownKeyVals || [];\n    const inputIndex = this.inputs.length - 1;\n    if (!Array.isArray(addKeyVals)) {\n      throw new Error('unknownKeyVals must be an Array');\n    }\n    addKeyVals.forEach(keyVal =>\n      this.addUnknownKeyValToInput(inputIndex, keyVal),\n    );\n    utils_1.addInputAttributes(this.inputs, inputData);\n    return this;\n  }\n  addOutput(outputData) {\n    this.globalMap.unsignedTx.addOutput(outputData);\n    this.outputs.push({\n      unknownKeyVals: [],\n    });\n    const addKeyVals = outputData.unknownKeyVals || [];\n    const outputIndex = this.outputs.length - 1;\n    if (!Array.isArray(addKeyVals)) {\n      throw new Error('unknownKeyVals must be an Array');\n    }\n    addKeyVals.forEach(keyVal =>\n      this.addUnknownKeyValToInput(outputIndex, keyVal),\n    );\n    utils_1.addOutputAttributes(this.outputs, outputData);\n    return this;\n  }\n  clearFinalizedInput(inputIndex) {\n    const input = utils_1.checkForInput(this.inputs, inputIndex);\n    utils_1.inputCheckUncleanFinalized(inputIndex, input);\n    for (const key of Object.keys(input)) {\n      if (\n        ![\n          'witnessUtxo',\n          'nonWitnessUtxo',\n          'finalScriptSig',\n          'finalScriptWitness',\n          'unknownKeyVals',\n        ].includes(key)\n      ) {\n        // @ts-ignore\n        delete input[key];\n      }\n    }\n    return this;\n  }\n  combine(...those) {\n    // Combine this with those.\n    // Return self for chaining.\n    const result = combiner_1.combine([this].concat(those));\n    Object.assign(this, result);\n    return this;\n  }\n  getTransaction() {\n    return this.globalMap.unsignedTx.toBuffer();\n  }\n}\nexports.Psbt = Psbt;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst parser_1 = require('../parser');\nfunction combine(psbts) {\n  const self = psbts[0];\n  const selfKeyVals = parser_1.psbtToKeyVals(self);\n  const others = psbts.slice(1);\n  if (others.length === 0) throw new Error('Combine: Nothing to combine');\n  const selfTx = getTx(self);\n  if (selfTx === undefined) {\n    throw new Error('Combine: Self missing transaction');\n  }\n  const selfGlobalSet = getKeySet(selfKeyVals.globalKeyVals);\n  const selfInputSets = selfKeyVals.inputKeyVals.map(getKeySet);\n  const selfOutputSets = selfKeyVals.outputKeyVals.map(getKeySet);\n  for (const other of others) {\n    const otherTx = getTx(other);\n    if (\n      otherTx === undefined ||\n      !otherTx.toBuffer().equals(selfTx.toBuffer())\n    ) {\n      throw new Error(\n        'Combine: One of the Psbts does not have the same transaction.',\n      );\n    }\n    const otherKeyVals = parser_1.psbtToKeyVals(other);\n    const otherGlobalSet = getKeySet(otherKeyVals.globalKeyVals);\n    otherGlobalSet.forEach(\n      keyPusher(\n        selfGlobalSet,\n        selfKeyVals.globalKeyVals,\n        otherKeyVals.globalKeyVals,\n      ),\n    );\n    const otherInputSets = otherKeyVals.inputKeyVals.map(getKeySet);\n    otherInputSets.forEach((inputSet, idx) =>\n      inputSet.forEach(\n        keyPusher(\n          selfInputSets[idx],\n          selfKeyVals.inputKeyVals[idx],\n          otherKeyVals.inputKeyVals[idx],\n        ),\n      ),\n    );\n    const otherOutputSets = otherKeyVals.outputKeyVals.map(getKeySet);\n    otherOutputSets.forEach((outputSet, idx) =>\n      outputSet.forEach(\n        keyPusher(\n          selfOutputSets[idx],\n          selfKeyVals.outputKeyVals[idx],\n          otherKeyVals.outputKeyVals[idx],\n        ),\n      ),\n    );\n  }\n  return parser_1.psbtFromKeyVals(selfTx, {\n    globalMapKeyVals: selfKeyVals.globalKeyVals,\n    inputKeyVals: selfKeyVals.inputKeyVals,\n    outputKeyVals: selfKeyVals.outputKeyVals,\n  });\n}\nexports.combine = combine;\nfunction keyPusher(selfSet, selfKeyVals, otherKeyVals) {\n  return key => {\n    if (selfSet.has(key)) return;\n    const newKv = otherKeyVals.filter(kv => kv.key.toString('hex') === key)[0];\n    selfKeyVals.push(newKv);\n    selfSet.add(key);\n  };\n}\nfunction getTx(psbt) {\n  return psbt.globalMap.unsignedTx;\n}\nfunction getKeySet(keyVals) {\n  const set = new Set();\n  keyVals.forEach(keyVal => {\n    const hex = keyVal.key.toString('hex');\n    if (set.has(hex))\n      throw new Error('Combine: KeyValue Map keys should be unique');\n    set.add(hex);\n  });\n  return set;\n}\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst convert = require('../converter');\nconst tools_1 = require('../converter/tools');\nconst varuint = require('../converter/varint');\nconst typeFields_1 = require('../typeFields');\nfunction psbtFromBuffer(buffer, txGetter) {\n  let offset = 0;\n  function varSlice() {\n    const keyLen = varuint.decode(buffer, offset);\n    offset += varuint.encodingLength(keyLen);\n    const key = buffer.slice(offset, offset + keyLen);\n    offset += keyLen;\n    return key;\n  }\n  function readUInt32BE() {\n    const num = buffer.readUInt32BE(offset);\n    offset += 4;\n    return num;\n  }\n  function readUInt8() {\n    const num = buffer.readUInt8(offset);\n    offset += 1;\n    return num;\n  }\n  function getKeyValue() {\n    const key = varSlice();\n    const value = varSlice();\n    return {\n      key,\n      value,\n    };\n  }\n  function checkEndOfKeyValPairs() {\n    if (offset >= buffer.length) {\n      throw new Error('Format Error: Unexpected End of PSBT');\n    }\n    const isEnd = buffer.readUInt8(offset) === 0;\n    if (isEnd) {\n      offset++;\n    }\n    return isEnd;\n  }\n  if (readUInt32BE() !== 0x70736274) {\n    throw new Error('Format Error: Invalid Magic Number');\n  }\n  if (readUInt8() !== 0xff) {\n    throw new Error(\n      'Format Error: Magic Number must be followed by 0xff separator',\n    );\n  }\n  const globalMapKeyVals = [];\n  const globalKeyIndex = {};\n  while (!checkEndOfKeyValPairs()) {\n    const keyVal = getKeyValue();\n    const hexKey = keyVal.key.toString('hex');\n    if (globalKeyIndex[hexKey]) {\n      throw new Error(\n        'Format Error: Keys must be unique for global keymap: key ' + hexKey,\n      );\n    }\n    globalKeyIndex[hexKey] = 1;\n    globalMapKeyVals.push(keyVal);\n  }\n  const unsignedTxMaps = globalMapKeyVals.filter(\n    keyVal => keyVal.key[0] === typeFields_1.GlobalTypes.UNSIGNED_TX,\n  );\n  if (unsignedTxMaps.length !== 1) {\n    throw new Error('Format Error: Only one UNSIGNED_TX allowed');\n  }\n  const unsignedTx = txGetter(unsignedTxMaps[0].value);\n  // Get input and output counts to loop the respective fields\n  const { inputCount, outputCount } = unsignedTx.getInputOutputCounts();\n  const inputKeyVals = [];\n  const outputKeyVals = [];\n  // Get input fields\n  for (const index of tools_1.range(inputCount)) {\n    const inputKeyIndex = {};\n    const input = [];\n    while (!checkEndOfKeyValPairs()) {\n      const keyVal = getKeyValue();\n      const hexKey = keyVal.key.toString('hex');\n      if (inputKeyIndex[hexKey]) {\n        throw new Error(\n          'Format Error: Keys must be unique for each input: ' +\n            'input index ' +\n            index +\n            ' key ' +\n            hexKey,\n        );\n      }\n      inputKeyIndex[hexKey] = 1;\n      input.push(keyVal);\n    }\n    inputKeyVals.push(input);\n  }\n  for (const index of tools_1.range(outputCount)) {\n    const outputKeyIndex = {};\n    const output = [];\n    while (!checkEndOfKeyValPairs()) {\n      const keyVal = getKeyValue();\n      const hexKey = keyVal.key.toString('hex');\n      if (outputKeyIndex[hexKey]) {\n        throw new Error(\n          'Format Error: Keys must be unique for each output: ' +\n            'output index ' +\n            index +\n            ' key ' +\n            hexKey,\n        );\n      }\n      outputKeyIndex[hexKey] = 1;\n      output.push(keyVal);\n    }\n    outputKeyVals.push(output);\n  }\n  return psbtFromKeyVals(unsignedTx, {\n    globalMapKeyVals,\n    inputKeyVals,\n    outputKeyVals,\n  });\n}\nexports.psbtFromBuffer = psbtFromBuffer;\nfunction checkKeyBuffer(type, keyBuf, keyNum) {\n  if (!keyBuf.equals(Buffer.from([keyNum]))) {\n    throw new Error(\n      `Format Error: Invalid ${type} key: ${keyBuf.toString('hex')}`,\n    );\n  }\n}\nexports.checkKeyBuffer = checkKeyBuffer;\nfunction psbtFromKeyVals(\n  unsignedTx,\n  { globalMapKeyVals, inputKeyVals, outputKeyVals },\n) {\n  // That was easy :-)\n  const globalMap = {\n    unsignedTx,\n  };\n  let txCount = 0;\n  for (const keyVal of globalMapKeyVals) {\n    // If a globalMap item needs pubkey, uncomment\n    // const pubkey = convert.globals.checkPubkey(keyVal);\n    switch (keyVal.key[0]) {\n      case typeFields_1.GlobalTypes.UNSIGNED_TX:\n        checkKeyBuffer(\n          'global',\n          keyVal.key,\n          typeFields_1.GlobalTypes.UNSIGNED_TX,\n        );\n        if (txCount > 0) {\n          throw new Error('Format Error: GlobalMap has multiple UNSIGNED_TX');\n        }\n        txCount++;\n        break;\n      case typeFields_1.GlobalTypes.GLOBAL_XPUB:\n        if (globalMap.globalXpub === undefined) {\n          globalMap.globalXpub = [];\n        }\n        globalMap.globalXpub.push(convert.globals.globalXpub.decode(keyVal));\n        break;\n      default:\n        // This will allow inclusion during serialization.\n        if (!globalMap.unknownKeyVals) globalMap.unknownKeyVals = [];\n        globalMap.unknownKeyVals.push(keyVal);\n    }\n  }\n  // Get input and output counts to loop the respective fields\n  const inputCount = inputKeyVals.length;\n  const outputCount = outputKeyVals.length;\n  const inputs = [];\n  const outputs = [];\n  // Get input fields\n  for (const index of tools_1.range(inputCount)) {\n    const input = {};\n    for (const keyVal of inputKeyVals[index]) {\n      convert.inputs.checkPubkey(keyVal);\n      switch (keyVal.key[0]) {\n        case typeFields_1.InputTypes.NON_WITNESS_UTXO:\n          checkKeyBuffer(\n            'input',\n            keyVal.key,\n            typeFields_1.InputTypes.NON_WITNESS_UTXO,\n          );\n          if (input.nonWitnessUtxo !== undefined) {\n            throw new Error(\n              'Format Error: Input has multiple NON_WITNESS_UTXO',\n            );\n          }\n          input.nonWitnessUtxo = convert.inputs.nonWitnessUtxo.decode(keyVal);\n          break;\n        case typeFields_1.InputTypes.WITNESS_UTXO:\n          checkKeyBuffer(\n            'input',\n            keyVal.key,\n            typeFields_1.InputTypes.WITNESS_UTXO,\n          );\n          if (input.witnessUtxo !== undefined) {\n            throw new Error('Format Error: Input has multiple WITNESS_UTXO');\n          }\n          input.witnessUtxo = convert.inputs.witnessUtxo.decode(keyVal);\n          break;\n        case typeFields_1.InputTypes.PARTIAL_SIG:\n          if (input.partialSig === undefined) {\n            input.partialSig = [];\n          }\n          input.partialSig.push(convert.inputs.partialSig.decode(keyVal));\n          break;\n        case typeFields_1.InputTypes.SIGHASH_TYPE:\n          checkKeyBuffer(\n            'input',\n            keyVal.key,\n            typeFields_1.InputTypes.SIGHASH_TYPE,\n          );\n          if (input.sighashType !== undefined) {\n            throw new Error('Format Error: Input has multiple SIGHASH_TYPE');\n          }\n          input.sighashType = convert.inputs.sighashType.decode(keyVal);\n          break;\n        case typeFields_1.InputTypes.REDEEM_SCRIPT:\n          checkKeyBuffer(\n            'input',\n            keyVal.key,\n            typeFields_1.InputTypes.REDEEM_SCRIPT,\n          );\n          if (input.redeemScript !== undefined) {\n            throw new Error('Format Error: Input has multiple REDEEM_SCRIPT');\n          }\n          input.redeemScript = convert.inputs.redeemScript.decode(keyVal);\n          break;\n        case typeFields_1.InputTypes.WITNESS_SCRIPT:\n          checkKeyBuffer(\n            'input',\n            keyVal.key,\n            typeFields_1.InputTypes.WITNESS_SCRIPT,\n          );\n          if (input.witnessScript !== undefined) {\n            throw new Error('Format Error: Input has multiple WITNESS_SCRIPT');\n          }\n          input.witnessScript = convert.inputs.witnessScript.decode(keyVal);\n          break;\n        case typeFields_1.InputTypes.BIP32_DERIVATION:\n          if (input.bip32Derivation === undefined) {\n            input.bip32Derivation = [];\n          }\n          input.bip32Derivation.push(\n            convert.inputs.bip32Derivation.decode(keyVal),\n          );\n          break;\n        case typeFields_1.InputTypes.FINAL_SCRIPTSIG:\n          checkKeyBuffer(\n            'input',\n            keyVal.key,\n            typeFields_1.InputTypes.FINAL_SCRIPTSIG,\n          );\n          input.finalScriptSig = convert.inputs.finalScriptSig.decode(keyVal);\n          break;\n        case typeFields_1.InputTypes.FINAL_SCRIPTWITNESS:\n          checkKeyBuffer(\n            'input',\n            keyVal.key,\n            typeFields_1.InputTypes.FINAL_SCRIPTWITNESS,\n          );\n          input.finalScriptWitness = convert.inputs.finalScriptWitness.decode(\n            keyVal,\n          );\n          break;\n        case typeFields_1.InputTypes.POR_COMMITMENT:\n          checkKeyBuffer(\n            'input',\n            keyVal.key,\n            typeFields_1.InputTypes.POR_COMMITMENT,\n          );\n          input.porCommitment = convert.inputs.porCommitment.decode(keyVal);\n          break;\n        default:\n          // This will allow inclusion during serialization.\n          if (!input.unknownKeyVals) input.unknownKeyVals = [];\n          input.unknownKeyVals.push(keyVal);\n      }\n    }\n    inputs.push(input);\n  }\n  for (const index of tools_1.range(outputCount)) {\n    const output = {};\n    for (const keyVal of outputKeyVals[index]) {\n      convert.outputs.checkPubkey(keyVal);\n      switch (keyVal.key[0]) {\n        case typeFields_1.OutputTypes.REDEEM_SCRIPT:\n          checkKeyBuffer(\n            'output',\n            keyVal.key,\n            typeFields_1.OutputTypes.REDEEM_SCRIPT,\n          );\n          if (output.redeemScript !== undefined) {\n            throw new Error('Format Error: Output has multiple REDEEM_SCRIPT');\n          }\n          output.redeemScript = convert.outputs.redeemScript.decode(keyVal);\n          break;\n        case typeFields_1.OutputTypes.WITNESS_SCRIPT:\n          checkKeyBuffer(\n            'output',\n            keyVal.key,\n            typeFields_1.OutputTypes.WITNESS_SCRIPT,\n          );\n          if (output.witnessScript !== undefined) {\n            throw new Error('Format Error: Output has multiple WITNESS_SCRIPT');\n          }\n          output.witnessScript = convert.outputs.witnessScript.decode(keyVal);\n          break;\n        case typeFields_1.OutputTypes.BIP32_DERIVATION:\n          if (output.bip32Derivation === undefined) {\n            output.bip32Derivation = [];\n          }\n          output.bip32Derivation.push(\n            convert.outputs.bip32Derivation.decode(keyVal),\n          );\n          break;\n        default:\n          if (!output.unknownKeyVals) output.unknownKeyVals = [];\n          output.unknownKeyVals.push(keyVal);\n      }\n    }\n    outputs.push(output);\n  }\n  return { globalMap, inputs, outputs };\n}\nexports.psbtFromKeyVals = psbtFromKeyVals;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst typeFields_1 = require('../../typeFields');\nconst range = n => [...Array(n).keys()];\nfunction decode(keyVal) {\n  if (keyVal.key[0] !== typeFields_1.GlobalTypes.GLOBAL_XPUB) {\n    throw new Error(\n      'Decode Error: could not decode globalXpub with key 0x' +\n        keyVal.key.toString('hex'),\n    );\n  }\n  if (keyVal.key.length !== 79 || ![2, 3].includes(keyVal.key[46])) {\n    throw new Error(\n      'Decode Error: globalXpub has invalid extended pubkey in key 0x' +\n        keyVal.key.toString('hex'),\n    );\n  }\n  if ((keyVal.value.length / 4) % 1 !== 0) {\n    throw new Error(\n      'Decode Error: Global GLOBAL_XPUB value length should be multiple of 4',\n    );\n  }\n  const extendedPubkey = keyVal.key.slice(1);\n  const data = {\n    masterFingerprint: keyVal.value.slice(0, 4),\n    extendedPubkey,\n    path: 'm',\n  };\n  for (const i of range(keyVal.value.length / 4 - 1)) {\n    const val = keyVal.value.readUInt32LE(i * 4 + 4);\n    const isHard = !!(val & 0x80000000);\n    const idx = val & 0x7fffffff;\n    data.path += '/' + idx.toString(10) + (isHard ? \"'\" : '');\n  }\n  return data;\n}\nexports.decode = decode;\nfunction encode(data) {\n  const head = Buffer.from([typeFields_1.GlobalTypes.GLOBAL_XPUB]);\n  const key = Buffer.concat([head, data.extendedPubkey]);\n  const splitPath = data.path.split('/');\n  const value = Buffer.allocUnsafe(splitPath.length * 4);\n  data.masterFingerprint.copy(value, 0);\n  let offset = 4;\n  splitPath.slice(1).forEach(level => {\n    const isHard = level.slice(-1) === \"'\";\n    let num = 0x7fffffff & parseInt(isHard ? level.slice(0, -1) : level, 10);\n    if (isHard) num += 0x80000000;\n    value.writeUInt32LE(num, offset);\n    offset += 4;\n  });\n  return {\n    key,\n    value,\n  };\n}\nexports.encode = encode;\nexports.expected =\n  '{ masterFingerprint: Buffer; extendedPubkey: Buffer; path: string; }';\nfunction check(data) {\n  const epk = data.extendedPubkey;\n  const mfp = data.masterFingerprint;\n  const p = data.path;\n  return (\n    Buffer.isBuffer(epk) &&\n    epk.length === 78 &&\n    [2, 3].indexOf(epk[45]) > -1 &&\n    Buffer.isBuffer(mfp) &&\n    mfp.length === 4 &&\n    typeof p === 'string' &&\n    !!p.match(/^m(\\/\\d+'?)+$/)\n  );\n}\nexports.check = check;\nfunction canAddToArray(array, item, dupeSet) {\n  const dupeString = item.extendedPubkey.toString('hex');\n  if (dupeSet.has(dupeString)) return false;\n  dupeSet.add(dupeString);\n  return (\n    array.filter(v => v.extendedPubkey.equals(item.extendedPubkey)).length === 0\n  );\n}\nexports.canAddToArray = canAddToArray;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst typeFields_1 = require('../../typeFields');\nfunction encode(data) {\n  return {\n    key: Buffer.from([typeFields_1.GlobalTypes.UNSIGNED_TX]),\n    value: data.toBuffer(),\n  };\n}\nexports.encode = encode;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst typeFields_1 = require('../../typeFields');\nfunction decode(keyVal) {\n  if (keyVal.key[0] !== typeFields_1.InputTypes.FINAL_SCRIPTSIG) {\n    throw new Error(\n      'Decode Error: could not decode finalScriptSig with key 0x' +\n        keyVal.key.toString('hex'),\n    );\n  }\n  return keyVal.value;\n}\nexports.decode = decode;\nfunction encode(data) {\n  const key = Buffer.from([typeFields_1.InputTypes.FINAL_SCRIPTSIG]);\n  return {\n    key,\n    value: data,\n  };\n}\nexports.encode = encode;\nexports.expected = 'Buffer';\nfunction check(data) {\n  return Buffer.isBuffer(data);\n}\nexports.check = check;\nfunction canAdd(currentData, newData) {\n  return !!currentData && !!newData && currentData.finalScriptSig === undefined;\n}\nexports.canAdd = canAdd;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst typeFields_1 = require('../../typeFields');\nfunction decode(keyVal) {\n  if (keyVal.key[0] !== typeFields_1.InputTypes.FINAL_SCRIPTWITNESS) {\n    throw new Error(\n      'Decode Error: could not decode finalScriptWitness with key 0x' +\n        keyVal.key.toString('hex'),\n    );\n  }\n  return keyVal.value;\n}\nexports.decode = decode;\nfunction encode(data) {\n  const key = Buffer.from([typeFields_1.InputTypes.FINAL_SCRIPTWITNESS]);\n  return {\n    key,\n    value: data,\n  };\n}\nexports.encode = encode;\nexports.expected = 'Buffer';\nfunction check(data) {\n  return Buffer.isBuffer(data);\n}\nexports.check = check;\nfunction canAdd(currentData, newData) {\n  return (\n    !!currentData && !!newData && currentData.finalScriptWitness === undefined\n  );\n}\nexports.canAdd = canAdd;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst typeFields_1 = require('../../typeFields');\nfunction decode(keyVal) {\n  if (keyVal.key[0] !== typeFields_1.InputTypes.NON_WITNESS_UTXO) {\n    throw new Error(\n      'Decode Error: could not decode nonWitnessUtxo with key 0x' +\n        keyVal.key.toString('hex'),\n    );\n  }\n  return keyVal.value;\n}\nexports.decode = decode;\nfunction encode(data) {\n  return {\n    key: Buffer.from([typeFields_1.InputTypes.NON_WITNESS_UTXO]),\n    value: data,\n  };\n}\nexports.encode = encode;\nexports.expected = 'Buffer';\nfunction check(data) {\n  return Buffer.isBuffer(data);\n}\nexports.check = check;\nfunction canAdd(currentData, newData) {\n  return !!currentData && !!newData && currentData.nonWitnessUtxo === undefined;\n}\nexports.canAdd = canAdd;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst typeFields_1 = require('../../typeFields');\nfunction decode(keyVal) {\n  if (keyVal.key[0] !== typeFields_1.InputTypes.PARTIAL_SIG) {\n    throw new Error(\n      'Decode Error: could not decode partialSig with key 0x' +\n        keyVal.key.toString('hex'),\n    );\n  }\n  if (\n    !(keyVal.key.length === 34 || keyVal.key.length === 66) ||\n    ![2, 3, 4].includes(keyVal.key[1])\n  ) {\n    throw new Error(\n      'Decode Error: partialSig has invalid pubkey in key 0x' +\n        keyVal.key.toString('hex'),\n    );\n  }\n  const pubkey = keyVal.key.slice(1);\n  return {\n    pubkey,\n    signature: keyVal.value,\n  };\n}\nexports.decode = decode;\nfunction encode(pSig) {\n  const head = Buffer.from([typeFields_1.InputTypes.PARTIAL_SIG]);\n  return {\n    key: Buffer.concat([head, pSig.pubkey]),\n    value: pSig.signature,\n  };\n}\nexports.encode = encode;\nexports.expected = '{ pubkey: Buffer; signature: Buffer; }';\nfunction check(data) {\n  return (\n    Buffer.isBuffer(data.pubkey) &&\n    Buffer.isBuffer(data.signature) &&\n    [33, 65].includes(data.pubkey.length) &&\n    [2, 3, 4].includes(data.pubkey[0]) &&\n    isDerSigWithSighash(data.signature)\n  );\n}\nexports.check = check;\nfunction isDerSigWithSighash(buf) {\n  if (!Buffer.isBuffer(buf) || buf.length < 9) return false;\n  if (buf[0] !== 0x30) return false;\n  if (buf.length !== buf[1] + 3) return false;\n  if (buf[2] !== 0x02) return false;\n  const rLen = buf[3];\n  if (rLen > 33 || rLen < 1) return false;\n  if (buf[3 + rLen + 1] !== 0x02) return false;\n  const sLen = buf[3 + rLen + 2];\n  if (sLen > 33 || sLen < 1) return false;\n  if (buf.length !== 3 + rLen + 2 + sLen + 2) return false;\n  return true;\n}\nfunction canAddToArray(array, item, dupeSet) {\n  const dupeString = item.pubkey.toString('hex');\n  if (dupeSet.has(dupeString)) return false;\n  dupeSet.add(dupeString);\n  return array.filter(v => v.pubkey.equals(item.pubkey)).length === 0;\n}\nexports.canAddToArray = canAddToArray;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst typeFields_1 = require('../../typeFields');\nfunction decode(keyVal) {\n  if (keyVal.key[0] !== typeFields_1.InputTypes.POR_COMMITMENT) {\n    throw new Error(\n      'Decode Error: could not decode porCommitment with key 0x' +\n        keyVal.key.toString('hex'),\n    );\n  }\n  return keyVal.value.toString('utf8');\n}\nexports.decode = decode;\nfunction encode(data) {\n  const key = Buffer.from([typeFields_1.InputTypes.POR_COMMITMENT]);\n  return {\n    key,\n    value: Buffer.from(data, 'utf8'),\n  };\n}\nexports.encode = encode;\nexports.expected = 'string';\nfunction check(data) {\n  return typeof data === 'string';\n}\nexports.check = check;\nfunction canAdd(currentData, newData) {\n  return !!currentData && !!newData && currentData.porCommitment === undefined;\n}\nexports.canAdd = canAdd;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst typeFields_1 = require('../../typeFields');\nfunction decode(keyVal) {\n  if (keyVal.key[0] !== typeFields_1.InputTypes.SIGHASH_TYPE) {\n    throw new Error(\n      'Decode Error: could not decode sighashType with key 0x' +\n        keyVal.key.toString('hex'),\n    );\n  }\n  return keyVal.value.readUInt32LE(0);\n}\nexports.decode = decode;\nfunction encode(data) {\n  const key = Buffer.from([typeFields_1.InputTypes.SIGHASH_TYPE]);\n  const value = Buffer.allocUnsafe(4);\n  value.writeUInt32LE(data, 0);\n  return {\n    key,\n    value,\n  };\n}\nexports.encode = encode;\nexports.expected = 'number';\nfunction check(data) {\n  return typeof data === 'number';\n}\nexports.check = check;\nfunction canAdd(currentData, newData) {\n  return !!currentData && !!newData && currentData.sighashType === undefined;\n}\nexports.canAdd = canAdd;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst typeFields_1 = require('../../typeFields');\nconst tools_1 = require('../tools');\nconst varuint = require('../varint');\nfunction decode(keyVal) {\n  if (keyVal.key[0] !== typeFields_1.InputTypes.WITNESS_UTXO) {\n    throw new Error(\n      'Decode Error: could not decode witnessUtxo with key 0x' +\n        keyVal.key.toString('hex'),\n    );\n  }\n  const value = tools_1.readUInt64LE(keyVal.value, 0);\n  let _offset = 8;\n  const scriptLen = varuint.decode(keyVal.value, _offset);\n  _offset += varuint.encodingLength(scriptLen);\n  const script = keyVal.value.slice(_offset);\n  if (script.length !== scriptLen) {\n    throw new Error('Decode Error: WITNESS_UTXO script is not proper length');\n  }\n  return {\n    script,\n    value,\n  };\n}\nexports.decode = decode;\nfunction encode(data) {\n  const { script, value } = data;\n  const varintLen = varuint.encodingLength(script.length);\n  const result = Buffer.allocUnsafe(8 + varintLen + script.length);\n  tools_1.writeUInt64LE(result, value, 0);\n  varuint.encode(script.length, result, 8);\n  script.copy(result, 8 + varintLen);\n  return {\n    key: Buffer.from([typeFields_1.InputTypes.WITNESS_UTXO]),\n    value: result,\n  };\n}\nexports.encode = encode;\nexports.expected = '{ script: Buffer; value: number; }';\nfunction check(data) {\n  return Buffer.isBuffer(data.script) && typeof data.value === 'number';\n}\nexports.check = check;\nfunction canAdd(currentData, newData) {\n  return !!currentData && !!newData && currentData.witnessUtxo === undefined;\n}\nexports.canAdd = canAdd;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst range = n => [...Array(n).keys()];\nfunction makeConverter(TYPE_BYTE) {\n  function decode(keyVal) {\n    if (keyVal.key[0] !== TYPE_BYTE) {\n      throw new Error(\n        'Decode Error: could not decode bip32Derivation with key 0x' +\n          keyVal.key.toString('hex'),\n      );\n    }\n    if (\n      !(keyVal.key.length === 34 || keyVal.key.length === 66) ||\n      ![2, 3, 4].includes(keyVal.key[1])\n    ) {\n      throw new Error(\n        'Decode Error: bip32Derivation has invalid pubkey in key 0x' +\n          keyVal.key.toString('hex'),\n      );\n    }\n    if ((keyVal.value.length / 4) % 1 !== 0) {\n      throw new Error(\n        'Decode Error: Input BIP32_DERIVATION value length should be multiple of 4',\n      );\n    }\n    const pubkey = keyVal.key.slice(1);\n    const data = {\n      masterFingerprint: keyVal.value.slice(0, 4),\n      pubkey,\n      path: 'm',\n    };\n    for (const i of range(keyVal.value.length / 4 - 1)) {\n      const val = keyVal.value.readUInt32LE(i * 4 + 4);\n      const isHard = !!(val & 0x80000000);\n      const idx = val & 0x7fffffff;\n      data.path += '/' + idx.toString(10) + (isHard ? \"'\" : '');\n    }\n    return data;\n  }\n  function encode(data) {\n    const head = Buffer.from([TYPE_BYTE]);\n    const key = Buffer.concat([head, data.pubkey]);\n    const splitPath = data.path.split('/');\n    const value = Buffer.allocUnsafe(splitPath.length * 4);\n    data.masterFingerprint.copy(value, 0);\n    let offset = 4;\n    splitPath.slice(1).forEach(level => {\n      const isHard = level.slice(-1) === \"'\";\n      let num = 0x7fffffff & parseInt(isHard ? level.slice(0, -1) : level, 10);\n      if (isHard) num += 0x80000000;\n      value.writeUInt32LE(num, offset);\n      offset += 4;\n    });\n    return {\n      key,\n      value,\n    };\n  }\n  const expected =\n    '{ masterFingerprint: Buffer; pubkey: Buffer; path: string; }';\n  function check(data) {\n    return (\n      Buffer.isBuffer(data.pubkey) &&\n      Buffer.isBuffer(data.masterFingerprint) &&\n      typeof data.path === 'string' &&\n      [33, 65].includes(data.pubkey.length) &&\n      [2, 3, 4].includes(data.pubkey[0]) &&\n      data.masterFingerprint.length === 4\n    );\n  }\n  function canAddToArray(array, item, dupeSet) {\n    const dupeString = item.pubkey.toString('hex');\n    if (dupeSet.has(dupeString)) return false;\n    dupeSet.add(dupeString);\n    return array.filter(v => v.pubkey.equals(item.pubkey)).length === 0;\n  }\n  return {\n    decode,\n    encode,\n    check,\n    expected,\n    canAddToArray,\n  };\n}\nexports.makeConverter = makeConverter;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nfunction makeChecker(pubkeyTypes) {\n  return checkPubkey;\n  function checkPubkey(keyVal) {\n    let pubkey;\n    if (pubkeyTypes.includes(keyVal.key[0])) {\n      pubkey = keyVal.key.slice(1);\n      if (\n        !(pubkey.length === 33 || pubkey.length === 65) ||\n        ![2, 3, 4].includes(pubkey[0])\n      ) {\n        throw new Error(\n          'Format Error: invalid pubkey in key 0x' + keyVal.key.toString('hex'),\n        );\n      }\n    }\n    return pubkey;\n  }\n}\nexports.makeChecker = makeChecker;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nfunction makeConverter(TYPE_BYTE) {\n  function decode(keyVal) {\n    if (keyVal.key[0] !== TYPE_BYTE) {\n      throw new Error(\n        'Decode Error: could not decode redeemScript with key 0x' +\n          keyVal.key.toString('hex'),\n      );\n    }\n    return keyVal.value;\n  }\n  function encode(data) {\n    const key = Buffer.from([TYPE_BYTE]);\n    return {\n      key,\n      value: data,\n    };\n  }\n  const expected = 'Buffer';\n  function check(data) {\n    return Buffer.isBuffer(data);\n  }\n  function canAdd(currentData, newData) {\n    return !!currentData && !!newData && currentData.redeemScript === undefined;\n  }\n  return {\n    decode,\n    encode,\n    check,\n    expected,\n    canAdd,\n  };\n}\nexports.makeConverter = makeConverter;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nfunction makeConverter(TYPE_BYTE) {\n  function decode(keyVal) {\n    if (keyVal.key[0] !== TYPE_BYTE) {\n      throw new Error(\n        'Decode Error: could not decode witnessScript with key 0x' +\n          keyVal.key.toString('hex'),\n      );\n    }\n    return keyVal.value;\n  }\n  function encode(data) {\n    const key = Buffer.from([TYPE_BYTE]);\n    return {\n      key,\n      value: data,\n    };\n  }\n  const expected = 'Buffer';\n  function check(data) {\n    return Buffer.isBuffer(data);\n  }\n  function canAdd(currentData, newData) {\n    return (\n      !!currentData && !!newData && currentData.witnessScript === undefined\n    );\n  }\n  return {\n    decode,\n    encode,\n    check,\n    expected,\n    canAdd,\n  };\n}\nexports.makeConverter = makeConverter;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst convert = require('../converter');\nconst tools_1 = require('../converter/tools');\nfunction psbtToBuffer({ globalMap, inputs, outputs }) {\n  const { globalKeyVals, inputKeyVals, outputKeyVals } = psbtToKeyVals({\n    globalMap,\n    inputs,\n    outputs,\n  });\n  const globalBuffer = tools_1.keyValsToBuffer(globalKeyVals);\n  const keyValsOrEmptyToBuffer = keyVals =>\n    keyVals.length === 0\n      ? [Buffer.from([0])]\n      : keyVals.map(tools_1.keyValsToBuffer);\n  const inputBuffers = keyValsOrEmptyToBuffer(inputKeyVals);\n  const outputBuffers = keyValsOrEmptyToBuffer(outputKeyVals);\n  const header = Buffer.allocUnsafe(5);\n  header.writeUIntBE(0x70736274ff, 0, 5);\n  return Buffer.concat(\n    [header, globalBuffer].concat(inputBuffers, outputBuffers),\n  );\n}\nexports.psbtToBuffer = psbtToBuffer;\nconst sortKeyVals = (a, b) => {\n  return a.key.compare(b.key);\n};\nfunction keyValsFromMap(keyValMap, converterFactory) {\n  const keyHexSet = new Set();\n  const keyVals = Object.entries(keyValMap).reduce((result, [key, value]) => {\n    if (key === 'unknownKeyVals') return result;\n    // We are checking for undefined anyways. So ignore TS error\n    // @ts-ignore\n    const converter = converterFactory[key];\n    if (converter === undefined) return result;\n    const encodedKeyVals = (Array.isArray(value) ? value : [value]).map(\n      converter.encode,\n    );\n    const keyHexes = encodedKeyVals.map(kv => kv.key.toString('hex'));\n    keyHexes.forEach(hex => {\n      if (keyHexSet.has(hex))\n        throw new Error('Serialize Error: Duplicate key: ' + hex);\n      keyHexSet.add(hex);\n    });\n    return result.concat(encodedKeyVals);\n  }, []);\n  // Get other keyVals that have not yet been gotten\n  const otherKeyVals = keyValMap.unknownKeyVals\n    ? keyValMap.unknownKeyVals.filter(keyVal => {\n        return !keyHexSet.has(keyVal.key.toString('hex'));\n      })\n    : [];\n  return keyVals.concat(otherKeyVals).sort(sortKeyVals);\n}\nfunction psbtToKeyVals({ globalMap, inputs, outputs }) {\n  // First parse the global keyVals\n  // Get any extra keyvals to pass along\n  return {\n    globalKeyVals: keyValsFromMap(globalMap, convert.globals),\n    inputKeyVals: inputs.map(i => keyValsFromMap(i, convert.inputs)),\n    outputKeyVals: outputs.map(o => keyValsFromMap(o, convert.outputs)),\n  };\n}\nexports.psbtToKeyVals = psbtToKeyVals;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst baddress = require('./address');\nconst bufferutils_1 = require('./bufferutils');\nconst classify = require('./classify');\nconst bcrypto = require('./crypto');\nconst ECPair = require('./ecpair');\nconst networks = require('./networks');\nconst payments = require('./payments');\nconst bscript = require('./script');\nconst script_1 = require('./script');\nconst transaction_1 = require('./transaction');\nconst types = require('./types');\nconst typeforce = require('typeforce');\nconst SCRIPT_TYPES = classify.types;\nconst PREVOUT_TYPES = new Set([\n  // Raw\n  'p2pkh',\n  'p2pk',\n  'p2wpkh',\n  'p2ms',\n  // P2SH wrapped\n  'p2sh-p2pkh',\n  'p2sh-p2pk',\n  'p2sh-p2wpkh',\n  'p2sh-p2ms',\n  // P2WSH wrapped\n  'p2wsh-p2pkh',\n  'p2wsh-p2pk',\n  'p2wsh-p2ms',\n  // P2SH-P2WSH wrapper\n  'p2sh-p2wsh-p2pkh',\n  'p2sh-p2wsh-p2pk',\n  'p2sh-p2wsh-p2ms',\n]);\nfunction tfMessage(type, value, message) {\n  try {\n    typeforce(type, value);\n  } catch (err) {\n    throw new Error(message);\n  }\n}\nfunction txIsString(tx) {\n  return typeof tx === 'string' || tx instanceof String;\n}\nfunction txIsTransaction(tx) {\n  return tx instanceof transaction_1.Transaction;\n}\nclass TransactionBuilder {\n  // WARNING: maximumFeeRate is __NOT__ to be relied on,\n  //          it's just another potential safety mechanism (safety in-depth)\n  constructor(network = networks.bitcoin, maximumFeeRate = 2500) {\n    this.network = network;\n    this.maximumFeeRate = maximumFeeRate;\n    this.__PREV_TX_SET = {};\n    this.__INPUTS = [];\n    this.__TX = new transaction_1.Transaction();\n    this.__TX.version = 2;\n    this.__USE_LOW_R = false;\n    console.warn(\n      'Deprecation Warning: TransactionBuilder will be removed in the future. ' +\n        '(v6.x.x or later) Please use the Psbt class instead. Examples of usage ' +\n        'are available in the transactions-psbt.js integration test file on our ' +\n        'Github. A high level explanation is available in the psbt.ts and psbt.js ' +\n        'files as well.',\n    );\n  }\n  static fromTransaction(transaction, network) {\n    const txb = new TransactionBuilder(network);\n    // Copy transaction fields\n    txb.setVersion(transaction.version);\n    txb.setLockTime(transaction.locktime);\n    // Copy outputs (done first to avoid signature invalidation)\n    transaction.outs.forEach(txOut => {\n      txb.addOutput(txOut.script, txOut.value);\n    });\n    // Copy inputs\n    transaction.ins.forEach(txIn => {\n      txb.__addInputUnsafe(txIn.hash, txIn.index, {\n        sequence: txIn.sequence,\n        script: txIn.script,\n        witness: txIn.witness,\n      });\n    });\n    // fix some things not possible through the public API\n    txb.__INPUTS.forEach((input, i) => {\n      fixMultisigOrder(input, transaction, i);\n    });\n    return txb;\n  }\n  setLowR(setting) {\n    typeforce(typeforce.maybe(typeforce.Boolean), setting);\n    if (setting === undefined) {\n      setting = true;\n    }\n    this.__USE_LOW_R = setting;\n    return setting;\n  }\n  setLockTime(locktime) {\n    typeforce(types.UInt32, locktime);\n    // if any signatures exist, throw\n    if (\n      this.__INPUTS.some(input => {\n        if (!input.signatures) return false;\n        return input.signatures.some(s => s !== undefined);\n      })\n    ) {\n      throw new Error('No, this would invalidate signatures');\n    }\n    this.__TX.locktime = locktime;\n  }\n  setVersion(version) {\n    typeforce(types.UInt32, version);\n    // XXX: this might eventually become more complex depending on what the versions represent\n    this.__TX.version = version;\n  }\n  addInput(txHash, vout, sequence, prevOutScript) {\n    if (!this.__canModifyInputs()) {\n      throw new Error('No, this would invalidate signatures');\n    }\n    let value;\n    // is it a hex string?\n    if (txIsString(txHash)) {\n      // transaction hashs's are displayed in reverse order, un-reverse it\n      txHash = bufferutils_1.reverseBuffer(Buffer.from(txHash, 'hex'));\n      // is it a Transaction object?\n    } else if (txIsTransaction(txHash)) {\n      const txOut = txHash.outs[vout];\n      prevOutScript = txOut.script;\n      value = txOut.value;\n      txHash = txHash.getHash(false);\n    }\n    return this.__addInputUnsafe(txHash, vout, {\n      sequence,\n      prevOutScript,\n      value,\n    });\n  }\n  addOutput(scriptPubKey, value) {\n    if (!this.__canModifyOutputs()) {\n      throw new Error('No, this would invalidate signatures');\n    }\n    // Attempt to get a script if it's a base58 or bech32 address string\n    if (typeof scriptPubKey === 'string') {\n      scriptPubKey = baddress.toOutputScript(scriptPubKey, this.network);\n    }\n    return this.__TX.addOutput(scriptPubKey, value);\n  }\n  build() {\n    return this.__build(false);\n  }\n  buildIncomplete() {\n    return this.__build(true);\n  }\n  sign(\n    signParams,\n    keyPair,\n    redeemScript,\n    hashType,\n    witnessValue,\n    witnessScript,\n  ) {\n    trySign(\n      getSigningData(\n        this.network,\n        this.__INPUTS,\n        this.__needsOutputs.bind(this),\n        this.__TX,\n        signParams,\n        keyPair,\n        redeemScript,\n        hashType,\n        witnessValue,\n        witnessScript,\n        this.__USE_LOW_R,\n      ),\n    );\n  }\n  __addInputUnsafe(txHash, vout, options) {\n    if (transaction_1.Transaction.isCoinbaseHash(txHash)) {\n      throw new Error('coinbase inputs not supported');\n    }\n    const prevTxOut = txHash.toString('hex') + ':' + vout;\n    if (this.__PREV_TX_SET[prevTxOut] !== undefined)\n      throw new Error('Duplicate TxOut: ' + prevTxOut);\n    let input = {};\n    // derive what we can from the scriptSig\n    if (options.script !== undefined) {\n      input = expandInput(options.script, options.witness || []);\n    }\n    // if an input value was given, retain it\n    if (options.value !== undefined) {\n      input.value = options.value;\n    }\n    // derive what we can from the previous transactions output script\n    if (!input.prevOutScript && options.prevOutScript) {\n      let prevOutType;\n      if (!input.pubkeys && !input.signatures) {\n        const expanded = expandOutput(options.prevOutScript);\n        if (expanded.pubkeys) {\n          input.pubkeys = expanded.pubkeys;\n          input.signatures = expanded.signatures;\n        }\n        prevOutType = expanded.type;\n      }\n      input.prevOutScript = options.prevOutScript;\n      input.prevOutType = prevOutType || classify.output(options.prevOutScript);\n    }\n    const vin = this.__TX.addInput(\n      txHash,\n      vout,\n      options.sequence,\n      options.scriptSig,\n    );\n    this.__INPUTS[vin] = input;\n    this.__PREV_TX_SET[prevTxOut] = true;\n    return vin;\n  }\n  __build(allowIncomplete) {\n    if (!allowIncomplete) {\n      if (!this.__TX.ins.length) throw new Error('Transaction has no inputs');\n      if (!this.__TX.outs.length) throw new Error('Transaction has no outputs');\n    }\n    const tx = this.__TX.clone();\n    // create script signatures from inputs\n    this.__INPUTS.forEach((input, i) => {\n      if (!input.prevOutType && !allowIncomplete)\n        throw new Error('Transaction is not complete');\n      const result = build(input.prevOutType, input, allowIncomplete);\n      if (!result) {\n        if (!allowIncomplete && input.prevOutType === SCRIPT_TYPES.NONSTANDARD)\n          throw new Error('Unknown input type');\n        if (!allowIncomplete) throw new Error('Not enough information');\n        return;\n      }\n      tx.setInputScript(i, result.input);\n      tx.setWitness(i, result.witness);\n    });\n    if (!allowIncomplete) {\n      // do not rely on this, its merely a last resort\n      if (this.__overMaximumFees(tx.virtualSize())) {\n        throw new Error('Transaction has absurd fees');\n      }\n    }\n    return tx;\n  }\n  __canModifyInputs() {\n    return this.__INPUTS.every(input => {\n      if (!input.signatures) return true;\n      return input.signatures.every(signature => {\n        if (!signature) return true;\n        const hashType = signatureHashType(signature);\n        // if SIGHASH_ANYONECANPAY is set, signatures would not\n        // be invalidated by more inputs\n        return (\n          (hashType & transaction_1.Transaction.SIGHASH_ANYONECANPAY) !== 0\n        );\n      });\n    });\n  }\n  __needsOutputs(signingHashType) {\n    if (signingHashType === transaction_1.Transaction.SIGHASH_ALL) {\n      return this.__TX.outs.length === 0;\n    }\n    // if inputs are being signed with SIGHASH_NONE, we don't strictly need outputs\n    // .build() will fail, but .buildIncomplete() is OK\n    return (\n      this.__TX.outs.length === 0 &&\n      this.__INPUTS.some(input => {\n        if (!input.signatures) return false;\n        return input.signatures.some(signature => {\n          if (!signature) return false; // no signature, no issue\n          const hashType = signatureHashType(signature);\n          if (hashType & transaction_1.Transaction.SIGHASH_NONE) return false; // SIGHASH_NONE doesn't care about outputs\n          return true; // SIGHASH_* does care\n        });\n      })\n    );\n  }\n  __canModifyOutputs() {\n    const nInputs = this.__TX.ins.length;\n    const nOutputs = this.__TX.outs.length;\n    return this.__INPUTS.every(input => {\n      if (input.signatures === undefined) return true;\n      return input.signatures.every(signature => {\n        if (!signature) return true;\n        const hashType = signatureHashType(signature);\n        const hashTypeMod = hashType & 0x1f;\n        if (hashTypeMod === transaction_1.Transaction.SIGHASH_NONE) return true;\n        if (hashTypeMod === transaction_1.Transaction.SIGHASH_SINGLE) {\n          // if SIGHASH_SINGLE is set, and nInputs > nOutputs\n          // some signatures would be invalidated by the addition\n          // of more outputs\n          return nInputs <= nOutputs;\n        }\n        return false;\n      });\n    });\n  }\n  __overMaximumFees(bytes) {\n    // not all inputs will have .value defined\n    const incoming = this.__INPUTS.reduce((a, x) => a + (x.value >>> 0), 0);\n    // but all outputs do, and if we have any input value\n    // we can immediately determine if the outputs are too small\n    const outgoing = this.__TX.outs.reduce((a, x) => a + x.value, 0);\n    const fee = incoming - outgoing;\n    const feeRate = fee / bytes;\n    return feeRate > this.maximumFeeRate;\n  }\n}\nexports.TransactionBuilder = TransactionBuilder;\nfunction expandInput(scriptSig, witnessStack, type, scriptPubKey) {\n  if (scriptSig.length === 0 && witnessStack.length === 0) return {};\n  if (!type) {\n    let ssType = classify.input(scriptSig, true);\n    let wsType = classify.witness(witnessStack, true);\n    if (ssType === SCRIPT_TYPES.NONSTANDARD) ssType = undefined;\n    if (wsType === SCRIPT_TYPES.NONSTANDARD) wsType = undefined;\n    type = ssType || wsType;\n  }\n  switch (type) {\n    case SCRIPT_TYPES.P2WPKH: {\n      const { output, pubkey, signature } = payments.p2wpkh({\n        witness: witnessStack,\n      });\n      return {\n        prevOutScript: output,\n        prevOutType: SCRIPT_TYPES.P2WPKH,\n        pubkeys: [pubkey],\n        signatures: [signature],\n      };\n    }\n    case SCRIPT_TYPES.P2PKH: {\n      const { output, pubkey, signature } = payments.p2pkh({\n        input: scriptSig,\n      });\n      return {\n        prevOutScript: output,\n        prevOutType: SCRIPT_TYPES.P2PKH,\n        pubkeys: [pubkey],\n        signatures: [signature],\n      };\n    }\n    case SCRIPT_TYPES.P2PK: {\n      const { signature } = payments.p2pk({ input: scriptSig });\n      return {\n        prevOutType: SCRIPT_TYPES.P2PK,\n        pubkeys: [undefined],\n        signatures: [signature],\n      };\n    }\n    case SCRIPT_TYPES.P2MS: {\n      const { m, pubkeys, signatures } = payments.p2ms(\n        {\n          input: scriptSig,\n          output: scriptPubKey,\n        },\n        { allowIncomplete: true },\n      );\n      return {\n        prevOutType: SCRIPT_TYPES.P2MS,\n        pubkeys,\n        signatures,\n        maxSignatures: m,\n      };\n    }\n  }\n  if (type === SCRIPT_TYPES.P2SH) {\n    const { output, redeem } = payments.p2sh({\n      input: scriptSig,\n      witness: witnessStack,\n    });\n    const outputType = classify.output(redeem.output);\n    const expanded = expandInput(\n      redeem.input,\n      redeem.witness,\n      outputType,\n      redeem.output,\n    );\n    if (!expanded.prevOutType) return {};\n    return {\n      prevOutScript: output,\n      prevOutType: SCRIPT_TYPES.P2SH,\n      redeemScript: redeem.output,\n      redeemScriptType: expanded.prevOutType,\n      witnessScript: expanded.witnessScript,\n      witnessScriptType: expanded.witnessScriptType,\n      pubkeys: expanded.pubkeys,\n      signatures: expanded.signatures,\n    };\n  }\n  if (type === SCRIPT_TYPES.P2WSH) {\n    const { output, redeem } = payments.p2wsh({\n      input: scriptSig,\n      witness: witnessStack,\n    });\n    const outputType = classify.output(redeem.output);\n    let expanded;\n    if (outputType === SCRIPT_TYPES.P2WPKH) {\n      expanded = expandInput(redeem.input, redeem.witness, outputType);\n    } else {\n      expanded = expandInput(\n        bscript.compile(redeem.witness),\n        [],\n        outputType,\n        redeem.output,\n      );\n    }\n    if (!expanded.prevOutType) return {};\n    return {\n      prevOutScript: output,\n      prevOutType: SCRIPT_TYPES.P2WSH,\n      witnessScript: redeem.output,\n      witnessScriptType: expanded.prevOutType,\n      pubkeys: expanded.pubkeys,\n      signatures: expanded.signatures,\n    };\n  }\n  return {\n    prevOutType: SCRIPT_TYPES.NONSTANDARD,\n    prevOutScript: scriptSig,\n  };\n}\n// could be done in expandInput, but requires the original Transaction for hashForSignature\nfunction fixMultisigOrder(input, transaction, vin) {\n  if (input.redeemScriptType !== SCRIPT_TYPES.P2MS || !input.redeemScript)\n    return;\n  if (input.pubkeys.length === input.signatures.length) return;\n  const unmatched = input.signatures.concat();\n  input.signatures = input.pubkeys.map(pubKey => {\n    const keyPair = ECPair.fromPublicKey(pubKey);\n    let match;\n    // check for a signature\n    unmatched.some((signature, i) => {\n      // skip if undefined || OP_0\n      if (!signature) return false;\n      // TODO: avoid O(n) hashForSignature\n      const parsed = bscript.signature.decode(signature);\n      const hash = transaction.hashForSignature(\n        vin,\n        input.redeemScript,\n        parsed.hashType,\n      );\n      // skip if signature does not match pubKey\n      if (!keyPair.verify(hash, parsed.signature)) return false;\n      // remove matched signature from unmatched\n      unmatched[i] = undefined;\n      match = signature;\n      return true;\n    });\n    return match;\n  });\n}\nfunction expandOutput(script, ourPubKey) {\n  typeforce(types.Buffer, script);\n  const type = classify.output(script);\n  switch (type) {\n    case SCRIPT_TYPES.P2PKH: {\n      if (!ourPubKey) return { type };\n      // does our hash160(pubKey) match the output scripts?\n      const pkh1 = payments.p2pkh({ output: script }).hash;\n      const pkh2 = bcrypto.hash160(ourPubKey);\n      if (!pkh1.equals(pkh2)) return { type };\n      return {\n        type,\n        pubkeys: [ourPubKey],\n        signatures: [undefined],\n      };\n    }\n    case SCRIPT_TYPES.P2WPKH: {\n      if (!ourPubKey) return { type };\n      // does our hash160(pubKey) match the output scripts?\n      const wpkh1 = payments.p2wpkh({ output: script }).hash;\n      const wpkh2 = bcrypto.hash160(ourPubKey);\n      if (!wpkh1.equals(wpkh2)) return { type };\n      return {\n        type,\n        pubkeys: [ourPubKey],\n        signatures: [undefined],\n      };\n    }\n    case SCRIPT_TYPES.P2PK: {\n      const p2pk = payments.p2pk({ output: script });\n      return {\n        type,\n        pubkeys: [p2pk.pubkey],\n        signatures: [undefined],\n      };\n    }\n    case SCRIPT_TYPES.P2MS: {\n      const p2ms = payments.p2ms({ output: script });\n      return {\n        type,\n        pubkeys: p2ms.pubkeys,\n        signatures: p2ms.pubkeys.map(() => undefined),\n        maxSignatures: p2ms.m,\n      };\n    }\n  }\n  return { type };\n}\nfunction prepareInput(input, ourPubKey, redeemScript, witnessScript) {\n  if (redeemScript && witnessScript) {\n    const p2wsh = payments.p2wsh({\n      redeem: { output: witnessScript },\n    });\n    const p2wshAlt = payments.p2wsh({ output: redeemScript });\n    const p2sh = payments.p2sh({ redeem: { output: redeemScript } });\n    const p2shAlt = payments.p2sh({ redeem: p2wsh });\n    // enforces P2SH(P2WSH(...))\n    if (!p2wsh.hash.equals(p2wshAlt.hash))\n      throw new Error('Witness script inconsistent with prevOutScript');\n    if (!p2sh.hash.equals(p2shAlt.hash))\n      throw new Error('Redeem script inconsistent with prevOutScript');\n    const expanded = expandOutput(p2wsh.redeem.output, ourPubKey);\n    if (!expanded.pubkeys)\n      throw new Error(\n        expanded.type +\n          ' not supported as witnessScript (' +\n          bscript.toASM(witnessScript) +\n          ')',\n      );\n    if (input.signatures && input.signatures.some(x => x !== undefined)) {\n      expanded.signatures = input.signatures;\n    }\n    const signScript = witnessScript;\n    if (expanded.type === SCRIPT_TYPES.P2WPKH)\n      throw new Error('P2SH(P2WSH(P2WPKH)) is a consensus failure');\n    return {\n      redeemScript,\n      redeemScriptType: SCRIPT_TYPES.P2WSH,\n      witnessScript,\n      witnessScriptType: expanded.type,\n      prevOutType: SCRIPT_TYPES.P2SH,\n      prevOutScript: p2sh.output,\n      hasWitness: true,\n      signScript,\n      signType: expanded.type,\n      pubkeys: expanded.pubkeys,\n      signatures: expanded.signatures,\n      maxSignatures: expanded.maxSignatures,\n    };\n  }\n  if (redeemScript) {\n    const p2sh = payments.p2sh({ redeem: { output: redeemScript } });\n    if (input.prevOutScript) {\n      let p2shAlt;\n      try {\n        p2shAlt = payments.p2sh({ output: input.prevOutScript });\n      } catch (e) {\n        throw new Error('PrevOutScript must be P2SH');\n      }\n      if (!p2sh.hash.equals(p2shAlt.hash))\n        throw new Error('Redeem script inconsistent with prevOutScript');\n    }\n    const expanded = expandOutput(p2sh.redeem.output, ourPubKey);\n    if (!expanded.pubkeys)\n      throw new Error(\n        expanded.type +\n          ' not supported as redeemScript (' +\n          bscript.toASM(redeemScript) +\n          ')',\n      );\n    if (input.signatures && input.signatures.some(x => x !== undefined)) {\n      expanded.signatures = input.signatures;\n    }\n    let signScript = redeemScript;\n    if (expanded.type === SCRIPT_TYPES.P2WPKH) {\n      signScript = payments.p2pkh({ pubkey: expanded.pubkeys[0] }).output;\n    }\n    return {\n      redeemScript,\n      redeemScriptType: expanded.type,\n      prevOutType: SCRIPT_TYPES.P2SH,\n      prevOutScript: p2sh.output,\n      hasWitness: expanded.type === SCRIPT_TYPES.P2WPKH,\n      signScript,\n      signType: expanded.type,\n      pubkeys: expanded.pubkeys,\n      signatures: expanded.signatures,\n      maxSignatures: expanded.maxSignatures,\n    };\n  }\n  if (witnessScript) {\n    const p2wsh = payments.p2wsh({ redeem: { output: witnessScript } });\n    if (input.prevOutScript) {\n      const p2wshAlt = payments.p2wsh({ output: input.prevOutScript });\n      if (!p2wsh.hash.equals(p2wshAlt.hash))\n        throw new Error('Witness script inconsistent with prevOutScript');\n    }\n    const expanded = expandOutput(p2wsh.redeem.output, ourPubKey);\n    if (!expanded.pubkeys)\n      throw new Error(\n        expanded.type +\n          ' not supported as witnessScript (' +\n          bscript.toASM(witnessScript) +\n          ')',\n      );\n    if (input.signatures && input.signatures.some(x => x !== undefined)) {\n      expanded.signatures = input.signatures;\n    }\n    const signScript = witnessScript;\n    if (expanded.type === SCRIPT_TYPES.P2WPKH)\n      throw new Error('P2WSH(P2WPKH) is a consensus failure');\n    return {\n      witnessScript,\n      witnessScriptType: expanded.type,\n      prevOutType: SCRIPT_TYPES.P2WSH,\n      prevOutScript: p2wsh.output,\n      hasWitness: true,\n      signScript,\n      signType: expanded.type,\n      pubkeys: expanded.pubkeys,\n      signatures: expanded.signatures,\n      maxSignatures: expanded.maxSignatures,\n    };\n  }\n  if (input.prevOutType && input.prevOutScript) {\n    // embedded scripts are not possible without extra information\n    if (input.prevOutType === SCRIPT_TYPES.P2SH)\n      throw new Error(\n        'PrevOutScript is ' + input.prevOutType + ', requires redeemScript',\n      );\n    if (input.prevOutType === SCRIPT_TYPES.P2WSH)\n      throw new Error(\n        'PrevOutScript is ' + input.prevOutType + ', requires witnessScript',\n      );\n    if (!input.prevOutScript) throw new Error('PrevOutScript is missing');\n    const expanded = expandOutput(input.prevOutScript, ourPubKey);\n    if (!expanded.pubkeys)\n      throw new Error(\n        expanded.type +\n          ' not supported (' +\n          bscript.toASM(input.prevOutScript) +\n          ')',\n      );\n    if (input.signatures && input.signatures.some(x => x !== undefined)) {\n      expanded.signatures = input.signatures;\n    }\n    let signScript = input.prevOutScript;\n    if (expanded.type === SCRIPT_TYPES.P2WPKH) {\n      signScript = payments.p2pkh({ pubkey: expanded.pubkeys[0] }).output;\n    }\n    return {\n      prevOutType: expanded.type,\n      prevOutScript: input.prevOutScript,\n      hasWitness: expanded.type === SCRIPT_TYPES.P2WPKH,\n      signScript,\n      signType: expanded.type,\n      pubkeys: expanded.pubkeys,\n      signatures: expanded.signatures,\n      maxSignatures: expanded.maxSignatures,\n    };\n  }\n  const prevOutScript = payments.p2pkh({ pubkey: ourPubKey }).output;\n  return {\n    prevOutType: SCRIPT_TYPES.P2PKH,\n    prevOutScript,\n    hasWitness: false,\n    signScript: prevOutScript,\n    signType: SCRIPT_TYPES.P2PKH,\n    pubkeys: [ourPubKey],\n    signatures: [undefined],\n  };\n}\nfunction build(type, input, allowIncomplete) {\n  const pubkeys = input.pubkeys || [];\n  let signatures = input.signatures || [];\n  switch (type) {\n    case SCRIPT_TYPES.P2PKH: {\n      if (pubkeys.length === 0) break;\n      if (signatures.length === 0) break;\n      return payments.p2pkh({ pubkey: pubkeys[0], signature: signatures[0] });\n    }\n    case SCRIPT_TYPES.P2WPKH: {\n      if (pubkeys.length === 0) break;\n      if (signatures.length === 0) break;\n      return payments.p2wpkh({ pubkey: pubkeys[0], signature: signatures[0] });\n    }\n    case SCRIPT_TYPES.P2PK: {\n      if (pubkeys.length === 0) break;\n      if (signatures.length === 0) break;\n      return payments.p2pk({ signature: signatures[0] });\n    }\n    case SCRIPT_TYPES.P2MS: {\n      const m = input.maxSignatures;\n      if (allowIncomplete) {\n        signatures = signatures.map(x => x || script_1.OPS.OP_0);\n      } else {\n        signatures = signatures.filter(x => x);\n      }\n      // if the transaction is not not complete (complete), or if signatures.length === m, validate\n      // otherwise, the number of OP_0's may be >= m, so don't validate (boo)\n      const validate = !allowIncomplete || m === signatures.length;\n      return payments.p2ms(\n        { m, pubkeys, signatures },\n        { allowIncomplete, validate },\n      );\n    }\n    case SCRIPT_TYPES.P2SH: {\n      const redeem = build(input.redeemScriptType, input, allowIncomplete);\n      if (!redeem) return;\n      return payments.p2sh({\n        redeem: {\n          output: redeem.output || input.redeemScript,\n          input: redeem.input,\n          witness: redeem.witness,\n        },\n      });\n    }\n    case SCRIPT_TYPES.P2WSH: {\n      const redeem = build(input.witnessScriptType, input, allowIncomplete);\n      if (!redeem) return;\n      return payments.p2wsh({\n        redeem: {\n          output: input.witnessScript,\n          input: redeem.input,\n          witness: redeem.witness,\n        },\n      });\n    }\n  }\n}\nfunction canSign(input) {\n  return (\n    input.signScript !== undefined &&\n    input.signType !== undefined &&\n    input.pubkeys !== undefined &&\n    input.signatures !== undefined &&\n    input.signatures.length === input.pubkeys.length &&\n    input.pubkeys.length > 0 &&\n    (input.hasWitness === false || input.value !== undefined)\n  );\n}\nfunction signatureHashType(buffer) {\n  return buffer.readUInt8(buffer.length - 1);\n}\nfunction checkSignArgs(inputs, signParams) {\n  if (!PREVOUT_TYPES.has(signParams.prevOutScriptType)) {\n    throw new TypeError(\n      `Unknown prevOutScriptType \"${signParams.prevOutScriptType}\"`,\n    );\n  }\n  tfMessage(\n    typeforce.Number,\n    signParams.vin,\n    `sign must include vin parameter as Number (input index)`,\n  );\n  tfMessage(\n    types.Signer,\n    signParams.keyPair,\n    `sign must include keyPair parameter as Signer interface`,\n  );\n  tfMessage(\n    typeforce.maybe(typeforce.Number),\n    signParams.hashType,\n    `sign hashType parameter must be a number`,\n  );\n  const prevOutType = (inputs[signParams.vin] || []).prevOutType;\n  const posType = signParams.prevOutScriptType;\n  switch (posType) {\n    case 'p2pkh':\n      if (prevOutType && prevOutType !== 'pubkeyhash') {\n        throw new TypeError(\n          `input #${signParams.vin} is not of type p2pkh: ${prevOutType}`,\n        );\n      }\n      tfMessage(\n        typeforce.value(undefined),\n        signParams.witnessScript,\n        `${posType} requires NO witnessScript`,\n      );\n      tfMessage(\n        typeforce.value(undefined),\n        signParams.redeemScript,\n        `${posType} requires NO redeemScript`,\n      );\n      tfMessage(\n        typeforce.value(undefined),\n        signParams.witnessValue,\n        `${posType} requires NO witnessValue`,\n      );\n      break;\n    case 'p2pk':\n      if (prevOutType && prevOutType !== 'pubkey') {\n        throw new TypeError(\n          `input #${signParams.vin} is not of type p2pk: ${prevOutType}`,\n        );\n      }\n      tfMessage(\n        typeforce.value(undefined),\n        signParams.witnessScript,\n        `${posType} requires NO witnessScript`,\n      );\n      tfMessage(\n        typeforce.value(undefined),\n        signParams.redeemScript,\n        `${posType} requires NO redeemScript`,\n      );\n      tfMessage(\n        typeforce.value(undefined),\n        signParams.witnessValue,\n        `${posType} requires NO witnessValue`,\n      );\n      break;\n    case 'p2wpkh':\n      if (prevOutType && prevOutType !== 'witnesspubkeyhash') {\n        throw new TypeError(\n          `input #${signParams.vin} is not of type p2wpkh: ${prevOutType}`,\n        );\n      }\n      tfMessage(\n        typeforce.value(undefined),\n        signParams.witnessScript,\n        `${posType} requires NO witnessScript`,\n      );\n      tfMessage(\n        typeforce.value(undefined),\n        signParams.redeemScript,\n        `${posType} requires NO redeemScript`,\n      );\n      tfMessage(\n        types.Satoshi,\n        signParams.witnessValue,\n        `${posType} requires witnessValue`,\n      );\n      break;\n    case 'p2ms':\n      if (prevOutType && prevOutType !== 'multisig') {\n        throw new TypeError(\n          `input #${signParams.vin} is not of type p2ms: ${prevOutType}`,\n        );\n      }\n      tfMessage(\n        typeforce.value(undefined),\n        signParams.witnessScript,\n        `${posType} requires NO witnessScript`,\n      );\n      tfMessage(\n        typeforce.value(undefined),\n        signParams.redeemScript,\n        `${posType} requires NO redeemScript`,\n      );\n      tfMessage(\n        typeforce.value(undefined),\n        signParams.witnessValue,\n        `${posType} requires NO witnessValue`,\n      );\n      break;\n    case 'p2sh-p2wpkh':\n      if (prevOutType && prevOutType !== 'scripthash') {\n        throw new TypeError(\n          `input #${signParams.vin} is not of type p2sh-p2wpkh: ${prevOutType}`,\n        );\n      }\n      tfMessage(\n        typeforce.value(undefined),\n        signParams.witnessScript,\n        `${posType} requires NO witnessScript`,\n      );\n      tfMessage(\n        typeforce.Buffer,\n        signParams.redeemScript,\n        `${posType} requires redeemScript`,\n      );\n      tfMessage(\n        types.Satoshi,\n        signParams.witnessValue,\n        `${posType} requires witnessValue`,\n      );\n      break;\n    case 'p2sh-p2ms':\n    case 'p2sh-p2pk':\n    case 'p2sh-p2pkh':\n      if (prevOutType && prevOutType !== 'scripthash') {\n        throw new TypeError(\n          `input #${signParams.vin} is not of type ${posType}: ${prevOutType}`,\n        );\n      }\n      tfMessage(\n        typeforce.value(undefined),\n        signParams.witnessScript,\n        `${posType} requires NO witnessScript`,\n      );\n      tfMessage(\n        typeforce.Buffer,\n        signParams.redeemScript,\n        `${posType} requires redeemScript`,\n      );\n      tfMessage(\n        typeforce.value(undefined),\n        signParams.witnessValue,\n        `${posType} requires NO witnessValue`,\n      );\n      break;\n    case 'p2wsh-p2ms':\n    case 'p2wsh-p2pk':\n    case 'p2wsh-p2pkh':\n      if (prevOutType && prevOutType !== 'witnessscripthash') {\n        throw new TypeError(\n          `input #${signParams.vin} is not of type ${posType}: ${prevOutType}`,\n        );\n      }\n      tfMessage(\n        typeforce.Buffer,\n        signParams.witnessScript,\n        `${posType} requires witnessScript`,\n      );\n      tfMessage(\n        typeforce.value(undefined),\n        signParams.redeemScript,\n        `${posType} requires NO redeemScript`,\n      );\n      tfMessage(\n        types.Satoshi,\n        signParams.witnessValue,\n        `${posType} requires witnessValue`,\n      );\n      break;\n    case 'p2sh-p2wsh-p2ms':\n    case 'p2sh-p2wsh-p2pk':\n    case 'p2sh-p2wsh-p2pkh':\n      if (prevOutType && prevOutType !== 'scripthash') {\n        throw new TypeError(\n          `input #${signParams.vin} is not of type ${posType}: ${prevOutType}`,\n        );\n      }\n      tfMessage(\n        typeforce.Buffer,\n        signParams.witnessScript,\n        `${posType} requires witnessScript`,\n      );\n      tfMessage(\n        typeforce.Buffer,\n        signParams.redeemScript,\n        `${posType} requires witnessScript`,\n      );\n      tfMessage(\n        types.Satoshi,\n        signParams.witnessValue,\n        `${posType} requires witnessScript`,\n      );\n      break;\n  }\n}\nfunction trySign({\n  input,\n  ourPubKey,\n  keyPair,\n  signatureHash,\n  hashType,\n  useLowR,\n}) {\n  // enforce in order signing of public keys\n  let signed = false;\n  for (const [i, pubKey] of input.pubkeys.entries()) {\n    if (!ourPubKey.equals(pubKey)) continue;\n    if (input.signatures[i]) throw new Error('Signature already exists');\n    // TODO: add tests\n    if (ourPubKey.length !== 33 && input.hasWitness) {\n      throw new Error(\n        'BIP143 rejects uncompressed public keys in P2WPKH or P2WSH',\n      );\n    }\n    const signature = keyPair.sign(signatureHash, useLowR);\n    input.signatures[i] = bscript.signature.encode(signature, hashType);\n    signed = true;\n  }\n  if (!signed) throw new Error('Key pair cannot sign for this input');\n}\nfunction getSigningData(\n  network,\n  inputs,\n  needsOutputs,\n  tx,\n  signParams,\n  keyPair,\n  redeemScript,\n  hashType,\n  witnessValue,\n  witnessScript,\n  useLowR,\n) {\n  let vin;\n  if (typeof signParams === 'number') {\n    console.warn(\n      'DEPRECATED: TransactionBuilder sign method arguments ' +\n        'will change in v6, please use the TxbSignArg interface',\n    );\n    vin = signParams;\n  } else if (typeof signParams === 'object') {\n    checkSignArgs(inputs, signParams);\n    ({\n      vin,\n      keyPair,\n      redeemScript,\n      hashType,\n      witnessValue,\n      witnessScript,\n    } = signParams);\n  } else {\n    throw new TypeError(\n      'TransactionBuilder sign first arg must be TxbSignArg or number',\n    );\n  }\n  if (keyPair === undefined) {\n    throw new Error('sign requires keypair');\n  }\n  // TODO: remove keyPair.network matching in 4.0.0\n  if (keyPair.network && keyPair.network !== network)\n    throw new TypeError('Inconsistent network');\n  if (!inputs[vin]) throw new Error('No input at index: ' + vin);\n  hashType = hashType || transaction_1.Transaction.SIGHASH_ALL;\n  if (needsOutputs(hashType)) throw new Error('Transaction needs outputs');\n  const input = inputs[vin];\n  // if redeemScript was previously provided, enforce consistency\n  if (\n    input.redeemScript !== undefined &&\n    redeemScript &&\n    !input.redeemScript.equals(redeemScript)\n  ) {\n    throw new Error('Inconsistent redeemScript');\n  }\n  const ourPubKey =\n    keyPair.publicKey || (keyPair.getPublicKey && keyPair.getPublicKey());\n  if (!canSign(input)) {\n    if (witnessValue !== undefined) {\n      if (input.value !== undefined && input.value !== witnessValue)\n        throw new Error('Input did not match witnessValue');\n      typeforce(types.Satoshi, witnessValue);\n      input.value = witnessValue;\n    }\n    if (!canSign(input)) {\n      const prepared = prepareInput(\n        input,\n        ourPubKey,\n        redeemScript,\n        witnessScript,\n      );\n      // updates inline\n      Object.assign(input, prepared);\n    }\n    if (!canSign(input)) throw Error(input.prevOutType + ' not supported');\n  }\n  // ready to sign\n  let signatureHash;\n  if (input.hasWitness) {\n    signatureHash = tx.hashForWitnessV0(\n      vin,\n      input.signScript,\n      input.value,\n      hashType,\n    );\n  } else {\n    signatureHash = tx.hashForSignature(vin, input.signScript, hashType);\n  }\n  return {\n    input,\n    ourPubKey,\n    keyPair,\n    signatureHash,\n    hashType,\n    useLowR: !!useLowR,\n  };\n}\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst script_1 = require('./script');\nconst multisig = require('./templates/multisig');\nconst nullData = require('./templates/nulldata');\nconst pubKey = require('./templates/pubkey');\nconst pubKeyHash = require('./templates/pubkeyhash');\nconst scriptHash = require('./templates/scripthash');\nconst witnessCommitment = require('./templates/witnesscommitment');\nconst witnessPubKeyHash = require('./templates/witnesspubkeyhash');\nconst witnessScriptHash = require('./templates/witnessscripthash');\nconst types = {\n  P2MS: 'multisig',\n  NONSTANDARD: 'nonstandard',\n  NULLDATA: 'nulldata',\n  P2PK: 'pubkey',\n  P2PKH: 'pubkeyhash',\n  P2SH: 'scripthash',\n  P2WPKH: 'witnesspubkeyhash',\n  P2WSH: 'witnessscripthash',\n  WITNESS_COMMITMENT: 'witnesscommitment',\n};\nexports.types = types;\nfunction classifyOutput(script) {\n  if (witnessPubKeyHash.output.check(script)) return types.P2WPKH;\n  if (witnessScriptHash.output.check(script)) return types.P2WSH;\n  if (pubKeyHash.output.check(script)) return types.P2PKH;\n  if (scriptHash.output.check(script)) return types.P2SH;\n  // XXX: optimization, below functions .decompile before use\n  const chunks = script_1.decompile(script);\n  if (!chunks) throw new TypeError('Invalid script');\n  if (multisig.output.check(chunks)) return types.P2MS;\n  if (pubKey.output.check(chunks)) return types.P2PK;\n  if (witnessCommitment.output.check(chunks)) return types.WITNESS_COMMITMENT;\n  if (nullData.output.check(chunks)) return types.NULLDATA;\n  return types.NONSTANDARD;\n}\nexports.output = classifyOutput;\nfunction classifyInput(script, allowIncomplete) {\n  // XXX: optimization, below functions .decompile before use\n  const chunks = script_1.decompile(script);\n  if (!chunks) throw new TypeError('Invalid script');\n  if (pubKeyHash.input.check(chunks)) return types.P2PKH;\n  if (scriptHash.input.check(chunks, allowIncomplete)) return types.P2SH;\n  if (multisig.input.check(chunks, allowIncomplete)) return types.P2MS;\n  if (pubKey.input.check(chunks)) return types.P2PK;\n  return types.NONSTANDARD;\n}\nexports.input = classifyInput;\nfunction classifyWitness(script, allowIncomplete) {\n  // XXX: optimization, below functions .decompile before use\n  const chunks = script_1.decompile(script);\n  if (!chunks) throw new TypeError('Invalid script');\n  if (witnessPubKeyHash.input.check(chunks)) return types.P2WPKH;\n  if (witnessScriptHash.input.check(chunks, allowIncomplete))\n    return types.P2WSH;\n  return types.NONSTANDARD;\n}\nexports.witness = classifyWitness;\n","'use strict';\n// OP_0 [signatures ...]\nObject.defineProperty(exports, '__esModule', { value: true });\nconst bscript = require('../../script');\nconst script_1 = require('../../script');\nfunction partialSignature(value) {\n  return (\n    value === script_1.OPS.OP_0 || bscript.isCanonicalScriptSignature(value)\n  );\n}\nfunction check(script, allowIncomplete) {\n  const chunks = bscript.decompile(script);\n  if (chunks.length < 2) return false;\n  if (chunks[0] !== script_1.OPS.OP_0) return false;\n  if (allowIncomplete) {\n    return chunks.slice(1).every(partialSignature);\n  }\n  return chunks.slice(1).every(bscript.isCanonicalScriptSignature);\n}\nexports.check = check;\ncheck.toJSON = () => {\n  return 'multisig input';\n};\n","'use strict';\n// m [pubKeys ...] n OP_CHECKMULTISIG\nObject.defineProperty(exports, '__esModule', { value: true });\nconst bscript = require('../../script');\nconst script_1 = require('../../script');\nconst types = require('../../types');\nconst OP_INT_BASE = script_1.OPS.OP_RESERVED; // OP_1 - 1\nfunction check(script, allowIncomplete) {\n  const chunks = bscript.decompile(script);\n  if (chunks.length < 4) return false;\n  if (chunks[chunks.length - 1] !== script_1.OPS.OP_CHECKMULTISIG) return false;\n  if (!types.Number(chunks[0])) return false;\n  if (!types.Number(chunks[chunks.length - 2])) return false;\n  const m = chunks[0] - OP_INT_BASE;\n  const n = chunks[chunks.length - 2] - OP_INT_BASE;\n  if (m <= 0) return false;\n  if (n > 16) return false;\n  if (m > n) return false;\n  if (n !== chunks.length - 3) return false;\n  if (allowIncomplete) return true;\n  const keys = chunks.slice(1, -2);\n  return keys.every(bscript.isCanonicalPubKey);\n}\nexports.check = check;\ncheck.toJSON = () => {\n  return 'multi-sig output';\n};\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\n// OP_RETURN {data}\nconst bscript = require('../script');\nconst OPS = bscript.OPS;\nfunction check(script) {\n  const buffer = bscript.compile(script);\n  return buffer.length > 1 && buffer[0] === OPS.OP_RETURN;\n}\nexports.check = check;\ncheck.toJSON = () => {\n  return 'null data output';\n};\nconst output = { check };\nexports.output = output;\n","'use strict';\n// {signature}\nObject.defineProperty(exports, '__esModule', { value: true });\nconst bscript = require('../../script');\nfunction check(script) {\n  const chunks = bscript.decompile(script);\n  return chunks.length === 1 && bscript.isCanonicalScriptSignature(chunks[0]);\n}\nexports.check = check;\ncheck.toJSON = () => {\n  return 'pubKey input';\n};\n","'use strict';\n// {pubKey} OP_CHECKSIG\nObject.defineProperty(exports, '__esModule', { value: true });\nconst bscript = require('../../script');\nconst script_1 = require('../../script');\nfunction check(script) {\n  const chunks = bscript.decompile(script);\n  return (\n    chunks.length === 2 &&\n    bscript.isCanonicalPubKey(chunks[0]) &&\n    chunks[1] === script_1.OPS.OP_CHECKSIG\n  );\n}\nexports.check = check;\ncheck.toJSON = () => {\n  return 'pubKey output';\n};\n","'use strict';\n// {signature} {pubKey}\nObject.defineProperty(exports, '__esModule', { value: true });\nconst bscript = require('../../script');\nfunction check(script) {\n  const chunks = bscript.decompile(script);\n  return (\n    chunks.length === 2 &&\n    bscript.isCanonicalScriptSignature(chunks[0]) &&\n    bscript.isCanonicalPubKey(chunks[1])\n  );\n}\nexports.check = check;\ncheck.toJSON = () => {\n  return 'pubKeyHash input';\n};\n","'use strict';\n// OP_DUP OP_HASH160 {pubKeyHash} OP_EQUALVERIFY OP_CHECKSIG\nObject.defineProperty(exports, '__esModule', { value: true });\nconst bscript = require('../../script');\nconst script_1 = require('../../script');\nfunction check(script) {\n  const buffer = bscript.compile(script);\n  return (\n    buffer.length === 25 &&\n    buffer[0] === script_1.OPS.OP_DUP &&\n    buffer[1] === script_1.OPS.OP_HASH160 &&\n    buffer[2] === 0x14 &&\n    buffer[23] === script_1.OPS.OP_EQUALVERIFY &&\n    buffer[24] === script_1.OPS.OP_CHECKSIG\n  );\n}\nexports.check = check;\ncheck.toJSON = () => {\n  return 'pubKeyHash output';\n};\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst input = require('./input');\nexports.input = input;\nconst output = require('./output');\nexports.output = output;\n","'use strict';\n// <scriptSig> {serialized scriptPubKey script}\nObject.defineProperty(exports, '__esModule', { value: true });\nconst bscript = require('../../script');\nconst p2ms = require('../multisig');\nconst p2pk = require('../pubkey');\nconst p2pkh = require('../pubkeyhash');\nconst p2wpkho = require('../witnesspubkeyhash/output');\nconst p2wsho = require('../witnessscripthash/output');\nfunction check(script, allowIncomplete) {\n  const chunks = bscript.decompile(script);\n  if (chunks.length < 1) return false;\n  const lastChunk = chunks[chunks.length - 1];\n  if (!Buffer.isBuffer(lastChunk)) return false;\n  const scriptSigChunks = bscript.decompile(\n    bscript.compile(chunks.slice(0, -1)),\n  );\n  const redeemScriptChunks = bscript.decompile(lastChunk);\n  // is redeemScript a valid script?\n  if (!redeemScriptChunks) return false;\n  // is redeemScriptSig push only?\n  if (!bscript.isPushOnly(scriptSigChunks)) return false;\n  // is witness?\n  if (chunks.length === 1) {\n    return (\n      p2wsho.check(redeemScriptChunks) || p2wpkho.check(redeemScriptChunks)\n    );\n  }\n  // match types\n  if (\n    p2pkh.input.check(scriptSigChunks) &&\n    p2pkh.output.check(redeemScriptChunks)\n  )\n    return true;\n  if (\n    p2ms.input.check(scriptSigChunks, allowIncomplete) &&\n    p2ms.output.check(redeemScriptChunks)\n  )\n    return true;\n  if (\n    p2pk.input.check(scriptSigChunks) &&\n    p2pk.output.check(redeemScriptChunks)\n  )\n    return true;\n  return false;\n}\nexports.check = check;\ncheck.toJSON = () => {\n  return 'scriptHash input';\n};\n","'use strict';\n// OP_HASH160 {scriptHash} OP_EQUAL\nObject.defineProperty(exports, '__esModule', { value: true });\nconst bscript = require('../../script');\nconst script_1 = require('../../script');\nfunction check(script) {\n  const buffer = bscript.compile(script);\n  return (\n    buffer.length === 23 &&\n    buffer[0] === script_1.OPS.OP_HASH160 &&\n    buffer[1] === 0x14 &&\n    buffer[22] === script_1.OPS.OP_EQUAL\n  );\n}\nexports.check = check;\ncheck.toJSON = () => {\n  return 'scriptHash output';\n};\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst output = require('./output');\nexports.output = output;\n","'use strict';\n// OP_RETURN {aa21a9ed} {commitment}\nObject.defineProperty(exports, '__esModule', { value: true });\nconst bscript = require('../../script');\nconst script_1 = require('../../script');\nconst types = require('../../types');\nconst typeforce = require('typeforce');\nconst HEADER = Buffer.from('aa21a9ed', 'hex');\nfunction check(script) {\n  const buffer = bscript.compile(script);\n  return (\n    buffer.length > 37 &&\n    buffer[0] === script_1.OPS.OP_RETURN &&\n    buffer[1] === 0x24 &&\n    buffer.slice(2, 6).equals(HEADER)\n  );\n}\nexports.check = check;\ncheck.toJSON = () => {\n  return 'Witness commitment output';\n};\nfunction encode(commitment) {\n  typeforce(types.Hash256bit, commitment);\n  const buffer = Buffer.allocUnsafe(36);\n  HEADER.copy(buffer, 0);\n  commitment.copy(buffer, 4);\n  return bscript.compile([script_1.OPS.OP_RETURN, buffer]);\n}\nexports.encode = encode;\nfunction decode(buffer) {\n  typeforce(check, buffer);\n  return bscript.decompile(buffer)[1].slice(4, 36);\n}\nexports.decode = decode;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst input = require('./input');\nexports.input = input;\nconst output = require('./output');\nexports.output = output;\n","'use strict';\n// {signature} {pubKey}\nObject.defineProperty(exports, '__esModule', { value: true });\nconst bscript = require('../../script');\nfunction isCompressedCanonicalPubKey(pubKey) {\n  return bscript.isCanonicalPubKey(pubKey) && pubKey.length === 33;\n}\nfunction check(script) {\n  const chunks = bscript.decompile(script);\n  return (\n    chunks.length === 2 &&\n    bscript.isCanonicalScriptSignature(chunks[0]) &&\n    isCompressedCanonicalPubKey(chunks[1])\n  );\n}\nexports.check = check;\ncheck.toJSON = () => {\n  return 'witnessPubKeyHash input';\n};\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst input = require('./input');\nexports.input = input;\nconst output = require('./output');\nexports.output = output;\n","'use strict';\n// <scriptSig> {serialized scriptPubKey script}\nObject.defineProperty(exports, '__esModule', { value: true });\nconst bscript = require('../../script');\nconst typeforce = require('typeforce');\nconst p2ms = require('../multisig');\nconst p2pk = require('../pubkey');\nconst p2pkh = require('../pubkeyhash');\nfunction check(chunks, allowIncomplete) {\n  typeforce(typeforce.Array, chunks);\n  if (chunks.length < 1) return false;\n  const witnessScript = chunks[chunks.length - 1];\n  if (!Buffer.isBuffer(witnessScript)) return false;\n  const witnessScriptChunks = bscript.decompile(witnessScript);\n  // is witnessScript a valid script?\n  if (!witnessScriptChunks || witnessScriptChunks.length === 0) return false;\n  const witnessRawScriptSig = bscript.compile(chunks.slice(0, -1));\n  // match types\n  if (\n    p2pkh.input.check(witnessRawScriptSig) &&\n    p2pkh.output.check(witnessScriptChunks)\n  )\n    return true;\n  if (\n    p2ms.input.check(witnessRawScriptSig, allowIncomplete) &&\n    p2ms.output.check(witnessScriptChunks)\n  )\n    return true;\n  if (\n    p2pk.input.check(witnessRawScriptSig) &&\n    p2pk.output.check(witnessScriptChunks)\n  )\n    return true;\n  return false;\n}\nexports.check = check;\ncheck.toJSON = () => {\n  return 'witnessScriptHash input';\n};\n","'use strict';\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar React = require('react');\n\nvar PropTypes = require('prop-types'); // qr.js doesn't handle error level of zero (M) so we need to do it right,\n// thus the deep require.\n\n\nvar QRCodeImpl = require('qr.js/lib/QRCode');\n\nvar ErrorCorrectLevel = require('qr.js/lib/ErrorCorrectLevel'); // TODO: pull this off of the QRCode class type so it matches.\n\n\n// Convert from UTF-16, forcing the use of byte-mode encoding in our QR Code.\n// This allows us to encode Hanji, Kanji, emoji, etc. Ideally we'd do more\n// detection and not resort to byte-mode if possible, but we're trading off\n// a smaller library for a smaller amount of data we can potentially encode.\n// Based on http://jonisalonen.com/2012/from-utf-16-to-utf-8-in-javascript/\nfunction convertStr(str) {\n  var out = '';\n\n  for (var i = 0; i < str.length; i++) {\n    var charcode = str.charCodeAt(i);\n\n    if (charcode < 0x0080) {\n      out += String.fromCharCode(charcode);\n    } else if (charcode < 0x0800) {\n      out += String.fromCharCode(0xc0 | charcode >> 6);\n      out += String.fromCharCode(0x80 | charcode & 0x3f);\n    } else if (charcode < 0xd800 || charcode >= 0xe000) {\n      out += String.fromCharCode(0xe0 | charcode >> 12);\n      out += String.fromCharCode(0x80 | charcode >> 6 & 0x3f);\n      out += String.fromCharCode(0x80 | charcode & 0x3f);\n    } else {\n      // This is a surrogate pair, so we'll reconsitute the pieces and work\n      // from that\n      i++;\n      charcode = 0x10000 + ((charcode & 0x3ff) << 10 | str.charCodeAt(i) & 0x3ff);\n      out += String.fromCharCode(0xf0 | charcode >> 18);\n      out += String.fromCharCode(0x80 | charcode >> 12 & 0x3f);\n      out += String.fromCharCode(0x80 | charcode >> 6 & 0x3f);\n      out += String.fromCharCode(0x80 | charcode & 0x3f);\n    }\n  }\n\n  return out;\n}\n\nvar DEFAULT_PROPS = {\n  size: 128,\n  level: 'L',\n  bgColor: '#FFFFFF',\n  fgColor: '#000000',\n  includeMargin: false\n};\nvar PROP_TYPES = process.env.NODE_ENV !== 'production' ? {\n  value: PropTypes.string.isRequired,\n  size: PropTypes.number,\n  level: PropTypes.oneOf(['L', 'M', 'Q', 'H']),\n  bgColor: PropTypes.string,\n  fgColor: PropTypes.string,\n  includeMargin: PropTypes.bool,\n  imageSettings: PropTypes.shape({\n    src: PropTypes.string.isRequired,\n    height: PropTypes.number.isRequired,\n    width: PropTypes.number.isRequired,\n    excavate: PropTypes.bool,\n    x: PropTypes.number,\n    y: PropTypes.number\n  })\n} : {};\nvar MARGIN_SIZE = 4; // This is *very* rough estimate of max amount of QRCode allowed to be covered.\n// It is \"wrong\" in a lot of ways (area is a terrible way to estimate, it\n// really should be number of modules covered), but if for some reason we don't\n// get an explicit height or width, I'd rather default to something than throw.\n\nvar DEFAULT_IMG_SCALE = 0.1;\n\nfunction generatePath(modules) {\n  var margin = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  var ops = [];\n  modules.forEach(function (row, y) {\n    var start = null;\n    row.forEach(function (cell, x) {\n      if (!cell && start !== null) {\n        // M0 0h7v1H0z injects the space with the move and drops the comma,\n        // saving a char per operation\n        ops.push(\"M\".concat(start + margin, \" \").concat(y + margin, \"h\").concat(x - start, \"v1H\").concat(start + margin, \"z\"));\n        start = null;\n        return;\n      } // end of row, clean up or skip\n\n\n      if (x === row.length - 1) {\n        if (!cell) {\n          // We would have closed the op above already so this can only mean\n          // 2+ light modules in a row.\n          return;\n        }\n\n        if (start === null) {\n          // Just a single dark module.\n          ops.push(\"M\".concat(x + margin, \",\").concat(y + margin, \" h1v1H\").concat(x + margin, \"z\"));\n        } else {\n          // Otherwise finish the current line.\n          ops.push(\"M\".concat(start + margin, \",\").concat(y + margin, \" h\").concat(x + 1 - start, \"v1H\").concat(start + margin, \"z\"));\n        }\n\n        return;\n      }\n\n      if (cell && start === null) {\n        start = x;\n      }\n    });\n  });\n  return ops.join('');\n} // We could just do this in generatePath, except that we want to support\n// non-Path2D canvas, so we need to keep it an explicit step.\n\n\nfunction excavateModules(modules, excavation) {\n  return modules.slice().map(function (row, y) {\n    if (y < excavation.y || y >= excavation.y + excavation.h) {\n      return row;\n    }\n\n    return row.map(function (cell, x) {\n      if (x < excavation.x || x >= excavation.x + excavation.w) {\n        return cell;\n      }\n\n      return false;\n    });\n  });\n}\n\nfunction getImageSettings(props, cells) {\n  var imageSettings = props.imageSettings,\n      size = props.size,\n      includeMargin = props.includeMargin;\n\n  if (imageSettings == null) {\n    return null;\n  }\n\n  var margin = includeMargin ? MARGIN_SIZE : 0;\n  var numCells = cells.length + margin * 2;\n  var defaultSize = Math.floor(size * DEFAULT_IMG_SCALE);\n  var scale = numCells / size;\n  var w = (imageSettings.width || defaultSize) * scale;\n  var h = (imageSettings.height || defaultSize) * scale;\n  var x = imageSettings.x == null ? cells.length / 2 - w / 2 : imageSettings.x * scale;\n  var y = imageSettings.y == null ? cells.length / 2 - h / 2 : imageSettings.y * scale;\n  var excavation = null;\n\n  if (imageSettings.excavate) {\n    var floorX = Math.floor(x);\n    var floorY = Math.floor(y);\n    var ceilW = Math.ceil(w + x - floorX);\n    var ceilH = Math.ceil(h + y - floorY);\n    excavation = {\n      x: floorX,\n      y: floorY,\n      w: ceilW,\n      h: ceilH\n    };\n  }\n\n  return {\n    x: x,\n    y: y,\n    h: h,\n    w: w,\n    excavation: excavation\n  };\n} // For canvas we're going to switch our drawing mode based on whether or not\n// the environment supports Path2D. We only need the constructor to be\n// supported, but Edge doesn't actually support the path (string) type\n// argument. Luckily it also doesn't support the addPath() method. We can\n// treat that as the same thing.\n\n\nvar SUPPORTS_PATH2D = function () {\n  try {\n    new Path2D().addPath(new Path2D());\n  } catch (e) {\n    return false;\n  }\n\n  return true;\n}();\n\nvar QRCodeCanvas =\n/*#__PURE__*/\nfunction (_React$PureComponent) {\n  _inherits(QRCodeCanvas, _React$PureComponent);\n\n  function QRCodeCanvas() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, QRCodeCanvas);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(QRCodeCanvas)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"_canvas\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"_image\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      imgLoaded: false\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleImageLoad\", function () {\n      _this.setState({\n        imgLoaded: true\n      });\n    });\n\n    return _this;\n  }\n\n  _createClass(QRCodeCanvas, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (this._image && this._image.complete) {\n        this.handleImageLoad();\n      }\n\n      this.update();\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      var _this$props$imageSett, _nextProps$imageSetti;\n\n      var currentSrc = (_this$props$imageSett = this.props.imageSettings) === null || _this$props$imageSett === void 0 ? void 0 : _this$props$imageSett.src;\n      var nextSrc = (_nextProps$imageSetti = nextProps.imageSettings) === null || _nextProps$imageSetti === void 0 ? void 0 : _nextProps$imageSetti.src;\n\n      if (currentSrc !== nextSrc) {\n        this.setState({\n          imgLoaded: false\n        });\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      this.update();\n    }\n  }, {\n    key: \"update\",\n    value: function update() {\n      var _this$props = this.props,\n          value = _this$props.value,\n          size = _this$props.size,\n          level = _this$props.level,\n          bgColor = _this$props.bgColor,\n          fgColor = _this$props.fgColor,\n          includeMargin = _this$props.includeMargin,\n          imageSettings = _this$props.imageSettings; // We'll use type===-1 to force QRCode to automatically pick the best type\n\n      var qrcode = new QRCodeImpl(-1, ErrorCorrectLevel[level]);\n      qrcode.addData(convertStr(value));\n      qrcode.make();\n\n      if (this._canvas != null) {\n        var canvas = this._canvas;\n        var ctx = canvas.getContext('2d');\n\n        if (!ctx) {\n          return;\n        }\n\n        var cells = qrcode.modules;\n\n        if (cells === null) {\n          return;\n        }\n\n        var margin = includeMargin ? MARGIN_SIZE : 0;\n        var numCells = cells.length + margin * 2;\n        var calculatedImageSettings = getImageSettings(this.props, cells);\n\n        if (imageSettings != null && calculatedImageSettings != null) {\n          if (calculatedImageSettings.excavation != null) {\n            cells = excavateModules(cells, calculatedImageSettings.excavation);\n          }\n        } // We're going to scale this so that the number of drawable units\n        // matches the number of cells. This avoids rounding issues, but does\n        // result in some potentially unwanted single pixel issues between\n        // blocks, only in environments that don't support Path2D.\n\n\n        var pixelRatio = window.devicePixelRatio || 1;\n        canvas.height = canvas.width = size * pixelRatio;\n        var scale = size / numCells * pixelRatio;\n        ctx.scale(scale, scale); // Draw solid background, only paint dark modules.\n\n        ctx.fillStyle = bgColor;\n        ctx.fillRect(0, 0, numCells, numCells);\n        ctx.fillStyle = fgColor;\n\n        if (SUPPORTS_PATH2D) {\n          // $FlowFixMe: Path2D c'tor doesn't support args yet.\n          ctx.fill(new Path2D(generatePath(cells, margin)));\n        } else {\n          cells.forEach(function (row, rdx) {\n            row.forEach(function (cell, cdx) {\n              if (cell) {\n                ctx.fillRect(cdx + margin, rdx + margin, 1, 1);\n              }\n            });\n          });\n        }\n\n        if (this.state.imgLoaded && this._image && calculatedImageSettings != null) {\n          ctx.drawImage(this._image, calculatedImageSettings.x + margin, calculatedImageSettings.y + margin, calculatedImageSettings.w, calculatedImageSettings.h);\n        }\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props2 = this.props,\n          value = _this$props2.value,\n          size = _this$props2.size,\n          level = _this$props2.level,\n          bgColor = _this$props2.bgColor,\n          fgColor = _this$props2.fgColor,\n          style = _this$props2.style,\n          includeMargin = _this$props2.includeMargin,\n          imageSettings = _this$props2.imageSettings,\n          otherProps = _objectWithoutProperties(_this$props2, [\"value\", \"size\", \"level\", \"bgColor\", \"fgColor\", \"style\", \"includeMargin\", \"imageSettings\"]);\n\n      var canvasStyle = _objectSpread({\n        height: size,\n        width: size\n      }, style);\n\n      var img = null;\n      var imgSrc = imageSettings && imageSettings.src;\n\n      if (imageSettings != null && imgSrc != null) {\n        img = React.createElement(\"img\", {\n          src: imgSrc,\n          style: {\n            display: 'none'\n          },\n          onLoad: this.handleImageLoad,\n          ref: function ref(_ref) {\n            return _this2._image = _ref;\n          }\n        });\n      }\n\n      return React.createElement(React.Fragment, null, React.createElement(\"canvas\", _extends({\n        style: canvasStyle,\n        height: size,\n        width: size,\n        ref: function ref(_ref2) {\n          return _this2._canvas = _ref2;\n        }\n      }, otherProps)), img);\n    }\n  }]);\n\n  return QRCodeCanvas;\n}(React.PureComponent);\n\n_defineProperty(QRCodeCanvas, \"defaultProps\", DEFAULT_PROPS);\n\nif (process.env.NODE_ENV !== 'production') {\n  QRCodeCanvas.propTypes = PROP_TYPES;\n}\n\nvar QRCodeSVG =\n/*#__PURE__*/\nfunction (_React$PureComponent2) {\n  _inherits(QRCodeSVG, _React$PureComponent2);\n\n  function QRCodeSVG() {\n    _classCallCheck(this, QRCodeSVG);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(QRCodeSVG).apply(this, arguments));\n  }\n\n  _createClass(QRCodeSVG, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props3 = this.props,\n          value = _this$props3.value,\n          size = _this$props3.size,\n          level = _this$props3.level,\n          bgColor = _this$props3.bgColor,\n          fgColor = _this$props3.fgColor,\n          includeMargin = _this$props3.includeMargin,\n          imageSettings = _this$props3.imageSettings,\n          otherProps = _objectWithoutProperties(_this$props3, [\"value\", \"size\", \"level\", \"bgColor\", \"fgColor\", \"includeMargin\", \"imageSettings\"]); // We'll use type===-1 to force QRCode to automatically pick the best type\n\n\n      var qrcode = new QRCodeImpl(-1, ErrorCorrectLevel[level]);\n      qrcode.addData(convertStr(value));\n      qrcode.make();\n      var cells = qrcode.modules;\n\n      if (cells === null) {\n        return null;\n      }\n\n      var margin = includeMargin ? MARGIN_SIZE : 0;\n      var numCells = cells.length + margin * 2;\n      var calculatedImageSettings = getImageSettings(this.props, cells);\n      var image = null;\n\n      if (imageSettings != null && calculatedImageSettings != null) {\n        if (calculatedImageSettings.excavation != null) {\n          cells = excavateModules(cells, calculatedImageSettings.excavation);\n        }\n\n        image = React.createElement(\"image\", {\n          xlinkHref: imageSettings.src,\n          height: calculatedImageSettings.h,\n          width: calculatedImageSettings.w,\n          x: calculatedImageSettings.x + margin,\n          y: calculatedImageSettings.y + margin,\n          preserveAspectRatio: \"none\"\n        });\n      } // Drawing strategy: instead of a rect per module, we're going to create a\n      // single path for the dark modules and layer that on top of a light rect,\n      // for a total of 2 DOM nodes. We pay a bit more in string concat but that's\n      // way faster than DOM ops.\n      // For level 1, 441 nodes -> 2\n      // For level 40, 31329 -> 2\n\n\n      var fgPath = generatePath(cells, margin);\n      return React.createElement(\"svg\", _extends({\n        shapeRendering: \"crispEdges\",\n        height: size,\n        width: size,\n        viewBox: \"0 0 \".concat(numCells, \" \").concat(numCells)\n      }, otherProps), React.createElement(\"path\", {\n        fill: bgColor,\n        d: \"M0,0 h\".concat(numCells, \"v\").concat(numCells, \"H0z\")\n      }), React.createElement(\"path\", {\n        fill: fgColor,\n        d: fgPath\n      }), image);\n    }\n  }]);\n\n  return QRCodeSVG;\n}(React.PureComponent);\n\n_defineProperty(QRCodeSVG, \"defaultProps\", DEFAULT_PROPS);\n\nif (process.env.NODE_ENV !== 'production') {\n  QRCodeSVG.propTypes = PROP_TYPES;\n}\n\nvar QRCode = function QRCode(props) {\n  var renderAs = props.renderAs,\n      otherProps = _objectWithoutProperties(props, [\"renderAs\"]);\n\n  var Component = renderAs === 'svg' ? QRCodeSVG : QRCodeCanvas;\n  return React.createElement(Component, otherProps);\n};\n\nQRCode.defaultProps = _objectSpread({\n  renderAs: 'canvas'\n}, DEFAULT_PROPS);\nmodule.exports = QRCode;"],"sourceRoot":""}