(this.webpackJsonpdefi_v2=this.webpackJsonpdefi_v2||[]).push([[39],{3678:function(e,n,t){},4017:function(e,n,t){"use strict";t.r(n);var r=t(2),a=t(1),o=t.n(a),c=t(20),i=t(40),s=t(25),l=t(0),d=t(2911),u=t(1211),f=t(44),b=t(715),m=t.n(b),p=t(716),h=t.n(p),j=t(26),x=t(2919),g=t(444),O=t(436),v=t(79),w=t(3187),y=t(42),N=t(433),k=t(712),F=(t(3678),t(1238),t(717));function C(){var e=Object(s.a)(["\n  \n  @media (max-width: 991px) {\n    font-size: .875rem;\n  }\n"]);return C=function(){return e},e}function D(){var e=Object(s.a)(["\n    height: 56px;\n    padding: 6px 20px;\n    border-radius: 18px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    margin-bottom: 20px;\n   \n    :hover,\n    :focus, \n    :active{ \n        text-decoration: none;\n        outline: none;\n    }\n"]);return D=function(){return e},e}function Y(){var e=Object(s.a)(["\n    background-color: rgba(135, 220, 225, 0.12);\n    height: 56px;\n    padding: 6px 20px;\n    border-radius: 18px;\n    color: ",";\n    display: flex;\n    align-items: center;\n    transition: 0.3s ease all;\n    justify-content: center;\n   \n    :hover,\n    :focus, \n    :active{\n        background-color: rgba(135, 220, 225, 1);\n        color: white;      \n        text-decoration: none;\n        outline: none;\n    }\n"]);return Y=function(){return e},e}function z(){var e=Object(s.a)(["\n  font-weight: 700;\n  font-size: .875rem;\n  color: white;\n  white-space: nowrap;\n  \n  @media (max-width: 991px) {\n  font-weight: 400;\n  }\n"]);return z=function(){return e},e}function E(){var e=Object(s.a)(["\n  font-size: 1rem;\n  font-weight: 400;\n  line-height: 19px;\n  color: white;\n  \n  @media (max-width: 991px) {\n    font-size: .875rem;\n  }\n"]);return E=function(){return e},e}function M(){var e=Object(s.a)(["\n  text-decoration: none;\n  &:hover,\n  &:focus,\n  &:active {\n      text-decoration: none;\n      outline: none;\n      box-shadow: none;\n  }\n"]);return M=function(){return e},e}function P(){var e=Object(s.a)(["\n  color: ",";\n  width: 100%;\n  \n  &:hover {\n    color: ",";\n    background-color: ",";\n  }\n"]);return P=function(){return e},e}function A(){var e=Object(s.a)(["\n  border-radius: 12px;\n  background-color: ",";\n  padding: 6px 20px;\n  max-height: 40px;\n  min-height: 40px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  white-space: nowrap;\n  font-size: 1rem;\n  font-family: inherit;\n  font-weight: 500;\n  border: none;\n  outline: none;\n  text-decoration: none;\n  \n  &:hover,\n  &:focus,\n  &:active {\n      text-decoration: none;\n      outline: none;\n      box-shadow: none;\n  }\n"]);return A=function(){return e},e}function H(){var e=Object(s.a)(["\n  font-size: 1.25rem;\n  font-weight: 700;\n  color: white;\n  margin: 0;\n  \n  @media (max-width: 767px) {\n    margin-bottom: 30px;\n  }\n"]);return H=function(){return e},e}function _(){var e=Object(s.a)(["\n  padding: 0;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 20px;\n  border: none;\n  background-color: transparent;\n  \n  @media (max-width: 767px) {\n    flex-direction: column;\n    align-items: stretch;\n  }\n"]);return _=function(){return e},e}var S=j.default.div(_()),J=j.default.h2(H()),B=j.default.button(A(),(function(e){return e.theme.bg2})),G=Object(j.default)(B)(P(),(function(e){return e.theme.primary}),(function(e){return e.theme.bg2}),(function(e){return e.theme.primary})),I=Object(j.default)(v.b)(M()),T=j.default.span(E()),V=j.default.span(z()),q=Object(j.default)(v.b)(Y(),(function(e){return e.theme.primary})),K=Object(j.default)(v.b)(D()),L=j.default.span(C());n.default=function(e){var n=Object(y.a)().library,t=Object(l.useState)({}),a=Object(i.a)(t,2),s=a[0],b=a[1],p=Object(f.d)(),j=Object(f.e)((function(e){return e.governance})),v=j.spaces,C=j.loading,D=j.proposals,Y=e.match.params.space,z=v[Y];Object(l.useEffect)((function(){0===Object.keys(v).length?p(Object(g.b)()):v.hasOwnProperty(Y)?p(Object(g.a)(Y)):e.history.push("/tools/governance")}),[v,Y,e.history,p]);var E=function(){var e=Object(c.a)(o.a.mark((function e(t,r){var a,c,i,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.hasOwnProperty(r)){e.next=12;break}return a={},c=t[r],e.next=5,Object(w.f)(r,z.strategies,z.network,n,Object.values(c).map((function(e){return e.address})));case 5:i=e.sent,a=Object.fromEntries(Object.entries(c).map((function(e){var n=[e[0],Object.assign({},e[1])];return n[1].score=i.reduce((function(e,t){return e+(t[n[1].address]||0)}),0),[n[0],n[1]]}))),a=Object(w.e)(a),s=Object.fromEntries(Object.entries(a).sort((function(e,n){return n[1].msg.payload.end-e[1].msg.payload.end}),0)),b(s),e.next=13;break;case 12:b({});case 13:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}();Object(l.useEffect)((function(){E(D,Y)}),[D,Y]);var M={onClick:function(n,t){e.history.push("/tools/governance/".concat(Y,"/proposal/").concat(t[0]))}},P=[{dataField:"asset",text:"Description",formatter:function(e,n,t){return Object(r.jsx)(T,{children:Object(O.b)(n[1].msg.payload.name,"name")})}},{dataField:"status",text:"Status",formatter:function(e,n){var t=(Date.now()/1e3).toFixed(),a=n[1].msg.payload,o=a.start,c=t>a.end?{title:"Closed",className:"label-light-danger",responsiveClassName:"text-danger"}:t>o?{title:"Active",className:"label-light-success",responsiveClassName:"text-success"}:{title:"Pending",className:"label-light-info",responsiveClassName:"text-info"};return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("span",{className:"label ".concat(c.className," label-lg d-none d-lg-flex w-100 label-inline py-3"),children:c.title}),Object(r.jsx)(L,{className:"d-flex d-lg-none ".concat(c.responsiveClassName),children:c.title})]})}},{dataField:"start",text:"Start Date",formatter:function(e,n){return Object(r.jsx)(V,{children:h()(1e3*n[1].msg.payload.start).format("YYYY/MM/DD HH:mm")})}},{dataField:"end",text:"End Date",formatter:function(e,n){return Object(r.jsx)(V,{children:h()(1e3*n[1].msg.payload.end).format("YYYY/MM/DD HH:mm")})}},{dataField:"author",text:"Author",formatter:function(e,n){return Object(r.jsxs)(V,{children:[n[1].address.slice(0,6),"...",n[1].address.slice(-4)]})}}],A={dataField:"actions",text:"Actions",formatter:function(e,n){return Object(r.jsx)("div",{className:"d-flex flex-column align-items-stretch align-items-lg-center justify-content-center w-100",children:Object(r.jsx)(I,{to:"/tools/governance/".concat(Y,"/proposal/").concat(n[0]),children:Object(r.jsx)(G,{children:"View More"})})})},isAction:!0};return Object(r.jsx)(k.a,{title:"Governance",morePadding:!0,children:Object(r.jsx)(d.a,{children:Object(r.jsx)(u.a,{xs:12,children:Object(r.jsxs)(x.a,{marginTop:-30,marginBottom:0,children:[Object(r.jsxs)(S,{children:[Object(r.jsx)(J,{className:"card-title",children:"Proposals"}),Object(r.jsx)(q,{to:"".concat(e.match.url,"/create"),className:"bg-light-primary d-none d-md-flex",children:"Create New"}),Object(r.jsx)(K,{to:"".concat(e.match.url,"/create"),className:" btn btn-primary btn-gradient-primary d-flex d-md-none",children:"Create New"})]}),Object(r.jsx)("div",{children:C?Object(r.jsx)("div",{className:"d-flex align-items-center justify-content-center py-5 w-100",children:Object(r.jsx)(N.a,{color:"primary",width:40,height:40,active:!0,id:"proposals"})}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(m.a,{wrapperClasses:"table-responsive d-none d-lg-block",bordered:!1,classes:"table table-head-custom table-borderless table-vertical-center overflow-hidden table-hover proposals__table",bootstrap4:!0,remote:!0,keyField:"id",columns:P,data:Object.entries(s),rowEvents:M}),Object(r.jsx)(F.a,{breakpoint:"lg",direction:"rtl",columns:P.concat(A),data:Object.entries(s),headerIndex:0})]})})]})})})})}}}]);
//# sourceMappingURL=39.7b8faffe.chunk.js.map