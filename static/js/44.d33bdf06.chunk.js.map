{"version":3,"sources":["lib/strategies/balancer/index.js","lib/strategies/contract-call/index.js","lib/strategies/erc20-balance-of/index.js","lib/strategies/erc20-balance-of-coeff/index.js","lib/strategies/erc20-balance-of-fixed-total/index.js","lib/strategies/erc20-balance-of-cv/index.js","lib/strategies/erc20-with-balance/index.js","lib/plugins/index.js","lib/strategies/erc20-balance-of-delegation/index.js","lib/strategies/eth-balance/index.js","lib/strategies/maker-ds-chief/index.js","lib/strategies/uni/index.js","lib/strategies/yearn-vault/index.js","lib/strategies/moloch/index.js","lib/strategies/uniswap/index.js","lib/strategies/pancake/index.js","lib/strategies/synthetix/index.js","lib/strategies/ctoken/index.js","lib/strategies/cream/index.js","lib/strategies/esd/index.js","lib/strategies/staked-uniswap/index.js","lib/strategies/index.js","lib/utils.js","pages/Vote/styleds.tsx","pages/Vote/VoteCast.tsx","pages/Vote/ProposalContent.tsx","components/VoteItem/index.js","pages/Vote/ProposalVotes.tsx","components/ListItem/index.js","components/VoteLogo/index.js","pages/Vote/VoteInformation.tsx","pages/Vote/VoteResults.tsx","pages/Vote/index.js"],"names":["BALANCER_SUBGRAPH_URL","1","42","space","network","provider","addresses","options","snapshot","a","params","poolShares","__args","where","userAddress_in","map","address","toLowerCase","balance_gt","first","orderBy","orderDirection","userAddress","id","balance","poolId","totalShares","tokens","block","number","subgraphRequest","result","score","forEach","poolShare","poolToken","split","getAddress","getArgs","args","arg","replace","blockTag","multicall","methodABI","name","response","Object","fromEntries","value","i","parseFloat","formatUnits","toString","decimals","abi","constant","inputs","internalType","type","outputs","payable","stateMutability","strategy","erc20BalanceOfStrategy","entries","coeff","totalScore","values","reduce","b","total","Math","sqrt","minBalance","getDelegations","delegations","delegate_in","delegator_not_in","space_in","delegator","delegate","SNAPSHOT_SUBGRAPH_URL","delegationsReverse","delegation","filter","keys","length","console","debug","concat","MULTICALL","MAKER_DS_CHIEF_ADDRESS","UNI_ADDRESS","Promise","all","pricePerFullShare","memberAddresses","addr","shares","UNISWAP_SUBGRAPH_URL","_space","users","id_in","liquidityPositions","liquidityTokenBalance_gt","liquidityTokenBalance","pair","token0","reserve0","token1","reserve1","totalSupply","tokenAddress","u","lp","token0perUni","token1perUni","userScore","sousChefabi","masterChefAbi","masterChefContractAddress","masterBalances","chefAddresses","item","sousBalances","index","prev","cur","idx","amount","synthetixStateAbi","synthetixStateContractAddress","_","quadraticWeighting","scaledValue","initialDebtOwnership","offsetCheck","getBlockNumber","oldBlockTag","balanceOfCalls","borrowBalanceCalls","calls","balancesOldResponse","balancesNowResponse","slice","borrowsNowResponse","resultData","noBorrow","borrowingRestricted","localeCompare","balanceNow","balanceOld","min","CREAM_SWAP_SUBGRAPH_URL","3","longTermPoolABI","creamAddress","creamSwapScore","creamBalanceOf","creamBalance","userBalance","numPool","pools","numAddress","push","balances","sum","j","daoQuery","dao","lpQuery","rewards","token","uniswap","uniswapESD","uniswapTotalSupply","daoBalances","lpBalances","Array","fill","div","mul","add","tokenAbi","uniswapAddress","stakingAddress","res","tokenBalanceInUni","tokensPerUni","balancer","erc20BalanceOf","uni","moloch","pancake","synthetix","ctoken","cream","esd","4","5","6","56","82","97","100","wanchain","itf","Interface","multi","getContract","multicallAbi","aggregate","call","encodeFunctionData","decodeFunctionResult","reject","url","query","fetch","method","headers","Accept","body","JSON","stringify","jsonToGraphQLQuery","json","data","getScores","strategies","_strategies","_numeral","format","numeral","formatProposal","base","proposal","parse","msg","input","fallback","err","jsonParse","version","payload","start","end","bpt_voting_disabled","metadata","formatProposals","proposals","CustomCard","styled","Card","BoxHeader","BoxTitle","h4","theme","text1","VoteContent","TokenValue","span","AuthorLink","primary","InfoText","fontWeight","ResultRow","ResultTitle","ResultProgress","primaryLight","ResultProgressBar","CustomTable","Table","borderColor","Thead","thead","ShowMoreWrap","VoteCast","selected","onSelectOption","onVote","t","useTranslation","account","useWeb3React","header","className","choices","option","onClick","Button","disabled","style","width","md","Remarkable","ProposalContent","status","voteBody","useMemo","dompurify","sanitize","title","dangerouslySetInnerHTML","__html","render","ModifiedJazzicon","Jazzicon","Wrapper","tr","modalBG","text3","bg1","Text","Address","voteItem","props","vote","symbol","ProposalVotes","votes","useState","showMore","setShowMore","maxHeight","opacity","visibility","hasOwnProperty","VoteItem","choice","variant","Loading","color","height","active","InfoDesc","listItem","children","Logo","img","size","VoteLogo","LogoURL","useLogo","symbolIndex","src","VoteInformation","ListItem","s","marginLeft","href","target","rel","authorIpfsHash","moment","VoteResults","progress","totalVotesBalances","totalBalances","shorten","toFixed","role","aria-valuenow","aria-valuemin","aria-valuemax","Vote","library","selectedProposal","setSelectedProposal","selectedVote","setSelectedVote","showModal","setShowModal","setVotes","setResult","setStatus","dispatch","useDispatch","toggleWalletModal","useWalletModalToggle","useSelector","state","governance","spaces","governanceLoading","loading","api","Governance","match","useEffect","fetchSpaces","fetchProposals","get","then","catch","error","toast","history","transformVotes","selectedProposals","assign","scores","transformed","sort","results","totalVotes","totalScores","sI","ts","Date","now","handleSubmit","useCallback","timestamp","icon","signer","getSigner","signMessage","sig","sendMessage","success","Page","networkSensitive","Row","Col","xs","show","centered","onHide","Header","closeButton","Title","Body"],"mappings":"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","file":"static/js/44.d33bdf06.chunk.js","sourcesContent":["import { getAddress } from \"@ethersproject/address\";\nimport { subgraphRequest } from \"../../utils\";\n\nexport const author = \"bonustrack\";\nexport const version = \"0.1.0\";\n\nconst BALANCER_SUBGRAPH_URL = {\n\t1: \"https://api.thegraph.com/subgraphs/name/balancer-labs/balancer-beta\",\n\t42: \"https://api.thegraph.com/subgraphs/name/balancer-labs/balancer-kovan\",\n};\n\nexport async function strategy(space, network, provider, addresses, options, snapshot) {\n\tconst params = {\n\t\tpoolShares: {\n\t\t\t__args: {\n\t\t\t\twhere: {\n\t\t\t\t\tuserAddress_in: addresses.map((address) => address.toLowerCase()),\n\t\t\t\t\tbalance_gt: 0,\n\t\t\t\t},\n\t\t\t\tfirst: 1000,\n\t\t\t\torderBy: \"balance\",\n\t\t\t\torderDirection: \"desc\",\n\t\t\t},\n\t\t\tuserAddress: {\n\t\t\t\tid: true,\n\t\t\t},\n\t\t\tbalance: true,\n\t\t\tpoolId: {\n\t\t\t\ttotalShares: true,\n\t\t\t\ttokens: {\n\t\t\t\t\tid: true,\n\t\t\t\t\tbalance: true,\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t};\n\tif (snapshot !== \"latest\") {\n\t\t// @ts-ignore\n\t\tparams.poolShares.__args.block = { number: snapshot };\n\t}\n\tconst result = await subgraphRequest(BALANCER_SUBGRAPH_URL[network], params);\n\tconst score = {};\n\tif (result && result.poolShares) {\n\t\tresult.poolShares.forEach((poolShare) =>\n\t\t\tpoolShare.poolId.tokens.map((poolToken) => {\n\t\t\t\tconst [, tokenAddress] = poolToken.id.split(\"-\");\n\t\t\t\tif (tokenAddress === options.address.toLowerCase()) {\n\t\t\t\t\tconst userAddress = getAddress(poolShare.userAddress.id);\n\t\t\t\t\tif (!score[userAddress]) score[userAddress] = 0;\n\t\t\t\t\tscore[userAddress] =\n\t\t\t\t\t\tscore[userAddress] + (poolToken.balance / poolShare.poolId.totalShares) * poolShare.balance;\n\t\t\t\t}\n\t\t\t})\n\t\t);\n\t}\n\treturn score || {};\n}\n","import { formatUnits } from \"@ethersproject/units\";\nimport { multicall } from \"../../utils\";\n\nexport const author = \"in19farkt\";\nexport const version = \"0.1.0\";\n\nfunction getArgs(options, address) {\n\tconst args = options.args || [\"%{address}\"];\n\treturn args.map((arg) => (typeof arg === \"string\" ? arg.replace(/%{address}/g, address) : arg));\n}\n\nexport async function strategy(space, network, provider, addresses, options, snapshot) {\n\tconst blockTag = typeof snapshot === \"number\" ? snapshot : \"latest\";\n\tconst response = await multicall(\n\t\tnetwork,\n\t\tprovider,\n\t\t[options.methodABI],\n\t\taddresses.map((address) => [options.address, options.methodABI.name, getArgs(options, address)]),\n\t\t{ blockTag }\n\t);\n\treturn Object.fromEntries(\n\t\tresponse.map((value, i) => [addresses[i], parseFloat(formatUnits(value.toString(), options.decimals))])\n\t);\n}\n","import { formatUnits } from \"@ethersproject/units\";\nimport { multicall } from \"../../utils\";\n\nexport const author = \"bonustrack\";\nexport const version = \"0.1.0\";\n\nconst abi = [\n\t{\n\t\tconstant: true,\n\t\tinputs: [\n\t\t\t{\n\t\t\t\tinternalType: \"address\",\n\t\t\t\tname: \"account\",\n\t\t\t\ttype: \"address\",\n\t\t\t},\n\t\t],\n\t\tname: \"balanceOf\",\n\t\toutputs: [\n\t\t\t{\n\t\t\t\tinternalType: \"uint256\",\n\t\t\t\tname: \"\",\n\t\t\t\ttype: \"uint256\",\n\t\t\t},\n\t\t],\n\t\tpayable: false,\n\t\tstateMutability: \"view\",\n\t\ttype: \"function\",\n\t},\n];\n\nexport async function strategy(space, network, provider, addresses, options, snapshot) {\n\tconst blockTag = typeof snapshot === \"number\" ? snapshot : \"latest\";\n\tconst response = await multicall(\n\t\tnetwork,\n\t\tprovider,\n\t\tabi,\n\t\taddresses.map((address) => [options.address, \"balanceOf\", [address]]),\n\t\t{ blockTag }\n\t);\n\treturn Object.fromEntries(\n\t\tresponse.map((value, i) => [addresses[i], parseFloat(formatUnits(value.toString(), options.decimals))])\n\t);\n}\n","import { strategy as erc20BalanceOfStrategy } from \"../erc20-balance-of/index\";\n\nexport const author = \"jxde\";\nexport const version = \"0.1.0\";\n\nexport async function strategy(space, network, provider, addresses, options, snapshot) {\n\tconst score = await erc20BalanceOfStrategy(space, network, provider, addresses, options, snapshot);\n\treturn Object.fromEntries(Object.entries(score).map((address) => [address[0], address[1] * options.coeff]));\n}\n","import { strategy as erc20BalanceOfStrategy } from \"../erc20-balance-of/index\";\n\nexport const author = \"bonustrack\";\nexport const version = \"0.1.0\";\n\nexport async function strategy(space, network, provider, addresses, options, snapshot) {\n\tconst score = await erc20BalanceOfStrategy(space, network, provider, addresses, options, snapshot);\n\tconst totalScore = Object.values(score).reduce((a, b) => a + b, 0);\n\treturn Object.fromEntries(\n\t\tObject.entries(score).map((address) => [address[0], (options.total * address[1]) / totalScore])\n\t);\n}\n","import { strategy as erc20BalanceOfStrategy } from \"../erc20-balance-of/index\";\n\nexport const author = \"bonustrack\";\nexport const version = \"0.1.0\";\n\nexport async function strategy(space, network, provider, addresses, options, snapshot) {\n\tconst score = await erc20BalanceOfStrategy(space, network, provider, addresses, options, snapshot);\n\treturn Object.fromEntries(Object.entries(score).map((address) => [address[0], Math.sqrt(address[1])]));\n}\n","import { strategy as erc20BalanceOfStrategy } from \"../erc20-balance-of/index\";\n\nexport const author = \"BenjaminLu\";\nexport const version = \"0.1.1\";\n\nexport async function strategy(space, network, provider, addresses, options, snapshot) {\n\tconst score = await erc20BalanceOfStrategy(space, network, provider, addresses, options, snapshot);\n\treturn Object.fromEntries(\n\t\tObject.entries(score).map((address) => [address[0], address[1] > (options.minBalance || 0) ? 1 : 0])\n\t);\n}\n","import { SNAPSHOT_SUBGRAPH_URL, subgraphRequest } from \"../utils\";\n\nexport async function getDelegations(space, network, provider, addresses, options, snapshot) {\n\tconst params = {\n\t\tdelegations: {\n\t\t\t__args: {\n\t\t\t\twhere: {\n\t\t\t\t\tdelegate_in: addresses.map((address) => address.toLowerCase()),\n\t\t\t\t\tdelegator_not_in: addresses.map((address) => address.toLowerCase()),\n\t\t\t\t\tspace_in: [\"\", space],\n\t\t\t\t},\n\t\t\t\tfirst: 1000,\n\t\t\t},\n\t\t\tdelegator: true,\n\t\t\tspace: true,\n\t\t\tdelegate: true,\n\t\t},\n\t};\n\tif (snapshot !== \"latest\") {\n\t\t// @ts-ignore\n\t\tparams.delegations.__args.block = { number: snapshot };\n\t}\n\tconst result = await subgraphRequest(SNAPSHOT_SUBGRAPH_URL[network], params);\n\tif (!result || !result.delegations) return {};\n\n\tconst delegationsReverse = {};\n\tresult.delegations.forEach((delegation) => (delegationsReverse[delegation.delegator] = delegation.delegate));\n\tresult.delegations\n\t\t.filter((delegation) => delegation.space !== \"\")\n\t\t.forEach((delegation) => (delegationsReverse[delegation.delegator] = delegation.delegate));\n\n\treturn Object.fromEntries(\n\t\taddresses.map((address) => [\n\t\t\taddress,\n\t\t\tObject.entries(delegationsReverse)\n\t\t\t\t.filter(([, delegate]) => address.toLowerCase() === delegate)\n\t\t\t\t.map(([delegator]) => delegator),\n\t\t])\n\t);\n}\n","import { strategy as erc20BalanceOfStrategy } from \"../erc20-balance-of/index\";\nimport { getDelegations } from \"../../plugins\";\n\nexport const author = \"bonustrack\";\nexport const version = \"0.1.0\";\n\nexport async function strategy(space, network, provider, addresses, options, snapshot) {\n\tconst delegations = await getDelegations(space, network, provider, addresses, options, snapshot);\n\tif (Object.keys(delegations).length === 0) return {};\n\tconsole.debug(\"Delegations\", delegations);\n\n\tconst score = await erc20BalanceOfStrategy(\n\t\tspace,\n\t\tnetwork,\n\t\tprovider,\n\t\tObject.values(delegations).reduce((a, b) => a.concat(b)),\n\t\toptions,\n\t\tsnapshot\n\t);\n\tconsole.debug(\"Delegators score\", score);\n\n\treturn Object.fromEntries(\n\t\taddresses.map((address) => {\n\t\t\tconst addressScore = delegations[address] ? delegations[address].reduce((a, b) => a + score[b], 0) : 0;\n\t\t\treturn [address, addressScore];\n\t\t})\n\t);\n}\n","import { formatUnits } from \"@ethersproject/units\";\nimport { multicall, MULTICALL } from \"../../utils\";\nimport { abi } from \"../../../constants/abis/Multicall.json\";\n\nexport const author = \"bonustrack\";\nexport const version = \"0.1.0\";\n\nexport async function strategy(space, network, provider, addresses, options, snapshot) {\n\tconst blockTag = typeof snapshot === \"number\" ? snapshot : \"latest\";\n\tconst response = await multicall(\n\t\tnetwork,\n\t\tprovider,\n\t\tabi,\n\t\taddresses.map((address) => [MULTICALL[network], \"getEthBalance\", [address]]),\n\t\t{ blockTag }\n\t);\n\treturn Object.fromEntries(\n\t\tresponse.map((value, i) => [addresses[i], parseFloat(formatUnits(value.toString(), 18))])\n\t);\n}\n","import { formatUnits } from \"@ethersproject/units\";\nimport { multicall } from \"../../utils\";\n\nexport const author = \"bonustrack\";\nexport const version = \"0.1.0\";\n\nconst MAKER_DS_CHIEF_ADDRESS = {\n\t1: \"0x9ef05f7f6deb616fd37ac3c959a2ddd25a54e4f5\",\n};\n\nconst abi = [\n\t{\n\t\tconstant: true,\n\t\tinputs: [\n\t\t\t{\n\t\t\t\tname: \"\",\n\t\t\t\ttype: \"address\",\n\t\t\t},\n\t\t],\n\t\tname: \"deposits\",\n\t\toutputs: [\n\t\t\t{\n\t\t\t\tname: \"\",\n\t\t\t\ttype: \"uint256\",\n\t\t\t},\n\t\t],\n\t\tpayable: false,\n\t\tstateMutability: \"view\",\n\t\ttype: \"function\",\n\t},\n];\n\nexport async function strategy(space, network, provider, addresses, options, snapshot) {\n\tconst blockTag = typeof snapshot === \"number\" ? snapshot : \"latest\";\n\tconst response = await multicall(\n\t\tnetwork,\n\t\tprovider,\n\t\tabi,\n\t\taddresses.map((address) => [MAKER_DS_CHIEF_ADDRESS[network], \"deposits\", [address]]),\n\t\t{ blockTag }\n\t);\n\treturn Object.fromEntries(\n\t\tresponse.map((value, i) => [addresses[i], parseFloat(formatUnits(value.toString(), options.decimals))])\n\t);\n}\n","import { formatUnits } from \"@ethersproject/units\";\nimport { multicall } from \"../../utils\";\n\nexport const author = \"bonustrack\";\nexport const version = \"0.1.0\";\n\nconst UNI_ADDRESS = {\n\t1: \"0x1f9840a85d5af5bf1d1762f925bdaddc4201f984\",\n};\n\nconst abi = [\n\t{\n\t\tconstant: true,\n\t\tinputs: [\n\t\t\t{\n\t\t\t\tinternalType: \"address\",\n\t\t\t\tname: \"account\",\n\t\t\t\ttype: \"address\",\n\t\t\t},\n\t\t],\n\t\tname: \"getCurrentVotes\",\n\t\toutputs: [\n\t\t\t{\n\t\t\t\tinternalType: \"uint96\",\n\t\t\t\tname: \"\",\n\t\t\t\ttype: \"uint96\",\n\t\t\t},\n\t\t],\n\t\tpayable: false,\n\t\tstateMutability: \"view\",\n\t\ttype: \"function\",\n\t},\n];\n\nexport async function strategy(space, network, provider, addresses, options, snapshot) {\n\tconst blockTag = typeof snapshot === \"number\" ? snapshot : \"latest\";\n\tconst response = await multicall(\n\t\tnetwork,\n\t\tprovider,\n\t\tabi,\n\t\taddresses.map((address) => [UNI_ADDRESS[network], \"getCurrentVotes\", [address.toLowerCase()], { blockTag }])\n\t);\n\treturn Object.fromEntries(\n\t\tresponse.map((value, i) => [addresses[i], parseFloat(formatUnits(value.toString(), options.decimals))])\n\t);\n}\n","import { formatUnits } from \"@ethersproject/units\";\nimport { multicall } from \"../../utils\";\nimport { strategy as erc20BalanceOfStrategy } from \"../erc20-balance-of/index\";\n\nexport const author = \"bonustrack\";\nexport const version = \"0.1.0\";\n\nconst abi = [\n\t{\n\t\tconstant: true,\n\t\tinputs: [],\n\t\tname: \"getPricePerFullShare\",\n\t\toutputs: [\n\t\t\t{\n\t\t\t\tinternalType: \"uint256\",\n\t\t\t\tname: \"\",\n\t\t\t\ttype: \"uint256\",\n\t\t\t},\n\t\t],\n\t\tpayable: false,\n\t\tstateMutability: \"view\",\n\t\ttype: \"function\",\n\t},\n];\n\nexport async function strategy(space, network, provider, addresses, options, snapshot) {\n\tconst blockTag = typeof snapshot === \"number\" ? snapshot : \"latest\";\n\tlet [score, [pricePerFullShare]] = await Promise.all([\n\t\terc20BalanceOfStrategy(space, network, provider, addresses, options, snapshot),\n\t\tmulticall(network, provider, abi, [[options.address, \"getPricePerFullShare\", []]], { blockTag }),\n\t]);\n\tpricePerFullShare = parseFloat(formatUnits(pricePerFullShare.toString(), 18));\n\treturn Object.fromEntries(Object.entries(score).map((address) => [address[0], address[1] * pricePerFullShare]));\n}\n","import { formatUnits } from \"@ethersproject/units\";\nimport { multicall } from \"../../utils\";\n\nexport const author = \"adridadou\";\nexport const version = \"0.1.0\";\n\nconst abi = [\n\t{\n\t\tinputs: [\n\t\t\t{\n\t\t\t\tinternalType: \"address\",\n\t\t\t\tname: \"\",\n\t\t\t\ttype: \"address\",\n\t\t\t},\n\t\t],\n\t\tname: \"memberAddressByDelegateKey\",\n\t\toutputs: [\n\t\t\t{\n\t\t\t\tinternalType: \"address\",\n\t\t\t\tname: \"\",\n\t\t\t\ttype: \"address\",\n\t\t\t},\n\t\t],\n\t\tstateMutability: \"view\",\n\t\ttype: \"function\",\n\t},\n\t{\n\t\tinputs: [\n\t\t\t{\n\t\t\t\tinternalType: \"address\",\n\t\t\t\tname: \"\",\n\t\t\t\ttype: \"address\",\n\t\t\t},\n\t\t],\n\t\tname: \"members\",\n\t\toutputs: [\n\t\t\t{\n\t\t\t\tinternalType: \"address\",\n\t\t\t\tname: \"delegateKey\",\n\t\t\t\ttype: \"address\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tinternalType: \"uint256\",\n\t\t\t\tname: \"shares\",\n\t\t\t\ttype: \"uint256\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tinternalType: \"uint256\",\n\t\t\t\tname: \"loot\",\n\t\t\t\ttype: \"uint256\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tinternalType: \"bool\",\n\t\t\t\tname: \"exists\",\n\t\t\t\ttype: \"bool\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tinternalType: \"uint256\",\n\t\t\t\tname: \"highestIndexYesVote\",\n\t\t\t\ttype: \"uint256\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tinternalType: \"uint256\",\n\t\t\t\tname: \"jailed\",\n\t\t\t\ttype: \"uint256\",\n\t\t\t},\n\t\t],\n\t\tstateMutability: \"view\",\n\t\ttype: \"function\",\n\t},\n\t{\n\t\tinputs: [],\n\t\tname: \"totalShares\",\n\t\toutputs: [\n\t\t\t{\n\t\t\t\tinternalType: \"uint256\",\n\t\t\t\tname: \"\",\n\t\t\t\ttype: \"uint256\",\n\t\t\t},\n\t\t],\n\t\tstateMutability: \"view\",\n\t\ttype: \"function\",\n\t},\n];\n\nexport async function strategy(space, network, provider, addresses, options, snapshot) {\n\tconst blockTag = typeof snapshot === \"number\" ? snapshot : \"latest\";\n\tconst memberAddresses = await multicall(\n\t\tnetwork,\n\t\tprovider,\n\t\tabi,\n\t\taddresses.map((address) => [options.address, \"memberAddressByDelegateKey\", [address]]),\n\t\t{ blockTag }\n\t);\n\n\tconst response = await multicall(\n\t\tnetwork,\n\t\tprovider,\n\t\tabi,\n\t\tmemberAddresses\n\t\t\t.filter((addr) => addr.toString() !== \"0x0000000000000000000000000000000000000000\")\n\t\t\t.map((addr) => [options.address, \"members\", [addr.toString()]]),\n\t\t{ blockTag }\n\t);\n\n\treturn Object.fromEntries(\n\t\tresponse.map((value, i) => [addresses[i], parseFloat(formatUnits(value.shares.toString(), options.decimals))])\n\t);\n}\n","import { getAddress } from \"@ethersproject/address\";\nimport { subgraphRequest } from \"../../utils\";\n\nconst UNISWAP_SUBGRAPH_URL = {\n\t1: \"https://api.thegraph.com/subgraphs/name/uniswap/uniswap-v2\",\n};\n\nexport const author = \"vfatouros\";\nexport const version = \"0.1.0\";\n\nexport async function strategy(_space, network, provider, addresses, options, snapshot) {\n\tconst params = {\n\t\tusers: {\n\t\t\t__args: {\n\t\t\t\twhere: {\n\t\t\t\t\tid_in: addresses.map((address) => address.toLowerCase()),\n\t\t\t\t},\n\t\t\t\tfirst: 1000,\n\t\t\t},\n\t\t\tid: true,\n\t\t\tliquidityPositions: {\n\t\t\t\t__args: {\n\t\t\t\t\twhere: {\n\t\t\t\t\t\tliquidityTokenBalance_gt: 0,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tliquidityTokenBalance: true,\n\t\t\t\tpair: {\n\t\t\t\t\tid: true,\n\t\t\t\t\ttoken0: {\n\t\t\t\t\t\tid: true,\n\t\t\t\t\t},\n\t\t\t\t\treserve0: true,\n\t\t\t\t\ttoken1: {\n\t\t\t\t\t\tid: true,\n\t\t\t\t\t},\n\t\t\t\t\treserve1: true,\n\t\t\t\t\ttotalSupply: true,\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t};\n\tif (snapshot !== \"latest\") {\n\t\t// @ts-ignore\n\t\tparams.users.liquidityPositions.__args.block = { number: snapshot };\n\t}\n\tconst tokenAddress = options.address.toLowerCase();\n\tconst result = await subgraphRequest(UNISWAP_SUBGRAPH_URL[network], params);\n\tconst score = {};\n\tif (result && result.users) {\n\t\tresult.users.forEach((u) => {\n\t\t\tu.liquidityPositions\n\t\t\t\t.filter((lp) => lp.pair.token0.id == tokenAddress || lp.pair.token1.id == tokenAddress)\n\t\t\t\t.forEach((lp) => {\n\t\t\t\t\tconst token0perUni = lp.pair.reserve0 / lp.pair.totalSupply;\n\t\t\t\t\tconst token1perUni = lp.pair.reserve1 / lp.pair.totalSupply;\n\t\t\t\t\tconst userScore =\n\t\t\t\t\t\tlp.pair.token0.id == tokenAddress\n\t\t\t\t\t\t\t? token0perUni * lp.liquidityTokenBalance\n\t\t\t\t\t\t\t: token1perUni * lp.liquidityTokenBalance;\n\n\t\t\t\t\tconst userAddress = getAddress(u.id);\n\t\t\t\t\tif (!score[userAddress]) score[userAddress] = 0;\n\t\t\t\t\tscore[userAddress] = score[userAddress] + userScore;\n\t\t\t\t});\n\t\t});\n\t}\n\treturn score || {};\n}\n","import { formatUnits } from \"@ethersproject/units\";\nimport { multicall } from \"../../utils\";\nimport { strategy as erc20BalanceOfStrategy } from \"../erc20-balance-of/index\";\n\nexport const author = \"pancake-swap\";\nexport const version = \"0.0.1\";\n\nconst sousChefabi = [\n\t{\n\t\tinputs: [\n\t\t\t{\n\t\t\t\tinternalType: \"address\",\n\t\t\t\tname: \"\",\n\t\t\t\ttype: \"address\",\n\t\t\t},\n\t\t],\n\t\tname: \"userInfo\",\n\t\toutputs: [\n\t\t\t{\n\t\t\t\tinternalType: \"uint256\",\n\t\t\t\tname: \"amount\",\n\t\t\t\ttype: \"uint256\",\n\t\t\t},\n\t\t],\n\t\tstateMutability: \"view\",\n\t\ttype: \"function\",\n\t},\n];\n\nconst masterChefAbi = [\n\t{\n\t\tinputs: [\n\t\t\t{\n\t\t\t\tinternalType: \"uint256\",\n\t\t\t\tname: \"\",\n\t\t\t\ttype: \"uint256\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tinternalType: \"address\",\n\t\t\t\tname: \"\",\n\t\t\t\ttype: \"address\",\n\t\t\t},\n\t\t],\n\t\tname: \"userInfo\",\n\t\toutputs: [\n\t\t\t{\n\t\t\t\tinternalType: \"uint256\",\n\t\t\t\tname: \"amount\",\n\t\t\t\ttype: \"uint256\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tinternalType: \"uint256\",\n\t\t\t\tname: \"rewardDebt\",\n\t\t\t\ttype: \"uint256\",\n\t\t\t},\n\t\t],\n\t\tstateMutability: \"view\",\n\t\ttype: \"function\",\n\t},\n];\n\nconst masterChefContractAddress = \"0x73feaa1eE314F8c655E354234017bE2193C9E24E\";\n\nexport async function strategy(space, network, provider, addresses, options, snapshot) {\n\tconst blockTag = typeof snapshot === \"number\" ? snapshot : \"latest\";\n\tconst score = await erc20BalanceOfStrategy(space, network, provider, addresses, options, snapshot);\n\n\tconst masterBalances = await multicall(\n\t\tnetwork,\n\t\tprovider,\n\t\tmasterChefAbi,\n\t\taddresses.map((address) => [masterChefContractAddress, \"userInfo\", [\"0\", address]]),\n\t\t{ blockTag }\n\t);\n\n\tconst sousBalances = await Promise.all(\n\t\toptions.chefAddresses.map((item) =>\n\t\t\tmulticall(\n\t\t\t\tnetwork,\n\t\t\t\tprovider,\n\t\t\t\tsousChefabi,\n\t\t\t\taddresses.map((address) => [item.address, \"userInfo\", [address], { blockTag }]),\n\t\t\t\t{ blockTag }\n\t\t\t)\n\t\t)\n\t);\n\n\treturn Object.fromEntries(\n\t\tObject.entries(score).map((address, index) => [\n\t\t\taddress[0],\n\t\t\taddress[1] +\n\t\t\t\tmasterBalances.reduce(\n\t\t\t\t\t(prev, cur, idx) => prev + parseFloat(formatUnits(cur.amount.toString(), 18)),\n\t\t\t\t\t0\n\t\t\t\t) +\n\t\t\t\tsousBalances.reduce(\n\t\t\t\t\t(prev, cur, idx) =>\n\t\t\t\t\t\tprev +\n\t\t\t\t\t\tparseFloat(formatUnits(cur[index].amount.toString(), options.chefAddresses[idx].decimals)),\n\t\t\t\t\t0\n\t\t\t\t),\n\t\t])\n\t);\n}\n","import { formatUnits } from \"@ethersproject/units\";\nimport { multicall } from \"../../utils\";\n\nexport const author = \"andytcf\";\nexport const version = \"0.0.1\";\n\nconst synthetixStateAbi = [\n\t{\n\t\tconstant: true,\n\t\tinputs: [{ name: \"\", type: \"address\" }],\n\t\tname: \"issuanceData\",\n\t\toutputs: [\n\t\t\t{ name: \"initialDebtOwnership\", type: \"uint256\" },\n\t\t\t{ name: \"debtEntryIndex\", type: \"uint256\" },\n\t\t],\n\t\tpayable: false,\n\t\tstateMutability: \"view\",\n\t\ttype: \"function\",\n\t},\n];\n\nconst synthetixStateContractAddress = \"0x4b9Ca5607f1fF8019c1C6A3c2f0CC8de622D5B82\";\n\nexport async function strategy(space, network, provider, addresses, _, snapshot) {\n\tconst blockTag = typeof snapshot === \"number\" ? snapshot : \"latest\";\n\tconst response = await multicall(\n\t\tnetwork,\n\t\tprovider,\n\t\tsynthetixStateAbi,\n\t\taddresses.map((address) => [synthetixStateContractAddress, \"issuanceData\", [address]]),\n\t\t{ blockTag }\n\t);\n\n\tconst quadraticWeighting = (value) => {\n\t\t// Scale the value by 100000\n\t\tconst scaledValue = value * 1e5;\n\t\treturn Math.sqrt(scaledValue);\n\t};\n\treturn Object.fromEntries(\n\t\tresponse.map((value, i) => {\n\t\t\treturn [\n\t\t\t\taddresses[i],\n\t\t\t\t// initialDebtOwnership returns in 27 decimal places\n\t\t\t\tquadraticWeighting(parseFloat(formatUnits(value.initialDebtOwnership.toString(), 27))),\n\t\t\t];\n\t\t})\n\t);\n}\n","import { formatUnits } from \"@ethersproject/units\";\nimport { multicall } from \"../../utils\";\n\nexport const author = \"arr00\";\nexport const version = \"0.1.0\";\n\nconst abi = [\n\t{\n\t\tconstant: true,\n\t\tinputs: [\n\t\t\t{\n\t\t\t\tinternalType: \"address\",\n\t\t\t\tname: \"account\",\n\t\t\t\ttype: \"address\",\n\t\t\t},\n\t\t],\n\t\tname: \"balanceOf\",\n\t\toutputs: [\n\t\t\t{\n\t\t\t\tinternalType: \"uint256\",\n\t\t\t\tname: \"\",\n\t\t\t\ttype: \"uint256\",\n\t\t\t},\n\t\t],\n\t\tpayable: false,\n\t\tstateMutability: \"view\",\n\t\ttype: \"function\",\n\t},\n\t{\n\t\tconstant: true,\n\t\tinputs: [\n\t\t\t{\n\t\t\t\tinternalType: \"address\",\n\t\t\t\tname: \"account\",\n\t\t\t\ttype: \"address\",\n\t\t\t},\n\t\t],\n\t\tname: \"borrowBalanceStored\",\n\t\toutputs: [\n\t\t\t{\n\t\t\t\tinternalType: \"uint256\",\n\t\t\t\tname: \"\",\n\t\t\t\ttype: \"uint256\",\n\t\t\t},\n\t\t],\n\t\tpayable: false,\n\t\tstateMutability: \"view\",\n\t\ttype: \"function\",\n\t},\n];\n\nexport async function strategy(space, network, provider, addresses, options, snapshot) {\n\tconst blockTag = typeof snapshot === \"number\" ? snapshot : \"latest\";\n\tconst oldBlockTag =\n\t\ttypeof snapshot === \"number\"\n\t\t\t? snapshot - options.offsetCheck\n\t\t\t: (await provider.getBlockNumber()) - options.offsetCheck;\n\n\tlet balanceOfCalls = addresses.map((address) => [options.address, \"balanceOf\", [address]]);\n\tlet borrowBalanceCalls = addresses.map((address) => [options.address, \"borrowBalanceStored\", [address]]);\n\tlet calls = balanceOfCalls.concat(borrowBalanceCalls);\n\n\tconst [response, balancesOldResponse] = await Promise.all([\n\t\tmulticall(network, provider, abi, calls, { blockTag }),\n\t\tmulticall(\n\t\t\tnetwork,\n\t\t\tprovider,\n\t\t\tabi,\n\t\t\taddresses.map((address) => [options.address, \"balanceOf\", [address]]),\n\t\t\t{ blockTag: oldBlockTag }\n\t\t),\n\t]);\n\n\tconst balancesNowResponse = response.slice(0, addresses.length);\n\tconst borrowsNowResponse = response.slice(addresses.length);\n\n\tlet resultData = {};\n\tfor (let i = 0; i < balancesNowResponse.length; i++) {\n\t\tlet noBorrow = 1;\n\t\tif (options.borrowingRestricted) {\n\t\t\tnoBorrow = borrowsNowResponse[i].toString().localeCompare(\"0\") == 0 ? 1 : 0;\n\t\t}\n\t\tconst balanceNow = parseFloat(formatUnits(balancesNowResponse[i].toString(), options.decimals));\n\t\tconst balanceOld = parseFloat(formatUnits(balancesOldResponse[i].toString(), options.decimals));\n\t\tresultData[addresses[i]] = Math.min(balanceNow, balanceOld) * noBorrow;\n\t}\n\treturn resultData;\n}\n","import { formatUnits } from \"@ethersproject/units\";\nimport { getAddress } from \"@ethersproject/address\";\nimport { subgraphRequest, multicall } from \"../../utils\";\n\nexport const author = \"bun919tw\";\nexport const version = \"0.1.0\";\n\nconst CREAM_SWAP_SUBGRAPH_URL = {\n\t1: \"https://api.thegraph.com/subgraphs/name/creamfinancedev/cream-swap-v2\",\n\t3: \"https://api.thegraph.com/subgraphs/name/creamfinancedev/cream-swap-dev\",\n};\n\nconst longTermPoolABI = [\n\t{\n\t\tconstant: true,\n\t\tinputs: [\n\t\t\t{\n\t\t\t\tinternalType: \"address\",\n\t\t\t\tname: \"account\",\n\t\t\t\ttype: \"address\",\n\t\t\t},\n\t\t],\n\t\tname: \"balanceOf\",\n\t\toutputs: [\n\t\t\t{\n\t\t\t\tinternalType: \"uint256\",\n\t\t\t\tname: \"\",\n\t\t\t\ttype: \"uint256\",\n\t\t\t},\n\t\t],\n\t\tpayable: false,\n\t\tstateMutability: \"view\",\n\t\ttype: \"function\",\n\t},\n];\n\nexport async function strategy(space, network, provider, addresses, options, snapshot) {\n\tconst creamAddress = options.address;\n\tlet [score, creamBalance] = await Promise.all([\n\t\tcreamSwapScore(network, addresses, creamAddress, snapshot),\n\t\tcreamBalanceOf(network, provider, addresses, options, snapshot),\n\t]);\n\tfor (const [userAddress, userBalance] of Object.entries(creamBalance)) {\n\t\tif (!score[userAddress]) score[userAddress] = 0;\n\t\tscore[userAddress] = score[userAddress] + userBalance;\n\t}\n\n\treturn score || {};\n}\n\nasync function creamSwapScore(network, addresses, creamAddress, snapshot) {\n\tconst params = {\n\t\tpoolShares: {\n\t\t\t__args: {\n\t\t\t\twhere: {\n\t\t\t\t\tuserAddress_in: addresses.map((address) => address.toLowerCase()),\n\t\t\t\t\tbalance_gt: 0,\n\t\t\t\t},\n\t\t\t\tfirst: 1000,\n\t\t\t\torderBy: \"balance\",\n\t\t\t\torderDirection: \"desc\",\n\t\t\t},\n\t\t\tuserAddress: {\n\t\t\t\tid: true,\n\t\t\t},\n\t\t\tbalance: true,\n\t\t\tpoolId: {\n\t\t\t\ttotalShares: true,\n\t\t\t\ttokens: {\n\t\t\t\t\tid: true,\n\t\t\t\t\tbalance: true,\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t};\n\tif (snapshot !== \"latest\") {\n\t\t// @ts-ignore\n\t\tparams.poolShares.__args.block = { number: snapshot };\n\t}\n\tconst result = await subgraphRequest(CREAM_SWAP_SUBGRAPH_URL[network], params);\n\tconst score = {};\n\tif (result && result.poolShares) {\n\t\tresult.poolShares.forEach((poolShare) =>\n\t\t\tpoolShare.poolId.tokens.map((poolToken) => {\n\t\t\t\tconst [, tokenAddress] = poolToken.id.split(\"-\");\n\t\t\t\tif (typeof creamAddress === \"string\" && tokenAddress === creamAddress.toLowerCase()) {\n\t\t\t\t\tconst userAddress = getAddress(poolShare.userAddress.id);\n\t\t\t\t\tif (!score[userAddress]) score[userAddress] = 0;\n\t\t\t\t\tscore[userAddress] =\n\t\t\t\t\t\tscore[userAddress] + (poolToken.balance / poolShare.poolId.totalShares) * poolShare.balance;\n\t\t\t\t}\n\t\t\t})\n\t\t);\n\t}\n\treturn score || {};\n}\n\nasync function creamBalanceOf(network, provider, addresses, options, snapshot) {\n\tconst blockTag = typeof snapshot === \"number\" ? snapshot : \"latest\";\n\tconst numPool = options.pools.length;\n\tconst numAddress = addresses.length;\n\n\tconst calls = [];\n\tfor (let i = 0; i < numPool; i++) {\n\t\tcalls.push(...addresses.map((address) => [options.pools[i].address, \"balanceOf\", [address]]));\n\t}\n\n\tconst balances = await multicall(network, provider, longTermPoolABI, calls, {\n\t\tblockTag,\n\t});\n\n\treturn Object.fromEntries(\n\t\taddresses.map((address, i) => {\n\t\t\tlet sum = 0;\n\t\t\tfor (let j = 0; j < numPool; j++) {\n\t\t\t\tsum += parseFloat(formatUnits(balances[i + j * numAddress].toString(), 18));\n\t\t\t}\n\t\t\treturn [address, sum];\n\t\t})\n\t);\n}\n","import { formatUnits } from \"@ethersproject/units\";\nimport { multicall } from \"../../utils\";\n\nexport const author = \"l3wi\";\nexport const version = \"0.1.0\";\n\nconst abi = [\n\t{\n\t\tconstant: true,\n\t\tinputs: [{ internalType: \"address\", name: \"account\", type: \"address\" }],\n\t\tname: \"balanceOfBonded\",\n\t\toutputs: [{ internalType: \"uint256\", name: \"\", type: \"uint256\" }],\n\t\tpayable: false,\n\t\tstateMutability: \"view\",\n\t\ttype: \"function\",\n\t},\n\t{\n\t\tconstant: true,\n\t\tinputs: [{ internalType: \"address\", name: \"\", type: \"address\" }],\n\t\tname: \"balanceOf\",\n\t\toutputs: [{ internalType: \"uint256\", name: \"\", type: \"uint256\" }],\n\t\tpayable: false,\n\t\tstateMutability: \"view\",\n\t\ttype: \"function\",\n\t},\n\t{\n\t\tconstant: true,\n\t\tinputs: [],\n\t\tname: \"totalSupply\",\n\t\toutputs: [{ internalType: \"uint256\", name: \"\", type: \"uint256\" }],\n\t\tpayable: false,\n\t\tstateMutability: \"view\",\n\t\ttype: \"function\",\n\t},\n];\n\nexport async function strategy(space, network, provider, addresses, options, snapshot) {\n\tconst blockTag = typeof snapshot === \"number\" ? snapshot : \"latest\";\n\n\tconst daoQuery = addresses.map((address) => [options.dao, \"balanceOfBonded\", [address]]);\n\n\tconst lpQuery = addresses.map((address) => [options.rewards, \"balanceOfBonded\", [address]]);\n\n\tconst response = await multicall(\n\t\tnetwork,\n\t\tprovider,\n\t\tabi,\n\t\t[[options.token, \"balanceOf\", [options.uniswap]], [options.uniswap, \"totalSupply\"], ...daoQuery, ...lpQuery],\n\t\t{ blockTag }\n\t);\n\n\tconst uniswapESD = response[0];\n\tconst uniswapTotalSupply = response[1];\n\tconst daoBalances = response.slice(2, addresses.length + 2);\n\tconst lpBalances = response.slice(addresses.length + 2, addresses.length * 2 + 2);\n\n\treturn Object.fromEntries(\n\t\tArray(addresses.length)\n\t\t\t.fill(\"x\")\n\t\t\t.map((_, i) => [\n\t\t\t\taddresses[i],\n\t\t\t\tparseFloat(\n\t\t\t\t\tformatUnits(\n\t\t\t\t\t\tuniswapESD[0]\n\t\t\t\t\t\t\t.div(uniswapTotalSupply[0])\n\t\t\t\t\t\t\t.mul(lpBalances[i][0])\n\t\t\t\t\t\t\t.add(daoBalances[i][0])\n\t\t\t\t\t\t\t.toString(),\n\t\t\t\t\t\toptions.decimals\n\t\t\t\t\t)\n\t\t\t\t),\n\t\t\t])\n\t);\n}\n","import { multicall } from \"../../utils\";\n\nexport const author = \"vfatouros\";\nexport const version = \"0.1.0\";\n\nconst tokenAbi = [\n\t{\n\t\tconstant: true,\n\t\tinputs: [\n\t\t\t{\n\t\t\t\tinternalType: \"address\",\n\t\t\t\tname: \"account\",\n\t\t\t\ttype: \"address\",\n\t\t\t},\n\t\t],\n\t\tname: \"balanceOf\",\n\t\toutputs: [\n\t\t\t{\n\t\t\t\tinternalType: \"uint256\",\n\t\t\t\tname: \"\",\n\t\t\t\ttype: \"uint256\",\n\t\t\t},\n\t\t],\n\t\tpayable: false,\n\t\tstateMutability: \"view\",\n\t\ttype: \"function\",\n\t},\n\t{\n\t\tconstant: true,\n\t\tinputs: [],\n\t\tname: \"totalSupply\",\n\t\toutputs: [\n\t\t\t{\n\t\t\t\tinternalType: \"uint256\",\n\t\t\t\tname: \"\",\n\t\t\t\ttype: \"uint256\",\n\t\t\t},\n\t\t],\n\t\tpayable: false,\n\t\tstateMutability: \"view\",\n\t\ttype: \"function\",\n\t},\n];\n\nexport async function strategy(_space, network, provider, addresses, options, snapshot) {\n\tconst blockTag = typeof snapshot === \"number\" ? snapshot : \"latest\";\n\tconst res = await multicall(\n\t\tnetwork,\n\t\tprovider,\n\t\ttokenAbi,\n\t\t[\n\t\t\t[options.uniswapAddress, \"totalSupply\", []],\n\t\t\t[options.tokenAddress, \"balanceOf\", [options.uniswapAddress]],\n\t\t].concat(addresses.map((address) => [options.stakingAddress, \"balanceOf\", [address]])),\n\t\t{ blockTag }\n\t);\n\n\tconst totalSupply = res[0];\n\tconst tokenBalanceInUni = res[1];\n\tconst tokensPerUni = tokenBalanceInUni / 10 ** options.decimals / (totalSupply / 1e18);\n\n\tconst response = res.slice(2);\n\n\treturn Object.fromEntries(\n\t\tresponse.map((value, i) => [addresses[i], (value / 10 ** options.decimals) * tokensPerUni])\n\t);\n}\n","import { strategy as balancer } from \"./balancer/index\";\nimport { strategy as contractCall } from \"./contract-call/index\";\nimport { strategy as erc20BalanceOf } from \"./erc20-balance-of/index\";\nimport { strategy as erc20BalanceOfCoeff } from \"./erc20-balance-of-coeff/index\";\nimport { strategy as erc20BalanceOfFixedTotal } from \"./erc20-balance-of-fixed-total/index\";\nimport { strategy as erc20BalanceOfCv } from \"./erc20-balance-of-cv/index\";\nimport { strategy as erc20WithBalance } from \"./erc20-with-balance/index\";\nimport { strategy as erc20BalanceOfDelegation } from \"./erc20-balance-of-delegation/index\";\nimport { strategy as ethBalance } from \"./eth-balance/index\";\nimport { strategy as makerDsChief } from \"./maker-ds-chief/index\";\nimport { strategy as uni } from \"./uni/index\";\nimport { strategy as yearnVault } from \"./yearn-vault/index\";\nimport { strategy as moloch } from \"./moloch/index\";\nimport { strategy as uniswap } from \"./uniswap/index\";\nimport { strategy as pancake } from \"./pancake/index\";\nimport { strategy as synthetix } from \"./synthetix/index\";\nimport { strategy as ctoken } from \"./ctoken/index\";\nimport { strategy as cream } from \"./cream/index\";\nimport { strategy as esd } from \"./esd/index\";\nimport { strategy as stakedUniswap } from \"./staked-uniswap/index\";\n\nexport default {\n\tbalancer,\n\t\"contract-call\": contractCall,\n\t\"erc20-balance-of\": erc20BalanceOf,\n\t\"erc20-balance-of-fixed-total\": erc20BalanceOfFixedTotal,\n\t\"erc20-balance-of-cv\": erc20BalanceOfCv,\n\t\"erc20-balance-of-coeff\": erc20BalanceOfCoeff,\n\t\"erc20-with-balance\": erc20WithBalance,\n\t\"erc20-balance-of-delegation\": erc20BalanceOfDelegation,\n\t\"eth-balance\": ethBalance,\n\t\"maker-ds-chief\": makerDsChief,\n\tuni,\n\t\"yearn-vault\": yearnVault,\n\tmoloch,\n\tuniswap,\n\tpancake,\n\tsynthetix,\n\tctoken,\n\tcream,\n\t\"staked-uniswap\": stakedUniswap,\n\tesd,\n};\n","import { Interface } from \"@ethersproject/abi\";\nimport { Contract } from \"@ethersproject/contracts\";\nimport numeral from \"numeral\";\nimport { jsonToGraphQLQuery } from \"json-to-graphql-query\";\nimport { abi as multicallAbi } from \"../constants/abis/Multicall.json\";\nimport _strategies from \"./strategies\";\nimport { getContract } from \"../utils\";\n\nexport const MULTICALL = {\n\t1: \"0xeefba1e63905ef1d7acba5a8513c70307c1ce441\",\n\t4: \"0x42ad527de7d4e9d9d011ac45b31d8551f8fe9821\",\n\t5: \"0x77dca2c955b15e9de4dbbcf1246b4b85b651e50e\",\n\t6: \"0x53c43764255c17bd724f74c4ef150724ac50a3ed\",\n\t42: \"0x2cc8688c5f75e365aaeeb4ea8d6a480405a48d2a\",\n\t56: \"0x1ee38d535d541c55c9dae27b12edf090c608e6fb\",\n\t82: \"0x579De77CAEd0614e3b158cb738fcD5131B9719Ae\",\n\t97: \"0x8b54247c6BAe96A6ccAFa468ebae96c4D7445e46\",\n\t100: \"0xb5b692a88bdfc81ca69dcb1d924f59f0413a602a\",\n\twanchain: \"0xba5934ab3056fca1fa458d30fbb3810c3eb5145f\",\n};\n\nexport const SNAPSHOT_SUBGRAPH_URL = {\n\t1: \"https://api.thegraph.com/subgraphs/name/snapshot-labs/snapshot\",\n\t4: \"https://api.thegraph.com/subgraphs/name/snapshot-labs/snapshot-rinkeby\",\n\t42: \"https://api.thegraph.com/subgraphs/name/snapshot-labs/snapshot-kovan\",\n};\n\nexport async function call(provider, abi, call, options) {\n\tconst contract = new Contract(call[0], abi, provider);\n\ttry {\n\t\tconst params = call[2] || [];\n\t\treturn await contract[call[1]](...params, options || {});\n\t} catch (e) {\n\t\treturn Promise.reject(e);\n\t}\n}\n\nexport async function multicall(network, provider, abi, calls, options) {\n\tconst itf = new Interface(abi);\n\tconst multi = getContract(MULTICALL[network], multicallAbi, provider);\n\ttry {\n\t\ttry {\n\t\t\tconst [, res] = await multi.aggregate(\n\t\t\t\tcalls.map((call) => [call[0].toLowerCase(), itf.encodeFunctionData(call[1], call[2])]),\n\t\t\t\toptions || {}\n\t\t\t);\n\t\t\treturn res.map((call, i) => itf.decodeFunctionResult(calls[i][1], call));\n\t\t} catch (e) {\n\t\t\treturn [];\n\t\t}\n\t} catch (e) {\n\t\treturn Promise.reject(e);\n\t}\n}\n\nexport async function subgraphRequest(url, query) {\n\tconst res = await fetch(url, {\n\t\tmethod: \"POST\",\n\t\theaders: {\n\t\t\tAccept: \"application/json\",\n\t\t\t\"Content-Type\": \"application/json\",\n\t\t},\n\t\tbody: JSON.stringify({ query: jsonToGraphQLQuery({ query }) }),\n\t});\n\tconst { data } = await res.json();\n\treturn data || {};\n}\n\nexport async function ipfsGet(gateway, ipfsHash, protocolType = \"ipfs\") {\n\tconst url = `https://${gateway}/${protocolType}/${ipfsHash}`;\n\treturn fetch(url).then((res) => res.json());\n}\n\nexport async function getScores(space, strategies, network, provider, addresses, snapshot = \"latest\") {\n\treturn await Promise.all(\n\t\tstrategies.map((strategy) =>\n\t\t\t_strategies[strategy.name](space, network, provider, addresses, strategy.params, snapshot)\n\t\t)\n\t);\n}\n\nexport function jsonParse(input, fallback) {\n\tif (typeof input !== \"string\") {\n\t\treturn fallback || {};\n\t}\n\ttry {\n\t\treturn JSON.parse(input);\n\t} catch (err) {\n\t\treturn fallback || {};\n\t}\n}\n\nexport function _numeral(number, format = \"(0.[00]a)\") {\n\treturn numeral(number).format(format);\n}\n\nexport function formatProposal(base) {\n\tconst proposal = JSON.parse(JSON.stringify(base));\n\tproposal.msg = jsonParse(proposal.msg, proposal.msg);\n\n\t// v0.1.0\n\tif (proposal.msg.version === \"0.1.0\") {\n\t\tproposal.msg.payload.start = 1595088000;\n\t\tproposal.msg.payload.end = 1595174400;\n\t\tproposal.msg.payload.snapshot = 10484400;\n\t\tproposal.bpt_voting_disabled = \"1\";\n\t}\n\n\t// v0.1.1\n\tif (proposal.msg.version === \"0.1.0\" || proposal.msg.version === \"0.1.1\") {\n\t\tproposal.msg.payload.metadata = {};\n\t}\n\n\treturn proposal;\n}\n\nexport function formatProposals(proposals) {\n\treturn Object.fromEntries(Object.entries(proposals).map((proposal) => [proposal[0], formatProposal(proposal[1])]));\n}\n\nexport default {\n\tcall,\n\tmulticall,\n\tsubgraphRequest,\n\tipfsGet,\n\tgetScores,\n};\n","import styled from \"styled-components\";\nimport { Table } from \"react-bootstrap\";\nimport Card from \"../../components/Card\";\n\nexport const CustomCard = styled(Card)`\n\t.card-body {\n\t\tpadding: 0 0 0.5rem 0;\n\t}\n`;\n\nexport const BoxHeader = styled.div`\n\tdisplay: flex;\n\talign-items: center;\n`;\n\nexport const BoxTitle = styled.h4`\n\tcolor: ${({ theme }) => theme.text1};\n\tfont-weight: 600;\n\tfont-size: 1rem;\n\tline-height: 1.5;\n\tmargin: 0;\n\n\t@media (min-width: 768px) {\n\t\tfont-size: 1.25rem;\n\t}\n`;\n\nexport const VoteContent = styled.div`\n\tline-height: 1.5;\n\n\tp {\n\t\tfont-weight: 400;\n\t}\n\n\th1,\n\th2,\n\th3,\n\th4,\n\th5,\n\th6 {\n\t\tfont-size: 1.25rem;\n\t\tfont-weight: 600;\n\t\tmargin-top: 1.5rem;\n\n\t\t@media (min-width: 768px) {\n\t\t\tfont-size: 1.35rem;\n\t\t}\n\t}\n`;\n\nexport const TokenValue = styled.span`\n\tfont-size: 0.875rem;\n\tfont-weight: 500;\n\tpadding-left: 11px;\n\tcolor: ${({ theme }) => theme.text1};\n\n\t@media (min-width: 768px) {\n\t\tfont-size: 1rem;\n\t\tfont-weight: 700;\n\t}\n`;\n\nexport const AuthorLink = styled.a`\n\tcolor: ${({ theme }) => theme.primary};\n\tfont-weight: 700;\n\tfont-size: 0.875rem;\n\n\t@media (min-width: 768px) {\n\t\tfont-size: 1rem;\n\t}\n\n\t&:focus,\n\t&:active {\n\t\toutline: none;\n\t}\n`;\n\nexport const InfoText = styled.span<{ fontWeight?: number }>`\n\tfont-size: 0.875rem;\n\tfont-weight: ${({ fontWeight }) => fontWeight || 700};\n\tcolor: ${({ theme }) => theme.text1};\n\n\t@media (min-width: 768px) {\n\t\tfont-size: 1rem;\n\t\tfont-weight: 700;\n\t}\n`;\n\nexport const ResultRow = styled.div`\n\tdisplay: flex;\n\tflex-direction: column;\n\n\t&:not(:last-child) {\n\t\tmargin-bottom: 40px;\n\t}\n`;\n\nexport const ResultTitle = styled.span`\n\tfont-size: 0.875rem;\n\tfont-weight: 400;\n\tmargin: 0;\n\tcolor: ${({ theme }) => theme.text1};\n\n\t@media (min-width: 768px) {\n\t\tfont-weight: 500;\n\t}\n`;\n\nexport const ResultProgress = styled.div`\n\tbackground-color: ${({ theme }) => theme.primaryLight};\n\theight: 5px;\n\tborder: none;\n\twidth: 100%;\n\tborder-radius: 20px;\n`;\n\nexport const ResultProgressBar = styled.div`\n\tbackground-color: ${({ theme }) => theme.primary};\n\tborder-radius: 20px;\n`;\n\nexport const CustomTable = styled(Table)`\n\tmargin-bottom: 0;\n\n\ttd {\n\t\tborder: 0;\n\t\tborder-bottom: 1px solid ${({ theme }) => theme.borderColor};\n\t\tborder-radius: 0 !important;\n\t\tvertical-align: middle;\n\t\tbackground: transparent !important;\n\n\t\t&:first-child,\n\t\t&:last-child {\n\t\t\tborder-left: 0;\n\t\t\tborder-right: 0;\n\t\t}\n\n\t\t&:last-child {\n\t\t\twidth: 200px;\n\t\t\ttext-align: right;\n\t\t}\n\t}\n\n\ttr:last-child td {\n\t\tborder-bottom: 0;\n\n\t\t&:first-child {\n\t\t\tborder-bottom-left-radius: 18px !important;\n\t\t}\n\t\t&:last-child {\n\t\t\tborder-bottom-right-radius: 18px !important;\n\t\t}\n\t}\n`;\n\nexport const Thead = styled.thead`\n\theight: 1px;\n\topacity: 0;\n\tpointer-events: none;\n\tvisibility: hidden;\n\tdisplay: none;\n`;\n\nexport const ShowMoreWrap = styled.div`\n\tborder-top: 1px solid ${({ theme }) => theme.borderColor};\n`;\n","import { useTranslation } from \"react-i18next\";\nimport { Button } from 'react-bootstrap';\nimport { useWeb3React } from \"@web3-react/core\";\nimport Card from \"../../components/Card\";\nimport * as Styled from \"./styleds\";\n\nexport type VoteCastProps = {\n\tproposal: any;\n\tselected: any;\n\tonSelectOption: (T: number) => void;\n\tonVote: () => void;\n};\n\nexport default function VoteCast({ proposal, selected, onSelectOption, onVote }: VoteCastProps) {\n\tconst { t } = useTranslation();\n\tconst { account } = useWeb3React();\n\n\treturn (\n\t\t<Card\n\t\t\theader={\n\t\t\t\t<div className=\"d-flex flex-column justify-content-around\">\n\t\t\t\t\t<Styled.BoxHeader>\n\t\t\t\t\t\t<Styled.BoxTitle>{t(\"governance.castVote\")}</Styled.BoxTitle>\n\t\t\t\t\t</Styled.BoxHeader>\n\t\t\t\t</div>\n\t\t\t}\n\t\t>\n\t\t\t<div className=\"d-flex flex-column\">\n\t\t\t\t{proposal.msg?.payload?.choices?.map((option: any, index: number) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\tclassName={`btn ${\n\t\t\t\t\t\t\t\tindex === selected - 1 ? `btn-secondary-light` : `btn-light-secondary-light`\n\t\t\t\t\t\t\t} mb-2 btn-block py-3`}\n\t\t\t\t\t\t\tonClick={() => onSelectOption(index + 1)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{option}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t\t<Button\n\t\t\t\t\tclassName=\"py-3 mt-3 align-self-center\"\n\t\t\t\t\tdisabled={!selected}\n\t\t\t\t\tstyle={{ width: 200 }}\n\t\t\t\t\tonClick={onVote}\n\t\t\t\t>\n\t\t\t\t\t{account ? t(\"governance.vote\") : t(\"wallet.connect\")}\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t</Card>\n\t);\n}\n","import { useMemo } from \"react\";\nimport { Remarkable } from \"remarkable\";\nimport dompurify from \"dompurify\";\nimport Card from \"../../components/Card\";\nimport * as Styled from \"./styleds\";\n\nconst md = new Remarkable();\n\nexport type ProposalContentProps = {\n\tproposal: any;\n\tstatus: any;\n};\n\nexport default function ProposalContent({ proposal, status }: ProposalContentProps) {\n\tconst voteBody = useMemo(() => {\n\t\treturn dompurify.sanitize(proposal?.msg?.payload?.body);\n\t}, [proposal?.msg?.payload?.body]);\n\n\treturn (\n\t\t<Card\n\t\t\theader={\n\t\t\t\t<div className=\"d-flex flex-column justify-content-around\">\n\t\t\t\t\t<Styled.BoxHeader>\n\t\t\t\t\t\t<Styled.BoxTitle>{proposal.msg.payload.name}</Styled.BoxTitle>\n\t\t\t\t\t\t{status && (\n\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\tclassName={`label ${status.className} label-lg font-weight-medium d-flex label-inline py-3 ml-3`}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{status.title}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Styled.BoxHeader>\n\t\t\t\t</div>\n\t\t\t}\n\t\t>\n\t\t\t<Styled.VoteContent\n\t\t\t\tdangerouslySetInnerHTML={{\n\t\t\t\t\t__html: md.render(voteBody),\n\t\t\t\t}}\n\t\t\t/>\n\t\t</Card>\n\t);\n}\n","import React from \"react\";\nimport { Jazzicon } from \"@ukstv/jazzicon-react\";\nimport styled from \"styled-components\";\nimport { _numeral } from \"../../lib/utils\";\n\nexport const ModifiedJazzicon = styled(Jazzicon)`\n\twidth: 24px;\n\theight: 24px;\n\tmargin-right: 10px;\n\n\t@media (min-width: 768px) {\n\t\twidth: 32px;\n\t\theight: 32px;\n\t\tmargin-right: 15px;\n\t}\n`;\nconst Wrapper = styled.tr`\n\tpadding: 10px 0;\n\tposition: relative;\n\ttransition: 0.3s ease all;\n\tmargin-bottom: 0.625rem;\n\n\ttd {\n\t\theight: 40px;\n\t\t&:last-child {\n\t\t\ttext-align: right;\n\t\t}\n\t}\n\n\t@media (min-width: 768px) {\n\t\tbackground-color: ${({ theme }) => theme.modalBG};\n\n\t\ttd {\n\t\t\tborder-top: 1px solid ${({ theme }) => theme.text3};\n\t\t\tborder-bottom: 1px solid ${({ theme }) => theme.text3};\n\t\t\theight: 50px;\n\n\t\t\t&:first-child {\n\t\t\t\tborder-left: 1px solid ${({ theme }) => theme.text3};\n\t\t\t\tborder-top-left-radius: 18px;\n\t\t\t\tborder-bottom-left-radius: 18px;\n\t\t\t\tpadding-left: 30px;\n\t\t\t}\n\n\t\t\t&:last-child {\n\t\t\t\tborder-right: 1px solid ${({ theme }) => theme.text3};\n\t\t\t\tborder-top-right-radius: 18px;\n\t\t\t\tpadding-right: 30px;\n\t\t\t\tborder-bottom-right-radius: 18px;\n\t\t\t\tmax-width: 80px;\n\t\t\t\ttext-align: left;\n\t\t\t}\n\t\t}\n\n\t\t&:hover {\n\t\t\tbackground-color: ${({ theme }) => theme.bg1};\n\t\t\tborder-color: ${({ theme }) => theme.text3};\n\t\t}\n\t}\n`;\n\nconst Text = styled.span`\n\tcolor: ${({ theme }) => theme.text1};\n\tfont-size: 0.875rem;\n\tfont-weight: 500;\n\n\t@media (min-width: 768px) {\n\t\tfont-size: 1rem;\n\t}\n`;\nconst Address = styled.span`\n\tcolor: ${({ theme }) => theme.text1};\n\tfont-size: 0.75rem;\n\tfont-weight: 400;\n\n\t@media (min-width: 768px) {\n\t\tfont-size: 1rem;\n\t}\n`;\n\nconst voteItem = (props) => {\n\treturn (\n\t\t<Wrapper>\n\t\t\t<td>\n\t\t\t\t<div className=\"d-flex align-items-center\">\n\t\t\t\t\t<div className={\"d-none d-lg-block\"}>\n\t\t\t\t\t\t<ModifiedJazzicon address={props.address} />\n\t\t\t\t\t</div>\n\t\t\t\t\t<Address>\n\t\t\t\t\t\t{props.address.slice(0, 6)}...{props.address.slice(-4)}\n\t\t\t\t\t</Address>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<Text className={\"d-none d-lg-flex\"}>{props.vote}</Text>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<Text>\n\t\t\t\t\t{_numeral(props.score)} {props.symbol}\n\t\t\t\t</Text>\n\t\t\t</td>\n\t\t</Wrapper>\n\t);\n};\n\nexport default voteItem;\n","import { useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { Button } from \"react-bootstrap\";\nimport Loading from \"../../components/Loading\";\nimport VoteItem from \"../../components/VoteItem\";\nimport * as Styled from \"./styleds\";\n\nexport type ProposalVotesProps = {\n\tvotes: Array<any>;\n\tresult: any;\n\tproposal: any;\n\tspace: any;\n};\n\nexport default function ProposalVotes({ votes, result, proposal, space }: ProposalVotesProps) {\n\tconst { t } = useTranslation();\n\tconst [showMore, setShowMore] = useState<boolean>(false);\n\n\tconst onShowMore = () => setShowMore(true);\n\n\treturn (\n\t\t<Styled.CustomCard\n\t\t\theader={\n\t\t\t\t<div className=\"d-flex flex-column justify-content-around\">\n\t\t\t\t\t<Styled.BoxHeader>\n\t\t\t\t\t\t<Styled.BoxTitle>{t(\"governance.votes\")}</Styled.BoxTitle>\n\t\t\t\t\t\t{votes && (\n\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\tclassName={`label label-light-primary label-lg font-weight-medium d-flex label-inline py-3 ml-3`}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{Object.keys(votes).length}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Styled.BoxHeader>\n\t\t\t\t</div>\n\t\t\t}\n\t\t>\n\t\t\t<Styled.CustomTable>\n\t\t\t\t<Styled.Thead style={{ maxHeight: 1, opacity: 0, visibility: \"hidden\" }}>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>User</td>\n\t\t\t\t\t\t<td>Vote</td>\n\t\t\t\t\t\t<td>Power</td>\n\t\t\t\t\t</tr>\n\t\t\t\t</Styled.Thead>\n\t\t\t\t<tbody>\n\t\t\t\t\t{result\n\t\t\t\t\t\t? showMore || (result.hasOwnProperty(\"votes\") && Object.keys(result.votes || {}).length < 10)\n\t\t\t\t\t\t\t? Object.values(result.votes).map((vote: any, index: number) => {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<VoteItem\n\t\t\t\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t\t\t\t\taddress={vote?.address}\n\t\t\t\t\t\t\t\t\t\t\tvote={proposal?.msg?.payload?.choices[vote.msg.payload.choice - 1]}\n\t\t\t\t\t\t\t\t\t\t\tscore={vote?.balance}\n\t\t\t\t\t\t\t\t\t\t\tsymbol={space?.symbol}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t  })\n\t\t\t\t\t\t\t: result.hasOwnProperty(\"votes\") &&\n\t\t\t\t\t\t\t  Object.values(result.votes)\n\t\t\t\t\t\t\t\t\t.slice(0, 10)\n\t\t\t\t\t\t\t\t\t.map((vote: any, index: number) => {\n\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t<VoteItem\n\t\t\t\t\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t\t\t\t\t\taddress={vote?.address}\n\t\t\t\t\t\t\t\t\t\t\t\tvote={proposal?.msg?.payload?.choices[vote.msg.payload.choice - 1]}\n\t\t\t\t\t\t\t\t\t\t\t\tscore={vote?.balance}\n\t\t\t\t\t\t\t\t\t\t\t\tsymbol={space?.symbol}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t: null}\n\t\t\t\t</tbody>\n\t\t\t</Styled.CustomTable>\n\t\t\t{votes ? (\n\t\t\t\t<>\n\t\t\t\t\t{!showMore && Object.keys(votes || {}).length > 10 ? (\n\t\t\t\t\t\t<Styled.ShowMoreWrap className=\"py-4 text-center\">\n\t\t\t\t\t\t\t<Button variant={\"primary\"} onClick={onShowMore}>\n\t\t\t\t\t\t\t\t{t(\"showMore\")}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</Styled.ShowMoreWrap>\n\t\t\t\t\t) : null}\n\t\t\t\t</>\n\t\t\t) : (\n\t\t\t\t<div className=\"d-flex align-items-center justify-content-center py-5 w-100 my-4\">\n\t\t\t\t\t<Loading color={\"primary\"} width={40} height={40} active id={\"votes-loading\"} />\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</Styled.CustomCard>\n\t);\n}\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nconst Wrapper = styled.div`\n\tposition: relative;\n\ttransition: 0.3s ease all;\n\twidth: 100%;\n\n\t&:not(:last-child) {\n\t\tmargin-bottom: 1.875rem;\n\t}\n`;\n\nconst InfoDesc = styled.span`\n\tfont-size: 0.75rem;\n\tfont-weight: 400;\n\tmargin: 0;\n\tcolor: ${({ theme }) => theme.text1};\n\n\t@media (min-width: 768px) {\n\t\tfont-size: 0.875rem;\n\t\tfont-weight: 500;\n\t}\n`;\n\nconst listItem = (props) => {\n\treturn (\n\t\t<Wrapper className=\"d-flex align-items-center justify-content-between\">\n\t\t\t<InfoDesc>{props.title}</InfoDesc>\n\t\t\t<div>{props.children}</div>\n\t\t</Wrapper>\n\t);\n};\n\nexport default listItem;\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nimport { useLogo } from \"../../state/governance/hooks\";\n\nconst Logo = styled.img`\n\twidth: ${({ size }) => size}px;\n\theight: ${({ size }) => size}px;\n\tborder-radius: ${({ size }) => size}px;\n\tbox-shadow: 0 6px 10px rgba(0, 0, 0, 0.075);\n\tdisplay: none;\n\n\t@media (min-width: 768px) {\n\t\tdisplay: initial;\n\t}\n`;\n\nconst VoteLogo = (props) => {\n\tconst LogoURL = useLogo(props.id, props.symbolIndex);\n\treturn <Logo src={LogoURL} size={props.size} />;\n};\n\nexport default VoteLogo;\n","import { useTranslation } from \"react-i18next\";\nimport moment from \"moment\";\nimport Card from \"../../components/Card\";\nimport ListItem from \"../../components/ListItem\";\nimport { ModifiedJazzicon } from \"../../components/VoteItem\";\nimport VoteLogo from \"../../components/VoteLogo\";\nimport * as Styled from \"./styleds\";\n\nexport type VoteInformationProps = {\n\tproposal: any;\n\tspace: any;\n\tid: any;\n};\n\nexport default function VoteInformation({ proposal, space, id }: VoteInformationProps) {\n\tconst { t } = useTranslation();\n\n\treturn (\n\t\t<Card\n\t\t\theader={\n\t\t\t\t<div className=\"d-flex flex-column justify-content-around\">\n\t\t\t\t\t<Styled.BoxHeader>\n\t\t\t\t\t\t<Styled.BoxTitle>{t(\"information\")}</Styled.BoxTitle>\n\t\t\t\t\t</Styled.BoxHeader>\n\t\t\t\t</div>\n\t\t\t}\n\t\t>\n\t\t\t<div className=\"d-flex flex-column justify-content-start\">\n\t\t\t\t<ListItem title={t(\"importList.tokens\")}>\n\t\t\t\t\t<div className=\"d-flex align-items-center justify-content-end\">\n\t\t\t\t\t\t{space.strategies.map((s: any, index: number) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tkey={`space-strategy-${index}`}\n\t\t\t\t\t\t\t\t\tclassName=\"d-flex align-items-center\"\n\t\t\t\t\t\t\t\t\tstyle={{ marginLeft: index !== 0 ? \"21px\" : \"0px\" }}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<VoteLogo id={id} symbolIndex={index} size={30} />\n\t\t\t\t\t\t\t\t\t<Styled.TokenValue>{s.params.symbol}</Styled.TokenValue>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</div>\n\t\t\t\t</ListItem>\n\n\t\t\t\t<ListItem title={t(\"author\")}>\n\t\t\t\t\t<div className=\"d-flex align-items-center\">\n\t\t\t\t\t\t<ModifiedJazzicon address={proposal.address} />\n\t\t\t\t\t\t<Styled.AuthorLink\n\t\t\t\t\t\t\thref={`https://etherscan.io/address/${proposal.address}`}\n\t\t\t\t\t\t\ttarget={\"_blank\"}\n\t\t\t\t\t\t\trel={\"noopener noreferrer\"}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{proposal.address.slice(0, 6)}...\n\t\t\t\t\t\t\t{proposal.address.slice(-4)}\n\t\t\t\t\t\t</Styled.AuthorLink>\n\t\t\t\t\t</div>\n\t\t\t\t</ListItem>\n\n\t\t\t\t<ListItem title={\"IPFS\"}>\n\t\t\t\t\t<Styled.AuthorLink\n\t\t\t\t\t\thref={`https://ipfs.io/ipfs/${proposal.authorIpfsHash}`}\n\t\t\t\t\t\ttarget={\"_blank\"}\n\t\t\t\t\t\trel={\"noopener noreferrer\"}\n\t\t\t\t\t>\n\t\t\t\t\t\t#{proposal.authorIpfsHash.slice(0, 7)}\n\t\t\t\t\t</Styled.AuthorLink>\n\t\t\t\t</ListItem>\n\t\t\t\t<ListItem title={t(\"startDate\")}>\n\t\t\t\t\t<Styled.InfoText fontWeight={400}>\n\t\t\t\t\t\t{proposal && moment(proposal.msg.payload.start * 1e3).format(\"YYYY/MM/DD hh:mm\")}\n\t\t\t\t\t</Styled.InfoText>\n\t\t\t\t</ListItem>\n\t\t\t\t<ListItem title={t(\"endDate\")}>\n\t\t\t\t\t<Styled.InfoText fontWeight={400}>\n\t\t\t\t\t\t{proposal && moment(proposal.msg.payload.end * 1e3).format(\"YYYY/MM/DD hh:mm\")}\n\t\t\t\t\t</Styled.InfoText>\n\t\t\t\t</ListItem>\n\t\t\t\t<ListItem title={t(\"token\")}>\n\t\t\t\t\t<Styled.InfoText>{proposal.address.slice(0, 6)}</Styled.InfoText>\n\t\t\t\t</ListItem>\n\t\t\t\t<ListItem title={\"Snapshot\"}>\n\t\t\t\t\t<Styled.AuthorLink\n\t\t\t\t\t\thref={`https://etherscan.io/block/${proposal.msg.payload.snapshot}`}\n\t\t\t\t\t\ttarget={\"_blank\"}\n\t\t\t\t\t\trel={\"noopener noreferrer\"}\n\t\t\t\t\t>\n\t\t\t\t\t\t{proposal.msg.payload.snapshot}\n\t\t\t\t\t</Styled.AuthorLink>\n\t\t\t\t</ListItem>\n\t\t\t</div>\n\t\t</Card>\n\t);\n}\n","import { useTranslation } from \"react-i18next\";\nimport { shorten } from \"../../state/governance/hooks\";\nimport { _numeral } from \"../../lib/utils\";\nimport Card from \"../../components/Card\";\nimport * as Styled from \"./styleds\";\n\nexport type VoteResultsProps = {\n\tresult: VoteResult;\n\tchoices: Array<any>;\n\tsymbol: string;\n};\n\nexport type VoteResult = {\n\ttotalBalances: any;\n\ttotalVotesBalances: any;\n};\n\nexport default function VoteResults({ result, choices, symbol }: VoteResultsProps) {\n\tconst { t } = useTranslation();\n\n\treturn (\n\t\t<Card\n\t\t\theader={\n\t\t\t\t<div className=\"d-flex flex-column justify-content-around\">\n\t\t\t\t\t<Styled.BoxHeader>\n\t\t\t\t\t\t<Styled.BoxTitle>{t(\"results\")}</Styled.BoxTitle>\n\t\t\t\t\t</Styled.BoxHeader>\n\t\t\t\t</div>\n\t\t\t}\n\t\t>\n\t\t\t<div className=\"d-flex flex-column\">\n\t\t\t\t{choices.map((choice, i) => {\n\t\t\t\t\tconst progress = !result.totalVotesBalances\n\t\t\t\t\t\t? 0\n\t\t\t\t\t\t: (100 / result.totalVotesBalances) * result.totalBalances?.[i];\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Styled.ResultRow key={`results-row-${i}`}>\n\t\t\t\t\t\t\t<div className=\"d-flex align-items-center justify-content-between mb-2\">\n\t\t\t\t\t\t\t\t<Styled.ResultTitle>{shorten(choice, \"choice\")}</Styled.ResultTitle>\n\n\t\t\t\t\t\t\t\t<Styled.ResultTitle>\n\t\t\t\t\t\t\t\t\t{_numeral(result.totalBalances?.[i])}\n\t\t\t\t\t\t\t\t\t{shorten(symbol, \"symbol\")}\n\t\t\t\t\t\t\t\t</Styled.ResultTitle>\n\n\t\t\t\t\t\t\t\t<Styled.ResultTitle>\n\t\t\t\t\t\t\t\t\t{!result.totalVotesBalances ? 0 : `${progress.toFixed(2)}%`}\n\t\t\t\t\t\t\t\t</Styled.ResultTitle>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<Styled.ResultProgress className={`progress progress-xs w-100`}>\n\t\t\t\t\t\t\t\t{/* @ts-ignore */}\n\t\t\t\t\t\t\t\t<Styled.ResultProgressBar\n\t\t\t\t\t\t\t\t\trole=\"progressbar\"\n\t\t\t\t\t\t\t\t\taria-valuenow=\"50\"\n\t\t\t\t\t\t\t\t\taria-valuemin=\"0\"\n\t\t\t\t\t\t\t\t\taria-valuemax=\"100\"\n\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\twidth: `${progress}%`,\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Styled.ResultProgress>\n\t\t\t\t\t\t</Styled.ResultRow>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</div>\n\t\t</Card>\n\t);\n}\n","import React, { useEffect, useState, useCallback } from \"react\";\nimport { Row, Col, Button } from \"react-bootstrap\";\nimport { useTranslation } from \"react-i18next\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { toast } from \"react-hot-toast\";\nimport { useWeb3React } from \"@web3-react/core\";\n\nimport { formatProposal, getScores } from \"../../lib/utils\";\nimport Governance from \"../../http/governance\";\nimport { useWalletModalToggle } from \"../../state/application/hooks\";\nimport { fetchProposals, fetchSpaces } from \"../../state/governance/actions\";\nimport { Modal } from \"../../components/Modal/bootstrap\";\nimport Card from \"../../components/Card\";\nimport Loading from \"../../components/Loading\";\nimport Page from \"../../components/Page\";\nimport VoteCast from \"./VoteCast\";\nimport ProposalContent from \"./ProposalContent\";\nimport ProposalVotes from \"./ProposalVotes\";\nimport VoteInformation from \"./VoteInformation\";\nimport VoteResults from \"./VoteResults\";\n\nconst Vote = (props) => {\n\tconst { account, library } = useWeb3React();\n\tconst [selectedProposal, setSelectedProposal] = useState(false);\n\tconst [selectedVote, setSelectedVote] = useState(null);\n\tconst [showModal, setShowModal] = useState(false);\n\tconst [votes, setVotes] = useState({});\n\tconst [result, setResult] = useState({});\n\tconst [status, setStatus] = useState({});\n\tconst dispatch = useDispatch();\n\tconst toggleWalletModal = useWalletModalToggle();\n\tconst { spaces, loading: governanceLoading, proposals } = useSelector((state) => state.governance);\n\tconst { t } = useTranslation();\n\tconst api = new Governance();\n\n\tlet id = props.match.params.space;\n\tlet address = props.match.params.id;\n\tlet space = spaces[id];\n\n\tuseEffect(() => {\n\t\tif (Object.keys(spaces).length === 0) {\n\t\t\tdispatch(fetchSpaces());\n\t\t} else {\n\t\t\tif (spaces.hasOwnProperty(id)) {\n\t\t\t\tdispatch(fetchProposals(id));\n\t\t\t\tapi.get(\"votes\", { id, address })\n\t\t\t\t\t.then((response) => {\n\t\t\t\t\t\tsetVotes(response);\n\t\t\t\t\t})\n\t\t\t\t\t.catch((error) => {\n\t\t\t\t\t\ttoast.error(\"Cannot get votes, Please try again in a minute\");\n\t\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tprops.history.push(\"/governance\");\n\t\t\t}\n\t\t}\n\t}, [spaces, id, address, dispatch, props.history]);\n\n\tconst getVotes = () => {\n\t\tapi.get(\"votes\", { id, address })\n\t\t\t.then((response) => {\n\t\t\t\tsetVotes(response);\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\ttoast.error(\"Cannot get votes, Please try again in a minute\");\n\t\t\t});\n\t};\n\n\tconst transformVotes = async (votes, proposals) => {\n\t\tlet result = {};\n\t\tif (Object.keys(votes).length > 0) {\n\t\t\tconst selectedProposals =\n\t\t\t\tproposals.hasOwnProperty(id) && proposals[id].hasOwnProperty(address)\n\t\t\t\t\t? formatProposal(Object.assign({}, proposals[id][address]))\n\t\t\t\t\t: formatProposal({});\n\t\t\tconst scores = await getScores(id, space.strategies, space.network, library, Object.keys(votes));\n\t\t\tresult.votes = Object.fromEntries(\n\t\t\t\tObject.entries(votes)\n\t\t\t\t\t.map((vote) => {\n\t\t\t\t\t\tlet transformed = [vote[0], Object.assign({}, vote[1])];\n\t\t\t\t\t\ttransformed[1].scores = space.strategies.map(\n\t\t\t\t\t\t\t(strategy, i) => scores[i][transformed[1].address] || 0\n\t\t\t\t\t\t);\n\t\t\t\t\t\ttransformed[1].balance = transformed[1].scores.reduce((a, b) => a + b, 0);\n\t\t\t\t\t\treturn transformed;\n\t\t\t\t\t})\n\t\t\t\t\t.sort((a, b) => b[1].balance - a[1].balance)\n\t\t\t);\n\t\t\tresult.results = {\n\t\t\t\ttotalVotes: selectedProposals.msg?.payload?.choices?.map(\n\t\t\t\t\t(choice, i) =>\n\t\t\t\t\t\tObject.values(result.votes).filter((vote) => vote.msg.payload.choice === i + 1).length\n\t\t\t\t),\n\t\t\t\ttotalBalances: selectedProposals.msg?.payload?.choices?.map((choice, i) =>\n\t\t\t\t\tObject.values(result.votes)\n\t\t\t\t\t\t.filter((vote) => vote.msg.payload.choice === i + 1)\n\t\t\t\t\t\t.reduce((a, b) => a + b.balance, 0)\n\t\t\t\t),\n\t\t\t\ttotalScores: selectedProposals.msg?.payload?.choices?.map((choice, i) =>\n\t\t\t\t\tspace.strategies.map((strategy, sI) =>\n\t\t\t\t\t\tObject.values(result.votes)\n\t\t\t\t\t\t\t.filter((vote) => vote.msg.payload.choice === i + 1)\n\t\t\t\t\t\t\t.reduce((a, b) => a + b.scores[sI], 0)\n\t\t\t\t\t)\n\t\t\t\t),\n\t\t\t\ttotalVotesBalances: Object.values(result.votes).reduce((a, b) => a + b.balance, 0),\n\t\t\t};\n\t\t\tsetResult(result);\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\ttransformVotes(votes, proposals);\n\t}, [proposals, votes]);\n\n\tuseEffect(() => {\n\t\tif (proposals.hasOwnProperty(id)) {\n\t\t\tif (proposals[id].hasOwnProperty(address)) {\n\t\t\t\tsetSelectedProposal(proposals[id][address]);\n\t\t\t\tconst ts = (Date.now() / 1e3).toFixed();\n\t\t\t\tconst { start, end } = proposals[id][address].msg.payload;\n\t\t\t\tlet state =\n\t\t\t\t\tts > end\n\t\t\t\t\t\t? { title: \"Closed\", className: \"label-light-danger\" }\n\t\t\t\t\t\t: ts > start\n\t\t\t\t\t\t? { title: \"Active\", className: \"label-light-success\" }\n\t\t\t\t\t\t: { title: \"Pending\", className: \"label-light-info\" };\n\t\t\t\tsetStatus(state);\n\t\t\t} else {\n\t\t\t\tprops.history.push(`/governance/${id}`);\n\t\t\t}\n\t\t} else {\n\t\t\tsetSelectedProposal(false);\n\t\t}\n\t}, [proposals, id, address, props.history]);\n\n\tconst handleSubmit = useCallback(async () => {\n\t\tif (!account) {\n\t\t\ttoggleWalletModal();\n\t\t\treturn false;\n\t\t}\n\t\tconst options = {\n\t\t\ttoken: spaces[id].token,\n\t\t\ttype: \"vote\",\n\t\t\tspace: id,\n\t\t\tpayload: {\n\t\t\t\tproposal: address,\n\t\t\t\tchoice: selectedVote,\n\t\t\t\tmetadata: {},\n\t\t\t},\n\t\t};\n\t\tconst msg = {\n\t\t\taddress: account,\n\t\t\tmsg: JSON.stringify({\n\t\t\t\tversion: \"0.1.3\",\n\t\t\t\ttimestamp: (Date.now() / 1e3).toFixed(),\n\t\t\t\t...options,\n\t\t\t}),\n\t\t};\n\t\ttry {\n\t\t\ttoast(\"Sending ...\", {\n\t\t\t\ticon: \"\",\n\t\t\t});\n\t\t\tconst signer = library.getSigner(account);\n\t\t\tmsg.sig = await signer.signMessage(msg.msg);\n\t\t\tconst res = await api.sendMessage(msg);\n\t\t\ttoast.success(\"Your Vote is in!\");\n\t\t\tif (res.hasOwnProperty(\"ipfsHash\")) {\n\t\t\t\tgetVotes();\n\t\t\t}\n\t\t\tsetShowModal(false);\n\t\t} catch (error) {\n\t\t\ttoast.error(\"Something went wrong!\");\n\t\t}\n\t}, [selectedProposal, selectedVote, account, address, api, id, library, spaces]);\n\n\treturn (\n\t\t<Page title={t(\"governance.title\")} networkSensitive={true}>\n\t\t\t{governanceLoading && !selectedProposal ? (\n\t\t\t\t<Card>\n\t\t\t\t\t<div className=\"d-flex align-items-center justify-content-center py-5 w-100\">\n\t\t\t\t\t\t<Loading color={\"primary\"} width={40} height={40} active id={\"vote-loading\"} />\n\t\t\t\t\t</div>\n\t\t\t\t</Card>\n\t\t\t) : (\n\t\t\t\tselectedProposal && (\n\t\t\t\t\t<Row className={\"custom-row\"}>\n\t\t\t\t\t\t<Col className={\"order-2 order-md-1\"} xs={12} md={8}>\n\t\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t\t<Col xs={12} className={\"gutter-b\"}>\n\t\t\t\t\t\t\t\t\t<ProposalContent proposal={selectedProposal} status={status} />\n\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t{status.title === \"Active\" && (\n\t\t\t\t\t\t\t\t\t<Col xs={12} className={\"gutter-b\"}>\n\t\t\t\t\t\t\t\t\t\t{selectedProposal && (\n\t\t\t\t\t\t\t\t\t\t\t<VoteCast\n\t\t\t\t\t\t\t\t\t\t\t\tproposal={selectedProposal}\n\t\t\t\t\t\t\t\t\t\t\t\tselected={selectedVote}\n\t\t\t\t\t\t\t\t\t\t\t\tonSelectOption={setSelectedVote}\n\t\t\t\t\t\t\t\t\t\t\t\tonVote={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t!account ? toggleWalletModal() : setShowModal(true);\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t<Col xs={12} className={\"gutter-b\"}>\n\t\t\t\t\t\t\t\t\t{votes && result && selectedProposal && (\n\t\t\t\t\t\t\t\t\t\t<ProposalVotes\n\t\t\t\t\t\t\t\t\t\t\tvotes={votes}\n\t\t\t\t\t\t\t\t\t\t\tresult={result}\n\t\t\t\t\t\t\t\t\t\t\tproposal={selectedProposal}\n\t\t\t\t\t\t\t\t\t\t\tspace={space}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t<Col className={\"order-1 order-md-2\"} xs={12} md={4}>\n\t\t\t\t\t\t\t{selectedProposal && (\n\t\t\t\t\t\t\t\t<VoteInformation proposal={selectedProposal} space={spaces[id]} id={id} />\n\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t{result?.results && (\n\t\t\t\t\t\t\t\t<VoteResults\n\t\t\t\t\t\t\t\t\tresult={result.results}\n\t\t\t\t\t\t\t\t\tchoices={selectedProposal?.msg?.payload?.choices}\n\t\t\t\t\t\t\t\t\tsymbol={space?.symbol}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t</Row>\n\t\t\t\t)\n\t\t\t)}\n\n\t\t\t{selectedProposal && (\n\t\t\t\t<Modal show={showModal} centered onHide={() => setShowModal(false)}>\n\t\t\t\t\t<Modal.Header closeButton>\n\t\t\t\t\t\t<Modal.Title>Confirm Vote</Modal.Title>\n\t\t\t\t\t</Modal.Header>\n\n\t\t\t\t\t<Modal.Body>\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t{t(\"governance.voteConfirmation\")} \"{selectedProposal.msg.payload.choices[selectedVote - 1]}\n\t\t\t\t\t\t\t\"? <br />\n\t\t\t\t\t\t\t{t(\"governance.voteWarning\")}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<div className=\"pt-4 d-flex align-items-center justify-content-end\">\n\t\t\t\t\t\t\t<Button variant=\"outline-danger\" onClick={() => setShowModal(false)}>\n\t\t\t\t\t\t\t\t{t(\"close\")}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t<Button variant=\"primary\" onClick={handleSubmit} className={\"ml-3\"}>\n\t\t\t\t\t\t\t\t{t(\"governance.vote\")}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Modal.Body>\n\t\t\t\t</Modal>\n\t\t\t)}\n\t\t</Page>\n\t);\n};\n\nexport default Vote;\n"],"sourceRoot":""}