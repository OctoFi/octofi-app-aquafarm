(this.webpackJsonpdefi_v2=this.webpackJsonpdefi_v2||[]).push([[40],{3559:function(e,n,t){},3896:function(e,n,t){"use strict";t.r(n);var r=t(1),a=t(2),o=t.n(a),c=t(24),i=t(41),s=t(19),l=t(0),d=t(2839),u=t(1164),f=t(46),b=t(713),m=t.n(b),p=t(1184),h=t.n(p),x=t(20),j=t(2846),g=t(443),O=t(435),v=t(71),w=t(3103),y=t(40),N=t(430),k=t(711),F=(t(3559),t(1200),t(714)),Y=t(2828);function C(){var e=Object(s.a)(["\n  \n  @media (max-width: 991px) {\n    font-size: .875rem;\n  }\n"]);return C=function(){return e},e}function D(){var e=Object(s.a)(["\n    height: 56px;\n    padding: 6px 20px;\n    border-radius: 18px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    margin-bottom: 20px;\n   \n    :hover,\n    :focus, \n    :active{ \n        text-decoration: none;\n        outline: none;\n    }\n"]);return D=function(){return e},e}function z(){var e=Object(s.a)(["\n    background-color: rgba(135, 220, 225, 0.12);\n    height: 56px;\n    padding: 6px 20px;\n    border-radius: 18px;\n    color: ",";\n    display: flex;\n    align-items: center;\n    transition: 0.3s ease all;\n    justify-content: center;\n   \n    :hover,\n    :focus, \n    :active{\n        background-color: rgba(135, 220, 225, 1);\n        color: ",";      \n        text-decoration: none;\n        outline: none;\n    }\n"]);return z=function(){return e},e}function E(){var e=Object(s.a)(["\n  font-weight: 700;\n  font-size: .875rem;\n  color: ",";\n  white-space: nowrap;\n  \n  @media (max-width: 991px) {\n  font-weight: 400;\n  }\n"]);return E=function(){return e},e}function M(){var e=Object(s.a)(["\n  font-size: 1rem;\n  font-weight: 400;\n  line-height: 19px;\n  color: ",";\n  \n  @media (max-width: 991px) {\n    font-size: .875rem;\n  }\n"]);return M=function(){return e},e}function H(){var e=Object(s.a)(["\n  text-decoration: none;\n  &:hover,\n  &:focus,\n  &:active {\n      text-decoration: none;\n      outline: none;\n      box-shadow: none;\n  }\n"]);return H=function(){return e},e}function P(){var e=Object(s.a)(["\n  color: ",";\n  width: 100%;\n  \n  &:hover {\n    color: ",";\n    background-color: ",";\n  }\n"]);return P=function(){return e},e}function _(){var e=Object(s.a)(["\n  border-radius: 12px;\n  background-color: ",";\n  padding: 6px 20px;\n  max-height: 40px;\n  min-height: 40px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  white-space: nowrap;\n  font-size: 1rem;\n  font-family: inherit;\n  font-weight: 500;\n  border: none;\n  outline: none;\n  text-decoration: none;\n  \n  &:hover,\n  &:focus,\n  &:active {\n      text-decoration: none;\n      outline: none;\n      box-shadow: none;\n  }\n"]);return _=function(){return e},e}function A(){var e=Object(s.a)(["\n  font-size: 1.25rem;\n  font-weight: 700;\n  color: ",";\n  margin: 0;\n  \n  @media (max-width: 767px) {\n    margin-bottom: 30px;\n  }\n"]);return A=function(){return e},e}function J(){var e=Object(s.a)(["\n  padding: 0;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 20px;\n  border: none;\n  background-color: transparent;\n  \n  @media (max-width: 767px) {\n    flex-direction: column;\n    align-items: stretch;\n  }\n"]);return J=function(){return e},e}var B=x.default.div(J()),I=x.default.h2(A(),(function(e){return e.theme.text1})),S=x.default.button(_(),(function(e){return e.theme.bg2})),T=Object(x.default)(S)(P(),(function(e){return e.theme.primary}),(function(e){return e.theme.bg2}),(function(e){return e.theme.primary})),q=Object(x.default)(v.b)(H()),G=x.default.span(M(),(function(e){return e.theme.text1})),K=x.default.span(E(),(function(e){return e.theme.text1})),L=Object(x.default)(v.b)(z(),(function(e){return e.theme.primary}),(function(e){return e.theme.text1})),Q=Object(x.default)(v.b)(D()),R=x.default.span(C());n.default=function(e){var n=Object(y.a)().library,t=Object(l.useState)({}),a=Object(i.a)(t,2),s=a[0],b=a[1],p=Object(f.d)(),x=Object(Y.a)().t,v=Object(f.e)((function(e){return e.governance})),C=v.spaces,D=v.loading,z=v.proposals,E=e.match.params.space,M=C[E];Object(l.useEffect)((function(){0===Object.keys(C).length?p(Object(g.b)()):C.hasOwnProperty(E)?p(Object(g.a)(E)):e.history.push("/tools/governance")}),[C,E,e.history,p]);var H=function(){var e=Object(c.a)(o.a.mark((function e(t,r){var a,c,i,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.hasOwnProperty(r)){e.next=12;break}return a={},c=t[r],e.next=5,Object(w.f)(r,M.strategies,M.network,n,Object.values(c).map((function(e){return e.address})));case 5:i=e.sent,a=Object.fromEntries(Object.entries(c).map((function(e){var n=[e[0],Object.assign({},e[1])];return n[1].score=i.reduce((function(e,t){return e+(t[n[1].address]||0)}),0),[n[0],n[1]]}))),a=Object(w.e)(a),s=Object.fromEntries(Object.entries(a).sort((function(e,n){return n[1].msg.payload.end-e[1].msg.payload.end}),0)),b(s),e.next=13;break;case 12:b({});case 13:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}();Object(l.useEffect)((function(){H(z,E)}),[z,E]);var P={onClick:function(n,t){e.history.push("/tools/governance/".concat(E,"/proposal/").concat(t[0]))}},_=[{dataField:"asset",text:x("description"),formatter:function(e,n,t){return Object(r.jsx)(G,{children:Object(O.b)(n[1].msg.payload.name,"name")})}},{dataField:"status",text:x("status"),formatter:function(e,n){var t=(Date.now()/1e3).toFixed(),a=n[1].msg.payload,o=a.start,c=t>a.end?{title:"Closed",className:"label-light-danger",responsiveClassName:"text-danger"}:t>o?{title:"Active",className:"label-light-success",responsiveClassName:"text-success"}:{title:"Pending",className:"label-light-info",responsiveClassName:"text-info"};return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("span",{className:"label ".concat(c.className," label-lg d-none d-lg-flex w-100 label-inline py-3"),children:c.title}),Object(r.jsx)(R,{className:"d-flex d-lg-none ".concat(c.responsiveClassName),children:c.title})]})}},{dataField:"start",text:x("startDate"),formatter:function(e,n){return Object(r.jsx)(K,{children:h()(1e3*n[1].msg.payload.start).format("YYYY/MM/DD HH:mm")})}},{dataField:"end",text:x("endDate"),formatter:function(e,n){return Object(r.jsx)(K,{children:h()(1e3*n[1].msg.payload.end).format("YYYY/MM/DD HH:mm")})}},{dataField:"author",text:x("author"),formatter:function(e,n){return Object(r.jsxs)(K,{children:[n[1].address.slice(0,6),"...",n[1].address.slice(-4)]})}}],A={dataField:"actions",text:x("table.actions"),formatter:function(e,n){return Object(r.jsx)("div",{className:"d-flex flex-column align-items-stretch align-items-lg-center justify-content-center w-100",children:Object(r.jsx)(q,{to:"/tools/governance/".concat(E,"/proposal/").concat(n[0]),children:Object(r.jsx)(T,{children:x("viewMore")})})})},isAction:!0};return Object(r.jsx)(k.a,{title:x("governance.title"),morePadding:!0,children:Object(r.jsx)(d.a,{children:Object(r.jsx)(u.a,{xs:12,children:Object(r.jsxs)(j.a,{marginTop:-30,marginBottom:0,children:[Object(r.jsxs)(B,{children:[Object(r.jsx)(I,{className:"card-title",children:x("governance.proposals")}),Object(r.jsx)(L,{to:"".concat(e.match.url,"create"),className:"bg-light-primary d-none d-md-flex",children:x("createNew")}),Object(r.jsx)(Q,{to:"".concat(e.match.url,"create"),className:" btn btn-primary btn-gradient-primary d-flex d-md-none",children:x("createNew")})]}),Object(r.jsx)("div",{children:D?Object(r.jsx)("div",{className:"d-flex align-items-center justify-content-center py-5 w-100",children:Object(r.jsx)(N.a,{color:"primary",width:40,height:40,active:!0,id:"proposals"})}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(m.a,{wrapperClasses:"table-responsive d-none d-lg-block",bordered:!1,classes:"table table-head-custom table-borderless table-vertical-center overflow-hidden table-hover proposals__table",bootstrap4:!0,remote:!0,keyField:"id",columns:_,data:Object.entries(s),rowEvents:P}),Object(r.jsx)(F.a,{breakpoint:"lg",direction:"rtl",columns:_.concat(A),data:Object.entries(s),headerIndex:0})]})})]})})})})}}}]);
//# sourceMappingURL=40.b7a517a4.chunk.js.map