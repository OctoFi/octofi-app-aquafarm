(this["webpackJsonpoctofi-app-aquafarm"]=this["webpackJsonpoctofi-app-aquafarm"]||[]).push([[18],{3013:function(t,e,r){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var n=r(4502),i=r(4503),u=r(3068),o=r(568),s=r(3089),a=r(4504),h=r(3021);e.OPS=r(3235);var f=r(4505),c=e.OPS.OP_RESERVED;function p(t){return u.Buffer(t)||function(t){return u.Number(t)&&(t===e.OPS.OP_0||t>=e.OPS.OP_1&&t<=e.OPS.OP_16||t===e.OPS.OP_1NEGATE)}(t)}function l(t){return u.Array(t)&&t.every(p)}function d(t){return 0===t.length?e.OPS.OP_0:1===t.length?t[0]>=1&&t[0]<=16?c+t[0]:129===t[0]?e.OPS.OP_1NEGATE:void 0:void 0}function v(e){return t.isBuffer(e)}function m(e){return t.isBuffer(e)}function y(e){if(v(e))return e;h(u.Array,e);var r=e.reduce((function(t,e){return m(e)?1===e.length&&void 0!==d(e)?t+1:t+a.encodingLength(e.length)+e.length:t+1}),0),n=t.allocUnsafe(r),i=0;if(e.forEach((function(t){if(m(t)){var e=d(t);if(void 0!==e)return n.writeUInt8(e,i),void(i+=1);i+=a.encode(n,t.length,i),t.copy(n,i),i+=t.length}else n.writeUInt8(t,i),i+=1})),i!==n.length)throw new Error("Could not decode chunks");return n}function g(t){if(r=t,u.Array(r))return t;var r;h(u.Buffer,t);for(var n=[],i=0;i<t.length;){var o=t[i];if(o>e.OPS.OP_0&&o<=e.OPS.OP_PUSHDATA4){var s=a.decode(t,i);if(null===s)return null;if((i+=s.size)+s.number>t.length)return null;var f=t.slice(i,i+s.number);i+=s.number;var c=d(f);void 0!==c?n.push(c):n.push(f)}else n.push(o),i+=1}return n}function w(t){var e=-129&t;return e>0&&e<4}e.isPushOnly=l,e.compile=y,e.decompile=g,e.toASM=function(t){return v(t)&&(t=g(t)),t.map((function(t){if(m(t)){var e=d(t);if(void 0===e)return t.toString("hex");t=e}return f[t]})).join(" ")},e.fromASM=function(r){return h(u.String,r),y(r.split(" ").map((function(r){return void 0!==e.OPS[r]?e.OPS[r]:(h(u.Hex,r),t.from(r,"hex"))})))},e.toStack=function(r){return r=g(r),h(l,r),r.map((function(r){return m(r)?r:r===e.OPS.OP_0?t.allocUnsafe(0):n.encode(r-c)}))},e.isCanonicalPubKey=function(t){return s.isPoint(t)},e.isDefinedHashType=w,e.isCanonicalScriptSignature=function(e){return!!t.isBuffer(e)&&(!!w(e[e.length-1])&&o.check(e.slice(0,-1)))},e.number=n,e.signature=i}).call(this,r(12).Buffer)},3021:function(t,e,r){var n=r(3757),i=r(3606),u=n.tfJSON,o=n.TfTypeError,s=n.TfPropertyTypeError,a=n.tfSubError,h=n.getValueTypeName,f={arrayOf:function(t,e){function r(r,n){return!!i.Array(r)&&(!i.Nil(r)&&(!(void 0!==e.minLength&&r.length<e.minLength)&&(!(void 0!==e.maxLength&&r.length>e.maxLength)&&((void 0===e.length||r.length===e.length)&&r.every((function(e,r){try{return p(t,e,n)}catch(i){throw a(i,r)}}))))))}return t=c(t),e=e||{},r.toJSON=function(){var r="["+u(t)+"]";return void 0!==e.length?r+="{"+e.length+"}":void 0===e.minLength&&void 0===e.maxLength||(r+="{"+(void 0===e.minLength?0:e.minLength)+","+(void 0===e.maxLength?1/0:e.maxLength)+"}"),r},r},maybe:function t(e){function r(r,n){return i.Nil(r)||e(r,n,t)}return e=c(e),r.toJSON=function(){return"?"+u(e)},r},map:function(t,e){function r(r,n){if(!i.Object(r))return!1;if(i.Nil(r))return!1;for(var u in r){try{e&&p(e,u,n)}catch(s){throw a(s,u,"key")}try{var o=r[u];p(t,o,n)}catch(s){throw a(s,u)}}return!0}return t=c(t),e&&(e=c(e)),r.toJSON=e?function(){return"{"+u(e)+": "+u(t)+"}"}:function(){return"{"+u(t)+"}"},r},object:function(t){var e={};for(var r in t)e[r]=c(t[r]);function n(t,r){if(!i.Object(t))return!1;if(i.Nil(t))return!1;var n;try{for(n in e){p(e[n],t[n],r)}}catch(u){throw a(u,n)}if(r)for(n in t)if(!e[n])throw new s(void 0,n);return!0}return n.toJSON=function(){return u(e)},n},anyOf:function(){var t=[].slice.call(arguments).map(c);function e(e,r){return t.some((function(t){try{return p(t,e,r)}catch(n){return!1}}))}return e.toJSON=function(){return t.map(u).join("|")},e},allOf:function(){var t=[].slice.call(arguments).map(c);function e(e,r){return t.every((function(t){try{return p(t,e,r)}catch(n){return!1}}))}return e.toJSON=function(){return t.map(u).join(" & ")},e},quacksLike:function(t){function e(e){return t===h(e)}return e.toJSON=function(){return t},e},tuple:function(){var t=[].slice.call(arguments).map(c);function e(e,r){return!i.Nil(e)&&(!i.Nil(e.length)&&((!r||e.length===t.length)&&t.every((function(t,n){try{return p(t,e[n],r)}catch(i){throw a(i,n)}}))))}return e.toJSON=function(){return"("+t.map(u).join(", ")+")"},e},value:function(t){function e(e){return e===t}return e.toJSON=function(){return t},e}};function c(t){if(i.String(t))return"?"===t[0]?f.maybe(t.slice(1)):i[t]||f.quacksLike(t);if(t&&i.Object(t)){if(i.Array(t)){if(1!==t.length)throw new TypeError("Expected compile() parameter of type Array of length 1");return f.arrayOf(t[0])}return f.object(t)}return i.Function(t)?t:f.value(t)}function p(t,e,r,n){if(i.Function(t)){if(t(e,r))return!0;throw new o(n||t,e)}return p(c(t),e,r)}for(var l in f.oneOf=f.anyOf,i)p[l]=i[l];for(l in f)p[l]=f[l];var d=r(4500);for(l in d)p[l]=d[l];p.compile=c,p.TfTypeError=o,p.TfPropertyTypeError=s,t.exports=p},3053:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.bitcoin={messagePrefix:"\x18Bitcoin Signed Message:\n",bech32:"bc",bip32:{public:76067358,private:76066276},pubKeyHash:0,scriptHash:5,wif:128},e.regtest={messagePrefix:"\x18Bitcoin Signed Message:\n",bech32:"bcrt",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239},e.testnet={messagePrefix:"\x18Bitcoin Signed Message:\n",bech32:"tb",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239}},3054:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.UNSIGNED_TX=0]="UNSIGNED_TX",t[t.GLOBAL_XPUB=1]="GLOBAL_XPUB"}(e.GlobalTypes||(e.GlobalTypes={})),e.GLOBAL_TYPE_NAMES=["unsignedTx","globalXpub"],function(t){t[t.NON_WITNESS_UTXO=0]="NON_WITNESS_UTXO",t[t.WITNESS_UTXO=1]="WITNESS_UTXO",t[t.PARTIAL_SIG=2]="PARTIAL_SIG",t[t.SIGHASH_TYPE=3]="SIGHASH_TYPE",t[t.REDEEM_SCRIPT=4]="REDEEM_SCRIPT",t[t.WITNESS_SCRIPT=5]="WITNESS_SCRIPT",t[t.BIP32_DERIVATION=6]="BIP32_DERIVATION",t[t.FINAL_SCRIPTSIG=7]="FINAL_SCRIPTSIG",t[t.FINAL_SCRIPTWITNESS=8]="FINAL_SCRIPTWITNESS",t[t.POR_COMMITMENT=9]="POR_COMMITMENT"}(e.InputTypes||(e.InputTypes={})),e.INPUT_TYPE_NAMES=["nonWitnessUtxo","witnessUtxo","partialSig","sighashType","redeemScript","witnessScript","bip32Derivation","finalScriptSig","finalScriptWitness","porCommitment"],function(t){t[t.REDEEM_SCRIPT=0]="REDEEM_SCRIPT",t[t.WITNESS_SCRIPT=1]="WITNESS_SCRIPT",t[t.BIP32_DERIVATION=2]="BIP32_DERIVATION"}(e.OutputTypes||(e.OutputTypes={})),e.OUTPUT_TYPE_NAMES=["redeemScript","witnessScript","bip32Derivation"]},3068:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(3021),i=Math.pow(2,31)-1;function u(t){return n.String(t)&&!!t.match(/^(m\/)?(\d+'?\/)*\d+'?$/)}e.UInt31=function(t){return n.UInt32(t)&&t<=i},e.BIP32Path=u,u.toJSON=function(){return"BIP32 derivation path"},e.Signer=function(t){return(n.Buffer(t.publicKey)||"function"===typeof t.getPublicKey)&&"function"===typeof t.sign};e.Satoshi=function(t){return n.UInt53(t)&&t<=21e14},e.ECPoint=n.quacksLike("Point"),e.Network=n.compile({messagePrefix:n.oneOf(n.Buffer,n.String),bip32:{public:n.UInt32,private:n.UInt32},pubKeyHash:n.UInt8,scriptHash:n.UInt8,wif:n.UInt8}),e.Buffer256bit=n.BufferN(32),e.Hash160bit=n.BufferN(20),e.Hash256bit=n.BufferN(32),e.Number=n.Number,e.Array=n.Array,e.Boolean=n.Boolean,e.String=n.String,e.Buffer=n.Buffer,e.Hex=n.Hex,e.maybe=n.maybe,e.tuple=n.tuple,e.UInt8=n.UInt8,e.UInt32=n.UInt32,e.Function=n.Function,e.BufferN=n.BufferN,e.Null=n.Null,e.oneOf=n.oneOf},3081:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(131);function i(t){try{return n("rmd160").update(t).digest()}catch(e){return n("ripemd160").update(t).digest()}}function u(t){return n("sha256").update(t).digest()}e.ripemd160=i,e.sha1=function(t){return n("sha1").update(t).digest()},e.sha256=u,e.hash160=function(t){return i(u(t))},e.hash256=function(t){return u(u(t))}},3089:function(t,e,r){(function(e){var n=r(4497),i=new(0,r(158).ec)("secp256k1"),u=r(4499),o=e.alloc(32,0),s=e.from("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141","hex"),a=e.from("fffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f","hex"),h=i.curve.n,f=h.shrn(1),c=i.curve.g,p="Expected Private",l="Expected Point",d="Expected Tweak",v="Expected Hash";function m(t){return e.isBuffer(t)&&32===t.length}function y(t){return!!m(t)&&t.compare(s)<0}function g(t){if(!e.isBuffer(t))return!1;if(t.length<33)return!1;var r=t[0],n=t.slice(1,33);if(0===n.compare(o))return!1;if(n.compare(a)>=0)return!1;if((2===r||3===r)&&33===t.length){try{k(t)}catch(u){return!1}return!0}var i=t.slice(33);return 0!==i.compare(o)&&(!(i.compare(a)>=0)&&(4===r&&65===t.length))}function w(t){return 4!==t[0]}function _(t){return!!m(t)&&(t.compare(o)>0&&t.compare(s)<0)}function b(t,e){return void 0===t&&void 0!==e?w(e):void 0===t||t}function S(t){return new n(t)}function E(t){return t.toArrayLike(e,"be",32)}function k(t){return i.curve.decodePoint(t)}function T(t,r){return e.from(t._encode(r))}function O(t,r,n){if(!m(t))throw new TypeError(v);if(!_(r))throw new TypeError(p);if(void 0!==n&&!m(n))throw new TypeError("Expected Extra Data (32 bytes)");var i,o,s=S(r),a=S(t);u(t,r,(function(t){var e=S(t),r=c.mul(e);return!r.isInfinity()&&(0!==(i=r.x.umod(h)).isZero()&&0!==(o=e.invm(h).mul(a.add(s.mul(i))).umod(h)).isZero())}),_,n),o.cmp(f)>0&&(o=h.sub(o));var l=e.allocUnsafe(64);return E(i).copy(l,0),E(o).copy(l,32),l}t.exports={isPoint:g,isPointCompressed:function(t){return!!g(t)&&w(t)},isPrivate:_,pointAdd:function(t,e,r){if(!g(t))throw new TypeError(l);if(!g(e))throw new TypeError(l);var n=k(t),i=k(e),u=n.add(i);return u.isInfinity()?null:T(u,b(r,t))},pointAddScalar:function(t,e,r){if(!g(t))throw new TypeError(l);if(!y(e))throw new TypeError(d);var n=b(r,t),i=k(t);if(0===e.compare(o))return T(i,n);var u=S(e),s=c.mul(u),a=i.add(s);return a.isInfinity()?null:T(a,n)},pointCompress:function(t,e){if(!g(t))throw new TypeError(l);var r=k(t);if(r.isInfinity())throw new TypeError(l);return T(r,b(e,t))},pointFromScalar:function(t,e){if(!_(t))throw new TypeError(p);var r=S(t),n=c.mul(r);return n.isInfinity()?null:T(n,b(e))},pointMultiply:function(t,e,r){if(!g(t))throw new TypeError(l);if(!y(e))throw new TypeError(d);var n=b(r,t),i=k(t),u=S(e),o=i.mul(u);return o.isInfinity()?null:T(o,n)},privateAdd:function(t,e){if(!_(t))throw new TypeError(p);if(!y(e))throw new TypeError(d);var r=S(t),n=S(e),i=E(r.add(n).umod(h));return _(i)?i:null},privateSub:function(t,e){if(!_(t))throw new TypeError(p);if(!y(e))throw new TypeError(d);var r=S(t),n=S(e),i=E(r.sub(n).umod(h));return _(i)?i:null},sign:function(t,e){return O(t,e)},signWithEntropy:function(t,e,r){return O(t,e,r)},verify:function(t,r,n,i){if(!m(t))throw new TypeError(v);if(!g(r))throw new TypeError(l);if(!function(t){var r=t.slice(0,32),n=t.slice(32,64);return e.isBuffer(t)&&64===t.length&&r.compare(s)<0&&n.compare(s)<0}(n))throw new TypeError("Expected Signature");var u=k(r),o=S(n.slice(0,32)),a=S(n.slice(32,64));if(i&&a.cmp(f)>0)return!1;if(o.gtn(0)<=0)return!1;if(a.gtn(0)<=0)return!1;var p=S(t),d=a.invm(h),y=p.mul(d).umod(h),w=o.mul(d).umod(h),_=c.mulAdd(y,u,w);return!_.isInfinity()&&_.x.umod(h).eq(o)}}}).call(this,r(12).Buffer)},3115:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.prop=function(t,e,r){Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){var t=r.call(this);return this[e]=t,t},set:function(t){Object.defineProperty(this,e,{configurable:!0,enumerable:!0,value:t,writable:!0})}})},e.value=function(t){var e;return function(){return void 0!==e?e:e=t()}}},3155:function(t,e){t.exports={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8}},3156:function(t,e){t.exports={L:1,M:0,Q:3,H:2}},3157:function(t,e,r){var n=r(3158);function i(t,e){if(void 0==t.length)throw new Error(t.length+"/"+e);for(var r=0;r<t.length&&0==t[r];)r++;this.num=new Array(t.length-r+e);for(var n=0;n<t.length-r;n++)this.num[n]=t[n+r]}i.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var e=new Array(this.getLength()+t.getLength()-1),r=0;r<this.getLength();r++)for(var u=0;u<t.getLength();u++)e[r+u]^=n.gexp(n.glog(this.get(r))+n.glog(t.get(u)));return new i(e,0)},mod:function(t){if(this.getLength()-t.getLength()<0)return this;for(var e=n.glog(this.get(0))-n.glog(t.get(0)),r=new Array(this.getLength()),u=0;u<this.getLength();u++)r[u]=this.get(u);for(u=0;u<t.getLength();u++)r[u]^=n.gexp(n.glog(t.get(u))+e);return new i(r,0).mod(t)}},t.exports=i},3158:function(t,e){for(var r={glog:function(t){if(t<1)throw new Error("glog("+t+")");return r.LOG_TABLE[t]},gexp:function(t){for(;t<0;)t+=255;for(;t>=256;)t-=255;return r.EXP_TABLE[t]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},n=0;n<8;n++)r.EXP_TABLE[n]=1<<n;for(n=8;n<256;n++)r.EXP_TABLE[n]=r.EXP_TABLE[n-4]^r.EXP_TABLE[n-5]^r.EXP_TABLE[n-6]^r.EXP_TABLE[n-8];for(n=0;n<255;n++)r.LOG_TABLE[r.EXP_TABLE[n]]=n;t.exports=r},3234:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(4501);e.embed=n.p2data;var i=r(4506);e.p2ms=i.p2ms;var u=r(4507);e.p2pk=u.p2pk;var o=r(4508);e.p2pkh=o.p2pkh;var s=r(4509);e.p2sh=s.p2sh;var a=r(4510);e.p2wpkh=a.p2wpkh;var h=r(4511);e.p2wsh=h.p2wsh},3235:function(t){t.exports=JSON.parse('{"OP_FALSE":0,"OP_0":0,"OP_PUSHDATA1":76,"OP_PUSHDATA2":77,"OP_PUSHDATA4":78,"OP_1NEGATE":79,"OP_RESERVED":80,"OP_TRUE":81,"OP_1":81,"OP_2":82,"OP_3":83,"OP_4":84,"OP_5":85,"OP_6":86,"OP_7":87,"OP_8":88,"OP_9":89,"OP_10":90,"OP_11":91,"OP_12":92,"OP_13":93,"OP_14":94,"OP_15":95,"OP_16":96,"OP_NOP":97,"OP_VER":98,"OP_IF":99,"OP_NOTIF":100,"OP_VERIF":101,"OP_VERNOTIF":102,"OP_ELSE":103,"OP_ENDIF":104,"OP_VERIFY":105,"OP_RETURN":106,"OP_TOALTSTACK":107,"OP_FROMALTSTACK":108,"OP_2DROP":109,"OP_2DUP":110,"OP_3DUP":111,"OP_2OVER":112,"OP_2ROT":113,"OP_2SWAP":114,"OP_IFDUP":115,"OP_DEPTH":116,"OP_DROP":117,"OP_DUP":118,"OP_NIP":119,"OP_OVER":120,"OP_PICK":121,"OP_ROLL":122,"OP_ROT":123,"OP_SWAP":124,"OP_TUCK":125,"OP_CAT":126,"OP_SUBSTR":127,"OP_LEFT":128,"OP_RIGHT":129,"OP_SIZE":130,"OP_INVERT":131,"OP_AND":132,"OP_OR":133,"OP_XOR":134,"OP_EQUAL":135,"OP_EQUALVERIFY":136,"OP_RESERVED1":137,"OP_RESERVED2":138,"OP_1ADD":139,"OP_1SUB":140,"OP_2MUL":141,"OP_2DIV":142,"OP_NEGATE":143,"OP_ABS":144,"OP_NOT":145,"OP_0NOTEQUAL":146,"OP_ADD":147,"OP_SUB":148,"OP_MUL":149,"OP_DIV":150,"OP_MOD":151,"OP_LSHIFT":152,"OP_RSHIFT":153,"OP_BOOLAND":154,"OP_BOOLOR":155,"OP_NUMEQUAL":156,"OP_NUMEQUALVERIFY":157,"OP_NUMNOTEQUAL":158,"OP_LESSTHAN":159,"OP_GREATERTHAN":160,"OP_LESSTHANOREQUAL":161,"OP_GREATERTHANOREQUAL":162,"OP_MIN":163,"OP_MAX":164,"OP_WITHIN":165,"OP_RIPEMD160":166,"OP_SHA1":167,"OP_SHA256":168,"OP_HASH160":169,"OP_HASH256":170,"OP_CODESEPARATOR":171,"OP_CHECKSIG":172,"OP_CHECKSIGVERIFY":173,"OP_CHECKMULTISIG":174,"OP_CHECKMULTISIGVERIFY":175,"OP_NOP1":176,"OP_NOP2":177,"OP_CHECKLOCKTIMEVERIFY":177,"OP_NOP3":178,"OP_CHECKSEQUENCEVERIFY":178,"OP_NOP4":179,"OP_NOP5":180,"OP_NOP6":181,"OP_NOP7":182,"OP_NOP8":183,"OP_NOP9":184,"OP_NOP10":185,"OP_PUBKEYHASH":253,"OP_PUBKEY":254,"OP_INVALIDOPCODE":255}')},3236:function(t,e,r){"use strict";(function(t){var n=r(3),i=r(20);Object.defineProperty(e,"__esModule",{value:!0});var u=r(3068),o=r(3021),s=r(3609);function a(t,e){if("number"!==typeof t)throw new Error("cannot write a non-number as a number");if(t<0)throw new Error("specified a negative value for writing an unsigned value");if(t>e)throw new Error("RangeError: value out of range");if(Math.floor(t)!==t)throw new Error("value has a fractional component")}function h(t,e){var r=t.readUInt32LE(e),n=t.readUInt32LE(e+4);return a((n*=4294967296)+r,9007199254740991),n+r}function f(t,e,r){return a(e,9007199254740991),t.writeInt32LE(-1&e,r),t.writeUInt32LE(Math.floor(e/4294967296),r+4),r+8}e.readUInt64LE=h,e.writeUInt64LE=f,e.reverseBuffer=function(t){if(t.length<1)return t;for(var e=t.length-1,r=0,n=0;n<t.length/2;n++)r=t[n],t[n]=t[e],t[e]=r,e--;return t},e.cloneBuffer=function(e){var r=t.allocUnsafe(e.length);return e.copy(r),r};var c=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;n(this,t),this.buffer=e,this.offset=r,o(u.tuple(u.Buffer,u.UInt32),[e,r])}return i(t,[{key:"writeUInt8",value:function(t){this.offset=this.buffer.writeUInt8(t,this.offset)}},{key:"writeInt32",value:function(t){this.offset=this.buffer.writeInt32LE(t,this.offset)}},{key:"writeUInt32",value:function(t){this.offset=this.buffer.writeUInt32LE(t,this.offset)}},{key:"writeUInt64",value:function(t){this.offset=f(this.buffer,t,this.offset)}},{key:"writeVarInt",value:function(t){s.encode(t,this.buffer,this.offset),this.offset+=s.encode.bytes}},{key:"writeSlice",value:function(t){if(this.buffer.length<this.offset+t.length)throw new Error("Cannot write slice out of bounds");this.offset+=t.copy(this.buffer,this.offset)}},{key:"writeVarSlice",value:function(t){this.writeVarInt(t.length),this.writeSlice(t)}},{key:"writeVector",value:function(t){var e=this;this.writeVarInt(t.length),t.forEach((function(t){return e.writeVarSlice(t)}))}}]),t}();e.BufferWriter=c;var p=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;n(this,t),this.buffer=e,this.offset=r,o(u.tuple(u.Buffer,u.UInt32),[e,r])}return i(t,[{key:"readUInt8",value:function(){var t=this.buffer.readUInt8(this.offset);return this.offset++,t}},{key:"readInt32",value:function(){var t=this.buffer.readInt32LE(this.offset);return this.offset+=4,t}},{key:"readUInt32",value:function(){var t=this.buffer.readUInt32LE(this.offset);return this.offset+=4,t}},{key:"readUInt64",value:function(){var t=h(this.buffer,this.offset);return this.offset+=8,t}},{key:"readVarInt",value:function(){var t=s.decode(this.buffer,this.offset);return this.offset+=s.decode.bytes,t}},{key:"readSlice",value:function(t){if(this.buffer.length<this.offset+t)throw new Error("Cannot read slice out of bounds");var e=this.buffer.slice(this.offset,this.offset+t);return this.offset+=t,e}},{key:"readVarSlice",value:function(){return this.readSlice(this.readVarInt())}},{key:"readVector",value:function(){for(var t=this.readVarInt(),e=[],r=0;r<t;r++)e.push(this.readVarSlice());return e}}]),t}();e.BufferReader=p}).call(this,r(12).Buffer)},3237:function(t,e,r){"use strict";(function(t){var n=r(3),i=r(20);Object.defineProperty(e,"__esModule",{value:!0});var u=r(3236),o=r(3081),s=r(3013),a=r(3013),h=r(3068),f=r(3021),c=r(3609);function p(t){var e=t.length;return c.encodingLength(e)+e}function l(t){var e=t.length;return c.encodingLength(e)+t.reduce((function(t,e){return t+p(e)}),0)}var d=t.allocUnsafe(0),v=[],m=t.from("0000000000000000000000000000000000000000000000000000000000000000","hex"),y=t.from("0000000000000000000000000000000000000000000000000000000000000001","hex"),g=t.from("ffffffffffffffff","hex"),w={script:d,valueBuffer:g};function _(t){return void 0!==t.value}var b=function(){function e(){n(this,e),this.version=1,this.locktime=0,this.ins=[],this.outs=[]}return i(e,[{key:"isCoinbase",value:function(){return 1===this.ins.length&&e.isCoinbaseHash(this.ins[0].hash)}},{key:"addInput",value:function(t,r,n,i){return f(h.tuple(h.Hash256bit,h.UInt32,h.maybe(h.UInt32),h.maybe(h.Buffer)),arguments),h.Null(n)&&(n=e.DEFAULT_SEQUENCE),this.ins.push({hash:t,index:r,script:i||d,sequence:n,witness:v})-1}},{key:"addOutput",value:function(t,e){return f(h.tuple(h.Buffer,h.Satoshi),arguments),this.outs.push({script:t,value:e})-1}},{key:"hasWitnesses",value:function(){return this.ins.some((function(t){return 0!==t.witness.length}))}},{key:"weight",value:function(){return 3*this.byteLength(!1)+this.byteLength(!0)}},{key:"virtualSize",value:function(){return Math.ceil(this.weight()/4)}},{key:"byteLength",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=t&&this.hasWitnesses();return(e?10:8)+c.encodingLength(this.ins.length)+c.encodingLength(this.outs.length)+this.ins.reduce((function(t,e){return t+40+p(e.script)}),0)+this.outs.reduce((function(t,e){return t+8+p(e.script)}),0)+(e?this.ins.reduce((function(t,e){return t+l(e.witness)}),0):0)}},{key:"clone",value:function(){var t=new e;return t.version=this.version,t.locktime=this.locktime,t.ins=this.ins.map((function(t){return{hash:t.hash,index:t.index,script:t.script,sequence:t.sequence,witness:t.witness}})),t.outs=this.outs.map((function(t){return{script:t.script,value:t.value}})),t}},{key:"hashForSignature",value:function(r,n,i){if(f(h.tuple(h.UInt32,h.Buffer,h.Number),arguments),r>=this.ins.length)return y;var u=s.compile(s.decompile(n).filter((function(t){return t!==a.OPS.OP_CODESEPARATOR}))),c=this.clone();if((31&i)===e.SIGHASH_NONE)c.outs=[],c.ins.forEach((function(t,e){e!==r&&(t.sequence=0)}));else if((31&i)===e.SIGHASH_SINGLE){if(r>=this.outs.length)return y;c.outs.length=r+1;for(var p=0;p<r;p++)c.outs[p]=w;c.ins.forEach((function(t,e){e!==r&&(t.sequence=0)}))}i&e.SIGHASH_ANYONECANPAY?(c.ins=[c.ins[r]],c.ins[0].script=u):(c.ins.forEach((function(t){t.script=d})),c.ins[r].script=u);var l=t.allocUnsafe(c.byteLength(!1)+4);return l.writeInt32LE(i,l.length-4),c.__toBuffer(l,0,!1),o.hash256(l)}},{key:"hashForWitnessV0",value:function(r,n,i,s){f(h.tuple(h.UInt32,h.Buffer,h.Satoshi,h.UInt32),arguments);var a,c=t.from([]),l=m,d=m,v=m;if(s&e.SIGHASH_ANYONECANPAY||(c=t.allocUnsafe(36*this.ins.length),a=new u.BufferWriter(c,0),this.ins.forEach((function(t){a.writeSlice(t.hash),a.writeUInt32(t.index)})),d=o.hash256(c)),s&e.SIGHASH_ANYONECANPAY||(31&s)===e.SIGHASH_SINGLE||(31&s)===e.SIGHASH_NONE||(c=t.allocUnsafe(4*this.ins.length),a=new u.BufferWriter(c,0),this.ins.forEach((function(t){a.writeUInt32(t.sequence)})),v=o.hash256(c)),(31&s)!==e.SIGHASH_SINGLE&&(31&s)!==e.SIGHASH_NONE){var y=this.outs.reduce((function(t,e){return t+8+p(e.script)}),0);c=t.allocUnsafe(y),a=new u.BufferWriter(c,0),this.outs.forEach((function(t){a.writeUInt64(t.value),a.writeVarSlice(t.script)})),l=o.hash256(c)}else if((31&s)===e.SIGHASH_SINGLE&&r<this.outs.length){var g=this.outs[r];c=t.allocUnsafe(8+p(g.script)),(a=new u.BufferWriter(c,0)).writeUInt64(g.value),a.writeVarSlice(g.script),l=o.hash256(c)}c=t.allocUnsafe(156+p(n)),a=new u.BufferWriter(c,0);var w=this.ins[r];return a.writeUInt32(this.version),a.writeSlice(d),a.writeSlice(v),a.writeSlice(w.hash),a.writeUInt32(w.index),a.writeVarSlice(n),a.writeUInt64(i),a.writeUInt32(w.sequence),a.writeSlice(l),a.writeUInt32(this.locktime),a.writeUInt32(s),o.hash256(c)}},{key:"getHash",value:function(e){return e&&this.isCoinbase()?t.alloc(32,0):o.hash256(this.__toBuffer(void 0,void 0,e))}},{key:"getId",value:function(){return u.reverseBuffer(this.getHash(!1)).toString("hex")}},{key:"toBuffer",value:function(t,e){return this.__toBuffer(t,e,!0)}},{key:"toHex",value:function(){return this.toBuffer(void 0,void 0).toString("hex")}},{key:"setInputScript",value:function(t,e){f(h.tuple(h.Number,h.Buffer),arguments),this.ins[t].script=e}},{key:"setWitness",value:function(t,e){f(h.tuple(h.Number,[h.Buffer]),arguments),this.ins[t].witness=e}},{key:"__toBuffer",value:function(r,n){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];r||(r=t.allocUnsafe(this.byteLength(i)));var o=new u.BufferWriter(r,n||0);o.writeInt32(this.version);var s=i&&this.hasWitnesses();return s&&(o.writeUInt8(e.ADVANCED_TRANSACTION_MARKER),o.writeUInt8(e.ADVANCED_TRANSACTION_FLAG)),o.writeVarInt(this.ins.length),this.ins.forEach((function(t){o.writeSlice(t.hash),o.writeUInt32(t.index),o.writeVarSlice(t.script),o.writeUInt32(t.sequence)})),o.writeVarInt(this.outs.length),this.outs.forEach((function(t){_(t)?o.writeUInt64(t.value):o.writeSlice(t.valueBuffer),o.writeVarSlice(t.script)})),s&&this.ins.forEach((function(t){o.writeVector(t.witness)})),o.writeUInt32(this.locktime),void 0!==n?r.slice(n,o.offset):r}}],[{key:"fromBuffer",value:function(t,r){var n=new u.BufferReader(t),i=new e;i.version=n.readInt32();var o=n.readUInt8(),s=n.readUInt8(),a=!1;o===e.ADVANCED_TRANSACTION_MARKER&&s===e.ADVANCED_TRANSACTION_FLAG?a=!0:n.offset-=2;for(var h=n.readVarInt(),f=0;f<h;++f)i.ins.push({hash:n.readSlice(32),index:n.readUInt32(),script:n.readVarSlice(),sequence:n.readUInt32(),witness:v});for(var c=n.readVarInt(),p=0;p<c;++p)i.outs.push({value:n.readUInt64(),script:n.readVarSlice()});if(a){for(var l=0;l<h;++l)i.ins[l].witness=n.readVector();if(!i.hasWitnesses())throw new Error("Transaction has superfluous witness data")}if(i.locktime=n.readUInt32(),r)return i;if(n.offset!==t.length)throw new Error("Transaction has unexpected data");return i}},{key:"fromHex",value:function(r){return e.fromBuffer(t.from(r,"hex"),!1)}},{key:"isCoinbaseHash",value:function(t){f(h.Hash256bit,t);for(var e=0;e<32;++e)if(0!==t[e])return!1;return!0}}]),e}();b.DEFAULT_SEQUENCE=4294967295,b.SIGHASH_ALL=1,b.SIGHASH_NONE=2,b.SIGHASH_SINGLE=3,b.SIGHASH_ANYONECANPAY=128,b.ADVANCED_TRANSACTION_MARKER=0,b.ADVANCED_TRANSACTION_FLAG=1,e.Transaction=b}).call(this,r(12).Buffer)},3238:function(t,e,r){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});function r(t){if(t<0||t>9007199254740991||t%1!==0)throw new RangeError("value out of range")}function n(t){return r(t),t<253?1:t<=65535?3:t<=4294967295?5:9}e.encode=function e(i,u,o){if(r(i),u||(u=t.allocUnsafe(n(i))),!t.isBuffer(u))throw new TypeError("buffer must be a Buffer instance");return o||(o=0),i<253?(u.writeUInt8(i,o),Object.assign(e,{bytes:1})):i<=65535?(u.writeUInt8(253,o),u.writeUInt16LE(i,o+1),Object.assign(e,{bytes:3})):i<=4294967295?(u.writeUInt8(254,o),u.writeUInt32LE(i,o+1),Object.assign(e,{bytes:5})):(u.writeUInt8(255,o),u.writeUInt32LE(i>>>0,o+1),u.writeUInt32LE(i/4294967296|0,o+5),Object.assign(e,{bytes:9})),u},e.decode=function e(n,i){if(!t.isBuffer(n))throw new TypeError("buffer must be a Buffer instance");i||(i=0);var u=n.readUInt8(i);if(u<253)return Object.assign(e,{bytes:1}),u;if(253===u)return Object.assign(e,{bytes:3}),n.readUInt16LE(i+1);if(254===u)return Object.assign(e,{bytes:5}),n.readUInt32LE(i+1);Object.assign(e,{bytes:9});var o=n.readUInt32LE(i+1),s=4294967296*n.readUInt32LE(i+5)+o;return r(s),s},e.encodingLength=n}).call(this,r(12).Buffer)},3282:function(t,e,r){var n=r(3283),i=r(3284),u=r(3285),o=r(3286),s=r(3157);function a(t,e){this.typeNumber=t,this.errorCorrectLevel=e,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var h=a.prototype;h.addData=function(t){var e=new n(t);this.dataList.push(e),this.dataCache=null},h.isDark=function(t,e){if(t<0||this.moduleCount<=t||e<0||this.moduleCount<=e)throw new Error(t+","+e);return this.modules[t][e]},h.getModuleCount=function(){return this.moduleCount},h.make=function(){if(this.typeNumber<1){var t=1;for(t=1;t<40;t++){for(var e=i.getRSBlocks(t,this.errorCorrectLevel),r=new u,n=0,s=0;s<e.length;s++)n+=e[s].dataCount;for(s=0;s<this.dataList.length;s++){var a=this.dataList[s];r.put(a.mode,4),r.put(a.getLength(),o.getLengthInBits(a.mode,t)),a.write(r)}if(r.getLengthInBits()<=8*n)break}this.typeNumber=t}this.makeImpl(!1,this.getBestMaskPattern())},h.makeImpl=function(t,e){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++){this.modules[r]=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++)this.modules[r][n]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(t,e),this.typeNumber>=7&&this.setupTypeNumber(t),null==this.dataCache&&(this.dataCache=a.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,e)},h.setupPositionProbePattern=function(t,e){for(var r=-1;r<=7;r++)if(!(t+r<=-1||this.moduleCount<=t+r))for(var n=-1;n<=7;n++)e+n<=-1||this.moduleCount<=e+n||(this.modules[t+r][e+n]=0<=r&&r<=6&&(0==n||6==n)||0<=n&&n<=6&&(0==r||6==r)||2<=r&&r<=4&&2<=n&&n<=4)},h.getBestMaskPattern=function(){for(var t=0,e=0,r=0;r<8;r++){this.makeImpl(!0,r);var n=o.getLostPoint(this);(0==r||t>n)&&(t=n,e=r)}return e},h.createMovieClip=function(t,e,r){var n=t.createEmptyMovieClip(e,r);this.make();for(var i=0;i<this.modules.length;i++)for(var u=1*i,o=0;o<this.modules[i].length;o++){var s=1*o;this.modules[i][o]&&(n.beginFill(0,100),n.moveTo(s,u),n.lineTo(s+1,u),n.lineTo(s+1,u+1),n.lineTo(s,u+1),n.endFill())}return n},h.setupTimingPattern=function(){for(var t=8;t<this.moduleCount-8;t++)null==this.modules[t][6]&&(this.modules[t][6]=t%2==0);for(var e=8;e<this.moduleCount-8;e++)null==this.modules[6][e]&&(this.modules[6][e]=e%2==0)},h.setupPositionAdjustPattern=function(){for(var t=o.getPatternPosition(this.typeNumber),e=0;e<t.length;e++)for(var r=0;r<t.length;r++){var n=t[e],i=t[r];if(null==this.modules[n][i])for(var u=-2;u<=2;u++)for(var s=-2;s<=2;s++)this.modules[n+u][i+s]=-2==u||2==u||-2==s||2==s||0==u&&0==s}},h.setupTypeNumber=function(t){for(var e=o.getBCHTypeNumber(this.typeNumber),r=0;r<18;r++){var n=!t&&1==(e>>r&1);this.modules[Math.floor(r/3)][r%3+this.moduleCount-8-3]=n}for(r=0;r<18;r++){n=!t&&1==(e>>r&1);this.modules[r%3+this.moduleCount-8-3][Math.floor(r/3)]=n}},h.setupTypeInfo=function(t,e){for(var r=this.errorCorrectLevel<<3|e,n=o.getBCHTypeInfo(r),i=0;i<15;i++){var u=!t&&1==(n>>i&1);i<6?this.modules[i][8]=u:i<8?this.modules[i+1][8]=u:this.modules[this.moduleCount-15+i][8]=u}for(i=0;i<15;i++){u=!t&&1==(n>>i&1);i<8?this.modules[8][this.moduleCount-i-1]=u:i<9?this.modules[8][15-i-1+1]=u:this.modules[8][15-i-1]=u}this.modules[this.moduleCount-8][8]=!t},h.mapData=function(t,e){for(var r=-1,n=this.moduleCount-1,i=7,u=0,s=this.moduleCount-1;s>0;s-=2)for(6==s&&s--;;){for(var a=0;a<2;a++)if(null==this.modules[n][s-a]){var h=!1;u<t.length&&(h=1==(t[u]>>>i&1)),o.getMask(e,n,s-a)&&(h=!h),this.modules[n][s-a]=h,-1==--i&&(u++,i=7)}if((n+=r)<0||this.moduleCount<=n){n-=r,r=-r;break}}},a.PAD0=236,a.PAD1=17,a.createData=function(t,e,r){for(var n=i.getRSBlocks(t,e),s=new u,h=0;h<r.length;h++){var f=r[h];s.put(f.mode,4),s.put(f.getLength(),o.getLengthInBits(f.mode,t)),f.write(s)}var c=0;for(h=0;h<n.length;h++)c+=n[h].dataCount;if(s.getLengthInBits()>8*c)throw new Error("code length overflow. ("+s.getLengthInBits()+">"+8*c+")");for(s.getLengthInBits()+4<=8*c&&s.put(0,4);s.getLengthInBits()%8!=0;)s.putBit(!1);for(;!(s.getLengthInBits()>=8*c)&&(s.put(a.PAD0,8),!(s.getLengthInBits()>=8*c));)s.put(a.PAD1,8);return a.createBytes(s,n)},a.createBytes=function(t,e){for(var r=0,n=0,i=0,u=new Array(e.length),a=new Array(e.length),h=0;h<e.length;h++){var f=e[h].dataCount,c=e[h].totalCount-f;n=Math.max(n,f),i=Math.max(i,c),u[h]=new Array(f);for(var p=0;p<u[h].length;p++)u[h][p]=255&t.buffer[p+r];r+=f;var l=o.getErrorCorrectPolynomial(c),d=new s(u[h],l.getLength()-1).mod(l);a[h]=new Array(l.getLength()-1);for(p=0;p<a[h].length;p++){var v=p+d.getLength()-a[h].length;a[h][p]=v>=0?d.get(v):0}}var m=0;for(p=0;p<e.length;p++)m+=e[p].totalCount;var y=new Array(m),g=0;for(p=0;p<n;p++)for(h=0;h<e.length;h++)p<u[h].length&&(y[g++]=u[h][p]);for(p=0;p<i;p++)for(h=0;h<e.length;h++)p<a[h].length&&(y[g++]=a[h][p]);return y},t.exports=a},3283:function(t,e,r){var n=r(3155);function i(t){this.mode=n.MODE_8BIT_BYTE,this.data=t}i.prototype={getLength:function(t){return this.data.length},write:function(t){for(var e=0;e<this.data.length;e++)t.put(this.data.charCodeAt(e),8)}},t.exports=i},3284:function(t,e,r){var n=r(3156);function i(t,e){this.totalCount=t,this.dataCount=e}i.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],i.getRSBlocks=function(t,e){var r=i.getRsBlockTable(t,e);if(void 0==r)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+e);for(var n=r.length/3,u=new Array,o=0;o<n;o++)for(var s=r[3*o+0],a=r[3*o+1],h=r[3*o+2],f=0;f<s;f++)u.push(new i(a,h));return u},i.getRsBlockTable=function(t,e){switch(e){case n.L:return i.RS_BLOCK_TABLE[4*(t-1)+0];case n.M:return i.RS_BLOCK_TABLE[4*(t-1)+1];case n.Q:return i.RS_BLOCK_TABLE[4*(t-1)+2];case n.H:return i.RS_BLOCK_TABLE[4*(t-1)+3];default:return}},t.exports=i},3285:function(t,e){function r(){this.buffer=new Array,this.length=0}r.prototype={get:function(t){var e=Math.floor(t/8);return 1==(this.buffer[e]>>>7-t%8&1)},put:function(t,e){for(var r=0;r<e;r++)this.putBit(1==(t>>>e-r-1&1))},getLengthInBits:function(){return this.length},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}},t.exports=r},3286:function(t,e,r){var n=r(3155),i=r(3157),u=r(3158),o=0,s=1,a=2,h=3,f=4,c=5,p=6,l=7,d={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(t){for(var e=t<<10;d.getBCHDigit(e)-d.getBCHDigit(d.G15)>=0;)e^=d.G15<<d.getBCHDigit(e)-d.getBCHDigit(d.G15);return(t<<10|e)^d.G15_MASK},getBCHTypeNumber:function(t){for(var e=t<<12;d.getBCHDigit(e)-d.getBCHDigit(d.G18)>=0;)e^=d.G18<<d.getBCHDigit(e)-d.getBCHDigit(d.G18);return t<<12|e},getBCHDigit:function(t){for(var e=0;0!=t;)e++,t>>>=1;return e},getPatternPosition:function(t){return d.PATTERN_POSITION_TABLE[t-1]},getMask:function(t,e,r){switch(t){case o:return(e+r)%2==0;case s:return e%2==0;case a:return r%3==0;case h:return(e+r)%3==0;case f:return(Math.floor(e/2)+Math.floor(r/3))%2==0;case c:return e*r%2+e*r%3==0;case p:return(e*r%2+e*r%3)%2==0;case l:return(e*r%3+(e+r)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}},getErrorCorrectPolynomial:function(t){for(var e=new i([1],0),r=0;r<t;r++)e=e.multiply(new i([1,u.gexp(r)],0));return e},getLengthInBits:function(t,e){if(1<=e&&e<10)switch(t){case n.MODE_NUMBER:return 10;case n.MODE_ALPHA_NUM:return 9;case n.MODE_8BIT_BYTE:case n.MODE_KANJI:return 8;default:throw new Error("mode:"+t)}else if(e<27)switch(t){case n.MODE_NUMBER:return 12;case n.MODE_ALPHA_NUM:return 11;case n.MODE_8BIT_BYTE:return 16;case n.MODE_KANJI:return 10;default:throw new Error("mode:"+t)}else{if(!(e<41))throw new Error("type:"+e);switch(t){case n.MODE_NUMBER:return 14;case n.MODE_ALPHA_NUM:return 13;case n.MODE_8BIT_BYTE:return 16;case n.MODE_KANJI:return 12;default:throw new Error("mode:"+t)}}},getLostPoint:function(t){for(var e=t.getModuleCount(),r=0,n=0;n<e;n++)for(var i=0;i<e;i++){for(var u=0,o=t.isDark(n,i),s=-1;s<=1;s++)if(!(n+s<0||e<=n+s))for(var a=-1;a<=1;a++)i+a<0||e<=i+a||0==s&&0==a||o==t.isDark(n+s,i+a)&&u++;u>5&&(r+=3+u-5)}for(n=0;n<e-1;n++)for(i=0;i<e-1;i++){var h=0;t.isDark(n,i)&&h++,t.isDark(n+1,i)&&h++,t.isDark(n,i+1)&&h++,t.isDark(n+1,i+1)&&h++,0!=h&&4!=h||(r+=3)}for(n=0;n<e;n++)for(i=0;i<e-6;i++)t.isDark(n,i)&&!t.isDark(n,i+1)&&t.isDark(n,i+2)&&t.isDark(n,i+3)&&t.isDark(n,i+4)&&!t.isDark(n,i+5)&&t.isDark(n,i+6)&&(r+=40);for(i=0;i<e;i++)for(n=0;n<e-6;n++)t.isDark(n,i)&&!t.isDark(n+1,i)&&t.isDark(n+2,i)&&t.isDark(n+3,i)&&t.isDark(n+4,i)&&!t.isDark(n+5,i)&&t.isDark(n+6,i)&&(r+=40);var f=0;for(i=0;i<e;i++)for(n=0;n<e;n++)t.isDark(n,i)&&f++;return r+=10*(Math.abs(100*f/e/e-50)/5)}};t.exports=d},3606:function(t,e){var r={Array:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){return null!==t&&void 0!==t&&t.constructor===Array})),Boolean:function(t){return"boolean"===typeof t},Function:function(t){return"function"===typeof t},Nil:function(t){return void 0===t||null===t},Number:function(t){return"number"===typeof t},Object:function(t){return"object"===typeof t},String:function(t){return"string"===typeof t},"":function(){return!0}};for(var n in r.Null=r.Nil,r)r[n].toJSON=function(t){return t}.bind(null,n);t.exports=r},3607:function(t,e,r){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var n=r(3053),i=r(3234),u=r(3013),o=r(3068),s=r(378),a=r(3139),h=r(3021);function f(t){var e=a.decode(t);if(e.length<21)throw new TypeError(t+" is too short");if(e.length>21)throw new TypeError(t+" is too long");return{version:e.readUInt8(0),hash:e.slice(1)}}function c(e){var r=s.decode(e),n=s.fromWords(r.words.slice(1));return{version:r.words[0],prefix:r.prefix,data:t.from(n)}}e.fromBase58Check=f,e.fromBech32=c,e.toBase58Check=function(e,r){h(o.tuple(o.Hash160bit,o.UInt8),arguments);var n=t.allocUnsafe(21);return n.writeUInt8(r,0),e.copy(n,1),a.encode(n)},e.toBech32=function(t,e,r){var n=s.toWords(t);return n.unshift(e),s.encode(r,n)},e.fromOutputScript=function(t,e){e=e||n.bitcoin;try{return i.p2pkh({output:t,network:e}).address}catch(r){}try{return i.p2sh({output:t,network:e}).address}catch(r){}try{return i.p2wpkh({output:t,network:e}).address}catch(r){}try{return i.p2wsh({output:t,network:e}).address}catch(r){}throw new Error(u.toASM(t)+" has no matching Address")},e.toOutputScript=function(t,e){var r,u;e=e||n.bitcoin;try{r=f(t)}catch(o){}if(r){if(r.version===e.pubKeyHash)return i.p2pkh({hash:r.hash}).output;if(r.version===e.scriptHash)return i.p2sh({hash:r.hash}).output}else{try{u=c(t)}catch(o){}if(u){if(u.prefix!==e.bech32)throw new Error(t+" has an invalid prefix");if(0===u.version){if(20===u.data.length)return i.p2wpkh({hash:u.data}).output;if(32===u.data.length)return i.p2wsh({hash:u.data}).output}}}throw new Error(t+" has no matching Script")}}).call(this,r(12).Buffer)},3608:function(t,e,r){"use strict";(function(t){var n=r(3),i=r(20);Object.defineProperty(e,"__esModule",{value:!0});var u=r(3053),o=r(3068),s=r(3089),a=r(228),h=r(3021),f=r(3758),c=h.maybe(h.compile({compressed:o.maybe(o.Boolean),network:o.maybe(o.Network)})),p=function(){function e(t,r,i){n(this,e),this.__D=t,this.__Q=r,this.lowR=!1,void 0===i&&(i={}),this.compressed=void 0===i.compressed||i.compressed,this.network=i.network||u.bitcoin,void 0!==r&&(this.__Q=s.pointCompress(r,this.compressed))}return i(e,[{key:"toWIF",value:function(){if(!this.__D)throw new Error("Missing private key");return f.encode(this.network.wif,this.__D,this.compressed)}},{key:"sign",value:function(e,r){if(!this.__D)throw new Error("Missing private key");if(void 0===r&&(r=this.lowR),!1===r)return s.sign(e,this.__D);for(var n=s.sign(e,this.__D),i=t.alloc(32,0),u=0;n[0]>127;)u++,i.writeUIntLE(u,0,6),n=s.signWithEntropy(e,this.__D,i);return n}},{key:"verify",value:function(t,e){return s.verify(t,this.publicKey,e)}},{key:"privateKey",get:function(){return this.__D}},{key:"publicKey",get:function(){return this.__Q||(this.__Q=s.pointFromScalar(this.__D,this.compressed)),this.__Q}}]),e}();function l(t,e){if(h(o.Buffer256bit,t),!s.isPrivate(t))throw new TypeError("Private key not in range [1, n)");return h(c,e),new p(t,void 0,e)}e.fromPrivateKey=l,e.fromPublicKey=function(t,e){return h(s.isPoint,t),h(c,e),new p(void 0,t,e)},e.fromWIF=function(t,e){var r=f.decode(t),n=r.version;if(o.Array(e)){if(!(e=e.filter((function(t){return n===t.wif})).pop()))throw new Error("Unknown network version")}else if(e=e||u.bitcoin,n!==e.wif)throw new Error("Invalid network version");return l(r.privateKey,{compressed:r.compressed,network:e})},e.makeRandom=function(t){h(c,t),void 0===t&&(t={});var e,r=t.rng||a;do{e=r(32),h(o.Buffer256bit,e)}while(!s.isPrivate(e));return l(e,t)}}).call(this,r(12).Buffer)},3609:function(t,e,r){"use strict";var n=r(57).Buffer;function i(t){if(t<0||t>9007199254740991||t%1!==0)throw new RangeError("value out of range")}function u(t){return i(t),t<253?1:t<=65535?3:t<=4294967295?5:9}t.exports={encode:function t(e,r,o){if(i(e),r||(r=n.allocUnsafe(u(e))),!n.isBuffer(r))throw new TypeError("buffer must be a Buffer instance");return o||(o=0),e<253?(r.writeUInt8(e,o),t.bytes=1):e<=65535?(r.writeUInt8(253,o),r.writeUInt16LE(e,o+1),t.bytes=3):e<=4294967295?(r.writeUInt8(254,o),r.writeUInt32LE(e,o+1),t.bytes=5):(r.writeUInt8(255,o),r.writeUInt32LE(e>>>0,o+1),r.writeUInt32LE(e/4294967296|0,o+5),t.bytes=9),r},decode:function t(e,r){if(!n.isBuffer(e))throw new TypeError("buffer must be a Buffer instance");r||(r=0);var u=e.readUInt8(r);if(u<253)return t.bytes=1,u;if(253===u)return t.bytes=3,e.readUInt16LE(r+1);if(254===u)return t.bytes=5,e.readUInt32LE(r+1);t.bytes=9;var o=e.readUInt32LE(r+1),s=4294967296*e.readUInt32LE(r+5)+o;return i(s),s},encodingLength:u}},3610:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(3054),i=r(4518),u=r(4519),o=r(4520),s=r(4521),a=r(4522),h=r(4523),f=r(4524),c=r(4525),p=r(4526),l=r(4527),d=r(4528),v=r(4529),m=r(4530),y={unsignedTx:u,globalXpub:i,checkPubkey:d.makeChecker([])};e.globals=y;var g={nonWitnessUtxo:a,partialSig:h,sighashType:c,finalScriptSig:o,finalScriptWitness:s,porCommitment:f,witnessUtxo:p,bip32Derivation:l.makeConverter(n.InputTypes.BIP32_DERIVATION),redeemScript:v.makeConverter(n.InputTypes.REDEEM_SCRIPT),witnessScript:m.makeConverter(n.InputTypes.WITNESS_SCRIPT),checkPubkey:d.makeChecker([n.InputTypes.PARTIAL_SIG,n.InputTypes.BIP32_DERIVATION])};e.inputs=g;var w={bip32Derivation:l.makeConverter(n.OutputTypes.BIP32_DERIVATION),redeemScript:v.makeConverter(n.OutputTypes.REDEEM_SCRIPT),witnessScript:m.makeConverter(n.OutputTypes.WITNESS_SCRIPT),checkPubkey:d.makeChecker([n.OutputTypes.BIP32_DERIVATION])};e.outputs=w},3611:function(t,e,r){"use strict";(function(t){var n=r(349);Object.defineProperty(e,"__esModule",{value:!0});var i=r(3238);function u(e){var r=e.key.length,n=e.value.length,u=i.encodingLength(r),o=i.encodingLength(n),s=t.allocUnsafe(u+r+o+n);return i.encode(r,s,0),e.key.copy(s,u),i.encode(n,s,u+r),e.value.copy(s,u+r+o),s}function o(t,e){if("number"!==typeof t)throw new Error("cannot write a non-number as a number");if(t<0)throw new Error("specified a negative value for writing an unsigned value");if(t>e)throw new Error("RangeError: value out of range");if(Math.floor(t)!==t)throw new Error("value has a fractional component")}e.range=function(t){return n(Array(t).keys())},e.reverseBuffer=function(t){if(t.length<1)return t;for(var e=t.length-1,r=0,n=0;n<t.length/2;n++)r=t[n],t[n]=t[e],t[e]=r,e--;return t},e.keyValsToBuffer=function(e){var r=e.map(u);return r.push(t.from([0])),t.concat(r)},e.keyValToBuffer=u,e.readUInt64LE=function(t,e){var r=t.readUInt32LE(e),n=t.readUInt32LE(e+4);return o((n*=4294967296)+r,9007199254740991),n+r},e.writeUInt64LE=function(t,e,r){return o(e,9007199254740991),t.writeInt32LE(-1&e,r),t.writeUInt32LE(Math.floor(e/4294967296),r+4),r+8}}).call(this,r(12).Buffer)},3612:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(4534);e.input=n;var i=r(4535);e.output=i},3613:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(4537);e.input=n;var i=r(4538);e.output=i},3614:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(4539);e.input=n;var i=r(4540);e.output=i},3757:function(t,e,r){var n=r(3606);function i(t){return t.name||t.toString().match(/function (.*?)\s*\(/)[1]}function u(t){return n.Nil(t)?"":i(t.constructor)}function o(t,e){Error.captureStackTrace&&Error.captureStackTrace(t,e)}function s(t){return n.Function(t)?t.toJSON?t.toJSON():i(t):n.Array(t)?"Array":t&&n.Object(t)?"Object":void 0!==t?t:""}function a(t,e,r){var i=function(t){return n.Function(t)?"":n.String(t)?JSON.stringify(t):t&&n.Object(t)?"":t}(e);return"Expected "+s(t)+", got"+(""!==r?" "+r:"")+(""!==i?" "+i:"")}function h(t,e,r){r=r||u(e),this.message=a(t,e,r),o(this,h),this.__type=t,this.__value=e,this.__valueTypeName=r}function f(t,e,r,n,i){t?(i=i||u(n),this.message=function(t,e,r,n,i){var u='" of type ';return"key"===e&&(u='" with key type '),a('property "'+s(r)+u+s(t),n,i)}(t,r,e,n,i)):this.message='Unexpected property "'+e+'"',o(this,h),this.__label=r,this.__property=e,this.__type=t,this.__value=n,this.__valueTypeName=i}h.prototype=Object.create(Error.prototype),h.prototype.constructor=h,f.prototype=Object.create(Error.prototype),f.prototype.constructor=h,t.exports={TfTypeError:h,TfPropertyTypeError:f,tfCustomError:function(t,e){return new h(t,{},e)},tfSubError:function(t,e,r){return t instanceof f?(e=e+"."+t.__property,t=new f(t.__type,e,t.__label,t.__value,t.__valueTypeName)):t instanceof h&&(t=new f(t.__type,e,r,t.__value,t.__valueTypeName)),o(t),t},tfJSON:s,getValueTypeName:u}},3758:function(t,e,r){(function(e){var n=r(3139);function i(t,e){if(void 0!==e&&t[0]!==e)throw new Error("Invalid network version");if(33===t.length)return{version:t[0],privateKey:t.slice(1,33),compressed:!1};if(34!==t.length)throw new Error("Invalid WIF length");if(1!==t[33])throw new Error("Invalid compression flag");return{version:t[0],privateKey:t.slice(1,33),compressed:!0}}function u(t,r,n){var i=new e(n?34:33);return i.writeUInt8(t,0),r.copy(i,1),n&&(i[33]=1),i}t.exports={decode:function(t,e){return i(n.decode(t),e)},decodeRaw:i,encode:function(t,e,r){return"number"===typeof t?n.encode(u(t,e,r)):n.encode(u(t.version,t.privateKey,t.compressed))},encodeRaw:u}}).call(this,r(12).Buffer)},3759:function(t,e,r){"use strict";function n(t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}Object.defineProperty(e,"__esModule",{value:!0}),n(r(4517)),n(r(4531))},3760:function(t,e,r){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var n=r(3610);function i(t,e){var r=t[e];if(void 0===r)throw new Error("No input #".concat(e));return r}function u(t,e,r,n){throw new Error("Data for ".concat(t," key ").concat(e," is incorrect: Expected ")+"".concat(r," and got ").concat(JSON.stringify(n)))}function o(t){return function(e,r){for(var i=function(){var i=s[o],a=e[i],h=n[t+"s"][i]||{},f=h.canAdd,c=h.canAddToArray,p=h.check,l=h.expected;if(p)if(!!c){if(!Array.isArray(a)||r[i]&&!Array.isArray(r[i]))throw new Error("Key type ".concat(i," must be an array"));a.every(p)||u(t,i,l,a);var d=r[i]||[],v=new Set;if(!a.every((function(t){return c(d,t,v)})))throw new Error("Can not add duplicate data to array");r[i]=d.concat(a)}else{if(p(a)||u(t,i,l,a),!f(r,a))throw new Error("Can not add duplicate data to ".concat(t));r[i]=a}},o=0,s=Object.keys(e);o<s.length;o++)i()}}e.checkForInput=i,e.checkForOutput=function(t,e){var r=t[e];if(void 0===r)throw new Error("No output #".concat(e));return r},e.checkHasKey=function(t,e,r){if(t.key[0]<r)throw new Error("Use the method for your specific key instead of addUnknownKeyVal*");if(e&&0!==e.filter((function(e){return e.key.equals(t.key)})).length)throw new Error("Duplicate Key: ".concat(t.key.toString("hex")))},e.getEnumLength=function(t){var e=0;return Object.keys(t).forEach((function(t){Number(isNaN(Number(t)))&&e++})),e},e.inputCheckUncleanFinalized=function(t,e){var r=!1;if(e.nonWitnessUtxo||e.witnessUtxo){var n=!!e.redeemScript,i=!!e.witnessScript,u=!n||!!e.finalScriptSig,o=!i||!!e.finalScriptWitness,s=!!e.finalScriptSig||!!e.finalScriptWitness;r=u&&o&&s}if(!1===r)throw new Error("Input #".concat(t," has too much or too little data to clean"))},e.updateGlobal=o("global"),e.updateInput=o("input"),e.updateOutput=o("output"),e.addInputAttributes=function(t,r){var n=i(t,t.length-1);e.updateInput(r,n)},e.addOutputAttributes=function(t,r){var n=i(t,t.length-1);e.updateOutput(r,n)},e.defaultVersionSetter=function(e,r){if(!t.isBuffer(r)||r.length<4)throw new Error("Set Version: Invalid Transaction");return r.writeUInt32LE(e,0),r},e.defaultLocktimeSetter=function(e,r){if(!t.isBuffer(r)||r.length<4)throw new Error("Set Locktime: Invalid Transaction");return r.writeUInt32LE(e,r.length-4),r}}).call(this,r(12).Buffer)},3761:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(3013),i=r(3013);function u(t){var e=n.compile(t);return 22===e.length&&e[0]===i.OPS.OP_0&&20===e[1]}e.check=u,u.toJSON=function(){return"Witness pubKeyHash output"}},3762:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(3013),i=r(3013);function u(t){var e=n.compile(t);return 34===e.length&&e[0]===i.OPS.OP_0&&32===e[1]}e.check=u,u.toJSON=function(){return"Witness scriptHash output"}},4493:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(4494);e.bip32=n;var i=r(3607);e.address=i;var u=r(3081);e.crypto=u;var o=r(3608);e.ECPair=o;var s=r(3053);e.networks=s;var a=r(3234);e.payments=a;var h=r(3013);e.script=h;var f=r(4512);e.Block=f.Block;var c=r(4514);e.Psbt=c.Psbt;var p=r(3013);e.opcodes=p.OPS;var l=r(3237);e.Transaction=l.Transaction;var d=r(4532);e.TransactionBuilder=d.TransactionBuilder},4494:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(4495);e.fromSeed=n.fromSeed,e.fromBase58=n.fromBase58,e.fromPublicKey=n.fromPublicKey,e.fromPrivateKey=n.fromPrivateKey},4495:function(t,e,r){"use strict";(function(t){var n=r(3),i=r(20);Object.defineProperty(e,"__esModule",{value:!0});var u=r(4496),o=r(3139),s=r(3089),a=r(3021),h=r(3758),f=a.BufferN(32),c=a.compile({wif:a.UInt8,bip32:{public:a.UInt32,private:a.UInt32}}),p={messagePrefix:"\x18Bitcoin Signed Message:\n",bech32:"bc",bip32:{public:76067358,private:76066276},pubKeyHash:0,scriptHash:5,wif:128},l=2147483648,d=Math.pow(2,31)-1;function v(t){return a.String(t)&&null!==t.match(/^(m\/)?(\d+'?\/)*\d+'?$/)}function m(t){return a.UInt32(t)&&t<=d}var y=function(){function e(t,r,i,u){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,h=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;n(this,e),this.__D=t,this.__Q=r,this.chainCode=i,this.network=u,this.__DEPTH=o,this.__INDEX=s,this.__PARENT_FINGERPRINT=h,a(c,u),this.lowR=!1}return i(e,[{key:"isNeutered",value:function(){return void 0===this.__D}},{key:"neutered",value:function(){return _(this.publicKey,this.chainCode,this.network,this.depth,this.index,this.parentFingerprint)}},{key:"toBase58",value:function(){var e=this.network,r=this.isNeutered()?e.bip32.public:e.bip32.private,n=t.allocUnsafe(78);return n.writeUInt32BE(r,0),n.writeUInt8(this.depth,4),n.writeUInt32BE(this.parentFingerprint,5),n.writeUInt32BE(this.index,9),this.chainCode.copy(n,13),this.isNeutered()?this.publicKey.copy(n,45):(n.writeUInt8(0,45),this.privateKey.copy(n,46)),o.encode(n)}},{key:"toWIF",value:function(){if(!this.privateKey)throw new TypeError("Missing private key");return h.encode(this.network.wif,this.privateKey,!0)}},{key:"derive",value:function(e){a(a.UInt32,e);var r=e>=l,n=t.allocUnsafe(37);if(r){if(this.isNeutered())throw new TypeError("Missing private key for hardened child key");n[0]=0,this.privateKey.copy(n,1),n.writeUInt32BE(e,33)}else this.publicKey.copy(n,0),n.writeUInt32BE(e,33);var i,o=u.hmacSHA512(this.chainCode,n),h=o.slice(0,32),f=o.slice(32);if(!s.isPrivate(h))return this.derive(e+1);if(this.isNeutered()){var c=s.pointAddScalar(this.publicKey,h,!0);if(null===c)return this.derive(e+1);i=_(c,f,this.network,this.depth+1,e,this.fingerprint.readUInt32BE(0))}else{var p=s.privateAdd(this.privateKey,h);if(null==p)return this.derive(e+1);i=w(p,f,this.network,this.depth+1,e,this.fingerprint.readUInt32BE(0))}return i}},{key:"deriveHardened",value:function(t){return a(m,t),this.derive(t+l)}},{key:"derivePath",value:function(t){a(v,t);var e=t.split("/");if("m"===e[0]){if(this.parentFingerprint)throw new TypeError("Expected master, got child");e=e.slice(1)}return e.reduce((function(t,e){var r;return"'"===e.slice(-1)?(r=parseInt(e.slice(0,-1),10),t.deriveHardened(r)):(r=parseInt(e,10),t.derive(r))}),this)}},{key:"sign",value:function(e,r){if(!this.privateKey)throw new Error("Missing private key");if(void 0===r&&(r=this.lowR),!1===r)return s.sign(e,this.privateKey);for(var n=s.sign(e,this.privateKey),i=t.alloc(32,0),u=0;n[0]>127;)u++,i.writeUIntLE(u,0,6),n=s.signWithEntropy(e,this.privateKey,i);return n}},{key:"verify",value:function(t,e){return s.verify(t,this.publicKey,e)}},{key:"depth",get:function(){return this.__DEPTH}},{key:"index",get:function(){return this.__INDEX}},{key:"parentFingerprint",get:function(){return this.__PARENT_FINGERPRINT}},{key:"publicKey",get:function(){return void 0===this.__Q&&(this.__Q=s.pointFromScalar(this.__D,!0)),this.__Q}},{key:"privateKey",get:function(){return this.__D}},{key:"identifier",get:function(){return u.hash160(this.publicKey)}},{key:"fingerprint",get:function(){return this.identifier.slice(0,4)}},{key:"compressed",get:function(){return!0}}]),e}();function g(t,e,r){return w(t,e,r)}function w(t,e,r,n,i,u){if(a({privateKey:f,chainCode:f},{privateKey:t,chainCode:e}),r=r||p,!s.isPrivate(t))throw new TypeError("Private key not in range [1, n)");return new y(t,void 0,e,r,n,i,u)}function _(t,e,r,n,i,u){if(a({publicKey:a.BufferN(33),chainCode:f},{publicKey:t,chainCode:e}),r=r||p,!s.isPoint(t))throw new TypeError("Point is not on the curve");return new y(void 0,t,e,r,n,i,u)}e.fromBase58=function(t,e){var r=o.decode(t);if(78!==r.length)throw new TypeError("Invalid buffer length");e=e||p;var n=r.readUInt32BE(0);if(n!==e.bip32.private&&n!==e.bip32.public)throw new TypeError("Invalid network version");var i=r[4],u=r.readUInt32BE(5);if(0===i&&0!==u)throw new TypeError("Invalid parent fingerprint");var s=r.readUInt32BE(9);if(0===i&&0!==s)throw new TypeError("Invalid index");var a,h=r.slice(13,45);if(n===e.bip32.private){if(0!==r.readUInt8(45))throw new TypeError("Invalid private key");a=w(r.slice(46,78),h,e,i,s,u)}else{a=_(r.slice(45,78),h,e,i,s,u)}return a},e.fromPrivateKey=g,e.fromPublicKey=function(t,e,r){return _(t,e,r)},e.fromSeed=function(e,r){if(a(a.Buffer,e),e.length<16)throw new TypeError("Seed should be at least 128 bits");if(e.length>64)throw new TypeError("Seed should be at most 512 bits");r=r||p;var n=u.hmacSHA512(t.from("Bitcoin seed","utf8"),e);return g(n.slice(0,32),n.slice(32),r)}}).call(this,r(12).Buffer)},4496:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(131),i=r(776);e.hash160=function(t){var e=n("sha256").update(t).digest();try{return n("rmd160").update(e).digest()}catch(r){return n("ripemd160").update(e).digest()}},e.hmacSHA512=function(t,e){return i("sha512",t).update(e).digest()}},4497:function(t,e,r){(function(t){!function(t,e){"use strict";function n(t,e){if(!t)throw new Error(e||"Assertion failed")}function i(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function u(t,e,r){if(u.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(r=e,e=10),this._init(t||0,e||10,r||"be"))}var o;"object"===typeof t?t.exports=u:e.BN=u,u.BN=u,u.wordSize=26;try{o=r(4498).Buffer}catch(k){}function s(t,e,r){for(var n=0,i=Math.min(t.length,r),u=e;u<i;u++){var o=t.charCodeAt(u)-48;n<<=4,n|=o>=49&&o<=54?o-49+10:o>=17&&o<=22?o-17+10:15&o}return n}function a(t,e,r,n){for(var i=0,u=Math.min(t.length,r),o=e;o<u;o++){var s=t.charCodeAt(o)-48;i*=n,i+=s>=49?s-49+10:s>=17?s-17+10:s}return i}u.isBN=function(t){return t instanceof u||null!==t&&"object"===typeof t&&t.constructor.wordSize===u.wordSize&&Array.isArray(t.words)},u.max=function(t,e){return t.cmp(e)>0?t:e},u.min=function(t,e){return t.cmp(e)<0?t:e},u.prototype._init=function(t,e,r){if("number"===typeof t)return this._initNumber(t,e,r);if("object"===typeof t)return this._initArray(t,e,r);"hex"===e&&(e=16),n(e===(0|e)&&e>=2&&e<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&i++,16===e?this._parseHex(t,i):this._parseBase(t,e,i),"-"===t[0]&&(this.negative=1),this.strip(),"le"===r&&this._initArray(this.toArray(),e,r)},u.prototype._initNumber=function(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(n(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),e,r)},u.prototype._initArray=function(t,e,r){if(n("number"===typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var u,o,s=0;if("be"===r)for(i=t.length-1,u=0;i>=0;i-=3)o=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[u]|=o<<s&67108863,this.words[u+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,u++);else if("le"===r)for(i=0,u=0;i<t.length;i+=3)o=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[u]|=o<<s&67108863,this.words[u+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,u++);return this.strip()},u.prototype._parseHex=function(t,e){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var n,i,u=0;for(r=t.length-6,n=0;r>=e;r-=6)i=s(t,r,r+6),this.words[n]|=i<<u&67108863,this.words[n+1]|=i>>>26-u&4194303,(u+=24)>=26&&(u-=26,n++);r+6!==e&&(i=s(t,e,r+6),this.words[n]|=i<<u&67108863,this.words[n+1]|=i>>>26-u&4194303),this.strip()},u.prototype._parseBase=function(t,e,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=e)n++;n--,i=i/e|0;for(var u=t.length-r,o=u%n,s=Math.min(u,u-o)+r,h=0,f=r;f<s;f+=n)h=a(t,f,f+n,e),this.imuln(i),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h);if(0!==o){var c=1;for(h=a(t,f,t.length,e),f=0;f<o;f++)c*=e;this.imuln(c),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h)}},u.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},u.prototype.clone=function(){var t=new u(null);return this.copy(t),t},u.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},u.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},u.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},u.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],f=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],c=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function p(t,e,r){r.negative=e.negative^t.negative;var n=t.length+e.length|0;r.length=n,n=n-1|0;var i=0|t.words[0],u=0|e.words[0],o=i*u,s=67108863&o,a=o/67108864|0;r.words[0]=s;for(var h=1;h<n;h++){for(var f=a>>>26,c=67108863&a,p=Math.min(h,e.length-1),l=Math.max(0,h-t.length+1);l<=p;l++){var d=h-l|0;f+=(o=(i=0|t.words[d])*(u=0|e.words[l])+c)/67108864|0,c=67108863&o}r.words[h]=0|c,a=0|f}return 0!==a?r.words[h]=0|a:r.length--,r.strip()}u.prototype.toString=function(t,e){var r;if(e=0|e||1,16===(t=t||10)||"hex"===t){r="";for(var i=0,u=0,o=0;o<this.length;o++){var s=this.words[o],a=(16777215&(s<<i|u)).toString(16);r=0!==(u=s>>>24-i&16777215)||o!==this.length-1?h[6-a.length]+a+r:a+r,(i+=2)>=26&&(i-=26,o--)}for(0!==u&&(r=u.toString(16)+r);r.length%e!==0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var p=f[t],l=c[t];r="";var d=this.clone();for(d.negative=0;!d.isZero();){var v=d.modn(l).toString(t);r=(d=d.idivn(l)).isZero()?v+r:h[p-v.length]+v+r}for(this.isZero()&&(r="0"+r);r.length%e!==0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},u.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},u.prototype.toJSON=function(){return this.toString(16)},u.prototype.toBuffer=function(t,e){return n("undefined"!==typeof o),this.toArrayLike(o,t,e)},u.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},u.prototype.toArrayLike=function(t,e,r){var i=this.byteLength(),u=r||Math.max(1,i);n(i<=u,"byte array longer than desired length"),n(u>0,"Requested array length <= 0"),this.strip();var o,s,a="le"===e,h=new t(u),f=this.clone();if(a){for(s=0;!f.isZero();s++)o=f.andln(255),f.iushrn(8),h[s]=o;for(;s<u;s++)h[s]=0}else{for(s=0;s<u-i;s++)h[s]=0;for(s=0;!f.isZero();s++)o=f.andln(255),f.iushrn(8),h[u-s-1]=o}return h},Math.clz32?u.prototype._countBits=function(t){return 32-Math.clz32(t)}:u.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},u.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return 0===(8191&e)&&(r+=13,e>>>=13),0===(127&e)&&(r+=7,e>>>=7),0===(15&e)&&(r+=4,e>>>=4),0===(3&e)&&(r+=2,e>>>=2),0===(1&e)&&r++,r},u.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},u.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},u.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},u.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},u.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},u.prototype.isNeg=function(){return 0!==this.negative},u.prototype.neg=function(){return this.clone().ineg()},u.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},u.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},u.prototype.ior=function(t){return n(0===(this.negative|t.negative)),this.iuor(t)},u.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},u.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},u.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this.strip()},u.prototype.iand=function(t){return n(0===(this.negative|t.negative)),this.iuand(t)},u.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},u.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},u.prototype.iuxor=function(t){var e,r;this.length>t.length?(e=this,r=t):(e=t,r=this);for(var n=0;n<r.length;n++)this.words[n]=e.words[n]^r.words[n];if(this!==e)for(;n<e.length;n++)this.words[n]=e.words[n];return this.length=e.length,this.strip()},u.prototype.ixor=function(t){return n(0===(this.negative|t.negative)),this.iuxor(t)},u.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},u.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},u.prototype.inotn=function(t){n("number"===typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this.strip()},u.prototype.notn=function(t){return this.clone().inotn(t)},u.prototype.setn=function(t,e){n("number"===typeof t&&t>=0);var r=t/26|0,i=t%26;return this._expand(r+1),this.words[r]=e?this.words[r]|1<<i:this.words[r]&~(1<<i),this.strip()},u.prototype.iadd=function(t){var e,r,n;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,n=t):(r=t,n=this);for(var i=0,u=0;u<n.length;u++)e=(0|r.words[u])+(0|n.words[u])+i,this.words[u]=67108863&e,i=e>>>26;for(;0!==i&&u<r.length;u++)e=(0|r.words[u])+i,this.words[u]=67108863&e,i=e>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;u<r.length;u++)this.words[u]=r.words[u];return this},u.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},u.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r,n,i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=t):(r=t,n=this);for(var u=0,o=0;o<n.length;o++)u=(e=(0|r.words[o])-(0|n.words[o])+u)>>26,this.words[o]=67108863&e;for(;0!==u&&o<r.length;o++)u=(e=(0|r.words[o])+u)>>26,this.words[o]=67108863&e;if(0===u&&o<r.length&&r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this.length=Math.max(this.length,o),r!==this&&(this.negative=1),this.strip()},u.prototype.sub=function(t){return this.clone().isub(t)};var l=function(t,e,r){var n,i,u,o=t.words,s=e.words,a=r.words,h=0,f=0|o[0],c=8191&f,p=f>>>13,l=0|o[1],d=8191&l,v=l>>>13,m=0|o[2],y=8191&m,g=m>>>13,w=0|o[3],_=8191&w,b=w>>>13,S=0|o[4],E=8191&S,k=S>>>13,T=0|o[5],O=8191&T,P=T>>>13,I=0|o[6],M=8191&I,A=I>>>13,N=0|o[7],B=8191&N,C=N>>>13,U=0|o[8],H=8191&U,x=U>>>13,L=0|o[9],R=8191&L,D=L>>>13,K=0|s[0],W=8191&K,V=K>>>13,F=0|s[1],j=8191&F,G=F>>>13,q=0|s[2],X=8191&q,J=q>>>13,Y=0|s[3],z=8191&Y,Z=Y>>>13,Q=0|s[4],$=8191&Q,tt=Q>>>13,et=0|s[5],rt=8191&et,nt=et>>>13,it=0|s[6],ut=8191&it,ot=it>>>13,st=0|s[7],at=8191&st,ht=st>>>13,ft=0|s[8],ct=8191&ft,pt=ft>>>13,lt=0|s[9],dt=8191&lt,vt=lt>>>13;r.negative=t.negative^e.negative,r.length=19;var mt=(h+(n=Math.imul(c,W))|0)+((8191&(i=(i=Math.imul(c,V))+Math.imul(p,W)|0))<<13)|0;h=((u=Math.imul(p,V))+(i>>>13)|0)+(mt>>>26)|0,mt&=67108863,n=Math.imul(d,W),i=(i=Math.imul(d,V))+Math.imul(v,W)|0,u=Math.imul(v,V);var yt=(h+(n=n+Math.imul(c,j)|0)|0)+((8191&(i=(i=i+Math.imul(c,G)|0)+Math.imul(p,j)|0))<<13)|0;h=((u=u+Math.imul(p,G)|0)+(i>>>13)|0)+(yt>>>26)|0,yt&=67108863,n=Math.imul(y,W),i=(i=Math.imul(y,V))+Math.imul(g,W)|0,u=Math.imul(g,V),n=n+Math.imul(d,j)|0,i=(i=i+Math.imul(d,G)|0)+Math.imul(v,j)|0,u=u+Math.imul(v,G)|0;var gt=(h+(n=n+Math.imul(c,X)|0)|0)+((8191&(i=(i=i+Math.imul(c,J)|0)+Math.imul(p,X)|0))<<13)|0;h=((u=u+Math.imul(p,J)|0)+(i>>>13)|0)+(gt>>>26)|0,gt&=67108863,n=Math.imul(_,W),i=(i=Math.imul(_,V))+Math.imul(b,W)|0,u=Math.imul(b,V),n=n+Math.imul(y,j)|0,i=(i=i+Math.imul(y,G)|0)+Math.imul(g,j)|0,u=u+Math.imul(g,G)|0,n=n+Math.imul(d,X)|0,i=(i=i+Math.imul(d,J)|0)+Math.imul(v,X)|0,u=u+Math.imul(v,J)|0;var wt=(h+(n=n+Math.imul(c,z)|0)|0)+((8191&(i=(i=i+Math.imul(c,Z)|0)+Math.imul(p,z)|0))<<13)|0;h=((u=u+Math.imul(p,Z)|0)+(i>>>13)|0)+(wt>>>26)|0,wt&=67108863,n=Math.imul(E,W),i=(i=Math.imul(E,V))+Math.imul(k,W)|0,u=Math.imul(k,V),n=n+Math.imul(_,j)|0,i=(i=i+Math.imul(_,G)|0)+Math.imul(b,j)|0,u=u+Math.imul(b,G)|0,n=n+Math.imul(y,X)|0,i=(i=i+Math.imul(y,J)|0)+Math.imul(g,X)|0,u=u+Math.imul(g,J)|0,n=n+Math.imul(d,z)|0,i=(i=i+Math.imul(d,Z)|0)+Math.imul(v,z)|0,u=u+Math.imul(v,Z)|0;var _t=(h+(n=n+Math.imul(c,$)|0)|0)+((8191&(i=(i=i+Math.imul(c,tt)|0)+Math.imul(p,$)|0))<<13)|0;h=((u=u+Math.imul(p,tt)|0)+(i>>>13)|0)+(_t>>>26)|0,_t&=67108863,n=Math.imul(O,W),i=(i=Math.imul(O,V))+Math.imul(P,W)|0,u=Math.imul(P,V),n=n+Math.imul(E,j)|0,i=(i=i+Math.imul(E,G)|0)+Math.imul(k,j)|0,u=u+Math.imul(k,G)|0,n=n+Math.imul(_,X)|0,i=(i=i+Math.imul(_,J)|0)+Math.imul(b,X)|0,u=u+Math.imul(b,J)|0,n=n+Math.imul(y,z)|0,i=(i=i+Math.imul(y,Z)|0)+Math.imul(g,z)|0,u=u+Math.imul(g,Z)|0,n=n+Math.imul(d,$)|0,i=(i=i+Math.imul(d,tt)|0)+Math.imul(v,$)|0,u=u+Math.imul(v,tt)|0;var bt=(h+(n=n+Math.imul(c,rt)|0)|0)+((8191&(i=(i=i+Math.imul(c,nt)|0)+Math.imul(p,rt)|0))<<13)|0;h=((u=u+Math.imul(p,nt)|0)+(i>>>13)|0)+(bt>>>26)|0,bt&=67108863,n=Math.imul(M,W),i=(i=Math.imul(M,V))+Math.imul(A,W)|0,u=Math.imul(A,V),n=n+Math.imul(O,j)|0,i=(i=i+Math.imul(O,G)|0)+Math.imul(P,j)|0,u=u+Math.imul(P,G)|0,n=n+Math.imul(E,X)|0,i=(i=i+Math.imul(E,J)|0)+Math.imul(k,X)|0,u=u+Math.imul(k,J)|0,n=n+Math.imul(_,z)|0,i=(i=i+Math.imul(_,Z)|0)+Math.imul(b,z)|0,u=u+Math.imul(b,Z)|0,n=n+Math.imul(y,$)|0,i=(i=i+Math.imul(y,tt)|0)+Math.imul(g,$)|0,u=u+Math.imul(g,tt)|0,n=n+Math.imul(d,rt)|0,i=(i=i+Math.imul(d,nt)|0)+Math.imul(v,rt)|0,u=u+Math.imul(v,nt)|0;var St=(h+(n=n+Math.imul(c,ut)|0)|0)+((8191&(i=(i=i+Math.imul(c,ot)|0)+Math.imul(p,ut)|0))<<13)|0;h=((u=u+Math.imul(p,ot)|0)+(i>>>13)|0)+(St>>>26)|0,St&=67108863,n=Math.imul(B,W),i=(i=Math.imul(B,V))+Math.imul(C,W)|0,u=Math.imul(C,V),n=n+Math.imul(M,j)|0,i=(i=i+Math.imul(M,G)|0)+Math.imul(A,j)|0,u=u+Math.imul(A,G)|0,n=n+Math.imul(O,X)|0,i=(i=i+Math.imul(O,J)|0)+Math.imul(P,X)|0,u=u+Math.imul(P,J)|0,n=n+Math.imul(E,z)|0,i=(i=i+Math.imul(E,Z)|0)+Math.imul(k,z)|0,u=u+Math.imul(k,Z)|0,n=n+Math.imul(_,$)|0,i=(i=i+Math.imul(_,tt)|0)+Math.imul(b,$)|0,u=u+Math.imul(b,tt)|0,n=n+Math.imul(y,rt)|0,i=(i=i+Math.imul(y,nt)|0)+Math.imul(g,rt)|0,u=u+Math.imul(g,nt)|0,n=n+Math.imul(d,ut)|0,i=(i=i+Math.imul(d,ot)|0)+Math.imul(v,ut)|0,u=u+Math.imul(v,ot)|0;var Et=(h+(n=n+Math.imul(c,at)|0)|0)+((8191&(i=(i=i+Math.imul(c,ht)|0)+Math.imul(p,at)|0))<<13)|0;h=((u=u+Math.imul(p,ht)|0)+(i>>>13)|0)+(Et>>>26)|0,Et&=67108863,n=Math.imul(H,W),i=(i=Math.imul(H,V))+Math.imul(x,W)|0,u=Math.imul(x,V),n=n+Math.imul(B,j)|0,i=(i=i+Math.imul(B,G)|0)+Math.imul(C,j)|0,u=u+Math.imul(C,G)|0,n=n+Math.imul(M,X)|0,i=(i=i+Math.imul(M,J)|0)+Math.imul(A,X)|0,u=u+Math.imul(A,J)|0,n=n+Math.imul(O,z)|0,i=(i=i+Math.imul(O,Z)|0)+Math.imul(P,z)|0,u=u+Math.imul(P,Z)|0,n=n+Math.imul(E,$)|0,i=(i=i+Math.imul(E,tt)|0)+Math.imul(k,$)|0,u=u+Math.imul(k,tt)|0,n=n+Math.imul(_,rt)|0,i=(i=i+Math.imul(_,nt)|0)+Math.imul(b,rt)|0,u=u+Math.imul(b,nt)|0,n=n+Math.imul(y,ut)|0,i=(i=i+Math.imul(y,ot)|0)+Math.imul(g,ut)|0,u=u+Math.imul(g,ot)|0,n=n+Math.imul(d,at)|0,i=(i=i+Math.imul(d,ht)|0)+Math.imul(v,at)|0,u=u+Math.imul(v,ht)|0;var kt=(h+(n=n+Math.imul(c,ct)|0)|0)+((8191&(i=(i=i+Math.imul(c,pt)|0)+Math.imul(p,ct)|0))<<13)|0;h=((u=u+Math.imul(p,pt)|0)+(i>>>13)|0)+(kt>>>26)|0,kt&=67108863,n=Math.imul(R,W),i=(i=Math.imul(R,V))+Math.imul(D,W)|0,u=Math.imul(D,V),n=n+Math.imul(H,j)|0,i=(i=i+Math.imul(H,G)|0)+Math.imul(x,j)|0,u=u+Math.imul(x,G)|0,n=n+Math.imul(B,X)|0,i=(i=i+Math.imul(B,J)|0)+Math.imul(C,X)|0,u=u+Math.imul(C,J)|0,n=n+Math.imul(M,z)|0,i=(i=i+Math.imul(M,Z)|0)+Math.imul(A,z)|0,u=u+Math.imul(A,Z)|0,n=n+Math.imul(O,$)|0,i=(i=i+Math.imul(O,tt)|0)+Math.imul(P,$)|0,u=u+Math.imul(P,tt)|0,n=n+Math.imul(E,rt)|0,i=(i=i+Math.imul(E,nt)|0)+Math.imul(k,rt)|0,u=u+Math.imul(k,nt)|0,n=n+Math.imul(_,ut)|0,i=(i=i+Math.imul(_,ot)|0)+Math.imul(b,ut)|0,u=u+Math.imul(b,ot)|0,n=n+Math.imul(y,at)|0,i=(i=i+Math.imul(y,ht)|0)+Math.imul(g,at)|0,u=u+Math.imul(g,ht)|0,n=n+Math.imul(d,ct)|0,i=(i=i+Math.imul(d,pt)|0)+Math.imul(v,ct)|0,u=u+Math.imul(v,pt)|0;var Tt=(h+(n=n+Math.imul(c,dt)|0)|0)+((8191&(i=(i=i+Math.imul(c,vt)|0)+Math.imul(p,dt)|0))<<13)|0;h=((u=u+Math.imul(p,vt)|0)+(i>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,n=Math.imul(R,j),i=(i=Math.imul(R,G))+Math.imul(D,j)|0,u=Math.imul(D,G),n=n+Math.imul(H,X)|0,i=(i=i+Math.imul(H,J)|0)+Math.imul(x,X)|0,u=u+Math.imul(x,J)|0,n=n+Math.imul(B,z)|0,i=(i=i+Math.imul(B,Z)|0)+Math.imul(C,z)|0,u=u+Math.imul(C,Z)|0,n=n+Math.imul(M,$)|0,i=(i=i+Math.imul(M,tt)|0)+Math.imul(A,$)|0,u=u+Math.imul(A,tt)|0,n=n+Math.imul(O,rt)|0,i=(i=i+Math.imul(O,nt)|0)+Math.imul(P,rt)|0,u=u+Math.imul(P,nt)|0,n=n+Math.imul(E,ut)|0,i=(i=i+Math.imul(E,ot)|0)+Math.imul(k,ut)|0,u=u+Math.imul(k,ot)|0,n=n+Math.imul(_,at)|0,i=(i=i+Math.imul(_,ht)|0)+Math.imul(b,at)|0,u=u+Math.imul(b,ht)|0,n=n+Math.imul(y,ct)|0,i=(i=i+Math.imul(y,pt)|0)+Math.imul(g,ct)|0,u=u+Math.imul(g,pt)|0;var Ot=(h+(n=n+Math.imul(d,dt)|0)|0)+((8191&(i=(i=i+Math.imul(d,vt)|0)+Math.imul(v,dt)|0))<<13)|0;h=((u=u+Math.imul(v,vt)|0)+(i>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,n=Math.imul(R,X),i=(i=Math.imul(R,J))+Math.imul(D,X)|0,u=Math.imul(D,J),n=n+Math.imul(H,z)|0,i=(i=i+Math.imul(H,Z)|0)+Math.imul(x,z)|0,u=u+Math.imul(x,Z)|0,n=n+Math.imul(B,$)|0,i=(i=i+Math.imul(B,tt)|0)+Math.imul(C,$)|0,u=u+Math.imul(C,tt)|0,n=n+Math.imul(M,rt)|0,i=(i=i+Math.imul(M,nt)|0)+Math.imul(A,rt)|0,u=u+Math.imul(A,nt)|0,n=n+Math.imul(O,ut)|0,i=(i=i+Math.imul(O,ot)|0)+Math.imul(P,ut)|0,u=u+Math.imul(P,ot)|0,n=n+Math.imul(E,at)|0,i=(i=i+Math.imul(E,ht)|0)+Math.imul(k,at)|0,u=u+Math.imul(k,ht)|0,n=n+Math.imul(_,ct)|0,i=(i=i+Math.imul(_,pt)|0)+Math.imul(b,ct)|0,u=u+Math.imul(b,pt)|0;var Pt=(h+(n=n+Math.imul(y,dt)|0)|0)+((8191&(i=(i=i+Math.imul(y,vt)|0)+Math.imul(g,dt)|0))<<13)|0;h=((u=u+Math.imul(g,vt)|0)+(i>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,n=Math.imul(R,z),i=(i=Math.imul(R,Z))+Math.imul(D,z)|0,u=Math.imul(D,Z),n=n+Math.imul(H,$)|0,i=(i=i+Math.imul(H,tt)|0)+Math.imul(x,$)|0,u=u+Math.imul(x,tt)|0,n=n+Math.imul(B,rt)|0,i=(i=i+Math.imul(B,nt)|0)+Math.imul(C,rt)|0,u=u+Math.imul(C,nt)|0,n=n+Math.imul(M,ut)|0,i=(i=i+Math.imul(M,ot)|0)+Math.imul(A,ut)|0,u=u+Math.imul(A,ot)|0,n=n+Math.imul(O,at)|0,i=(i=i+Math.imul(O,ht)|0)+Math.imul(P,at)|0,u=u+Math.imul(P,ht)|0,n=n+Math.imul(E,ct)|0,i=(i=i+Math.imul(E,pt)|0)+Math.imul(k,ct)|0,u=u+Math.imul(k,pt)|0;var It=(h+(n=n+Math.imul(_,dt)|0)|0)+((8191&(i=(i=i+Math.imul(_,vt)|0)+Math.imul(b,dt)|0))<<13)|0;h=((u=u+Math.imul(b,vt)|0)+(i>>>13)|0)+(It>>>26)|0,It&=67108863,n=Math.imul(R,$),i=(i=Math.imul(R,tt))+Math.imul(D,$)|0,u=Math.imul(D,tt),n=n+Math.imul(H,rt)|0,i=(i=i+Math.imul(H,nt)|0)+Math.imul(x,rt)|0,u=u+Math.imul(x,nt)|0,n=n+Math.imul(B,ut)|0,i=(i=i+Math.imul(B,ot)|0)+Math.imul(C,ut)|0,u=u+Math.imul(C,ot)|0,n=n+Math.imul(M,at)|0,i=(i=i+Math.imul(M,ht)|0)+Math.imul(A,at)|0,u=u+Math.imul(A,ht)|0,n=n+Math.imul(O,ct)|0,i=(i=i+Math.imul(O,pt)|0)+Math.imul(P,ct)|0,u=u+Math.imul(P,pt)|0;var Mt=(h+(n=n+Math.imul(E,dt)|0)|0)+((8191&(i=(i=i+Math.imul(E,vt)|0)+Math.imul(k,dt)|0))<<13)|0;h=((u=u+Math.imul(k,vt)|0)+(i>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,n=Math.imul(R,rt),i=(i=Math.imul(R,nt))+Math.imul(D,rt)|0,u=Math.imul(D,nt),n=n+Math.imul(H,ut)|0,i=(i=i+Math.imul(H,ot)|0)+Math.imul(x,ut)|0,u=u+Math.imul(x,ot)|0,n=n+Math.imul(B,at)|0,i=(i=i+Math.imul(B,ht)|0)+Math.imul(C,at)|0,u=u+Math.imul(C,ht)|0,n=n+Math.imul(M,ct)|0,i=(i=i+Math.imul(M,pt)|0)+Math.imul(A,ct)|0,u=u+Math.imul(A,pt)|0;var At=(h+(n=n+Math.imul(O,dt)|0)|0)+((8191&(i=(i=i+Math.imul(O,vt)|0)+Math.imul(P,dt)|0))<<13)|0;h=((u=u+Math.imul(P,vt)|0)+(i>>>13)|0)+(At>>>26)|0,At&=67108863,n=Math.imul(R,ut),i=(i=Math.imul(R,ot))+Math.imul(D,ut)|0,u=Math.imul(D,ot),n=n+Math.imul(H,at)|0,i=(i=i+Math.imul(H,ht)|0)+Math.imul(x,at)|0,u=u+Math.imul(x,ht)|0,n=n+Math.imul(B,ct)|0,i=(i=i+Math.imul(B,pt)|0)+Math.imul(C,ct)|0,u=u+Math.imul(C,pt)|0;var Nt=(h+(n=n+Math.imul(M,dt)|0)|0)+((8191&(i=(i=i+Math.imul(M,vt)|0)+Math.imul(A,dt)|0))<<13)|0;h=((u=u+Math.imul(A,vt)|0)+(i>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,n=Math.imul(R,at),i=(i=Math.imul(R,ht))+Math.imul(D,at)|0,u=Math.imul(D,ht),n=n+Math.imul(H,ct)|0,i=(i=i+Math.imul(H,pt)|0)+Math.imul(x,ct)|0,u=u+Math.imul(x,pt)|0;var Bt=(h+(n=n+Math.imul(B,dt)|0)|0)+((8191&(i=(i=i+Math.imul(B,vt)|0)+Math.imul(C,dt)|0))<<13)|0;h=((u=u+Math.imul(C,vt)|0)+(i>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,n=Math.imul(R,ct),i=(i=Math.imul(R,pt))+Math.imul(D,ct)|0,u=Math.imul(D,pt);var Ct=(h+(n=n+Math.imul(H,dt)|0)|0)+((8191&(i=(i=i+Math.imul(H,vt)|0)+Math.imul(x,dt)|0))<<13)|0;h=((u=u+Math.imul(x,vt)|0)+(i>>>13)|0)+(Ct>>>26)|0,Ct&=67108863;var Ut=(h+(n=Math.imul(R,dt))|0)+((8191&(i=(i=Math.imul(R,vt))+Math.imul(D,dt)|0))<<13)|0;return h=((u=Math.imul(D,vt))+(i>>>13)|0)+(Ut>>>26)|0,Ut&=67108863,a[0]=mt,a[1]=yt,a[2]=gt,a[3]=wt,a[4]=_t,a[5]=bt,a[6]=St,a[7]=Et,a[8]=kt,a[9]=Tt,a[10]=Ot,a[11]=Pt,a[12]=It,a[13]=Mt,a[14]=At,a[15]=Nt,a[16]=Bt,a[17]=Ct,a[18]=Ut,0!==h&&(a[19]=h,r.length++),r};function d(t,e,r){return(new v).mulp(t,e,r)}function v(t,e){this.x=t,this.y=e}Math.imul||(l=p),u.prototype.mulTo=function(t,e){var r=this.length+t.length;return 10===this.length&&10===t.length?l(this,t,e):r<63?p(this,t,e):r<1024?function(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var n=0,i=0,u=0;u<r.length-1;u++){var o=i;i=0;for(var s=67108863&n,a=Math.min(u,e.length-1),h=Math.max(0,u-t.length+1);h<=a;h++){var f=u-h,c=(0|t.words[f])*(0|e.words[h]),p=67108863&c;s=67108863&(p=p+s|0),i+=(o=(o=o+(c/67108864|0)|0)+(p>>>26)|0)>>>26,o&=67108863}r.words[u]=s,n=o,o=i}return 0!==n?r.words[u]=n:r.length--,r.strip()}(this,t,e):d(this,t,e)},v.prototype.makeRBT=function(t){for(var e=new Array(t),r=u.prototype._countBits(t)-1,n=0;n<t;n++)e[n]=this.revBin(n,r,t);return e},v.prototype.revBin=function(t,e,r){if(0===t||t===r-1)return t;for(var n=0,i=0;i<e;i++)n|=(1&t)<<e-i-1,t>>=1;return n},v.prototype.permute=function(t,e,r,n,i,u){for(var o=0;o<u;o++)n[o]=e[t[o]],i[o]=r[t[o]]},v.prototype.transform=function(t,e,r,n,i,u){this.permute(u,t,e,r,n,i);for(var o=1;o<i;o<<=1)for(var s=o<<1,a=Math.cos(2*Math.PI/s),h=Math.sin(2*Math.PI/s),f=0;f<i;f+=s)for(var c=a,p=h,l=0;l<o;l++){var d=r[f+l],v=n[f+l],m=r[f+l+o],y=n[f+l+o],g=c*m-p*y;y=c*y+p*m,m=g,r[f+l]=d+m,n[f+l]=v+y,r[f+l+o]=d-m,n[f+l+o]=v-y,l!==s&&(g=a*c-h*p,p=a*p+h*c,c=g)}},v.prototype.guessLen13b=function(t,e){var r=1|Math.max(e,t),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},v.prototype.conjugate=function(t,e,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=t[n];t[n]=t[r-n-1],t[r-n-1]=i,i=e[n],e[n]=-e[r-n-1],e[r-n-1]=-i}},v.prototype.normalize13b=function(t,e){for(var r=0,n=0;n<e/2;n++){var i=8192*Math.round(t[2*n+1]/e)+Math.round(t[2*n]/e)+r;t[n]=67108863&i,r=i<67108864?0:i/67108864|0}return t},v.prototype.convert13b=function(t,e,r,i){for(var u=0,o=0;o<e;o++)u+=0|t[o],r[2*o]=8191&u,u>>>=13,r[2*o+1]=8191&u,u>>>=13;for(o=2*e;o<i;++o)r[o]=0;n(0===u),n(0===(-8192&u))},v.prototype.stub=function(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=0;return e},v.prototype.mulp=function(t,e,r){var n=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(n),u=this.stub(n),o=new Array(n),s=new Array(n),a=new Array(n),h=new Array(n),f=new Array(n),c=new Array(n),p=r.words;p.length=n,this.convert13b(t.words,t.length,o,n),this.convert13b(e.words,e.length,h,n),this.transform(o,u,s,a,n,i),this.transform(h,u,f,c,n,i);for(var l=0;l<n;l++){var d=s[l]*f[l]-a[l]*c[l];a[l]=s[l]*c[l]+a[l]*f[l],s[l]=d}return this.conjugate(s,a,n),this.transform(s,a,p,u,n,i),this.conjugate(p,u,n),this.normalize13b(p,n),r.negative=t.negative^e.negative,r.length=t.length+e.length,r.strip()},u.prototype.mul=function(t){var e=new u(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},u.prototype.mulf=function(t){var e=new u(null);return e.words=new Array(this.length+t.length),d(this,t,e)},u.prototype.imul=function(t){return this.clone().mulTo(t,this)},u.prototype.imuln=function(t){n("number"===typeof t),n(t<67108864);for(var e=0,r=0;r<this.length;r++){var i=(0|this.words[r])*t,u=(67108863&i)+(67108863&e);e>>=26,e+=i/67108864|0,e+=u>>>26,this.words[r]=67108863&u}return 0!==e&&(this.words[r]=e,this.length++),this},u.prototype.muln=function(t){return this.clone().imuln(t)},u.prototype.sqr=function(){return this.mul(this)},u.prototype.isqr=function(){return this.imul(this.clone())},u.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),r=0;r<e.length;r++){var n=r/26|0,i=r%26;e[r]=(t.words[n]&1<<i)>>>i}return e}(t);if(0===e.length)return new u(1);for(var r=this,n=0;n<e.length&&0===e[n];n++,r=r.sqr());if(++n<e.length)for(var i=r.sqr();n<e.length;n++,i=i.sqr())0!==e[n]&&(r=r.mul(i));return r},u.prototype.iushln=function(t){n("number"===typeof t&&t>=0);var e,r=t%26,i=(t-r)/26,u=67108863>>>26-r<<26-r;if(0!==r){var o=0;for(e=0;e<this.length;e++){var s=this.words[e]&u,a=(0|this.words[e])-s<<r;this.words[e]=a|o,o=s>>>26-r}o&&(this.words[e]=o,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this.strip()},u.prototype.ishln=function(t){return n(0===this.negative),this.iushln(t)},u.prototype.iushrn=function(t,e,r){var i;n("number"===typeof t&&t>=0),i=e?(e-e%26)/26:0;var u=t%26,o=Math.min((t-u)/26,this.length),s=67108863^67108863>>>u<<u,a=r;if(i-=o,i=Math.max(0,i),a){for(var h=0;h<o;h++)a.words[h]=this.words[h];a.length=o}if(0===o);else if(this.length>o)for(this.length-=o,h=0;h<this.length;h++)this.words[h]=this.words[h+o];else this.words[0]=0,this.length=1;var f=0;for(h=this.length-1;h>=0&&(0!==f||h>=i);h--){var c=0|this.words[h];this.words[h]=f<<26-u|c>>>u,f=c&s}return a&&0!==f&&(a.words[a.length++]=f),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},u.prototype.ishrn=function(t,e,r){return n(0===this.negative),this.iushrn(t,e,r)},u.prototype.shln=function(t){return this.clone().ishln(t)},u.prototype.ushln=function(t){return this.clone().iushln(t)},u.prototype.shrn=function(t){return this.clone().ishrn(t)},u.prototype.ushrn=function(t){return this.clone().iushrn(t)},u.prototype.testn=function(t){n("number"===typeof t&&t>=0);var e=t%26,r=(t-e)/26,i=1<<e;return!(this.length<=r)&&!!(this.words[r]&i)},u.prototype.imaskn=function(t){n("number"===typeof t&&t>=0);var e=t%26,r=(t-e)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==e&&r++,this.length=Math.min(r,this.length),0!==e){var i=67108863^67108863>>>e<<e;this.words[this.length-1]&=i}return this.strip()},u.prototype.maskn=function(t){return this.clone().imaskn(t)},u.prototype.iaddn=function(t){return n("number"===typeof t),n(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},u.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},u.prototype.isubn=function(t){if(n("number"===typeof t),n(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},u.prototype.addn=function(t){return this.clone().iaddn(t)},u.prototype.subn=function(t){return this.clone().isubn(t)},u.prototype.iabs=function(){return this.negative=0,this},u.prototype.abs=function(){return this.clone().iabs()},u.prototype._ishlnsubmul=function(t,e,r){var i,u,o=t.length+r;this._expand(o);var s=0;for(i=0;i<t.length;i++){u=(0|this.words[i+r])+s;var a=(0|t.words[i])*e;s=((u-=67108863&a)>>26)-(a/67108864|0),this.words[i+r]=67108863&u}for(;i<this.length-r;i++)s=(u=(0|this.words[i+r])+s)>>26,this.words[i+r]=67108863&u;if(0===s)return this.strip();for(n(-1===s),s=0,i=0;i<this.length;i++)s=(u=-(0|this.words[i])+s)>>26,this.words[i]=67108863&u;return this.negative=1,this.strip()},u.prototype._wordDiv=function(t,e){var r=(this.length,t.length),n=this.clone(),i=t,o=0|i.words[i.length-1];0!==(r=26-this._countBits(o))&&(i=i.ushln(r),n.iushln(r),o=0|i.words[i.length-1]);var s,a=n.length-i.length;if("mod"!==e){(s=new u(null)).length=a+1,s.words=new Array(s.length);for(var h=0;h<s.length;h++)s.words[h]=0}var f=n.clone()._ishlnsubmul(i,1,a);0===f.negative&&(n=f,s&&(s.words[a]=1));for(var c=a-1;c>=0;c--){var p=67108864*(0|n.words[i.length+c])+(0|n.words[i.length+c-1]);for(p=Math.min(p/o|0,67108863),n._ishlnsubmul(i,p,c);0!==n.negative;)p--,n.negative=0,n._ishlnsubmul(i,1,c),n.isZero()||(n.negative^=1);s&&(s.words[c]=p)}return s&&s.strip(),n.strip(),"div"!==e&&0!==r&&n.iushrn(r),{div:s||null,mod:n}},u.prototype.divmod=function(t,e,r){return n(!t.isZero()),this.isZero()?{div:new u(0),mod:new u(0)}:0!==this.negative&&0===t.negative?(s=this.neg().divmod(t,e),"mod"!==e&&(i=s.div.neg()),"div"!==e&&(o=s.mod.neg(),r&&0!==o.negative&&o.iadd(t)),{div:i,mod:o}):0===this.negative&&0!==t.negative?(s=this.divmod(t.neg(),e),"mod"!==e&&(i=s.div.neg()),{div:i,mod:s.mod}):0!==(this.negative&t.negative)?(s=this.neg().divmod(t.neg(),e),"div"!==e&&(o=s.mod.neg(),r&&0!==o.negative&&o.isub(t)),{div:s.div,mod:o}):t.length>this.length||this.cmp(t)<0?{div:new u(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new u(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new u(this.modn(t.words[0]))}:this._wordDiv(t,e);var i,o,s},u.prototype.div=function(t){return this.divmod(t,"div",!1).div},u.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},u.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},u.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,n=t.ushrn(1),i=t.andln(1),u=r.cmp(n);return u<0||1===i&&0===u?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},u.prototype.modn=function(t){n(t<=67108863);for(var e=(1<<26)%t,r=0,i=this.length-1;i>=0;i--)r=(e*r+(0|this.words[i]))%t;return r},u.prototype.idivn=function(t){n(t<=67108863);for(var e=0,r=this.length-1;r>=0;r--){var i=(0|this.words[r])+67108864*e;this.words[r]=i/t|0,e=i%t}return this.strip()},u.prototype.divn=function(t){return this.clone().idivn(t)},u.prototype.egcd=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i=new u(1),o=new u(0),s=new u(0),a=new u(1),h=0;e.isEven()&&r.isEven();)e.iushrn(1),r.iushrn(1),++h;for(var f=r.clone(),c=e.clone();!e.isZero();){for(var p=0,l=1;0===(e.words[0]&l)&&p<26;++p,l<<=1);if(p>0)for(e.iushrn(p);p-- >0;)(i.isOdd()||o.isOdd())&&(i.iadd(f),o.isub(c)),i.iushrn(1),o.iushrn(1);for(var d=0,v=1;0===(r.words[0]&v)&&d<26;++d,v<<=1);if(d>0)for(r.iushrn(d);d-- >0;)(s.isOdd()||a.isOdd())&&(s.iadd(f),a.isub(c)),s.iushrn(1),a.iushrn(1);e.cmp(r)>=0?(e.isub(r),i.isub(s),o.isub(a)):(r.isub(e),s.isub(i),a.isub(o))}return{a:s,b:a,gcd:r.iushln(h)}},u.prototype._invmp=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i,o=new u(1),s=new u(0),a=r.clone();e.cmpn(1)>0&&r.cmpn(1)>0;){for(var h=0,f=1;0===(e.words[0]&f)&&h<26;++h,f<<=1);if(h>0)for(e.iushrn(h);h-- >0;)o.isOdd()&&o.iadd(a),o.iushrn(1);for(var c=0,p=1;0===(r.words[0]&p)&&c<26;++c,p<<=1);if(c>0)for(r.iushrn(c);c-- >0;)s.isOdd()&&s.iadd(a),s.iushrn(1);e.cmp(r)>=0?(e.isub(r),o.isub(s)):(r.isub(e),s.isub(o))}return(i=0===e.cmpn(1)?o:s).cmpn(0)<0&&i.iadd(t),i},u.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var n=0;e.isEven()&&r.isEven();n++)e.iushrn(1),r.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=e.cmp(r);if(i<0){var u=e;e=r,r=u}else if(0===i||0===r.cmpn(1))break;e.isub(r)}return r.iushln(n)},u.prototype.invm=function(t){return this.egcd(t).a.umod(t)},u.prototype.isEven=function(){return 0===(1&this.words[0])},u.prototype.isOdd=function(){return 1===(1&this.words[0])},u.prototype.andln=function(t){return this.words[0]&t},u.prototype.bincn=function(t){n("number"===typeof t);var e=t%26,r=(t-e)/26,i=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var u=i,o=r;0!==u&&o<this.length;o++){var s=0|this.words[o];u=(s+=u)>>>26,s&=67108863,this.words[o]=s}return 0!==u&&(this.words[o]=u,this.length++),this},u.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},u.prototype.cmpn=function(t){var e,r=t<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)e=1;else{r&&(t=-t),n(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},u.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},u.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|t.words[r];if(n!==i){n<i?e=-1:n>i&&(e=1);break}}return e},u.prototype.gtn=function(t){return 1===this.cmpn(t)},u.prototype.gt=function(t){return 1===this.cmp(t)},u.prototype.gten=function(t){return this.cmpn(t)>=0},u.prototype.gte=function(t){return this.cmp(t)>=0},u.prototype.ltn=function(t){return-1===this.cmpn(t)},u.prototype.lt=function(t){return-1===this.cmp(t)},u.prototype.lten=function(t){return this.cmpn(t)<=0},u.prototype.lte=function(t){return this.cmp(t)<=0},u.prototype.eqn=function(t){return 0===this.cmpn(t)},u.prototype.eq=function(t){return 0===this.cmp(t)},u.red=function(t){return new S(t)},u.prototype.toRed=function(t){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},u.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},u.prototype._forceRed=function(t){return this.red=t,this},u.prototype.forceRed=function(t){return n(!this.red,"Already a number in reduction context"),this._forceRed(t)},u.prototype.redAdd=function(t){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},u.prototype.redIAdd=function(t){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},u.prototype.redSub=function(t){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},u.prototype.redISub=function(t){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},u.prototype.redShl=function(t){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},u.prototype.redMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},u.prototype.redIMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},u.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},u.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},u.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},u.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},u.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},u.prototype.redPow=function(t){return n(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var m={k256:null,p224:null,p192:null,p25519:null};function y(t,e){this.name=t,this.p=new u(e,16),this.n=this.p.bitLength(),this.k=new u(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function g(){y.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function w(){y.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function _(){y.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function b(){y.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function S(t){if("string"===typeof t){var e=u._prime(t);this.m=e.p,this.prime=e}else n(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function E(t){S.call(this,t),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new u(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}y.prototype._tmp=function(){var t=new u(null);return t.words=new Array(Math.ceil(this.n/13)),t},y.prototype.ireduce=function(t){var e,r=t;do{this.split(r,this.tmp),e=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(e>this.n);var n=e<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},y.prototype.split=function(t,e){t.iushrn(this.n,0,e)},y.prototype.imulK=function(t){return t.imul(this.k)},i(g,y),g.prototype.split=function(t,e){for(var r=4194303,n=Math.min(t.length,9),i=0;i<n;i++)e.words[i]=t.words[i];if(e.length=n,t.length<=9)return t.words[0]=0,void(t.length=1);var u=t.words[9];for(e.words[e.length++]=u&r,i=10;i<t.length;i++){var o=0|t.words[i];t.words[i-10]=(o&r)<<4|u>>>22,u=o}u>>>=22,t.words[i-10]=u,0===u&&t.length>10?t.length-=10:t.length-=9},g.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var n=0|t.words[r];e+=977*n,t.words[r]=67108863&e,e=64*n+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(w,y),i(_,y),i(b,y),b.prototype.imulK=function(t){for(var e=0,r=0;r<t.length;r++){var n=19*(0|t.words[r])+e,i=67108863&n;n>>>=26,t.words[r]=i,e=n}return 0!==e&&(t.words[t.length++]=e),t},u._prime=function(t){if(m[t])return m[t];var e;if("k256"===t)e=new g;else if("p224"===t)e=new w;else if("p192"===t)e=new _;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new b}return m[t]=e,e},S.prototype._verify1=function(t){n(0===t.negative,"red works only with positives"),n(t.red,"red works only with red numbers")},S.prototype._verify2=function(t,e){n(0===(t.negative|e.negative),"red works only with positives"),n(t.red&&t.red===e.red,"red works only with red numbers")},S.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},S.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},S.prototype.add=function(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},S.prototype.iadd=function(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},S.prototype.sub=function(t,e){this._verify2(t,e);var r=t.sub(e);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},S.prototype.isub=function(t,e){this._verify2(t,e);var r=t.isub(e);return r.cmpn(0)<0&&r.iadd(this.m),r},S.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},S.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},S.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},S.prototype.isqr=function(t){return this.imul(t,t.clone())},S.prototype.sqr=function(t){return this.mul(t,t)},S.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(n(e%2===1),3===e){var r=this.m.add(new u(1)).iushrn(2);return this.pow(t,r)}for(var i=this.m.subn(1),o=0;!i.isZero()&&0===i.andln(1);)o++,i.iushrn(1);n(!i.isZero());var s=new u(1).toRed(this),a=s.redNeg(),h=this.m.subn(1).iushrn(1),f=this.m.bitLength();for(f=new u(2*f*f).toRed(this);0!==this.pow(f,h).cmp(a);)f.redIAdd(a);for(var c=this.pow(f,i),p=this.pow(t,i.addn(1).iushrn(1)),l=this.pow(t,i),d=o;0!==l.cmp(s);){for(var v=l,m=0;0!==v.cmp(s);m++)v=v.redSqr();n(m<d);var y=this.pow(c,new u(1).iushln(d-m-1));p=p.redMul(y),c=y.redSqr(),l=l.redMul(c),d=m}return p},S.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},S.prototype.pow=function(t,e){if(e.isZero())return new u(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=new Array(16);r[0]=new u(1).toRed(this),r[1]=t;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],t);var i=r[0],o=0,s=0,a=e.bitLength()%26;for(0===a&&(a=26),n=e.length-1;n>=0;n--){for(var h=e.words[n],f=a-1;f>=0;f--){var c=h>>f&1;i!==r[0]&&(i=this.sqr(i)),0!==c||0!==o?(o<<=1,o|=c,(4===++s||0===n&&0===f)&&(i=this.mul(i,r[o]),s=0,o=0)):s=0}a=26}return i},S.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},S.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},u.mont=function(t){return new E(t)},i(E,S),E.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},E.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},E.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),u=i;return i.cmp(this.m)>=0?u=i.isub(this.m):i.cmpn(0)<0&&(u=i.iadd(this.m)),u._forceRed(this)},E.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new u(0)._forceRed(this);var r=t.mul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},E.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t,this)}).call(this,r(59)(t))},4499:function(t,e,r){(function(e){var n=r(776),i=e.alloc(1,1),u=e.alloc(1,0);t.exports=function(t,r,o,s,a){var h=e.alloc(32,0),f=e.alloc(32,1);h=n("sha256",h).update(f).update(u).update(r).update(t).update(a||"").digest(),f=n("sha256",h).update(f).digest(),h=n("sha256",h).update(f).update(i).update(r).update(t).update(a||"").digest(),f=n("sha256",h).update(f).digest();for(var c=f=n("sha256",h).update(f).digest();!s(c)||!o(c);)h=n("sha256",h).update(f).update(u).digest(),f=n("sha256",h).update(f).digest(),c=f=n("sha256",h).update(f).digest();return c}}).call(this,r(12).Buffer)},4500:function(t,e,r){(function(e){var n=r(3606),i=r(3757);function u(t){return e.isBuffer(t)}function o(t){return"string"===typeof t&&/^([0-9a-f]{2})+$/i.test(t)}function s(t,e){var r=t.toJSON();function n(n){if(!t(n))return!1;if(n.length===e)return!0;throw i.tfCustomError(r+"(Length: "+e+")",r+"(Length: "+n.length+")")}return n.toJSON=function(){return r},n}var a=s.bind(null,n.Array),h=s.bind(null,u),f=s.bind(null,o),c=s.bind(null,n.String);var p=Math.pow(2,53)-1;var l={ArrayN:a,Buffer:u,BufferN:h,Finite:function(t){return"number"===typeof t&&isFinite(t)},Hex:o,HexN:f,Int8:function(t){return t<<24>>24===t},Int16:function(t){return t<<16>>16===t},Int32:function(t){return(0|t)===t},Int53:function(t){return"number"===typeof t&&t>=-p&&t<=p&&Math.floor(t)===t},Range:function(t,e,r){function i(n,i){return r(n,i)&&n>t&&n<e}return r=r||n.Number,i.toJSON=function(){return"".concat(r.toJSON()," between [").concat(t,", ").concat(e,"]")},i},StringN:c,UInt8:function(t){return(255&t)===t},UInt16:function(t){return(65535&t)===t},UInt32:function(t){return t>>>0===t},UInt53:function(t){return"number"===typeof t&&t>=0&&t<=p&&Math.floor(t)===t}};for(var d in l)l[d].toJSON=function(t){return t}.bind(null,d);t.exports=l}).call(this,r(12).Buffer)},4501:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(3053),i=r(3013),u=r(3115),o=r(3021),s=i.OPS;e.p2data=function(t,e){if(!t.data&&!t.output)throw new TypeError("Not enough data");e=Object.assign({validate:!0},e||{}),o({network:o.maybe(o.Object),output:o.maybe(o.Buffer),data:o.maybe(o.arrayOf(o.Buffer))},t);var r={name:"embed",network:t.network||n.bitcoin};if(u.prop(r,"output",(function(){if(t.data)return i.compile([s.OP_RETURN].concat(t.data))})),u.prop(r,"data",(function(){if(t.output)return i.decompile(t.output).slice(1)})),e.validate&&t.output){var a=i.decompile(t.output);if(a[0]!==s.OP_RETURN)throw new TypeError("Output is invalid");if(!a.slice(1).every(o.Buffer))throw new TypeError("Output is invalid");if(t.data&&!function(t,e){return t.length===e.length&&t.every((function(t,r){return t.equals(e[r])}))}(t.data,r.data))throw new TypeError("Data mismatch")}return Object.assign(r,t)}},4502:function(t,e,r){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.decode=function(t,e,r){e=e||4,r=void 0===r||r;var n=t.length;if(0===n)return 0;if(n>e)throw new TypeError("Script number overflow");if(r&&0===(127&t[n-1])&&(n<=1||0===(128&t[n-2])))throw new Error("Non-minimally encoded script number");if(5===n){var i=t.readUInt32LE(0),u=t.readUInt8(4);return 128&u?-(4294967296*(-129&u)+i):4294967296*u+i}for(var o=0,s=0;s<n;++s)o|=t[s]<<8*s;return 128&t[n-1]?-(o&~(128<<8*(n-1))):o},e.encode=function(e){for(var r=Math.abs(e),n=function(t){return t>2147483647?5:t>8388607?4:t>32767?3:t>127?2:t>0?1:0}(r),i=t.allocUnsafe(n),u=e<0,o=0;o<n;++o)i.writeUInt8(255&r,o),r>>=8;return 128&i[n-1]?i.writeUInt8(u?128:0,n-1):u&&(i[n-1]|=128),i}}).call(this,r(12).Buffer)},4503:function(t,e,r){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var n=r(3068),i=r(568),u=r(3021),o=t.alloc(1,0);function s(e){for(var r=0;0===e[r];)++r;return r===e.length?o:128&(e=e.slice(r))[0]?t.concat([o,e],1+e.length):e}function a(e){0===e[0]&&(e=e.slice(1));var r=t.alloc(32,0),n=Math.max(0,32-e.length);return e.copy(r,n),r}e.decode=function(e){var r=e.readUInt8(e.length-1),n=-129&r;if(n<=0||n>=4)throw new Error("Invalid hashType "+r);var u=i.decode(e.slice(0,-1)),o=a(u.r),s=a(u.s);return{signature:t.concat([o,s],64),hashType:r}},e.encode=function(e,r){u({signature:n.BufferN(64),hashType:n.UInt8},{signature:e,hashType:r});var o=-129&r;if(o<=0||o>=4)throw new Error("Invalid hashType "+r);var a=t.allocUnsafe(1);a.writeUInt8(r,0);var h=s(e.slice(0,32)),f=s(e.slice(32,64));return t.concat([i.encode(h,f),a])}}).call(this,r(12).Buffer)},4504:function(t,e,r){var n=r(3235);function i(t){return t<n.OP_PUSHDATA1?1:t<=255?2:t<=65535?3:5}t.exports={encodingLength:i,encode:function(t,e,r){var u=i(e);return 1===u?t.writeUInt8(e,r):2===u?(t.writeUInt8(n.OP_PUSHDATA1,r),t.writeUInt8(e,r+1)):3===u?(t.writeUInt8(n.OP_PUSHDATA2,r),t.writeUInt16LE(e,r+1)):(t.writeUInt8(n.OP_PUSHDATA4,r),t.writeUInt32LE(e,r+1)),u},decode:function(t,e){var r,i,u=t.readUInt8(e);if(u<n.OP_PUSHDATA1)r=u,i=1;else if(u===n.OP_PUSHDATA1){if(e+2>t.length)return null;r=t.readUInt8(e+1),i=2}else if(u===n.OP_PUSHDATA2){if(e+3>t.length)return null;r=t.readUInt16LE(e+1),i=3}else{if(e+5>t.length)return null;if(u!==n.OP_PUSHDATA4)throw new Error("Unexpected opcode");r=t.readUInt32LE(e+1),i=5}return{opcode:u,number:r,size:i}}}},4505:function(t,e,r){var n=r(3235),i={};for(var u in n){i[n[u]]=u}t.exports=i},4506:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(3053),i=r(3013),u=r(3115),o=i.OPS,s=r(3021),a=r(3089),h=o.OP_RESERVED;function f(t,e){return t.length===e.length&&t.every((function(t,r){return t.equals(e[r])}))}e.p2ms=function(t,e){if(!t.input&&!t.output&&(!t.pubkeys||void 0===t.m)&&!t.signatures)throw new TypeError("Not enough data");function r(t){return i.isCanonicalScriptSignature(t)||void 0!==(e.allowIncomplete&&t===o.OP_0)}e=Object.assign({validate:!0},e||{}),s({network:s.maybe(s.Object),m:s.maybe(s.Number),n:s.maybe(s.Number),output:s.maybe(s.Buffer),pubkeys:s.maybe(s.arrayOf(a.isPoint)),signatures:s.maybe(s.arrayOf(r)),input:s.maybe(s.Buffer)},t);var c={network:t.network||n.bitcoin},p=[],l=!1;function d(t){l||(l=!0,p=i.decompile(t),c.m=p[0]-h,c.n=p[p.length-2]-h,c.pubkeys=p.slice(1,-2))}if(u.prop(c,"output",(function(){if(t.m&&c.n&&t.pubkeys)return i.compile([].concat(h+t.m,t.pubkeys,h+c.n,o.OP_CHECKMULTISIG))})),u.prop(c,"m",(function(){if(c.output)return d(c.output),c.m})),u.prop(c,"n",(function(){if(c.pubkeys)return c.pubkeys.length})),u.prop(c,"pubkeys",(function(){if(t.output)return d(t.output),c.pubkeys})),u.prop(c,"signatures",(function(){if(t.input)return i.decompile(t.input).slice(1)})),u.prop(c,"input",(function(){if(t.signatures)return i.compile([o.OP_0].concat(t.signatures))})),u.prop(c,"witness",(function(){if(c.input)return[]})),u.prop(c,"name",(function(){if(c.m&&c.n)return"p2ms(".concat(c.m," of ").concat(c.n,")")})),e.validate){if(t.output){if(d(t.output),!s.Number(p[0]))throw new TypeError("Output is invalid");if(!s.Number(p[p.length-2]))throw new TypeError("Output is invalid");if(p[p.length-1]!==o.OP_CHECKMULTISIG)throw new TypeError("Output is invalid");if(c.m<=0||c.n>16||c.m>c.n||c.n!==p.length-3)throw new TypeError("Output is invalid");if(!c.pubkeys.every((function(t){return a.isPoint(t)})))throw new TypeError("Output is invalid");if(void 0!==t.m&&t.m!==c.m)throw new TypeError("m mismatch");if(void 0!==t.n&&t.n!==c.n)throw new TypeError("n mismatch");if(t.pubkeys&&!f(t.pubkeys,c.pubkeys))throw new TypeError("Pubkeys mismatch")}if(t.pubkeys){if(void 0!==t.n&&t.n!==t.pubkeys.length)throw new TypeError("Pubkey count mismatch");if(c.n=t.pubkeys.length,c.n<c.m)throw new TypeError("Pubkey count cannot be less than m")}if(t.signatures){if(t.signatures.length<c.m)throw new TypeError("Not enough signatures provided");if(t.signatures.length>c.m)throw new TypeError("Too many signatures provided")}if(t.input){if(t.input[0]!==o.OP_0)throw new TypeError("Input is invalid");if(0===c.signatures.length||!c.signatures.every(r))throw new TypeError("Input has invalid signature(s)");if(t.signatures&&!f(t.signatures,c.signatures))throw new TypeError("Signature mismatch");if(void 0!==t.m&&t.m!==t.signatures.length)throw new TypeError("Signature count mismatch")}}return Object.assign(c,t)}},4507:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(3053),i=r(3013),u=r(3115),o=r(3021),s=i.OPS,a=r(3089);e.p2pk=function(t,e){if(!t.input&&!t.output&&!t.pubkey&&!t.input&&!t.signature)throw new TypeError("Not enough data");e=Object.assign({validate:!0},e||{}),o({network:o.maybe(o.Object),output:o.maybe(o.Buffer),pubkey:o.maybe(a.isPoint),signature:o.maybe(i.isCanonicalScriptSignature),input:o.maybe(o.Buffer)},t);var r=u.value((function(){return i.decompile(t.input)})),h={name:"p2pk",network:t.network||n.bitcoin};if(u.prop(h,"output",(function(){if(t.pubkey)return i.compile([t.pubkey,s.OP_CHECKSIG])})),u.prop(h,"pubkey",(function(){if(t.output)return t.output.slice(1,-1)})),u.prop(h,"signature",(function(){if(t.input)return r()[0]})),u.prop(h,"input",(function(){if(t.signature)return i.compile([t.signature])})),u.prop(h,"witness",(function(){if(h.input)return[]})),e.validate){if(t.output){if(t.output[t.output.length-1]!==s.OP_CHECKSIG)throw new TypeError("Output is invalid");if(!a.isPoint(h.pubkey))throw new TypeError("Output pubkey is invalid");if(t.pubkey&&!t.pubkey.equals(h.pubkey))throw new TypeError("Pubkey mismatch")}if(t.signature&&t.input&&!t.input.equals(h.input))throw new TypeError("Signature mismatch");if(t.input){if(1!==r().length)throw new TypeError("Input is invalid");if(!i.isCanonicalScriptSignature(h.signature))throw new TypeError("Input has invalid signature")}}return Object.assign(h,t)}},4508:function(t,e,r){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var n=r(3081),i=r(3053),u=r(3013),o=r(3115),s=r(3021),a=u.OPS,h=r(3089),f=r(3139);e.p2pkh=function(e,r){if(!e.address&&!e.hash&&!e.output&&!e.pubkey&&!e.input)throw new TypeError("Not enough data");r=Object.assign({validate:!0},r||{}),s({network:s.maybe(s.Object),address:s.maybe(s.String),hash:s.maybe(s.BufferN(20)),output:s.maybe(s.BufferN(25)),pubkey:s.maybe(h.isPoint),signature:s.maybe(u.isCanonicalScriptSignature),input:s.maybe(s.Buffer)},e);var c=o.value((function(){var t=f.decode(e.address);return{version:t.readUInt8(0),hash:t.slice(1)}})),p=o.value((function(){return u.decompile(e.input)})),l=e.network||i.bitcoin,d={name:"p2pkh",network:l};if(o.prop(d,"address",(function(){if(d.hash){var e=t.allocUnsafe(21);return e.writeUInt8(l.pubKeyHash,0),d.hash.copy(e,1),f.encode(e)}})),o.prop(d,"hash",(function(){return e.output?e.output.slice(3,23):e.address?c().hash:e.pubkey||d.pubkey?n.hash160(e.pubkey||d.pubkey):void 0})),o.prop(d,"output",(function(){if(d.hash)return u.compile([a.OP_DUP,a.OP_HASH160,d.hash,a.OP_EQUALVERIFY,a.OP_CHECKSIG])})),o.prop(d,"pubkey",(function(){if(e.input)return p()[1]})),o.prop(d,"signature",(function(){if(e.input)return p()[0]})),o.prop(d,"input",(function(){if(e.pubkey&&e.signature)return u.compile([e.signature,e.pubkey])})),o.prop(d,"witness",(function(){if(d.input)return[]})),r.validate){var v=t.from([]);if(e.address){if(c().version!==l.pubKeyHash)throw new TypeError("Invalid version or Network mismatch");if(20!==c().hash.length)throw new TypeError("Invalid address");v=c().hash}if(e.hash){if(v.length>0&&!v.equals(e.hash))throw new TypeError("Hash mismatch");v=e.hash}if(e.output){if(25!==e.output.length||e.output[0]!==a.OP_DUP||e.output[1]!==a.OP_HASH160||20!==e.output[2]||e.output[23]!==a.OP_EQUALVERIFY||e.output[24]!==a.OP_CHECKSIG)throw new TypeError("Output is invalid");var m=e.output.slice(3,23);if(v.length>0&&!v.equals(m))throw new TypeError("Hash mismatch");v=m}if(e.pubkey){var y=n.hash160(e.pubkey);if(v.length>0&&!v.equals(y))throw new TypeError("Hash mismatch");v=y}if(e.input){var g=p();if(2!==g.length)throw new TypeError("Input is invalid");if(!u.isCanonicalScriptSignature(g[0]))throw new TypeError("Input has invalid signature");if(!h.isPoint(g[1]))throw new TypeError("Input has invalid pubkey");if(e.signature&&!e.signature.equals(g[0]))throw new TypeError("Signature mismatch");if(e.pubkey&&!e.pubkey.equals(g[1]))throw new TypeError("Pubkey mismatch");var w=n.hash160(g[1]);if(v.length>0&&!v.equals(w))throw new TypeError("Hash mismatch")}}return Object.assign(d,e)}}).call(this,r(12).Buffer)},4509:function(t,e,r){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var n=r(3081),i=r(3053),u=r(3013),o=r(3115),s=r(3021),a=u.OPS,h=r(3139);e.p2sh=function(e,r){if(!e.address&&!e.hash&&!e.output&&!e.redeem&&!e.input)throw new TypeError("Not enough data");r=Object.assign({validate:!0},r||{}),s({network:s.maybe(s.Object),address:s.maybe(s.String),hash:s.maybe(s.BufferN(20)),output:s.maybe(s.BufferN(23)),redeem:s.maybe({network:s.maybe(s.Object),output:s.maybe(s.Buffer),input:s.maybe(s.Buffer),witness:s.maybe(s.arrayOf(s.Buffer))}),input:s.maybe(s.Buffer),witness:s.maybe(s.arrayOf(s.Buffer))},e);var f=e.network;f||(f=e.redeem&&e.redeem.network||i.bitcoin);var c={network:f},p=o.value((function(){var t=h.decode(e.address);return{version:t.readUInt8(0),hash:t.slice(1)}})),l=o.value((function(){return u.decompile(e.input)})),d=o.value((function(){var t=l();return{network:f,output:t[t.length-1],input:u.compile(t.slice(0,-1)),witness:e.witness||[]}}));if(o.prop(c,"address",(function(){if(c.hash){var e=t.allocUnsafe(21);return e.writeUInt8(c.network.scriptHash,0),c.hash.copy(e,1),h.encode(e)}})),o.prop(c,"hash",(function(){return e.output?e.output.slice(2,22):e.address?p().hash:c.redeem&&c.redeem.output?n.hash160(c.redeem.output):void 0})),o.prop(c,"output",(function(){if(c.hash)return u.compile([a.OP_HASH160,c.hash,a.OP_EQUAL])})),o.prop(c,"redeem",(function(){if(e.input)return d()})),o.prop(c,"input",(function(){if(e.redeem&&e.redeem.input&&e.redeem.output)return u.compile([].concat(u.decompile(e.redeem.input),e.redeem.output))})),o.prop(c,"witness",(function(){return c.redeem&&c.redeem.witness?c.redeem.witness:c.input?[]:void 0})),o.prop(c,"name",(function(){var t=["p2sh"];return void 0!==c.redeem&&t.push(c.redeem.name),t.join("-")})),r.validate){var v=t.from([]);if(e.address){if(p().version!==f.scriptHash)throw new TypeError("Invalid version or Network mismatch");if(20!==p().hash.length)throw new TypeError("Invalid address");v=p().hash}if(e.hash){if(v.length>0&&!v.equals(e.hash))throw new TypeError("Hash mismatch");v=e.hash}if(e.output){if(23!==e.output.length||e.output[0]!==a.OP_HASH160||20!==e.output[1]||e.output[22]!==a.OP_EQUAL)throw new TypeError("Output is invalid");var m=e.output.slice(2,22);if(v.length>0&&!v.equals(m))throw new TypeError("Hash mismatch");v=m}var y=function(t){if(t.output){var e=u.decompile(t.output);if(!e||e.length<1)throw new TypeError("Redeem.output too short");var r=n.hash160(t.output);if(v.length>0&&!v.equals(r))throw new TypeError("Hash mismatch");v=r}if(t.input){var i=t.input.length>0,o=t.witness&&t.witness.length>0;if(!i&&!o)throw new TypeError("Empty input");if(i&&o)throw new TypeError("Input and witness provided");if(i){var s=u.decompile(t.input);if(!u.isPushOnly(s))throw new TypeError("Non push-only scriptSig")}}};if(e.input){var g=l();if(!g||g.length<1)throw new TypeError("Input too short");if(!t.isBuffer(d().output))throw new TypeError("Input is invalid");y(d())}if(e.redeem){if(e.redeem.network&&e.redeem.network!==f)throw new TypeError("Network mismatch");if(e.input){var w=d();if(e.redeem.output&&!e.redeem.output.equals(w.output))throw new TypeError("Redeem.output mismatch");if(e.redeem.input&&!e.redeem.input.equals(w.input))throw new TypeError("Redeem.input mismatch")}y(e.redeem)}if(e.witness&&e.redeem&&e.redeem.witness&&!function(t,e){return t.length===e.length&&t.every((function(t,r){return t.equals(e[r])}))}(e.redeem.witness,e.witness))throw new TypeError("Witness and redeem.witness mismatch")}return Object.assign(c,e)}}).call(this,r(12).Buffer)},4510:function(t,e,r){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var n=r(3081),i=r(3053),u=r(3013),o=r(3115),s=r(3021),a=u.OPS,h=r(3089),f=r(378),c=t.alloc(0);e.p2wpkh=function(e,r){if(!e.address&&!e.hash&&!e.output&&!e.pubkey&&!e.witness)throw new TypeError("Not enough data");r=Object.assign({validate:!0},r||{}),s({address:s.maybe(s.String),hash:s.maybe(s.BufferN(20)),input:s.maybe(s.BufferN(0)),network:s.maybe(s.Object),output:s.maybe(s.BufferN(22)),pubkey:s.maybe(h.isPoint),signature:s.maybe(u.isCanonicalScriptSignature),witness:s.maybe(s.arrayOf(s.Buffer))},e);var p=o.value((function(){var r=f.decode(e.address),n=r.words.shift(),i=f.fromWords(r.words);return{version:n,prefix:r.prefix,data:t.from(i)}})),l=e.network||i.bitcoin,d={name:"p2wpkh",network:l};if(o.prop(d,"address",(function(){if(d.hash){var t=f.toWords(d.hash);return t.unshift(0),f.encode(l.bech32,t)}})),o.prop(d,"hash",(function(){return e.output?e.output.slice(2,22):e.address?p().data:e.pubkey||d.pubkey?n.hash160(e.pubkey||d.pubkey):void 0})),o.prop(d,"output",(function(){if(d.hash)return u.compile([a.OP_0,d.hash])})),o.prop(d,"pubkey",(function(){return e.pubkey?e.pubkey:e.witness?e.witness[1]:void 0})),o.prop(d,"signature",(function(){if(e.witness)return e.witness[0]})),o.prop(d,"input",(function(){if(d.witness)return c})),o.prop(d,"witness",(function(){if(e.pubkey&&e.signature)return[e.signature,e.pubkey]})),r.validate){var v=t.from([]);if(e.address){if(l&&l.bech32!==p().prefix)throw new TypeError("Invalid prefix or Network mismatch");if(0!==p().version)throw new TypeError("Invalid address version");if(20!==p().data.length)throw new TypeError("Invalid address data");v=p().data}if(e.hash){if(v.length>0&&!v.equals(e.hash))throw new TypeError("Hash mismatch");v=e.hash}if(e.output){if(22!==e.output.length||e.output[0]!==a.OP_0||20!==e.output[1])throw new TypeError("Output is invalid");if(v.length>0&&!v.equals(e.output.slice(2)))throw new TypeError("Hash mismatch");v=e.output.slice(2)}if(e.pubkey){var m=n.hash160(e.pubkey);if(v.length>0&&!v.equals(m))throw new TypeError("Hash mismatch");if(v=m,!h.isPoint(e.pubkey)||33!==e.pubkey.length)throw new TypeError("Invalid pubkey for p2wpkh")}if(e.witness){if(2!==e.witness.length)throw new TypeError("Witness is invalid");if(!u.isCanonicalScriptSignature(e.witness[0]))throw new TypeError("Witness has invalid signature");if(!h.isPoint(e.witness[1])||33!==e.witness[1].length)throw new TypeError("Witness has invalid pubkey");if(e.signature&&!e.signature.equals(e.witness[0]))throw new TypeError("Signature mismatch");if(e.pubkey&&!e.pubkey.equals(e.witness[1]))throw new TypeError("Pubkey mismatch");var y=n.hash160(e.witness[1]);if(v.length>0&&!v.equals(y))throw new TypeError("Hash mismatch")}}return Object.assign(d,e)}}).call(this,r(12).Buffer)},4511:function(t,e,r){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var n=r(3081),i=r(3053),u=r(3013),o=r(3115),s=r(3021),a=u.OPS,h=r(3089),f=r(378),c=t.alloc(0);function p(e){return!(!t.isBuffer(e)||65!==e.length||4!==e[0]||!h.isPoint(e))}e.p2wsh=function(e,r){if(!e.address&&!e.hash&&!e.output&&!e.redeem&&!e.witness)throw new TypeError("Not enough data");r=Object.assign({validate:!0},r||{}),s({network:s.maybe(s.Object),address:s.maybe(s.String),hash:s.maybe(s.BufferN(32)),output:s.maybe(s.BufferN(34)),redeem:s.maybe({input:s.maybe(s.Buffer),network:s.maybe(s.Object),output:s.maybe(s.Buffer),witness:s.maybe(s.arrayOf(s.Buffer))}),input:s.maybe(s.BufferN(0)),witness:s.maybe(s.arrayOf(s.Buffer))},e);var h=o.value((function(){var r=f.decode(e.address),n=r.words.shift(),i=f.fromWords(r.words);return{version:n,prefix:r.prefix,data:t.from(i)}})),l=o.value((function(){return u.decompile(e.redeem.input)})),d=e.network;d||(d=e.redeem&&e.redeem.network||i.bitcoin);var v={network:d};if(o.prop(v,"address",(function(){if(v.hash){var t=f.toWords(v.hash);return t.unshift(0),f.encode(d.bech32,t)}})),o.prop(v,"hash",(function(){return e.output?e.output.slice(2):e.address?h().data:v.redeem&&v.redeem.output?n.sha256(v.redeem.output):void 0})),o.prop(v,"output",(function(){if(v.hash)return u.compile([a.OP_0,v.hash])})),o.prop(v,"redeem",(function(){if(e.witness)return{output:e.witness[e.witness.length-1],input:c,witness:e.witness.slice(0,-1)}})),o.prop(v,"input",(function(){if(v.witness)return c})),o.prop(v,"witness",(function(){if(e.redeem&&e.redeem.input&&e.redeem.input.length>0&&e.redeem.output&&e.redeem.output.length>0){var t=u.toStack(l());return v.redeem=Object.assign({witness:t},e.redeem),v.redeem.input=c,[].concat(t,e.redeem.output)}if(e.redeem&&e.redeem.output&&e.redeem.witness)return[].concat(e.redeem.witness,e.redeem.output)})),o.prop(v,"name",(function(){var t=["p2wsh"];return void 0!==v.redeem&&t.push(v.redeem.name),t.join("-")})),r.validate){var m=t.from([]);if(e.address){if(h().prefix!==d.bech32)throw new TypeError("Invalid prefix or Network mismatch");if(0!==h().version)throw new TypeError("Invalid address version");if(32!==h().data.length)throw new TypeError("Invalid address data");m=h().data}if(e.hash){if(m.length>0&&!m.equals(e.hash))throw new TypeError("Hash mismatch");m=e.hash}if(e.output){if(34!==e.output.length||e.output[0]!==a.OP_0||32!==e.output[1])throw new TypeError("Output is invalid");var y=e.output.slice(2);if(m.length>0&&!m.equals(y))throw new TypeError("Hash mismatch");m=y}if(e.redeem){if(e.redeem.network&&e.redeem.network!==d)throw new TypeError("Network mismatch");if(e.redeem.input&&e.redeem.input.length>0&&e.redeem.witness&&e.redeem.witness.length>0)throw new TypeError("Ambiguous witness source");if(e.redeem.output){if(0===u.decompile(e.redeem.output).length)throw new TypeError("Redeem.output is invalid");var g=n.sha256(e.redeem.output);if(m.length>0&&!m.equals(g))throw new TypeError("Hash mismatch");m=g}if(e.redeem.input&&!u.isPushOnly(l()))throw new TypeError("Non push-only scriptSig");if(e.witness&&e.redeem.witness&&!function(t,e){return t.length===e.length&&t.every((function(t,r){return t.equals(e[r])}))}(e.witness,e.redeem.witness))throw new TypeError("Witness and redeem.witness mismatch");if(e.redeem.input&&l().some(p)||e.redeem.output&&(u.decompile(e.redeem.output)||[]).some(p))throw new TypeError("redeem.input or redeem.output contains uncompressed pubkey")}if(e.witness&&e.witness.length>0){var w=e.witness[e.witness.length-1];if(e.redeem&&e.redeem.output&&!e.redeem.output.equals(w))throw new TypeError("Witness and redeem.output mismatch");if(e.witness.some(p)||(u.decompile(w)||[]).some(p))throw new TypeError("Witness contains uncompressed pubkey")}}return Object.assign(v,e)}}).call(this,r(12).Buffer)},4512:function(t,e,r){"use strict";(function(t){var n=r(3),i=r(20);Object.defineProperty(e,"__esModule",{value:!0});var u=r(3236),o=r(3081),s=r(3237),a=r(3068),h=r(4513),f=r(3021),c=r(3609),p=new TypeError("Cannot compute merkle root for zero transactions"),l=new TypeError("Cannot compute witness commit for non-segwit block"),d=function(){function e(){n(this,e),this.version=1,this.prevHash=void 0,this.merkleRoot=void 0,this.timestamp=0,this.witnessCommit=void 0,this.bits=0,this.nonce=0,this.transactions=void 0}return i(e,[{key:"getWitnessCommit",value:function(){if(!v(this.transactions))return null;var e=this.transactions[0].outs.filter((function(e){return e.script.slice(0,6).equals(t.from("6a24aa21a9ed","hex"))})).map((function(t){return t.script.slice(6,38)}));if(0===e.length)return null;var r=e[e.length-1];return r instanceof t&&32===r.length?r:null}},{key:"hasWitnessCommit",value:function(){return this.witnessCommit instanceof t&&32===this.witnessCommit.length||null!==this.getWitnessCommit()}},{key:"hasWitness",value:function(){return(t=this.transactions)instanceof Array&&t.some((function(t){return"object"===typeof t&&t.ins instanceof Array&&t.ins.some((function(t){return"object"===typeof t&&t.witness instanceof Array&&t.witness.length>0}))}));var t}},{key:"weight",value:function(){return 3*this.byteLength(!1,!1)+this.byteLength(!1,!0)}},{key:"byteLength",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t||!this.transactions?80:80+c.encodingLength(this.transactions.length)+this.transactions.reduce((function(t,r){return t+r.byteLength(e)}),0)}},{key:"getHash",value:function(){return o.hash256(this.toBuffer(!0))}},{key:"getId",value:function(){return u.reverseBuffer(this.getHash()).toString("hex")}},{key:"getUTCDate",value:function(){var t=new Date(0);return t.setUTCSeconds(this.timestamp),t}},{key:"toBuffer",value:function(e){var r=t.allocUnsafe(this.byteLength(e)),n=new u.BufferWriter(r);return n.writeInt32(this.version),n.writeSlice(this.prevHash),n.writeSlice(this.merkleRoot),n.writeUInt32(this.timestamp),n.writeUInt32(this.bits),n.writeUInt32(this.nonce),e||!this.transactions||(c.encode(this.transactions.length,r,n.offset),n.offset+=c.encode.bytes,this.transactions.forEach((function(t){var e=t.byteLength();t.toBuffer(r,n.offset),n.offset+=e}))),r}},{key:"toHex",value:function(t){return this.toBuffer(t).toString("hex")}},{key:"checkTxRoots",value:function(){var t=this.hasWitnessCommit();return!(!t&&this.hasWitness())&&(this.__checkMerkleRoot()&&(!t||this.__checkWitnessCommit()))}},{key:"checkProofOfWork",value:function(){var t=u.reverseBuffer(this.getHash()),r=e.calculateTarget(this.bits);return t.compare(r)<=0}},{key:"__checkMerkleRoot",value:function(){if(!this.transactions)throw p;var t=e.calculateMerkleRoot(this.transactions);return 0===this.merkleRoot.compare(t)}},{key:"__checkWitnessCommit",value:function(){if(!this.transactions)throw p;if(!this.hasWitnessCommit())throw l;var t=e.calculateMerkleRoot(this.transactions,!0);return 0===this.witnessCommit.compare(t)}}],[{key:"fromBuffer",value:function(t){if(t.length<80)throw new Error("Buffer too small (< 80 bytes)");var r=new u.BufferReader(t),n=new e;if(n.version=r.readInt32(),n.prevHash=r.readSlice(32),n.merkleRoot=r.readSlice(32),n.timestamp=r.readUInt32(),n.bits=r.readUInt32(),n.nonce=r.readUInt32(),80===t.length)return n;var i=function(){var t=s.Transaction.fromBuffer(r.buffer.slice(r.offset),!0);return r.offset+=t.byteLength(),t},o=r.readVarInt();n.transactions=[];for(var a=0;a<o;++a){var h=i();n.transactions.push(h)}var f=n.getWitnessCommit();return f&&(n.witnessCommit=f),n}},{key:"fromHex",value:function(r){return e.fromBuffer(t.from(r,"hex"))}},{key:"calculateTarget",value:function(e){var r=((4278190080&e)>>24)-3,n=8388607&e,i=t.alloc(32,0);return i.writeUIntBE(n,29-r,3),i}},{key:"calculateMerkleRoot",value:function(e,r){if(f([{getHash:a.Function}],e),0===e.length)throw p;if(r&&!v(e))throw l;var n=e.map((function(t){return t.getHash(r)})),i=h(n,o.hash256);return r?o.hash256(t.concat([i,e[0].ins[0].witness[0]])):i}}]),e}();function v(t){return t instanceof Array&&t[0]&&t[0].ins&&t[0].ins instanceof Array&&t[0].ins[0]&&t[0].ins[0].witness&&t[0].ins[0].witness instanceof Array&&t[0].ins[0].witness.length>0}e.Block=d}).call(this,r(12).Buffer)},4513:function(t,e,r){(function(e){t.exports=function(t,r){if(!Array.isArray(t))throw TypeError("Expected values Array");if("function"!==typeof r)throw TypeError("Expected digest Function");for(var n=t.length,i=t.concat();n>1;){for(var u=0,o=0;o<n;o+=2,++u){var s=i[o],a=o+1===n?s:i[o+1],h=e.concat([s,a]);i[u]=r(h)}n=u}return i[0]}}).call(this,r(12).Buffer)},4514:function(t,e,r){"use strict";(function(t){var n=r(66),i=r(37),u=r(349),o=r(3),s=r(20);Object.defineProperty(e,"__esModule",{value:!0});var a=r(4515),h=r(3238),f=r(3760),c=r(3607),p=r(3236),l=r(3081),d=r(3608),v=r(3053),m=r(3234),y=r(3013),g=r(3237),w={network:v.bitcoin,maximumFeeRate:5e3},_=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new a.Psbt(new S);o(this,e),this.data=r,this.opts=Object.assign({},w,t),this.__CACHE={__NON_WITNESS_UTXO_TX_CACHE:[],__NON_WITNESS_UTXO_BUF_CACHE:[],__TX_IN_CACHE:{},__TX:this.data.globalMap.unsignedTx.tx,__UNSAFE_SIGN_NONSEGWIT:!1},0===this.data.inputs.length&&this.setVersion(2);var n=function(t,e,r,n){return Object.defineProperty(t,e,{enumerable:r,writable:n})};n(this,"__CACHE",!1,!0),n(this,"opts",!1,!0)}return s(e,[{key:"combine",value:function(){for(var t,e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=this.data).combine.apply(t,u(r.map((function(t){return t.data})))),this}},{key:"clone",value:function(){var t=e.fromBuffer(this.data.toBuffer());return t.opts=JSON.parse(JSON.stringify(this.opts)),t}},{key:"setMaximumFeeRate",value:function(t){U(t),this.opts.maximumFeeRate=t}},{key:"setVersion",value:function(t){U(t),H(this.data.inputs,"setVersion");var e=this.__CACHE;return e.__TX.version=t,e.__EXTRACTED_TX=void 0,this}},{key:"setLocktime",value:function(t){U(t),H(this.data.inputs,"setLocktime");var e=this.__CACHE;return e.__TX.locktime=t,e.__EXTRACTED_TX=void 0,this}},{key:"setInputSequence",value:function(t,e){U(e),H(this.data.inputs,"setInputSequence");var r=this.__CACHE;if(r.__TX.ins.length<=t)throw new Error("Input index too high");return r.__TX.ins[t].sequence=e,r.__EXTRACTED_TX=void 0,this}},{key:"addInputs",value:function(t){var e=this;return t.forEach((function(t){return e.addInput(t)})),this}},{key:"addInput",value:function(t){if(arguments.length>1||!t||void 0===t.hash||void 0===t.index)throw new Error("Invalid arguments for Psbt.addInput. Requires single object with at least [hash] and [index]");H(this.data.inputs,"addInput"),t.witnessScript&&it(t.witnessScript);var e=this.__CACHE;this.data.addInput(t);var r=e.__TX.ins[e.__TX.ins.length-1];K(e,r);var n=this.data.inputs.length-1,i=this.data.inputs[n];return i.nonWitnessUtxo&&Q(this.__CACHE,i,n),e.__FEE=void 0,e.__FEE_RATE=void 0,e.__EXTRACTED_TX=void 0,this}},{key:"addOutputs",value:function(t){var e=this;return t.forEach((function(t){return e.addOutput(t)})),this}},{key:"addOutput",value:function(t){if(arguments.length>1||!t||void 0===t.value||void 0===t.address&&void 0===t.script)throw new Error("Invalid arguments for Psbt.addOutput. Requires single object with at least [script or address] and [value]");H(this.data.inputs,"addOutput");var e=t,r=e.address;if("string"===typeof r){var n=this.opts.network,i=c.toOutputScript(r,n);t=Object.assign(t,{script:i})}var u=this.__CACHE;return this.data.addOutput(t),u.__FEE=void 0,u.__FEE_RATE=void 0,u.__EXTRACTED_TX=void 0,this}},{key:"extractTransaction",value:function(t){if(!this.data.inputs.every(T))throw new Error("Not finalized");var e=this.__CACHE;if(t||function(t,e,r){var n=e.__FEE_RATE||t.getFeeRate(),i=e.__EXTRACTED_TX.virtualSize(),u=n*i;if(n>=r.maximumFeeRate)throw new Error("Warning: You are paying around ".concat((u/1e8).toFixed(8)," in ")+"fees, which is ".concat(n," satoshi per byte for a transaction ")+"with a VSize of ".concat(i," bytes (segwit counted as 0.25 byte per ")+"byte). Use setMaximumFeeRate method to raise your threshold, or pass true to the first arg of extractTransaction.")}(this,e,this.opts),e.__EXTRACTED_TX)return e.__EXTRACTED_TX;var r=e.__TX.clone();return $(this.data.inputs,r,e,!0),r}},{key:"getFeeRate",value:function(){return j("__FEE_RATE","fee rate",this.data.inputs,this.__CACHE)}},{key:"getFee",value:function(){return j("__FEE","fee",this.data.inputs,this.__CACHE)}},{key:"finalizeAllInputs",value:function(){var t=this;return f.checkForInput(this.data.inputs,0),st(this.data.inputs.length).forEach((function(e){return t.finalizeInput(e)})),this}},{key:"finalizeInput",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:G,r=f.checkForInput(this.data.inputs,t),n=J(t,r,this.__CACHE),i=n.script,u=n.isP2SH,o=n.isP2WSH,s=n.isSegwit;if(!i)throw new Error("No script found for input #".concat(t));x(r);var a=e(t,r,i,s,u,o),h=a.finalScriptSig,c=a.finalScriptWitness;if(h&&this.data.updateInput(t,{finalScriptSig:h}),c&&this.data.updateInput(t,{finalScriptWitness:c}),!h&&!c)throw new Error("Unknown error finalizing input #".concat(t));return this.data.clearFinalizedInput(t),this}},{key:"getInputType",value:function(e){var r=f.checkForInput(this.data.inputs,e),n=nt(et(e,r,this.__CACHE),e,"input",r.redeemScript||function(e){if(!e)return;var r=y.decompile(e);if(!r)return;var n=r[r.length-1];if(!t.isBuffer(n)||rt(n)||(i=n,y.isCanonicalScriptSignature(i)))return;var i;if(!y.decompile(n))return;return n}(r.finalScriptSig),r.witnessScript||function(t){if(!t)return;var e=z(t),r=e[e.length-1];if(rt(r))return;if(!y.decompile(r))return;return r}(r.finalScriptWitness));return("raw"===n.type?"":n.type+"-")+ot(n.meaningfulScript)}},{key:"inputHasPubkey",value:function(t,e){return function(t,e,r,n){var i=nt(et(r,e,n),r,"input",e.redeemScript,e.witnessScript).meaningfulScript;return ut(t,i)}(e,f.checkForInput(this.data.inputs,t),t,this.__CACHE)}},{key:"inputHasHDKey",value:function(t,e){var r=f.checkForInput(this.data.inputs,t),n=C(e);return!!r.bip32Derivation&&r.bip32Derivation.some(n)}},{key:"outputHasPubkey",value:function(t,e){return function(t,e,r,n){var i=nt(n.__TX.outs[r].script,r,"output",e.redeemScript,e.witnessScript).meaningfulScript;return ut(t,i)}(e,f.checkForOutput(this.data.outputs,t),t,this.__CACHE)}},{key:"outputHasHDKey",value:function(t,e){var r=f.checkForOutput(this.data.outputs,t),n=C(e);return!!r.bip32Derivation&&r.bip32Derivation.some(n)}},{key:"validateSignaturesOfAllInputs",value:function(){var t=this;return f.checkForInput(this.data.inputs,0),st(this.data.inputs.length).map((function(e){return t.validateSignaturesOfInput(e)})).reduce((function(t,e){return!0===e&&t}),!0)}},{key:"validateSignaturesOfInput",value:function(t,e){var r=this.data.inputs[t],n=(r||{}).partialSig;if(!r||!n||n.length<1)throw new Error("No signatures to validate");var u=e?n.filter((function(t){return t.pubkey.equals(e)})):n;if(u.length<1)throw new Error("No signatures for this pubkey");var o,s,a,h,f=[],c=i(u);try{for(c.s();!(h=c.n()).done;){var p=h.value,l=y.signature.decode(p.signature),v=a!==l.hashType?X(t,Object.assign({},r,{sighashType:l.hashType}),this.__CACHE,!0):{hash:o,script:s},m=v.hash,g=v.script;a=l.hashType,o=m,s=g,L(p.pubkey,g,"verify");var w=d.fromPublicKey(p.pubkey);f.push(w.verify(m,l.signature))}}catch(_){c.e(_)}finally{c.f()}return f.every((function(t){return!0===t}))}},{key:"signAllInputsHD",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[g.Transaction.SIGHASH_ALL];if(!t||!t.publicKey||!t.fingerprint)throw new Error("Need HDSigner to sign input");var r,n=[],u=i(st(this.data.inputs.length));try{for(u.s();!(r=u.n()).done;){var o=r.value;try{this.signInputHD(o,t,e),n.push(!0)}catch(s){n.push(!1)}}}catch(s){u.e(s)}finally{u.f()}if(n.every((function(t){return!1===t})))throw new Error("No inputs were signed");return this}},{key:"signAllInputsHDAsync",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[g.Transaction.SIGHASH_ALL];return new Promise((function(n,u){if(!t||!t.publicKey||!t.fingerprint)return u(new Error("Need HDSigner to sign input"));var o,s=[],a=[],h=i(st(e.data.inputs.length));try{for(h.s();!(o=h.n()).done;){var f=o.value;a.push(e.signInputHDAsync(f,t,r).then((function(){s.push(!0)}),(function(){s.push(!1)})))}}catch(c){h.e(c)}finally{h.f()}return Promise.all(a).then((function(){if(s.every((function(t){return!1===t})))return u(new Error("No inputs were signed"));n()}))}))}},{key:"signInputHD",value:function(t,e){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[g.Transaction.SIGHASH_ALL];if(!e||!e.publicKey||!e.fingerprint)throw new Error("Need HDSigner to sign input");var i=Y(t,this.data.inputs,e);return i.forEach((function(e){return r.signInput(t,e,n)})),this}},{key:"signInputHDAsync",value:function(t,e){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[g.Transaction.SIGHASH_ALL];return new Promise((function(i,u){if(!e||!e.publicKey||!e.fingerprint)return u(new Error("Need HDSigner to sign input"));var o=Y(t,r.data.inputs,e).map((function(e){return r.signInputAsync(t,e,n)}));return Promise.all(o).then((function(){i()})).catch(u)}))}},{key:"signAllInputs",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[g.Transaction.SIGHASH_ALL];if(!t||!t.publicKey)throw new Error("Need Signer to sign input");var r,n=[],u=i(st(this.data.inputs.length));try{for(u.s();!(r=u.n()).done;){var o=r.value;try{this.signInput(o,t,e),n.push(!0)}catch(s){n.push(!1)}}}catch(s){u.e(s)}finally{u.f()}if(n.every((function(t){return!1===t})))throw new Error("No inputs were signed");return this}},{key:"signAllInputsAsync",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[g.Transaction.SIGHASH_ALL];return new Promise((function(u,o){if(!t||!t.publicKey)return o(new Error("Need Signer to sign input"));var s,a=[],h=[],f=i(e.data.inputs.entries());try{for(f.s();!(s=f.n()).done;){var c=n(s.value,1)[0];h.push(e.signInputAsync(c,t,r).then((function(){a.push(!0)}),(function(){a.push(!1)})))}}catch(p){f.e(p)}finally{f.f()}return Promise.all(h).then((function(){if(a.every((function(t){return!1===t})))return o(new Error("No inputs were signed"));u()}))}))}},{key:"signInput",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[g.Transaction.SIGHASH_ALL];if(!e||!e.publicKey)throw new Error("Need Signer to sign input");var n=q(this.data.inputs,t,e.publicKey,this.__CACHE,r),i=n.hash,u=n.sighashType,o=[{pubkey:e.publicKey,signature:y.signature.encode(e.sign(i),u)}];return this.data.updateInput(t,{partialSig:o}),this}},{key:"signInputAsync",value:function(t,e){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[g.Transaction.SIGHASH_ALL];return Promise.resolve().then((function(){if(!e||!e.publicKey)throw new Error("Need Signer to sign input");var i=q(r.data.inputs,t,e.publicKey,r.__CACHE,n),u=i.hash,o=i.sighashType;return Promise.resolve(e.sign(u)).then((function(n){var i=[{pubkey:e.publicKey,signature:y.signature.encode(n,o)}];r.data.updateInput(t,{partialSig:i})}))}))}},{key:"toBuffer",value:function(){return E(this.__CACHE),this.data.toBuffer()}},{key:"toHex",value:function(){return E(this.__CACHE),this.data.toHex()}},{key:"toBase64",value:function(){return E(this.__CACHE),this.data.toBase64()}},{key:"updateGlobal",value:function(t){return this.data.updateGlobal(t),this}},{key:"updateInput",value:function(t,e){return e.witnessScript&&it(e.witnessScript),this.data.updateInput(t,e),e.nonWitnessUtxo&&Q(this.__CACHE,this.data.inputs[t],t),this}},{key:"updateOutput",value:function(t,e){return this.data.updateOutput(t,e),this}},{key:"addUnknownKeyValToGlobal",value:function(t){return this.data.addUnknownKeyValToGlobal(t),this}},{key:"addUnknownKeyValToInput",value:function(t,e){return this.data.addUnknownKeyValToInput(t,e),this}},{key:"addUnknownKeyValToOutput",value:function(t,e){return this.data.addUnknownKeyValToOutput(t,e),this}},{key:"clearFinalizedInput",value:function(t){return this.data.clearFinalizedInput(t),this}},{key:"inputCount",get:function(){return this.data.inputs.length}},{key:"version",get:function(){return this.__CACHE.__TX.version},set:function(t){this.setVersion(t)}},{key:"locktime",get:function(){return this.__CACHE.__TX.locktime},set:function(t){this.setLocktime(t)}},{key:"txInputs",get:function(){return this.__CACHE.__TX.ins.map((function(t){return{hash:p.cloneBuffer(t.hash),index:t.index,sequence:t.sequence}}))}},{key:"txOutputs",get:function(){var t=this;return this.__CACHE.__TX.outs.map((function(e){var r;try{r=c.fromOutputScript(e.script,t.opts.network)}catch(n){}return{script:p.cloneBuffer(e.script),value:e.value,address:r}}))}}],[{key:"fromBase64",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.from(e,"base64");return this.fromBuffer(n,r)}},{key:"fromHex",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.from(e,"hex");return this.fromBuffer(n,r)}},{key:"fromBuffer",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=a.Psbt.fromBuffer(t,b),i=new e(r,n);return D(i.__CACHE.__TX,i.__CACHE),i}}]),e}();e.Psbt=_;var b=function(t){return new S(t)},S=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.from([2,0,0,0,0,0,0,0,0,0]);o(this,e),this.tx=g.Transaction.fromBuffer(r),R(this.tx),Object.defineProperty(this,"tx",{enumerable:!1,writable:!0})}return s(e,[{key:"getInputOutputCounts",value:function(){return{inputCount:this.tx.ins.length,outputCount:this.tx.outs.length}}},{key:"addInput",value:function(e){if(void 0===e.hash||void 0===e.index||!t.isBuffer(e.hash)&&"string"!==typeof e.hash||"number"!==typeof e.index)throw new Error("Error adding input.");var r="string"===typeof e.hash?p.reverseBuffer(t.from(e.hash,"hex")):e.hash;this.tx.addInput(r,e.index,e.sequence)}},{key:"addOutput",value:function(e){if(void 0===e.script||void 0===e.value||!t.isBuffer(e.script)||"number"!==typeof e.value)throw new Error("Error adding output.");this.tx.addOutput(e.script,e.value)}},{key:"toBuffer",value:function(){return this.tx.toBuffer()}}]),e}();function E(t){if(!1!==t.__UNSAFE_SIGN_NONSEGWIT)throw new Error("Not BIP174 compliant, can not export")}function k(t,e,r){if(!e)return!1;var n;if((n=r?r.map((function(t){var r=d.fromPublicKey(t,{compressed:!0}).publicKey;return e.find((function(t){return t.pubkey.equals(r)}))})).filter((function(t){return!!t})):e).length>t)throw new Error("Too many signatures");return n.length===t}function T(t){return!!t.finalScriptSig||!!t.finalScriptWitness}function O(t){return function(e){try{return t({output:e}),!0}catch(r){return!1}}}var P=O(m.p2ms),I=O(m.p2pk),M=O(m.p2pkh),A=O(m.p2wpkh),N=O(m.p2wsh),B=O(m.p2sh);function C(t){return function(e){return!!e.masterFingerprint.equals(t.fingerprint)&&!!t.derivePath(e.path).publicKey.equals(e.pubkey)}}function U(t){if("number"!==typeof t||t!==Math.floor(t)||t>4294967295||t<0)throw new Error("Invalid 32 bit integer")}function H(e,r){e.forEach((function(e){var n=!1,i=[];if(0===(e.partialSig||[]).length){if(!e.finalScriptSig&&!e.finalScriptWitness)return;i=function(e){var r=e.finalScriptSig&&y.decompile(e.finalScriptSig)||[],n=e.finalScriptWitness&&y.decompile(e.finalScriptWitness)||[];return r.concat(n).filter((function(e){return t.isBuffer(e)&&y.isCanonicalScriptSignature(e)})).map((function(t){return{signature:t}}))}(e)}else i=e.partialSig;if(i.forEach((function(t){var e=y.signature.decode(t.signature).hashType,i=[];switch(e&g.Transaction.SIGHASH_ANYONECANPAY&&i.push("addInput"),31&e){case g.Transaction.SIGHASH_ALL:break;case g.Transaction.SIGHASH_SINGLE:case g.Transaction.SIGHASH_NONE:i.push("addOutput"),i.push("setInputSequence")}-1===i.indexOf(r)&&(n=!0)})),n)throw new Error("Can not modify transaction, signatures exist.")}))}function x(t){if(t.sighashType&&t.partialSig){var e=t.partialSig,r=t.sighashType;e.forEach((function(t){var e=y.signature.decode(t.signature).hashType;if(r!==e)throw new Error("Signature sighash does not match input sighash type")}))}}function L(t,e,r){if(!ut(t,e))throw new Error("Can not ".concat(r," for this input with the key ").concat(t.toString("hex")))}function R(t){if(!t.ins.every((function(t){return t.script&&0===t.script.length&&t.witness&&0===t.witness.length})))throw new Error("Format Error: Transaction ScriptSigs are not empty")}function D(t,e){t.ins.forEach((function(t){K(e,t)}))}function K(e,r){var n=p.reverseBuffer(t.from(r.hash)).toString("hex")+":"+r.index;if(e.__TX_IN_CACHE[n])throw new Error("Duplicate input detected.");e.__TX_IN_CACHE[n]=1}function W(t,e){return function(r,n,i,u){var o=t({redeem:{output:i}}).output;if(!n.equals(o))throw new Error("".concat(e," for ").concat(u," #").concat(r," doesn't match the scriptPubKey in the prevout"))}}var V=W(m.p2sh,"Redeem script"),F=W(m.p2wsh,"Witness script");function j(t,e,r,n){if(!r.every(T))throw new Error("PSBT must be finalized to calculate ".concat(e));if("__FEE_RATE"===t&&n.__FEE_RATE)return n.__FEE_RATE;if("__FEE"===t&&n.__FEE)return n.__FEE;var i,u=!0;return n.__EXTRACTED_TX?(i=n.__EXTRACTED_TX,u=!1):i=n.__TX.clone(),$(r,i,n,u),"__FEE_RATE"===t?n.__FEE_RATE:"__FEE"===t?n.__FEE:void 0}function G(t,e,r,n,i,u){var o=ot(r);if(!function(t,e,r){switch(r){case"pubkey":case"pubkeyhash":case"witnesspubkeyhash":return k(1,t.partialSig);case"multisig":var n=m.p2ms({output:e});return k(n.m,t.partialSig,n.pubkeys);default:return!1}}(e,r,o))throw new Error("Can not finalize input #".concat(t));return function(t,e,r,n,i,u){var o,s,a=function(t,e,r){var n;switch(e){case"multisig":var i=function(t,e){return m.p2ms({output:t}).pubkeys.map((function(t){return(e.filter((function(e){return e.pubkey.equals(t)}))[0]||{}).signature})).filter((function(t){return!!t}))}(t,r);n=m.p2ms({output:t,signatures:i});break;case"pubkey":n=m.p2pk({output:t,signature:r[0].signature});break;case"pubkeyhash":n=m.p2pkh({output:t,pubkey:r[0].pubkey,signature:r[0].signature});break;case"witnesspubkeyhash":n=m.p2wpkh({output:t,pubkey:r[0].pubkey,signature:r[0].signature})}return n}(t,e,r),h=u?m.p2wsh({redeem:a}):null,f=i?m.p2sh({redeem:h||a}):null;n?(s=Z(h?h.witness:a.witness),f&&(o=f.input)):o=f?f.input:a.input;return{finalScriptSig:o,finalScriptWitness:s}}(r,o,e.partialSig,n,i,u)}function q(t,e,r,n,i){var u=X(e,f.checkForInput(t,e),n,!1,i),o=u.hash,s=u.sighashType;return L(r,u.script,"sign"),{hash:o,sighashType:s}}function X(t,e,r,n,i){var u,o,s=r.__TX,a=e.sighashType||g.Transaction.SIGHASH_ALL;if(i&&i.indexOf(a)<0){var h=function(t){var e=t&g.Transaction.SIGHASH_ANYONECANPAY?"SIGHASH_ANYONECANPAY | ":"";switch(31&t){case g.Transaction.SIGHASH_ALL:e+="SIGHASH_ALL";break;case g.Transaction.SIGHASH_SINGLE:e+="SIGHASH_SINGLE";break;case g.Transaction.SIGHASH_NONE:e+="SIGHASH_NONE"}return e}(a);throw new Error("Sighash type is not allowed. Retry the sign method passing the "+"sighashTypes array of whitelisted types. Sighash type: ".concat(h))}if(e.nonWitnessUtxo){var f=tt(r,e,t),c=s.ins[t].hash,p=f.getHash();if(!c.equals(p))throw new Error("Non-witness UTXO hash for input #".concat(t," doesn't match the hash specified in the prevout"));var l=s.ins[t].index;o=f.outs[l]}else{if(!e.witnessUtxo)throw new Error("Need a Utxo input item for signing");o=e.witnessUtxo}var d=nt(o.script,t,"input",e.redeemScript,e.witnessScript),v=d.meaningfulScript,y=d.type;if(["p2sh-p2wsh","p2wsh"].indexOf(y)>=0)u=s.hashForWitnessV0(t,v,o.value,a);else if(A(v)){var w=m.p2pkh({hash:v.slice(2)}).output;u=s.hashForWitnessV0(t,w,o.value,a)}else{if(void 0===e.nonWitnessUtxo&&!1===r.__UNSAFE_SIGN_NONSEGWIT)throw new Error("Input #".concat(t," has witnessUtxo but non-segwit script: ")+"".concat(v.toString("hex")));n||!1===r.__UNSAFE_SIGN_NONSEGWIT||console.warn("Warning: Signing non-segwit inputs without the full parent transaction means there is a chance that a miner could feed you incorrect information to trick you into paying large fees. This behavior is the same as the old TransactionBuilder class when signing non-segwit scripts. You are not able to export this Psbt with toBuffer|toBase64|toHex since it is not BIP174 compliant.\n*********************\nPROCEED WITH CAUTION!\n*********************"),u=s.hashForSignature(t,v,a)}return{script:v,sighashType:a,hash:u}}function J(t,e,r){var n=r.__TX,i={script:null,isSegwit:!1,isP2SH:!1,isP2WSH:!1};if(i.isP2SH=!!e.redeemScript,i.isP2WSH=!!e.witnessScript,e.witnessScript)i.script=e.witnessScript;else if(e.redeemScript)i.script=e.redeemScript;else if(e.nonWitnessUtxo){var u=tt(r,e,t),o=n.ins[t].index;i.script=u.outs[o].script}else e.witnessUtxo&&(i.script=e.witnessUtxo.script);return(e.witnessScript||A(i.script))&&(i.isSegwit=!0),i}function Y(t,e,r){var n=f.checkForInput(e,t);if(!n.bip32Derivation||0===n.bip32Derivation.length)throw new Error("Need bip32Derivation to sign with HD");var i=n.bip32Derivation.map((function(t){return t.masterFingerprint.equals(r.fingerprint)?t:void 0})).filter((function(t){return!!t}));if(0===i.length)throw new Error("Need one bip32Derivation masterFingerprint to match the HDSigner fingerprint");return i.map((function(t){var e=r.derivePath(t.path);if(!t.pubkey.equals(e.publicKey))throw new Error("pubkey did not match bip32Derivation");return e}))}function z(t){var e=0;function r(){var r=h.decode(t,e);return e+=h.decode.bytes,r}function n(){return n=r(),e+=n,t.slice(e-n,e);var n}return function(){for(var t=r(),e=[],i=0;i<t;i++)e.push(n());return e}()}function Z(e){var r,n=t.allocUnsafe(0);function i(e){var r=n.length,i=h.encodingLength(e);n=t.concat([n,t.allocUnsafe(i)]),h.encode(e,n,r)}function u(e){i(e.length),function(e){n=t.concat([n,t.from(e)])}(e)}return i((r=e).length),r.forEach(u),n}function Q(t,e,r){t.__NON_WITNESS_UTXO_BUF_CACHE[r]=e.nonWitnessUtxo;var n=g.Transaction.fromBuffer(e.nonWitnessUtxo);t.__NON_WITNESS_UTXO_TX_CACHE[r]=n;var i=t,u=r;delete e.nonWitnessUtxo,Object.defineProperty(e,"nonWitnessUtxo",{enumerable:!0,get:function(){var t=i.__NON_WITNESS_UTXO_BUF_CACHE[u],e=i.__NON_WITNESS_UTXO_TX_CACHE[u];if(void 0!==t)return t;var r=e.toBuffer();return i.__NON_WITNESS_UTXO_BUF_CACHE[u]=r,r},set:function(t){i.__NON_WITNESS_UTXO_BUF_CACHE[u]=t}})}function $(t,e,r,n){var i=0;t.forEach((function(t,u){if(n&&t.finalScriptSig&&(e.ins[u].script=t.finalScriptSig),n&&t.finalScriptWitness&&(e.ins[u].witness=z(t.finalScriptWitness)),t.witnessUtxo)i+=t.witnessUtxo.value;else if(t.nonWitnessUtxo){var o=tt(r,t,u),s=e.ins[u].index,a=o.outs[s];i+=a.value}}));var u=e.outs.reduce((function(t,e){return t+e.value}),0),o=i-u;if(o<0)throw new Error("Outputs are spending more than Inputs");var s=e.virtualSize();r.__FEE=o,r.__EXTRACTED_TX=e,r.__FEE_RATE=Math.floor(o/s)}function tt(t,e,r){var n=t.__NON_WITNESS_UTXO_TX_CACHE;return n[r]||Q(t,e,r),n[r]}function et(t,e,r){if(void 0!==e.witnessUtxo)return e.witnessUtxo.script;if(void 0!==e.nonWitnessUtxo)return tt(r,e,t).outs[r.__TX.ins[t].index].script;throw new Error("Can't find pubkey in input without Utxo data")}function rt(t){return 33===t.length&&y.isCanonicalPubKey(t)}function nt(t,e,r,n,i){var u,o=B(t),s=o&&n&&N(n),a=N(t);if(o&&void 0===n)throw new Error("scriptPubkey is P2SH but redeemScript missing");if((a||s)&&void 0===i)throw new Error("scriptPubkey or redeemScript is P2WSH but witnessScript missing");return s?(u=i,V(e,t,n,r),F(e,n,i,r),it(u)):a?(u=i,F(e,t,i,r),it(u)):o?(u=n,V(e,t,n,r)):u=t,{meaningfulScript:u,type:s?"p2sh-p2wsh":o?"p2sh":a?"p2wsh":"raw"}}function it(t){if(A(t)||B(t))throw new Error("P2WPKH or P2SH can not be contained within P2WSH")}function ut(t,e){var r=l.hash160(t),n=y.decompile(e);if(null===n)throw new Error("Unknown script error");return n.some((function(e){return"number"!==typeof e&&(e.equals(t)||e.equals(r))}))}function ot(t){return A(t)?"witnesspubkeyhash":M(t)?"pubkeyhash":P(t)?"multisig":I(t)?"pubkey":"nonstandard"}function st(t){return u(Array(t).keys())}}).call(this,r(12).Buffer)},4515:function(t,e,r){"use strict";(function(t){var n=r(3),i=r(20);Object.defineProperty(e,"__esModule",{value:!0});var u=r(4516),o=r(3759),s=r(3054),a=r(3760),h=function(){function e(t){n(this,e),this.inputs=[],this.outputs=[],this.globalMap={unsignedTx:t}}return i(e,[{key:"toBase64",value:function(){return this.toBuffer().toString("base64")}},{key:"toHex",value:function(){return this.toBuffer().toString("hex")}},{key:"toBuffer",value:function(){return o.psbtToBuffer(this)}},{key:"updateGlobal",value:function(t){return a.updateGlobal(t,this.globalMap),this}},{key:"updateInput",value:function(t,e){var r=a.checkForInput(this.inputs,t);return a.updateInput(e,r),this}},{key:"updateOutput",value:function(t,e){var r=a.checkForOutput(this.outputs,t);return a.updateOutput(e,r),this}},{key:"addUnknownKeyValToGlobal",value:function(t){return a.checkHasKey(t,this.globalMap.unknownKeyVals,a.getEnumLength(s.GlobalTypes)),this.globalMap.unknownKeyVals||(this.globalMap.unknownKeyVals=[]),this.globalMap.unknownKeyVals.push(t),this}},{key:"addUnknownKeyValToInput",value:function(t,e){var r=a.checkForInput(this.inputs,t);return a.checkHasKey(e,r.unknownKeyVals,a.getEnumLength(s.InputTypes)),r.unknownKeyVals||(r.unknownKeyVals=[]),r.unknownKeyVals.push(e),this}},{key:"addUnknownKeyValToOutput",value:function(t,e){var r=a.checkForOutput(this.outputs,t);return a.checkHasKey(e,r.unknownKeyVals,a.getEnumLength(s.OutputTypes)),r.unknownKeyVals||(r.unknownKeyVals=[]),r.unknownKeyVals.push(e),this}},{key:"addInput",value:function(t){var e=this;this.globalMap.unsignedTx.addInput(t),this.inputs.push({unknownKeyVals:[]});var r=t.unknownKeyVals||[],n=this.inputs.length-1;if(!Array.isArray(r))throw new Error("unknownKeyVals must be an Array");return r.forEach((function(t){return e.addUnknownKeyValToInput(n,t)})),a.addInputAttributes(this.inputs,t),this}},{key:"addOutput",value:function(t){var e=this;this.globalMap.unsignedTx.addOutput(t),this.outputs.push({unknownKeyVals:[]});var r=t.unknownKeyVals||[],n=this.outputs.length-1;if(!Array.isArray(r))throw new Error("unknownKeyVals must be an Array");return r.forEach((function(t){return e.addUnknownKeyValToInput(n,t)})),a.addOutputAttributes(this.outputs,t),this}},{key:"clearFinalizedInput",value:function(t){var e=a.checkForInput(this.inputs,t);a.inputCheckUncleanFinalized(t,e);for(var r=0,n=Object.keys(e);r<n.length;r++){var i=n[r];["witnessUtxo","nonWitnessUtxo","finalScriptSig","finalScriptWitness","unknownKeyVals"].includes(i)||delete e[i]}return this}},{key:"combine",value:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=u.combine([this].concat(e));return Object.assign(this,n),this}},{key:"getTransaction",value:function(){return this.globalMap.unsignedTx.toBuffer()}}],[{key:"fromBase64",value:function(e,r){var n=t.from(e,"base64");return this.fromBuffer(n,r)}},{key:"fromHex",value:function(e,r){var n=t.from(e,"hex");return this.fromBuffer(n,r)}},{key:"fromBuffer",value:function(t,e){var r=o.psbtFromBuffer(t,e),n=new this(r.globalMap.unsignedTx);return Object.assign(n,r),n}}]),e}();e.Psbt=h}).call(this,r(12).Buffer)},4516:function(t,e,r){"use strict";var n=r(37);Object.defineProperty(e,"__esModule",{value:!0});var i=r(3759);function u(t,e,r){return function(n){if(!t.has(n)){var i=r.filter((function(t){return t.key.toString("hex")===n}))[0];e.push(i),t.add(n)}}}function o(t){return t.globalMap.unsignedTx}function s(t){var e=new Set;return t.forEach((function(t){var r=t.key.toString("hex");if(e.has(r))throw new Error("Combine: KeyValue Map keys should be unique");e.add(r)})),e}e.combine=function(t){var e=t[0],r=i.psbtToKeyVals(e),a=t.slice(1);if(0===a.length)throw new Error("Combine: Nothing to combine");var h=o(e);if(void 0===h)throw new Error("Combine: Self missing transaction");var f,c=s(r.globalKeyVals),p=r.inputKeyVals.map(s),l=r.outputKeyVals.map(s),d=n(a);try{var v=function(){var t=f.value,e=o(t);if(void 0===e||!e.toBuffer().equals(h.toBuffer()))throw new Error("Combine: One of the Psbts does not have the same transaction.");var n=i.psbtToKeyVals(t);s(n.globalKeyVals).forEach(u(c,r.globalKeyVals,n.globalKeyVals)),n.inputKeyVals.map(s).forEach((function(t,e){return t.forEach(u(p[e],r.inputKeyVals[e],n.inputKeyVals[e]))})),n.outputKeyVals.map(s).forEach((function(t,e){return t.forEach(u(l[e],r.outputKeyVals[e],n.outputKeyVals[e]))}))};for(d.s();!(f=d.n()).done;)v()}catch(m){d.e(m)}finally{d.f()}return i.psbtFromKeyVals(h,{globalMapKeyVals:r.globalKeyVals,inputKeyVals:r.inputKeyVals,outputKeyVals:r.outputKeyVals})}},4517:function(t,e,r){"use strict";(function(t){var n=r(37);Object.defineProperty(e,"__esModule",{value:!0});var i=r(3610),u=r(3611),o=r(3238),s=r(3054);function a(e,r,n){if(!r.equals(t.from([n])))throw new Error("Format Error: Invalid ".concat(e," key: ").concat(r.toString("hex")))}function h(t,e){var r,o=e.globalMapKeyVals,h=e.inputKeyVals,f=e.outputKeyVals,c={unsignedTx:t},p=0,l=n(o);try{for(l.s();!(r=l.n()).done;){var d=r.value;switch(d.key[0]){case s.GlobalTypes.UNSIGNED_TX:if(a("global",d.key,s.GlobalTypes.UNSIGNED_TX),p>0)throw new Error("Format Error: GlobalMap has multiple UNSIGNED_TX");p++;break;case s.GlobalTypes.GLOBAL_XPUB:void 0===c.globalXpub&&(c.globalXpub=[]),c.globalXpub.push(i.globals.globalXpub.decode(d));break;default:c.unknownKeyVals||(c.unknownKeyVals=[]),c.unknownKeyVals.push(d)}}}catch(C){l.e(C)}finally{l.f()}var v,m=h.length,y=f.length,g=[],w=[],_=n(u.range(m));try{for(_.s();!(v=_.n()).done;){var b,S=v.value,E={},k=n(h[S]);try{for(k.s();!(b=k.n()).done;){var T=b.value;switch(i.inputs.checkPubkey(T),T.key[0]){case s.InputTypes.NON_WITNESS_UTXO:if(a("input",T.key,s.InputTypes.NON_WITNESS_UTXO),void 0!==E.nonWitnessUtxo)throw new Error("Format Error: Input has multiple NON_WITNESS_UTXO");E.nonWitnessUtxo=i.inputs.nonWitnessUtxo.decode(T);break;case s.InputTypes.WITNESS_UTXO:if(a("input",T.key,s.InputTypes.WITNESS_UTXO),void 0!==E.witnessUtxo)throw new Error("Format Error: Input has multiple WITNESS_UTXO");E.witnessUtxo=i.inputs.witnessUtxo.decode(T);break;case s.InputTypes.PARTIAL_SIG:void 0===E.partialSig&&(E.partialSig=[]),E.partialSig.push(i.inputs.partialSig.decode(T));break;case s.InputTypes.SIGHASH_TYPE:if(a("input",T.key,s.InputTypes.SIGHASH_TYPE),void 0!==E.sighashType)throw new Error("Format Error: Input has multiple SIGHASH_TYPE");E.sighashType=i.inputs.sighashType.decode(T);break;case s.InputTypes.REDEEM_SCRIPT:if(a("input",T.key,s.InputTypes.REDEEM_SCRIPT),void 0!==E.redeemScript)throw new Error("Format Error: Input has multiple REDEEM_SCRIPT");E.redeemScript=i.inputs.redeemScript.decode(T);break;case s.InputTypes.WITNESS_SCRIPT:if(a("input",T.key,s.InputTypes.WITNESS_SCRIPT),void 0!==E.witnessScript)throw new Error("Format Error: Input has multiple WITNESS_SCRIPT");E.witnessScript=i.inputs.witnessScript.decode(T);break;case s.InputTypes.BIP32_DERIVATION:void 0===E.bip32Derivation&&(E.bip32Derivation=[]),E.bip32Derivation.push(i.inputs.bip32Derivation.decode(T));break;case s.InputTypes.FINAL_SCRIPTSIG:a("input",T.key,s.InputTypes.FINAL_SCRIPTSIG),E.finalScriptSig=i.inputs.finalScriptSig.decode(T);break;case s.InputTypes.FINAL_SCRIPTWITNESS:a("input",T.key,s.InputTypes.FINAL_SCRIPTWITNESS),E.finalScriptWitness=i.inputs.finalScriptWitness.decode(T);break;case s.InputTypes.POR_COMMITMENT:a("input",T.key,s.InputTypes.POR_COMMITMENT),E.porCommitment=i.inputs.porCommitment.decode(T);break;default:E.unknownKeyVals||(E.unknownKeyVals=[]),E.unknownKeyVals.push(T)}}}catch(C){k.e(C)}finally{k.f()}g.push(E)}}catch(C){_.e(C)}finally{_.f()}var O,P=n(u.range(y));try{for(P.s();!(O=P.n()).done;){var I,M=O.value,A={},N=n(f[M]);try{for(N.s();!(I=N.n()).done;){var B=I.value;switch(i.outputs.checkPubkey(B),B.key[0]){case s.OutputTypes.REDEEM_SCRIPT:if(a("output",B.key,s.OutputTypes.REDEEM_SCRIPT),void 0!==A.redeemScript)throw new Error("Format Error: Output has multiple REDEEM_SCRIPT");A.redeemScript=i.outputs.redeemScript.decode(B);break;case s.OutputTypes.WITNESS_SCRIPT:if(a("output",B.key,s.OutputTypes.WITNESS_SCRIPT),void 0!==A.witnessScript)throw new Error("Format Error: Output has multiple WITNESS_SCRIPT");A.witnessScript=i.outputs.witnessScript.decode(B);break;case s.OutputTypes.BIP32_DERIVATION:void 0===A.bip32Derivation&&(A.bip32Derivation=[]),A.bip32Derivation.push(i.outputs.bip32Derivation.decode(B));break;default:A.unknownKeyVals||(A.unknownKeyVals=[]),A.unknownKeyVals.push(B)}}}catch(C){N.e(C)}finally{N.f()}w.push(A)}}catch(C){P.e(C)}finally{P.f()}return{globalMap:c,inputs:g,outputs:w}}e.psbtFromBuffer=function(t,e){var r=0;function i(){var e=o.decode(t,r);r+=o.encodingLength(e);var n=t.slice(r,r+e);return r+=e,n}function a(){return{key:i(),value:i()}}function f(){if(r>=t.length)throw new Error("Format Error: Unexpected End of PSBT");var e=0===t.readUInt8(r);return e&&r++,e}if(1886610036!==function(){var e=t.readUInt32BE(r);return r+=4,e}())throw new Error("Format Error: Invalid Magic Number");if(255!==function(){var e=t.readUInt8(r);return r+=1,e}())throw new Error("Format Error: Magic Number must be followed by 0xff separator");for(var c=[],p={};!f();){var l=a(),d=l.key.toString("hex");if(p[d])throw new Error("Format Error: Keys must be unique for global keymap: key "+d);p[d]=1,c.push(l)}var v=c.filter((function(t){return t.key[0]===s.GlobalTypes.UNSIGNED_TX}));if(1!==v.length)throw new Error("Format Error: Only one UNSIGNED_TX allowed");var m,y=e(v[0].value),g=y.getInputOutputCounts(),w=g.inputCount,_=g.outputCount,b=[],S=[],E=n(u.range(w));try{for(E.s();!(m=E.n()).done;){for(var k=m.value,T={},O=[];!f();){var P=a(),I=P.key.toString("hex");if(T[I])throw new Error("Format Error: Keys must be unique for each input: input index "+k+" key "+I);T[I]=1,O.push(P)}b.push(O)}}catch(x){E.e(x)}finally{E.f()}var M,A=n(u.range(_));try{for(A.s();!(M=A.n()).done;){for(var N=M.value,B={},C=[];!f();){var U=a(),H=U.key.toString("hex");if(B[H])throw new Error("Format Error: Keys must be unique for each output: output index "+N+" key "+H);B[H]=1,C.push(U)}S.push(C)}}catch(x){A.e(x)}finally{A.f()}return h(y,{globalMapKeyVals:c,inputKeyVals:b,outputKeyVals:S})},e.checkKeyBuffer=a,e.psbtFromKeyVals=h}).call(this,r(12).Buffer)},4518:function(t,e,r){"use strict";(function(t){var n=r(37),i=r(349);Object.defineProperty(e,"__esModule",{value:!0});var u=r(3054);e.decode=function(t){if(t.key[0]!==u.GlobalTypes.GLOBAL_XPUB)throw new Error("Decode Error: could not decode globalXpub with key 0x"+t.key.toString("hex"));if(79!==t.key.length||![2,3].includes(t.key[46]))throw new Error("Decode Error: globalXpub has invalid extended pubkey in key 0x"+t.key.toString("hex"));if(t.value.length/4%1!==0)throw new Error("Decode Error: Global GLOBAL_XPUB value length should be multiple of 4");var e,r,o=t.key.slice(1),s={masterFingerprint:t.value.slice(0,4),extendedPubkey:o,path:"m"},a=n((r=t.value.length/4-1,i(Array(r).keys())));try{for(a.s();!(e=a.n()).done;){var h=e.value,f=t.value.readUInt32LE(4*h+4),c=!!(2147483648&f),p=2147483647&f;s.path+="/"+p.toString(10)+(c?"'":"")}}catch(l){a.e(l)}finally{a.f()}return s},e.encode=function(e){var r=t.from([u.GlobalTypes.GLOBAL_XPUB]),n=t.concat([r,e.extendedPubkey]),i=e.path.split("/"),o=t.allocUnsafe(4*i.length);e.masterFingerprint.copy(o,0);var s=4;return i.slice(1).forEach((function(t){var e="'"===t.slice(-1),r=2147483647&parseInt(e?t.slice(0,-1):t,10);e&&(r+=2147483648),o.writeUInt32LE(r,s),s+=4})),{key:n,value:o}},e.expected="{ masterFingerprint: Buffer; extendedPubkey: Buffer; path: string; }",e.check=function(e){var r=e.extendedPubkey,n=e.masterFingerprint,i=e.path;return t.isBuffer(r)&&78===r.length&&[2,3].indexOf(r[45])>-1&&t.isBuffer(n)&&4===n.length&&"string"===typeof i&&!!i.match(/^m(\/\d+'?)+$/)},e.canAddToArray=function(t,e,r){var n=e.extendedPubkey.toString("hex");return!r.has(n)&&(r.add(n),0===t.filter((function(t){return t.extendedPubkey.equals(e.extendedPubkey)})).length)}}).call(this,r(12).Buffer)},4519:function(t,e,r){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var n=r(3054);e.encode=function(e){return{key:t.from([n.GlobalTypes.UNSIGNED_TX]),value:e.toBuffer()}}}).call(this,r(12).Buffer)},4520:function(t,e,r){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var n=r(3054);e.decode=function(t){if(t.key[0]!==n.InputTypes.FINAL_SCRIPTSIG)throw new Error("Decode Error: could not decode finalScriptSig with key 0x"+t.key.toString("hex"));return t.value},e.encode=function(e){return{key:t.from([n.InputTypes.FINAL_SCRIPTSIG]),value:e}},e.expected="Buffer",e.check=function(e){return t.isBuffer(e)},e.canAdd=function(t,e){return!!t&&!!e&&void 0===t.finalScriptSig}}).call(this,r(12).Buffer)},4521:function(t,e,r){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var n=r(3054);e.decode=function(t){if(t.key[0]!==n.InputTypes.FINAL_SCRIPTWITNESS)throw new Error("Decode Error: could not decode finalScriptWitness with key 0x"+t.key.toString("hex"));return t.value},e.encode=function(e){return{key:t.from([n.InputTypes.FINAL_SCRIPTWITNESS]),value:e}},e.expected="Buffer",e.check=function(e){return t.isBuffer(e)},e.canAdd=function(t,e){return!!t&&!!e&&void 0===t.finalScriptWitness}}).call(this,r(12).Buffer)},4522:function(t,e,r){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var n=r(3054);e.decode=function(t){if(t.key[0]!==n.InputTypes.NON_WITNESS_UTXO)throw new Error("Decode Error: could not decode nonWitnessUtxo with key 0x"+t.key.toString("hex"));return t.value},e.encode=function(e){return{key:t.from([n.InputTypes.NON_WITNESS_UTXO]),value:e}},e.expected="Buffer",e.check=function(e){return t.isBuffer(e)},e.canAdd=function(t,e){return!!t&&!!e&&void 0===t.nonWitnessUtxo}}).call(this,r(12).Buffer)},4523:function(t,e,r){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var n=r(3054);e.decode=function(t){if(t.key[0]!==n.InputTypes.PARTIAL_SIG)throw new Error("Decode Error: could not decode partialSig with key 0x"+t.key.toString("hex"));if(34!==t.key.length&&66!==t.key.length||![2,3,4].includes(t.key[1]))throw new Error("Decode Error: partialSig has invalid pubkey in key 0x"+t.key.toString("hex"));return{pubkey:t.key.slice(1),signature:t.value}},e.encode=function(e){var r=t.from([n.InputTypes.PARTIAL_SIG]);return{key:t.concat([r,e.pubkey]),value:e.signature}},e.expected="{ pubkey: Buffer; signature: Buffer; }",e.check=function(e){return t.isBuffer(e.pubkey)&&t.isBuffer(e.signature)&&[33,65].includes(e.pubkey.length)&&[2,3,4].includes(e.pubkey[0])&&function(e){if(!t.isBuffer(e)||e.length<9)return!1;if(48!==e[0])return!1;if(e.length!==e[1]+3)return!1;if(2!==e[2])return!1;var r=e[3];if(r>33||r<1)return!1;if(2!==e[3+r+1])return!1;var n=e[3+r+2];return!(n>33||n<1)&&e.length===3+r+2+n+2}(e.signature)},e.canAddToArray=function(t,e,r){var n=e.pubkey.toString("hex");return!r.has(n)&&(r.add(n),0===t.filter((function(t){return t.pubkey.equals(e.pubkey)})).length)}}).call(this,r(12).Buffer)},4524:function(t,e,r){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var n=r(3054);e.decode=function(t){if(t.key[0]!==n.InputTypes.POR_COMMITMENT)throw new Error("Decode Error: could not decode porCommitment with key 0x"+t.key.toString("hex"));return t.value.toString("utf8")},e.encode=function(e){return{key:t.from([n.InputTypes.POR_COMMITMENT]),value:t.from(e,"utf8")}},e.expected="string",e.check=function(t){return"string"===typeof t},e.canAdd=function(t,e){return!!t&&!!e&&void 0===t.porCommitment}}).call(this,r(12).Buffer)},4525:function(t,e,r){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var n=r(3054);e.decode=function(t){if(t.key[0]!==n.InputTypes.SIGHASH_TYPE)throw new Error("Decode Error: could not decode sighashType with key 0x"+t.key.toString("hex"));return t.value.readUInt32LE(0)},e.encode=function(e){var r=t.from([n.InputTypes.SIGHASH_TYPE]),i=t.allocUnsafe(4);return i.writeUInt32LE(e,0),{key:r,value:i}},e.expected="number",e.check=function(t){return"number"===typeof t},e.canAdd=function(t,e){return!!t&&!!e&&void 0===t.sighashType}}).call(this,r(12).Buffer)},4526:function(t,e,r){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var n=r(3054),i=r(3611),u=r(3238);e.decode=function(t){if(t.key[0]!==n.InputTypes.WITNESS_UTXO)throw new Error("Decode Error: could not decode witnessUtxo with key 0x"+t.key.toString("hex"));var e=i.readUInt64LE(t.value,0),r=8,o=u.decode(t.value,r);r+=u.encodingLength(o);var s=t.value.slice(r);if(s.length!==o)throw new Error("Decode Error: WITNESS_UTXO script is not proper length");return{script:s,value:e}},e.encode=function(e){var r=e.script,o=e.value,s=u.encodingLength(r.length),a=t.allocUnsafe(8+s+r.length);return i.writeUInt64LE(a,o,0),u.encode(r.length,a,8),r.copy(a,8+s),{key:t.from([n.InputTypes.WITNESS_UTXO]),value:a}},e.expected="{ script: Buffer; value: number; }",e.check=function(e){return t.isBuffer(e.script)&&"number"===typeof e.value},e.canAdd=function(t,e){return!!t&&!!e&&void 0===t.witnessUtxo}}).call(this,r(12).Buffer)},4527:function(t,e,r){"use strict";(function(t){var n=r(37),i=r(349);Object.defineProperty(e,"__esModule",{value:!0});e.makeConverter=function(e){return{decode:function(t){if(t.key[0]!==e)throw new Error("Decode Error: could not decode bip32Derivation with key 0x"+t.key.toString("hex"));if(34!==t.key.length&&66!==t.key.length||![2,3,4].includes(t.key[1]))throw new Error("Decode Error: bip32Derivation has invalid pubkey in key 0x"+t.key.toString("hex"));if(t.value.length/4%1!==0)throw new Error("Decode Error: Input BIP32_DERIVATION value length should be multiple of 4");var r,u,o=t.key.slice(1),s={masterFingerprint:t.value.slice(0,4),pubkey:o,path:"m"},a=n((u=t.value.length/4-1,i(Array(u).keys())));try{for(a.s();!(r=a.n()).done;){var h=r.value,f=t.value.readUInt32LE(4*h+4),c=!!(2147483648&f),p=2147483647&f;s.path+="/"+p.toString(10)+(c?"'":"")}}catch(l){a.e(l)}finally{a.f()}return s},encode:function(r){var n=t.from([e]),i=t.concat([n,r.pubkey]),u=r.path.split("/"),o=t.allocUnsafe(4*u.length);r.masterFingerprint.copy(o,0);var s=4;return u.slice(1).forEach((function(t){var e="'"===t.slice(-1),r=2147483647&parseInt(e?t.slice(0,-1):t,10);e&&(r+=2147483648),o.writeUInt32LE(r,s),s+=4})),{key:i,value:o}},check:function(e){return t.isBuffer(e.pubkey)&&t.isBuffer(e.masterFingerprint)&&"string"===typeof e.path&&[33,65].includes(e.pubkey.length)&&[2,3,4].includes(e.pubkey[0])&&4===e.masterFingerprint.length},expected:"{ masterFingerprint: Buffer; pubkey: Buffer; path: string; }",canAddToArray:function(t,e,r){var n=e.pubkey.toString("hex");return!r.has(n)&&(r.add(n),0===t.filter((function(t){return t.pubkey.equals(e.pubkey)})).length)}}}}).call(this,r(12).Buffer)},4528:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.makeChecker=function(t){return function(e){var r;if(t.includes(e.key[0])&&(33!==(r=e.key.slice(1)).length&&65!==r.length||![2,3,4].includes(r[0])))throw new Error("Format Error: invalid pubkey in key 0x"+e.key.toString("hex"));return r}}},4529:function(t,e,r){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.makeConverter=function(e){return{decode:function(t){if(t.key[0]!==e)throw new Error("Decode Error: could not decode redeemScript with key 0x"+t.key.toString("hex"));return t.value},encode:function(r){return{key:t.from([e]),value:r}},check:function(e){return t.isBuffer(e)},expected:"Buffer",canAdd:function(t,e){return!!t&&!!e&&void 0===t.redeemScript}}}}).call(this,r(12).Buffer)},4530:function(t,e,r){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.makeConverter=function(e){return{decode:function(t){if(t.key[0]!==e)throw new Error("Decode Error: could not decode witnessScript with key 0x"+t.key.toString("hex"));return t.value},encode:function(r){return{key:t.from([e]),value:r}},check:function(e){return t.isBuffer(e)},expected:"Buffer",canAdd:function(t,e){return!!t&&!!e&&void 0===t.witnessScript}}}}).call(this,r(12).Buffer)},4531:function(t,e,r){"use strict";(function(t){var n=r(66);Object.defineProperty(e,"__esModule",{value:!0});var i=r(3610),u=r(3611);e.psbtToBuffer=function(e){var r=a({globalMap:e.globalMap,inputs:e.inputs,outputs:e.outputs}),n=r.globalKeyVals,i=r.inputKeyVals,o=r.outputKeyVals,s=u.keyValsToBuffer(n),h=function(e){return 0===e.length?[t.from([0])]:e.map(u.keyValsToBuffer)},f=h(i),c=h(o),p=t.allocUnsafe(5);return p.writeUIntBE(482972169471,0,5),t.concat([p,s].concat(f,c))};var o=function(t,e){return t.key.compare(e.key)};function s(t,e){var r=new Set,i=Object.entries(t).reduce((function(t,i){var u=n(i,2),o=u[0],s=u[1];if("unknownKeyVals"===o)return t;var a=e[o];if(void 0===a)return t;var h=(Array.isArray(s)?s:[s]).map(a.encode);return h.map((function(t){return t.key.toString("hex")})).forEach((function(t){if(r.has(t))throw new Error("Serialize Error: Duplicate key: "+t);r.add(t)})),t.concat(h)}),[]),u=t.unknownKeyVals?t.unknownKeyVals.filter((function(t){return!r.has(t.key.toString("hex"))})):[];return i.concat(u).sort(o)}function a(t){var e=t.globalMap,r=t.inputs,n=t.outputs;return{globalKeyVals:s(e,i.globals),inputKeyVals:r.map((function(t){return s(t,i.inputs)})),outputKeyVals:n.map((function(t){return s(t,i.outputs)}))}}e.psbtToKeyVals=a}).call(this,r(12).Buffer)},4532:function(t,e,r){"use strict";(function(t){var n=r(66),i=r(37),u=r(3),o=r(20);Object.defineProperty(e,"__esModule",{value:!0});var s=r(3607),a=r(3236),h=r(4533),f=r(3081),c=r(3608),p=r(3053),l=r(3234),d=r(3013),v=r(3013),m=r(3237),y=r(3068),g=r(3021),w=h.types,_=new Set(["p2pkh","p2pk","p2wpkh","p2ms","p2sh-p2pkh","p2sh-p2pk","p2sh-p2wpkh","p2sh-p2ms","p2wsh-p2pkh","p2wsh-p2pk","p2wsh-p2ms","p2sh-p2wsh-p2pkh","p2sh-p2wsh-p2pk","p2sh-p2wsh-p2ms"]);function b(t,e,r){try{g(t,e)}catch(n){throw new Error(r)}}var S=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p.bitcoin,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2500;u(this,e),this.network=t,this.maximumFeeRate=r,this.__PREV_TX_SET={},this.__INPUTS=[],this.__TX=new m.Transaction,this.__TX.version=2,this.__USE_LOW_R=!1,console.warn("Deprecation Warning: TransactionBuilder will be removed in the future. (v6.x.x or later) Please use the Psbt class instead. Examples of usage are available in the transactions-psbt.js integration test file on our Github. A high level explanation is available in the psbt.ts and psbt.js files as well.")}return o(e,[{key:"setLowR",value:function(t){return g(g.maybe(g.Boolean),t),void 0===t&&(t=!0),this.__USE_LOW_R=t,t}},{key:"setLockTime",value:function(t){if(g(y.UInt32,t),this.__INPUTS.some((function(t){return!!t.signatures&&t.signatures.some((function(t){return void 0!==t}))})))throw new Error("No, this would invalidate signatures");this.__TX.locktime=t}},{key:"setVersion",value:function(t){g(y.UInt32,t),this.__TX.version=t}},{key:"addInput",value:function(e,r,n,i){if(!this.__canModifyInputs())throw new Error("No, this would invalidate signatures");var u,o;if("string"===typeof(o=e)||o instanceof String)e=a.reverseBuffer(t.from(e,"hex"));else if(function(t){return t instanceof m.Transaction}(e)){var s=e.outs[r];i=s.script,u=s.value,e=e.getHash(!1)}return this.__addInputUnsafe(e,r,{sequence:n,prevOutScript:i,value:u})}},{key:"addOutput",value:function(t,e){if(!this.__canModifyOutputs())throw new Error("No, this would invalidate signatures");return"string"===typeof t&&(t=s.toOutputScript(t,this.network)),this.__TX.addOutput(t,e)}},{key:"build",value:function(){return this.__build(!1)}},{key:"buildIncomplete",value:function(){return this.__build(!0)}},{key:"sign",value:function(t,e,r,u,o,s){!function(t){var e,r=t.input,u=t.ourPubKey,o=t.keyPair,s=t.signatureHash,a=t.hashType,h=t.useLowR,f=!1,c=i(r.pubkeys.entries());try{for(c.s();!(e=c.n()).done;){var p=n(e.value,2),l=p[0],v=p[1];if(u.equals(v)){if(r.signatures[l])throw new Error("Signature already exists");if(33!==u.length&&r.hasWitness)throw new Error("BIP143 rejects uncompressed public keys in P2WPKH or P2WSH");var m=o.sign(s,h);r.signatures[l]=d.signature.encode(m,a),f=!0}}}catch(y){c.e(y)}finally{c.f()}if(!f)throw new Error("Key pair cannot sign for this input")}(function(t,e,r,n,i,u,o,s,a,h,f){var c;if("number"===typeof i)console.warn("DEPRECATED: TransactionBuilder sign method arguments will change in v6, please use the TxbSignArg interface"),c=i;else{if("object"!==typeof i)throw new TypeError("TransactionBuilder sign first arg must be TxbSignArg or number");!function(t,e){if(!_.has(e.prevOutScriptType))throw new TypeError('Unknown prevOutScriptType "'.concat(e.prevOutScriptType,'"'));b(g.Number,e.vin,"sign must include vin parameter as Number (input index)"),b(y.Signer,e.keyPair,"sign must include keyPair parameter as Signer interface"),b(g.maybe(g.Number),e.hashType,"sign hashType parameter must be a number");var r=(t[e.vin]||[]).prevOutType,n=e.prevOutScriptType;switch(n){case"p2pkh":if(r&&"pubkeyhash"!==r)throw new TypeError("input #".concat(e.vin," is not of type p2pkh: ").concat(r));b(g.value(void 0),e.witnessScript,"".concat(n," requires NO witnessScript")),b(g.value(void 0),e.redeemScript,"".concat(n," requires NO redeemScript")),b(g.value(void 0),e.witnessValue,"".concat(n," requires NO witnessValue"));break;case"p2pk":if(r&&"pubkey"!==r)throw new TypeError("input #".concat(e.vin," is not of type p2pk: ").concat(r));b(g.value(void 0),e.witnessScript,"".concat(n," requires NO witnessScript")),b(g.value(void 0),e.redeemScript,"".concat(n," requires NO redeemScript")),b(g.value(void 0),e.witnessValue,"".concat(n," requires NO witnessValue"));break;case"p2wpkh":if(r&&"witnesspubkeyhash"!==r)throw new TypeError("input #".concat(e.vin," is not of type p2wpkh: ").concat(r));b(g.value(void 0),e.witnessScript,"".concat(n," requires NO witnessScript")),b(g.value(void 0),e.redeemScript,"".concat(n," requires NO redeemScript")),b(y.Satoshi,e.witnessValue,"".concat(n," requires witnessValue"));break;case"p2ms":if(r&&"multisig"!==r)throw new TypeError("input #".concat(e.vin," is not of type p2ms: ").concat(r));b(g.value(void 0),e.witnessScript,"".concat(n," requires NO witnessScript")),b(g.value(void 0),e.redeemScript,"".concat(n," requires NO redeemScript")),b(g.value(void 0),e.witnessValue,"".concat(n," requires NO witnessValue"));break;case"p2sh-p2wpkh":if(r&&"scripthash"!==r)throw new TypeError("input #".concat(e.vin," is not of type p2sh-p2wpkh: ").concat(r));b(g.value(void 0),e.witnessScript,"".concat(n," requires NO witnessScript")),b(g.Buffer,e.redeemScript,"".concat(n," requires redeemScript")),b(y.Satoshi,e.witnessValue,"".concat(n," requires witnessValue"));break;case"p2sh-p2ms":case"p2sh-p2pk":case"p2sh-p2pkh":if(r&&"scripthash"!==r)throw new TypeError("input #".concat(e.vin," is not of type ").concat(n,": ").concat(r));b(g.value(void 0),e.witnessScript,"".concat(n," requires NO witnessScript")),b(g.Buffer,e.redeemScript,"".concat(n," requires redeemScript")),b(g.value(void 0),e.witnessValue,"".concat(n," requires NO witnessValue"));break;case"p2wsh-p2ms":case"p2wsh-p2pk":case"p2wsh-p2pkh":if(r&&"witnessscripthash"!==r)throw new TypeError("input #".concat(e.vin," is not of type ").concat(n,": ").concat(r));b(g.Buffer,e.witnessScript,"".concat(n," requires witnessScript")),b(g.value(void 0),e.redeemScript,"".concat(n," requires NO redeemScript")),b(y.Satoshi,e.witnessValue,"".concat(n," requires witnessValue"));break;case"p2sh-p2wsh-p2ms":case"p2sh-p2wsh-p2pk":case"p2sh-p2wsh-p2pkh":if(r&&"scripthash"!==r)throw new TypeError("input #".concat(e.vin," is not of type ").concat(n,": ").concat(r));b(g.Buffer,e.witnessScript,"".concat(n," requires witnessScript")),b(g.Buffer,e.redeemScript,"".concat(n," requires witnessScript")),b(y.Satoshi,e.witnessValue,"".concat(n," requires witnessScript"))}}(e,i),c=i.vin,u=i.keyPair,o=i.redeemScript,s=i.hashType,a=i.witnessValue,h=i.witnessScript}if(void 0===u)throw new Error("sign requires keypair");if(u.network&&u.network!==t)throw new TypeError("Inconsistent network");if(!e[c])throw new Error("No input at index: "+c);if(s=s||m.Transaction.SIGHASH_ALL,r(s))throw new Error("Transaction needs outputs");var p=e[c];if(void 0!==p.redeemScript&&o&&!p.redeemScript.equals(o))throw new Error("Inconsistent redeemScript");var v,S=u.publicKey||u.getPublicKey&&u.getPublicKey();if(!O(p)){if(void 0!==a){if(void 0!==p.value&&p.value!==a)throw new Error("Input did not match witnessValue");g(y.Satoshi,a),p.value=a}if(!O(p)){var E=function(t,e,r,n){if(r&&n){var i=l.p2wsh({redeem:{output:n}}),u=l.p2wsh({output:r}),o=l.p2sh({redeem:{output:r}}),s=l.p2sh({redeem:i});if(!i.hash.equals(u.hash))throw new Error("Witness script inconsistent with prevOutScript");if(!o.hash.equals(s.hash))throw new Error("Redeem script inconsistent with prevOutScript");var a=k(i.redeem.output,e);if(!a.pubkeys)throw new Error(a.type+" not supported as witnessScript ("+d.toASM(n)+")");t.signatures&&t.signatures.some((function(t){return void 0!==t}))&&(a.signatures=t.signatures);var h=n;if(a.type===w.P2WPKH)throw new Error("P2SH(P2WSH(P2WPKH)) is a consensus failure");return{redeemScript:r,redeemScriptType:w.P2WSH,witnessScript:n,witnessScriptType:a.type,prevOutType:w.P2SH,prevOutScript:o.output,hasWitness:!0,signScript:h,signType:a.type,pubkeys:a.pubkeys,signatures:a.signatures,maxSignatures:a.maxSignatures}}if(r){var f=l.p2sh({redeem:{output:r}});if(t.prevOutScript){var c;try{c=l.p2sh({output:t.prevOutScript})}catch(T){throw new Error("PrevOutScript must be P2SH")}if(!f.hash.equals(c.hash))throw new Error("Redeem script inconsistent with prevOutScript")}var p=k(f.redeem.output,e);if(!p.pubkeys)throw new Error(p.type+" not supported as redeemScript ("+d.toASM(r)+")");t.signatures&&t.signatures.some((function(t){return void 0!==t}))&&(p.signatures=t.signatures);var v=r;return p.type===w.P2WPKH&&(v=l.p2pkh({pubkey:p.pubkeys[0]}).output),{redeemScript:r,redeemScriptType:p.type,prevOutType:w.P2SH,prevOutScript:f.output,hasWitness:p.type===w.P2WPKH,signScript:v,signType:p.type,pubkeys:p.pubkeys,signatures:p.signatures,maxSignatures:p.maxSignatures}}if(n){var m=l.p2wsh({redeem:{output:n}});if(t.prevOutScript){var y=l.p2wsh({output:t.prevOutScript});if(!m.hash.equals(y.hash))throw new Error("Witness script inconsistent with prevOutScript")}var g=k(m.redeem.output,e);if(!g.pubkeys)throw new Error(g.type+" not supported as witnessScript ("+d.toASM(n)+")");t.signatures&&t.signatures.some((function(t){return void 0!==t}))&&(g.signatures=t.signatures);var _=n;if(g.type===w.P2WPKH)throw new Error("P2WSH(P2WPKH) is a consensus failure");return{witnessScript:n,witnessScriptType:g.type,prevOutType:w.P2WSH,prevOutScript:m.output,hasWitness:!0,signScript:_,signType:g.type,pubkeys:g.pubkeys,signatures:g.signatures,maxSignatures:g.maxSignatures}}if(t.prevOutType&&t.prevOutScript){if(t.prevOutType===w.P2SH)throw new Error("PrevOutScript is "+t.prevOutType+", requires redeemScript");if(t.prevOutType===w.P2WSH)throw new Error("PrevOutScript is "+t.prevOutType+", requires witnessScript");if(!t.prevOutScript)throw new Error("PrevOutScript is missing");var b=k(t.prevOutScript,e);if(!b.pubkeys)throw new Error(b.type+" not supported ("+d.toASM(t.prevOutScript)+")");t.signatures&&t.signatures.some((function(t){return void 0!==t}))&&(b.signatures=t.signatures);var S=t.prevOutScript;return b.type===w.P2WPKH&&(S=l.p2pkh({pubkey:b.pubkeys[0]}).output),{prevOutType:b.type,prevOutScript:t.prevOutScript,hasWitness:b.type===w.P2WPKH,signScript:S,signType:b.type,pubkeys:b.pubkeys,signatures:b.signatures,maxSignatures:b.maxSignatures}}var E=l.p2pkh({pubkey:e}).output;return{prevOutType:w.P2PKH,prevOutScript:E,hasWitness:!1,signScript:E,signType:w.P2PKH,pubkeys:[e],signatures:[void 0]}}(p,S,o,h);Object.assign(p,E)}if(!O(p))throw Error(p.prevOutType+" not supported")}v=p.hasWitness?n.hashForWitnessV0(c,p.signScript,p.value,s):n.hashForSignature(c,p.signScript,s);return{input:p,ourPubKey:S,keyPair:u,signatureHash:v,hashType:s,useLowR:!!f}}(this.network,this.__INPUTS,this.__needsOutputs.bind(this),this.__TX,t,e,r,u,o,s,this.__USE_LOW_R))}},{key:"__addInputUnsafe",value:function(t,e,r){if(m.Transaction.isCoinbaseHash(t))throw new Error("coinbase inputs not supported");var n=t.toString("hex")+":"+e;if(void 0!==this.__PREV_TX_SET[n])throw new Error("Duplicate TxOut: "+n);var i={};if(void 0!==r.script&&(i=E(r.script,r.witness||[])),void 0!==r.value&&(i.value=r.value),!i.prevOutScript&&r.prevOutScript){var u;if(!i.pubkeys&&!i.signatures){var o=k(r.prevOutScript);o.pubkeys&&(i.pubkeys=o.pubkeys,i.signatures=o.signatures),u=o.type}i.prevOutScript=r.prevOutScript,i.prevOutType=u||h.output(r.prevOutScript)}var s=this.__TX.addInput(t,e,r.sequence,r.scriptSig);return this.__INPUTS[s]=i,this.__PREV_TX_SET[n]=!0,s}},{key:"__build",value:function(t){if(!t){if(!this.__TX.ins.length)throw new Error("Transaction has no inputs");if(!this.__TX.outs.length)throw new Error("Transaction has no outputs")}var e=this.__TX.clone();if(this.__INPUTS.forEach((function(r,n){if(!r.prevOutType&&!t)throw new Error("Transaction is not complete");var i=T(r.prevOutType,r,t);if(i)e.setInputScript(n,i.input),e.setWitness(n,i.witness);else{if(!t&&r.prevOutType===w.NONSTANDARD)throw new Error("Unknown input type");if(!t)throw new Error("Not enough information")}})),!t&&this.__overMaximumFees(e.virtualSize()))throw new Error("Transaction has absurd fees");return e}},{key:"__canModifyInputs",value:function(){return this.__INPUTS.every((function(t){return!t.signatures||t.signatures.every((function(t){return!t||0!==(P(t)&m.Transaction.SIGHASH_ANYONECANPAY)}))}))}},{key:"__needsOutputs",value:function(t){return t===m.Transaction.SIGHASH_ALL?0===this.__TX.outs.length:0===this.__TX.outs.length&&this.__INPUTS.some((function(t){return!!t.signatures&&t.signatures.some((function(t){return!!t&&!(P(t)&m.Transaction.SIGHASH_NONE)}))}))}},{key:"__canModifyOutputs",value:function(){var t=this.__TX.ins.length,e=this.__TX.outs.length;return this.__INPUTS.every((function(r){return void 0===r.signatures||r.signatures.every((function(r){if(!r)return!0;var n=31&P(r);return n===m.Transaction.SIGHASH_NONE||n===m.Transaction.SIGHASH_SINGLE&&t<=e}))}))}},{key:"__overMaximumFees",value:function(t){return(this.__INPUTS.reduce((function(t,e){return t+(e.value>>>0)}),0)-this.__TX.outs.reduce((function(t,e){return t+e.value}),0))/t>this.maximumFeeRate}}],[{key:"fromTransaction",value:function(t,r){var n=new e(r);return n.setVersion(t.version),n.setLockTime(t.locktime),t.outs.forEach((function(t){n.addOutput(t.script,t.value)})),t.ins.forEach((function(t){n.__addInputUnsafe(t.hash,t.index,{sequence:t.sequence,script:t.script,witness:t.witness})})),n.__INPUTS.forEach((function(e,r){!function(t,e,r){if(t.redeemScriptType!==w.P2MS||!t.redeemScript)return;if(t.pubkeys.length===t.signatures.length)return;var n=t.signatures.concat();t.signatures=t.pubkeys.map((function(i){var u,o=c.fromPublicKey(i);return n.some((function(i,s){if(!i)return!1;var a=d.signature.decode(i),h=e.hashForSignature(r,t.redeemScript,a.hashType);return!!o.verify(h,a.signature)&&(n[s]=void 0,u=i,!0)})),u}))}(e,t,r)})),n}}]),e}();function E(t,e,r,n){if(0===t.length&&0===e.length)return{};if(!r){var i=h.input(t,!0),u=h.witness(e,!0);i===w.NONSTANDARD&&(i=void 0),u===w.NONSTANDARD&&(u=void 0),r=i||u}switch(r){case w.P2WPKH:var o=l.p2wpkh({witness:e}),s=o.output,a=o.pubkey,f=o.signature;return{prevOutScript:s,prevOutType:w.P2WPKH,pubkeys:[a],signatures:[f]};case w.P2PKH:var c=l.p2pkh({input:t}),p=c.output,v=c.pubkey,m=c.signature;return{prevOutScript:p,prevOutType:w.P2PKH,pubkeys:[v],signatures:[m]};case w.P2PK:var y=l.p2pk({input:t}).signature;return{prevOutType:w.P2PK,pubkeys:[void 0],signatures:[y]};case w.P2MS:var g=l.p2ms({input:t,output:n},{allowIncomplete:!0}),_=g.m,b=g.pubkeys,S=g.signatures;return{prevOutType:w.P2MS,pubkeys:b,signatures:S,maxSignatures:_}}if(r===w.P2SH){var k=l.p2sh({input:t,witness:e}),T=k.output,O=k.redeem,P=h.output(O.output),I=E(O.input,O.witness,P,O.output);return I.prevOutType?{prevOutScript:T,prevOutType:w.P2SH,redeemScript:O.output,redeemScriptType:I.prevOutType,witnessScript:I.witnessScript,witnessScriptType:I.witnessScriptType,pubkeys:I.pubkeys,signatures:I.signatures}:{}}if(r===w.P2WSH){var M,A=l.p2wsh({input:t,witness:e}),N=A.output,B=A.redeem,C=h.output(B.output);return(M=C===w.P2WPKH?E(B.input,B.witness,C):E(d.compile(B.witness),[],C,B.output)).prevOutType?{prevOutScript:N,prevOutType:w.P2WSH,witnessScript:B.output,witnessScriptType:M.prevOutType,pubkeys:M.pubkeys,signatures:M.signatures}:{}}return{prevOutType:w.NONSTANDARD,prevOutScript:t}}function k(t,e){g(y.Buffer,t);var r=h.output(t);switch(r){case w.P2PKH:if(!e)return{type:r};var n=l.p2pkh({output:t}).hash,i=f.hash160(e);return n.equals(i)?{type:r,pubkeys:[e],signatures:[void 0]}:{type:r};case w.P2WPKH:if(!e)return{type:r};var u=l.p2wpkh({output:t}).hash,o=f.hash160(e);return u.equals(o)?{type:r,pubkeys:[e],signatures:[void 0]}:{type:r};case w.P2PK:return{type:r,pubkeys:[l.p2pk({output:t}).pubkey],signatures:[void 0]};case w.P2MS:var s=l.p2ms({output:t});return{type:r,pubkeys:s.pubkeys,signatures:s.pubkeys.map((function(){})),maxSignatures:s.m}}return{type:r}}function T(t,e,r){var n=e.pubkeys||[],i=e.signatures||[];switch(t){case w.P2PKH:if(0===n.length)break;if(0===i.length)break;return l.p2pkh({pubkey:n[0],signature:i[0]});case w.P2WPKH:if(0===n.length)break;if(0===i.length)break;return l.p2wpkh({pubkey:n[0],signature:i[0]});case w.P2PK:if(0===n.length)break;if(0===i.length)break;return l.p2pk({signature:i[0]});case w.P2MS:var u=e.maxSignatures;i=r?i.map((function(t){return t||v.OPS.OP_0})):i.filter((function(t){return t}));var o=!r||u===i.length;return l.p2ms({m:u,pubkeys:n,signatures:i},{allowIncomplete:r,validate:o});case w.P2SH:var s=T(e.redeemScriptType,e,r);if(!s)return;return l.p2sh({redeem:{output:s.output||e.redeemScript,input:s.input,witness:s.witness}});case w.P2WSH:var a=T(e.witnessScriptType,e,r);if(!a)return;return l.p2wsh({redeem:{output:e.witnessScript,input:a.input,witness:a.witness}})}}function O(t){return void 0!==t.signScript&&void 0!==t.signType&&void 0!==t.pubkeys&&void 0!==t.signatures&&t.signatures.length===t.pubkeys.length&&t.pubkeys.length>0&&(!1===t.hasWitness||void 0!==t.value)}function P(t){return t.readUInt8(t.length-1)}e.TransactionBuilder=S}).call(this,r(12).Buffer)},4533:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(3013),i=r(3612),u=r(4536),o=r(3613),s=r(3614),a=r(4541),h=r(4544),f=r(4546),c=r(4548),p={P2MS:"multisig",NONSTANDARD:"nonstandard",NULLDATA:"nulldata",P2PK:"pubkey",P2PKH:"pubkeyhash",P2SH:"scripthash",P2WPKH:"witnesspubkeyhash",P2WSH:"witnessscripthash",WITNESS_COMMITMENT:"witnesscommitment"};e.types=p,e.output=function(t){if(f.output.check(t))return p.P2WPKH;if(c.output.check(t))return p.P2WSH;if(s.output.check(t))return p.P2PKH;if(a.output.check(t))return p.P2SH;var e=n.decompile(t);if(!e)throw new TypeError("Invalid script");return i.output.check(e)?p.P2MS:o.output.check(e)?p.P2PK:h.output.check(e)?p.WITNESS_COMMITMENT:u.output.check(e)?p.NULLDATA:p.NONSTANDARD},e.input=function(t,e){var r=n.decompile(t);if(!r)throw new TypeError("Invalid script");return s.input.check(r)?p.P2PKH:a.input.check(r,e)?p.P2SH:i.input.check(r,e)?p.P2MS:o.input.check(r)?p.P2PK:p.NONSTANDARD},e.witness=function(t,e){var r=n.decompile(t);if(!r)throw new TypeError("Invalid script");return f.input.check(r)?p.P2WPKH:c.input.check(r,e)?p.P2WSH:p.NONSTANDARD}},4534:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(3013),i=r(3013);function u(t){return t===i.OPS.OP_0||n.isCanonicalScriptSignature(t)}function o(t,e){var r=n.decompile(t);return!(r.length<2)&&(r[0]===i.OPS.OP_0&&(e?r.slice(1).every(u):r.slice(1).every(n.isCanonicalScriptSignature)))}e.check=o,o.toJSON=function(){return"multisig input"}},4535:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(3013),i=r(3013),u=r(3068),o=i.OPS.OP_RESERVED;function s(t,e){var r=n.decompile(t);if(r.length<4)return!1;if(r[r.length-1]!==i.OPS.OP_CHECKMULTISIG)return!1;if(!u.Number(r[0]))return!1;if(!u.Number(r[r.length-2]))return!1;var s=r[0]-o,a=r[r.length-2]-o;return!(s<=0)&&(!(a>16)&&(!(s>a)&&(a===r.length-3&&(!!e||r.slice(1,-2).every(n.isCanonicalPubKey)))))}e.check=s,s.toJSON=function(){return"multi-sig output"}},4536:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(3013),i=n.OPS;function u(t){var e=n.compile(t);return e.length>1&&e[0]===i.OP_RETURN}e.check=u,u.toJSON=function(){return"null data output"};var o={check:u};e.output=o},4537:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(3013);function i(t){var e=n.decompile(t);return 1===e.length&&n.isCanonicalScriptSignature(e[0])}e.check=i,i.toJSON=function(){return"pubKey input"}},4538:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(3013),i=r(3013);function u(t){var e=n.decompile(t);return 2===e.length&&n.isCanonicalPubKey(e[0])&&e[1]===i.OPS.OP_CHECKSIG}e.check=u,u.toJSON=function(){return"pubKey output"}},4539:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(3013);function i(t){var e=n.decompile(t);return 2===e.length&&n.isCanonicalScriptSignature(e[0])&&n.isCanonicalPubKey(e[1])}e.check=i,i.toJSON=function(){return"pubKeyHash input"}},4540:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(3013),i=r(3013);function u(t){var e=n.compile(t);return 25===e.length&&e[0]===i.OPS.OP_DUP&&e[1]===i.OPS.OP_HASH160&&20===e[2]&&e[23]===i.OPS.OP_EQUALVERIFY&&e[24]===i.OPS.OP_CHECKSIG}e.check=u,u.toJSON=function(){return"pubKeyHash output"}},4541:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(4542);e.input=n;var i=r(4543);e.output=i},4542:function(t,e,r){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var n=r(3013),i=r(3612),u=r(3613),o=r(3614),s=r(3761),a=r(3762);function h(e,r){var h=n.decompile(e);if(h.length<1)return!1;var f=h[h.length-1];if(!t.isBuffer(f))return!1;var c=n.decompile(n.compile(h.slice(0,-1))),p=n.decompile(f);return!!p&&(!!n.isPushOnly(c)&&(1===h.length?a.check(p)||s.check(p):!(!o.input.check(c)||!o.output.check(p))||(!(!i.input.check(c,r)||!i.output.check(p))||!(!u.input.check(c)||!u.output.check(p)))))}e.check=h,h.toJSON=function(){return"scriptHash input"}}).call(this,r(12).Buffer)},4543:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(3013),i=r(3013);function u(t){var e=n.compile(t);return 23===e.length&&e[0]===i.OPS.OP_HASH160&&20===e[1]&&e[22]===i.OPS.OP_EQUAL}e.check=u,u.toJSON=function(){return"scriptHash output"}},4544:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(4545);e.output=n},4545:function(t,e,r){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var n=r(3013),i=r(3013),u=r(3068),o=r(3021),s=t.from("aa21a9ed","hex");function a(t){var e=n.compile(t);return e.length>37&&e[0]===i.OPS.OP_RETURN&&36===e[1]&&e.slice(2,6).equals(s)}e.check=a,a.toJSON=function(){return"Witness commitment output"},e.encode=function(e){o(u.Hash256bit,e);var r=t.allocUnsafe(36);return s.copy(r,0),e.copy(r,4),n.compile([i.OPS.OP_RETURN,r])},e.decode=function(t){return o(a,t),n.decompile(t)[1].slice(4,36)}}).call(this,r(12).Buffer)},4546:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(4547);e.input=n;var i=r(3761);e.output=i},4547:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(3013);function i(t){var e,r=n.decompile(t);return 2===r.length&&n.isCanonicalScriptSignature(r[0])&&(e=r[1],n.isCanonicalPubKey(e)&&33===e.length)}e.check=i,i.toJSON=function(){return"witnessPubKeyHash input"}},4548:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(4549);e.input=n;var i=r(3762);e.output=i},4549:function(t,e,r){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var n=r(3013),i=r(3021),u=r(3612),o=r(3613),s=r(3614);function a(e,r){if(i(i.Array,e),e.length<1)return!1;var a=e[e.length-1];if(!t.isBuffer(a))return!1;var h=n.decompile(a);if(!h||0===h.length)return!1;var f=n.compile(e.slice(0,-1));return!(!s.input.check(f)||!s.output.check(h))||(!(!u.input.check(f,r)||!u.output.check(h))||!(!o.input.check(f)||!o.output.check(h)))}e.check=a,a.toJSON=function(){return"witnessScriptHash input"}}).call(this,r(12).Buffer)},4553:function(t,e,r){"use strict";function n(t){return(n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(){return(i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}function u(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function o(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?u(r,!0).forEach((function(e){m(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u(r).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function s(t,e){if(null==t)return{};var r,n,i=function(t,e){if(null==t)return{};var r,n,i={},u=Object.keys(t);for(n=0;n<u.length;n++)r=u[n],e.indexOf(r)>=0||(i[r]=t[r]);return i}(t,e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(n=0;n<u.length;n++)r=u[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function f(t,e,r){return e&&h(t.prototype,e),r&&h(t,r),t}function c(t,e){return!e||"object"!==n(e)&&"function"!==typeof e?l(t):e}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&v(t,e)}function v(t,e){return(v=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function m(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var y=r(0),g=(r(33),r(3282)),w=r(3156);function _(t){for(var e="",r=0;r<t.length;r++){var n=t.charCodeAt(r);n<128?e+=String.fromCharCode(n):n<2048?(e+=String.fromCharCode(192|n>>6),e+=String.fromCharCode(128|63&n)):n<55296||n>=57344?(e+=String.fromCharCode(224|n>>12),e+=String.fromCharCode(128|n>>6&63),e+=String.fromCharCode(128|63&n)):(r++,n=65536+((1023&n)<<10|1023&t.charCodeAt(r)),e+=String.fromCharCode(240|n>>18),e+=String.fromCharCode(128|n>>12&63),e+=String.fromCharCode(128|n>>6&63),e+=String.fromCharCode(128|63&n))}return e}var b={size:128,level:"L",bgColor:"#FFFFFF",fgColor:"#000000",includeMargin:!1};function S(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=[];return t.forEach((function(t,n){var i=null;t.forEach((function(u,o){if(!u&&null!==i)return r.push("M".concat(i+e," ").concat(n+e,"h").concat(o-i,"v1H").concat(i+e,"z")),void(i=null);if(o!==t.length-1)u&&null===i&&(i=o);else{if(!u)return;null===i?r.push("M".concat(o+e,",").concat(n+e," h1v1H").concat(o+e,"z")):r.push("M".concat(i+e,",").concat(n+e," h").concat(o+1-i,"v1H").concat(i+e,"z"))}}))})),r.join("")}function E(t,e){return t.slice().map((function(t,r){return r<e.y||r>=e.y+e.h?t:t.map((function(t,r){return(r<e.x||r>=e.x+e.w)&&t}))}))}function k(t,e){var r=t.imageSettings,n=t.size,i=t.includeMargin;if(null==r)return null;var u=i?4:0,o=e.length+2*u,s=Math.floor(.1*n),a=o/n,h=(r.width||s)*a,f=(r.height||s)*a,c=null==r.x?e.length/2-h/2:r.x*a,p=null==r.y?e.length/2-f/2:r.y*a,l=null;if(r.excavate){var d=Math.floor(c),v=Math.floor(p);l={x:d,y:v,w:Math.ceil(h+c-d),h:Math.ceil(f+p-v)}}return{x:c,y:p,h:f,w:h,excavation:l}}var T=function(){try{(new Path2D).addPath(new Path2D)}catch(t){return!1}return!0}(),O=function(t){function e(){var t,r;a(this,e);for(var n=arguments.length,i=new Array(n),u=0;u<n;u++)i[u]=arguments[u];return m(l(r=c(this,(t=p(e)).call.apply(t,[this].concat(i)))),"_canvas",void 0),m(l(r),"_image",void 0),m(l(r),"state",{imgLoaded:!1}),m(l(r),"handleImageLoad",(function(){r.setState({imgLoaded:!0})})),r}return d(e,t),f(e,[{key:"componentDidMount",value:function(){this._image&&this._image.complete&&this.handleImageLoad(),this.update()}},{key:"componentWillReceiveProps",value:function(t){var e,r;(null===(e=this.props.imageSettings)||void 0===e?void 0:e.src)!==(null===(r=t.imageSettings)||void 0===r?void 0:r.src)&&this.setState({imgLoaded:!1})}},{key:"componentDidUpdate",value:function(){this.update()}},{key:"update",value:function(){var t=this.props,e=t.value,r=t.size,n=t.level,i=t.bgColor,u=t.fgColor,o=t.includeMargin,s=t.imageSettings,a=new g(-1,w[n]);if(a.addData(_(e)),a.make(),null!=this._canvas){var h=this._canvas,f=h.getContext("2d");if(!f)return;var c=a.modules;if(null===c)return;var p=o?4:0,l=c.length+2*p,d=k(this.props,c);null!=s&&null!=d&&null!=d.excavation&&(c=E(c,d.excavation));var v=window.devicePixelRatio||1;h.height=h.width=r*v;var m=r/l*v;f.scale(m,m),f.fillStyle=i,f.fillRect(0,0,l,l),f.fillStyle=u,T?f.fill(new Path2D(S(c,p))):c.forEach((function(t,e){t.forEach((function(t,r){t&&f.fillRect(r+p,e+p,1,1)}))})),this.state.imgLoaded&&this._image&&null!=d&&f.drawImage(this._image,d.x+p,d.y+p,d.w,d.h)}}},{key:"render",value:function(){var t=this,e=this.props,r=(e.value,e.size),n=(e.level,e.bgColor,e.fgColor,e.style),u=(e.includeMargin,e.imageSettings),a=s(e,["value","size","level","bgColor","fgColor","style","includeMargin","imageSettings"]),h=o({height:r,width:r},n),f=null,c=u&&u.src;return null!=u&&null!=c&&(f=y.createElement("img",{src:c,style:{display:"none"},onLoad:this.handleImageLoad,ref:function(e){return t._image=e}})),y.createElement(y.Fragment,null,y.createElement("canvas",i({style:h,height:r,width:r,ref:function(e){return t._canvas=e}},a)),f)}}]),e}(y.PureComponent);m(O,"defaultProps",b);var P=function(t){function e(){return a(this,e),c(this,p(e).apply(this,arguments))}return d(e,t),f(e,[{key:"render",value:function(){var t=this.props,e=t.value,r=t.size,n=t.level,u=t.bgColor,o=t.fgColor,a=t.includeMargin,h=t.imageSettings,f=s(t,["value","size","level","bgColor","fgColor","includeMargin","imageSettings"]),c=new g(-1,w[n]);c.addData(_(e)),c.make();var p=c.modules;if(null===p)return null;var l=a?4:0,d=p.length+2*l,v=k(this.props,p),m=null;null!=h&&null!=v&&(null!=v.excavation&&(p=E(p,v.excavation)),m=y.createElement("image",{xlinkHref:h.src,height:v.h,width:v.w,x:v.x+l,y:v.y+l,preserveAspectRatio:"none"}));var b=S(p,l);return y.createElement("svg",i({shapeRendering:"crispEdges",height:r,width:r,viewBox:"0 0 ".concat(d," ").concat(d)},f),y.createElement("path",{fill:u,d:"M0,0 h".concat(d,"v").concat(d,"H0z")}),y.createElement("path",{fill:o,d:b}),m)}}]),e}(y.PureComponent);m(P,"defaultProps",b);var I=function(t){var e=t.renderAs,r=s(t,["renderAs"]),n="svg"===e?P:O;return y.createElement(n,r)};I.defaultProps=o({renderAs:"canvas"},b),t.exports=I}}]);
//# sourceMappingURL=18.295fd2c2.chunk.js.map