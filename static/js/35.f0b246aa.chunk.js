(this.webpackJsonpdefi_v2=this.webpackJsonpdefi_v2||[]).push([[35],{2920:function(e,n,t){"use strict";t.d(n,"a",(function(){return O}));var a=t(8),r=t(2),c=t(25),o=t(2919),i=t(26);function s(){var e=Object(c.a)(["\n    margin: 0;\n    font-weight: bold;\n    color: white;\n    font-size: 1.25rem;\n"]);return s=function(){return e},e}function d(){var e=Object(c.a)(["\n  padding: 20px;\n  background-color: transparent;\n  \n  \n  @media (min-width: 768px) {\n  padding: ",";\n  }\n"]);return d=function(){return e},e}function l(){var e=Object(c.a)(["\n  border-bottom-color: rgba(255, 255, 255, 0.5);\n  background-color: transparent;\n  padding: 20px;\n  \n  \n  @media (min-width: 768px) {\n  padding: ",";\n  }\n"]);return l=function(){return e},e}function u(){var e=Object(c.a)(["\n  @media (max-width: 767px) {\n      margin-left: -30px;\n      margin-right: -30px;\n      border-radius: 0;\n      \n      .card-body {\n        padding-left: 30px;\n        padding-right: 30px;\n      }\n  }\n \n"]);return u=function(){return e},e}function b(){var e=Object(c.a)(["\n  background-color: ",";\n  color: white;\n  margin-bottom: ",";\n  margin-top:  ",";;\n  border-radius: 18px;\n  border: 1px solid rgba(255, 255, 255, 0.3);\n"]);return b=function(){return e},e}var h=o.a.Header,j=o.a.Body,f=Object(i.default)(o.a)(b(),(function(e){return e.theme.modalBG}),(function(e){var n=e.margin,t=e.marginBottom;return t?"".concat(t,"px"):n?"".concat(n,"px"):"20px"}),(function(e){var n=e.margin,t=e.marginTop;return t?"".concat(t,"px"):n?"".concat(n,"px"):"0"})),m=Object(i.default)(f)(u()),p=Object(i.default)(h)(l(),(function(e){return e.isTable?"30px 60px":"30px"})),g=Object(i.default)(j)(d(),(function(e){return e.isTable?"18px 48px":"30px"})),x=i.default.h4(s()),O=function(e){return Object(r.jsxs)(m,Object(a.a)(Object(a.a)({},e),{},{children:[e.header&&Object(r.jsxs)(p,{isTable:e.isTable,children:[e.title&&Object(r.jsx)(x,{children:e.title}),e.header]}),Object(r.jsx)(g,{isTable:e.isTable,children:e.children||e.body})]}))};n.b=function(e){return Object(r.jsxs)(f,Object(a.a)(Object(a.a)({},e),{},{children:[e.header&&Object(r.jsxs)(p,{isTable:e.isTable,children:[e.title&&Object(r.jsx)(x,{children:e.title}),e.header]}),Object(r.jsx)(g,{isTable:e.isTable,children:e.children||e.body})]}))}},3623:function(e,n,t){},3966:function(e,n,t){"use strict";t.r(n);var a=t(59),r=t(2),c=t(1),o=t.n(c),i=t(20),s=t(29),d=t(8),l=t(40),u=t(25),b=t(0),h=t(2916),j=t(2912),f=t(1210),m=t(3621),p=t.n(m),g=t(47),x=t(26),O=t(718),v=t.n(O),y=(t(3622),t(2920)),w=t(446),R=t(42),k=t(747),C=t(715),N=(t(3623),t(436)),P=t(269),T=t(117);function S(){var e=Object(u.a)(["\n  border-radius: 18px;\n  background-color: ",";\n  min-height: 56px;\n  padding: 18px 20px;\n  color: white;\n  resize: none;\n  border: none;\n  font-weight: 400;\n  font-size: 0.875rem;\n  \n  \n  @media (min-width: 768px) {\n    font-size: 1rem;\n    \n  }\n  \n  ::placeholder {\n    color: rgba(255, 255, 255, 0.3);\n  }\n  \n  &:focus,\n  &:active {\n    outline: none;\n  }\n"]);return S=function(){return e},e}function z(){var e=Object(u.a)(["\n  font-size: 0.875rem;\n  font-weight: 500;\n  margin-bottom: 15px;\n  \n  \n  @media (min-width: 768px) {\n    font-size: 1rem;\n    \n  }\n"]);return z=function(){return e},e}function B(){var e=Object(u.a)(["\n   display: flex;\n   flex-direction: column;\n   margin-bottom: 30px;\n"]);return B=function(){return e},e}function D(){var e=Object(u.a)(["\n\n"]);return D=function(){return e},e}function W(){var e=Object(u.a)(["\n  font-size: 1.25rem;\n  font-weight: 700;\n  color: white;\n  margin: 0;\n"]);return W=function(){return e},e}function A(){var e=Object(u.a)(["\n  padding: 0;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 40px;\n  margin-top: 10px;\n  border: none;\n  background-color: transparent;\n"]);return A=function(){return e},e}function H(){var e=Object(u.a)(["\n  border: none;\n  margin-top: -70px;\n  \n  @media (min-width: 768px) {\n    margin-top: -30px;\n    \n  }\n"]);return H=function(){return e},e}var M=Object(x.default)(y.a)(H()),X=x.default.div(A()),E=x.default.h2(W()),G=Object(x.default)(h.a.Row)(D()),J=Object(x.default)(h.a.Group)(B()),L=Object(x.default)(h.a.Label)(z()),F=Object(x.default)(h.a.Control)(S(),(function(e){return e.theme.bg2}));n.default=function(e){var n=Object(R.a)(),t=n.account,c=n.library,u=new k.a,m=Object(T.g)(),x=Object(g.d)(),O=Object(g.e)((function(e){return e.governance})).spaces,y=Object(b.useState)(!1),S=Object(l.a)(y,2),z=S[0],B=S[1],D=Object(b.useState)({name:"",body:"",choices:["",""],snapshot:[],dateRange:{from:null,to:null},metadata:{}}),W=Object(l.a)(D,2),A=W[0],H=W[1],I=e.match.params.space,Q=function(e,n){H((function(t){return Object(d.a)(Object(d.a)({},t),{},Object(s.a)({},e,n))}))},_=function(){var e={start:v()("".concat(A.dateRange.from.year,"-").concat(A.dateRange.from.month,"-").concat(A.dateRange.from.day)).format("X"),end:v()("".concat(A.dateRange.to.year,"-").concat(A.dateRange.to.month,"-").concat(A.dateRange.to.day)).format("X")};return!z&&t&&A.name&&A.body&&e.start&&e.end&&e.end>e.start&&A.snapshot&&A.choices.length>=2&&!A.choices.some((function(e){return""===e}))},Y=function(){var n=Object(i.a)(o.a.mark((function n(a){var r,i,s,l;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a.preventDefault(),t){n.next=4;break}return m(),n.abrupt("return",!1);case 4:if(!_()){n.next=28;break}return B(!0),r={name:A.name,body:A.body,snapshot:A.snapshot,choices:A.choices,start:v()("".concat(A.dateRange.from.year,"-").concat(A.dateRange.from.month,"-").concat(A.dateRange.from.day)).format("X"),end:v()("".concat(A.dateRange.to.year,"-").concat(A.dateRange.to.month,"-").concat(A.dateRange.to.day)).format("X"),metadata:Object(d.a)(Object(d.a)({},A.metadata),{},{strategies:O[I].strategies})},i={token:O[I].token,type:"proposal",space:I,payload:r},s={address:t,msg:JSON.stringify(Object(d.a)({version:"0.1.3",timestamp:(Date.now()/1e3).toFixed()},i))},n.prev=9,Object(P.c)("Sending ...",{icon:"\ud83d\udca1"}),n.next=13,c.getSigner(t).signMessage(s.msg);case 13:return s.sig=n.sent,n.next=16,u.sendMessage(s);case 16:l=n.sent,B(!1),P.c.success("Your Proposal is in!"),l.hasOwnProperty("ipfsHash")&&e.history.push("/tools/governance/".concat(I)),n.next=26;break;case 22:n.prev=22,n.t0=n.catch(9),P.c.error("Something went wrong!"),B(!1);case 26:n.next=29;break;case 28:P.c.error("Please fill all Fields and your proposal choices should be more than 1");case 29:case"end":return n.stop()}}),n,null,[[9,22]])})));return function(e){return n.apply(this,arguments)}}();Object(b.useEffect)((function(){0===Object.keys(O).length?x(Object(w.b)()):O.hasOwnProperty(I)||e.history.push("/tools/governance")}),[O,I,x,e.history]),Object(b.useEffect)((function(){Q("snapshot",c.blockNumber)}),[c.blockNumber]);return Object(r.jsx)(C.a,{title:"Governance",hasBg:!0,children:Object(r.jsx)(j.a,{children:Object(r.jsx)(f.a,{xs:12,children:Object(r.jsxs)(M,{marginBottom:0,children:[Object(r.jsx)(X,{children:Object(r.jsx)(E,{className:"card-title",children:"Create Proposal"})}),Object(r.jsx)("div",{children:Object(r.jsx)(h.a,{children:Object(r.jsxs)(G,{className:"custom-row",children:[Object(r.jsxs)(J,{as:f.a,xs:12,children:[Object(r.jsx)(L,{children:"Question"}),Object(r.jsx)(F,{as:"textarea",rows:"5",placeholder:"Question",value:A.name,onChange:function(e){return Q("name",e.target.value)}})]}),Object(r.jsxs)(J,{as:f.a,xs:12,children:[Object(r.jsx)(L,{children:"What is your Proposal?"}),Object(r.jsx)(F,{as:"textarea",rows:"5",placeholder:"What is your Proposal?",value:A.body,onChange:function(e){return Q("body",e.target.value)}})]}),Object(r.jsx)(f.a,{xs:12,children:Object(r.jsxs)(j.a,{children:[Object(r.jsxs)(J,{as:f.a,xs:12,md:12,lg:4,children:[Object(r.jsx)(L,{children:"Snapshot"}),Object(r.jsx)(F,{placeholder:"Snapshot",value:A.snapshot,onChange:function(e){return Q("snapshot",e.target.value)}})]}),Object(r.jsx)(f.a,{xs:12,md:6,lg:8,children:Object(r.jsxs)(j.a,{children:[Object(r.jsxs)(J,{as:f.a,xs:12,md:6,children:[Object(r.jsx)(L,{children:"Start Date"}),Object(r.jsx)(p.a,{wrapperClassName:"d-flex",value:A.dateRange,onChange:function(e){return Q("dateRange",e)},colorPrimary:"#87dce1",colorPrimaryLight:"rgba(135, 220, 225, 0.2)",renderInput:function(e){var n=e.ref;return Object(r.jsx)(F,{ref:n,placeholder:"Select a Date",value:A.dateRange.from?"".concat(A.dateRange.from.year,"/").concat(A.dateRange.from.month,"/").concat(A.dateRange.from.day):""})},shouldHighlightWeekends:!0})]}),Object(r.jsxs)(J,{as:f.a,xs:12,md:6,children:[Object(r.jsx)(L,{children:"End Date"}),Object(r.jsx)(p.a,{wrapperClassName:"d-flex",value:A.dateRange,onChange:function(e){return Q("dateRange",e)},colorPrimary:"#87dce1",colorPrimaryLight:"rgba(135, 220, 225, 0.2)",renderInput:function(e){var n=e.ref;return Object(r.jsx)(F,{ref:n,placeholder:"Select a Date",value:A.dateRange.to?"".concat(A.dateRange.to.year,"/").concat(A.dateRange.to.month,"/").concat(A.dateRange.to.day):""})},shouldHighlightWeekends:!0})]})]})})]})}),Object(r.jsxs)(J,{as:f.a,xs:12,className:"d-flex flex-column",children:[Object(r.jsx)(L,{children:"Choices"}),A.choices.map((function(e,n){return Object(r.jsx)(F,{value:A.choices[n],onChange:function(e){var t=Object(a.a)(A.choices);t[n]=e.target.value,Q("choices",t)},placeholder:"Choice ".concat(n+1),className:"mb-3"},"choice-".concat(n+1))})),Object(r.jsxs)("button",{className:"btn btn-link align-self-center align-self-md-end p-0 d-flex align-items-center justify-content-center",onClick:function(){var e=A.choices.concat("");Q("choices",e)},children:[Object(r.jsxs)("svg",{width:"15px",height:"15px",viewBox:"0 0 16 16",className:"bi bi-plus-circle",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[Object(r.jsx)("path",{fillRule:"evenodd",d:"M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"}),Object(r.jsx)("path",{fillRule:"evenodd",d:"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"})]}),Object(r.jsx)("span",{className:"pl-2",children:"Add Choice"})]})]}),Object(r.jsx)(J,{as:f.a,className:"d-flex flex-column flex-md-row align-items-stretch align-items-md-center justify-content-center mb-0",children:Object(r.jsx)("button",{className:"btn btn-primary py-3",onClick:Y,style:{minWidth:250,marginBottom:60,marginTop:30},children:t?z?Object(r.jsx)("div",{className:"d-flex align-items-center justify-content-center w-100",children:Object(r.jsx)(N.a,{width:18,height:18,active:!0,color:"#fff",id:"create-proposal"})}):"Publish":"Connect Wallet"})})]})})})]})})})})}}}]);
//# sourceMappingURL=35.f0b246aa.chunk.js.map