{"version":3,"sources":["components/NumericalInput/index.tsx","../node_modules/react-i18next/dist/es/withTranslation.js","hooks/useTokenToBalance.js","components/hoc/withBalance.js","pages/Borrow/ModalProvider/modals/UnlockToken.js","pages/Borrow/Provider/index.js","pages/Borrow/GlobalOverall/index.js","services/aave/gql.js","components/BorrowInputPanel/index.js","pages/Borrow/LendingBalance/LendingModalContainer.js","pages/Borrow/LendingBalance/index.js","pages/Borrow/BorrowBalance/BorrowTokenModal.js","pages/Borrow/BorrowBalance/RepayTokenModal.js","pages/Borrow/BorrowBalance/index.js","pages/Borrow/Common/index.js","pages/Borrow/ModalProvider/index.js","pages/Borrow/ModalProvider/modals/WrapEth.js","pages/Borrow/ModalProvider/modals/LendingToken.js","state/defi/actions.js","pages/Borrow/ModalProvider/modals/BorrowToken.js","pages/Borrow/index.js"],"names":["StyledInput","styled","input","error","theme","red1","text1","bg3","align","size","reverse","noBorder","modalBG","text3","inputRegex","RegExp","Input","React","memo","value","onUserInput","placeholder","rest","onChange","event","nextUserInput","target","replace","test","escapeRegExp","inputMode","title","autoComplete","autoCorrect","type","pattern","minLength","maxLength","spellCheck","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","withTranslation","ns","options","undefined","WrappedComponent","I18nextWithTranslation","_ref","forwardedRef","_objectWithoutProperties","_useTranslation","useTranslation","_useTranslation2","_slicedToArray","t","i18n","ready","passDownProps","tReady","withRef","ref","createElement","displayName","concat","getDisplayName","forwardRef","props","assign","useSpotBalances","useActiveWeb3React","account","library","baseToken","useSelector","getBaseToken","quoteToken","getQuoteToken","knownTokens","useMemo","getKnownTokens","tokens","getTokens","wethToken","getWethToken","allBalances","address","useState","balances","setBalances","fetchBalances","a","tokensToTokenBalances","res","useEffect","useTokenToBalance","window","ethereum","ethBalance","useETHBalances","wethBalance","find","b","token","symbol","tokensBalance","ethereumBalance","ETH","toExact","bn","BigNumber","currency","balance","totalEthBalance","total","plus","baseTokenBalance","searchToken","tokenBalances","wethTokenBalance","tokenToFind","quoteTokenBalance","withBalance","Component","UnlockToken","unlocking","setUnlocking","currentStep","getStepsModalCurrentStep","web3","dispatch","useDispatch","unlockToken","getContractWrappers","getProvider","contractWrappers","approveAddress","contractAddresses","erc20Proxy","erc20Token","ERC20TokenContract","amount","UNLIMITED_ALLOWANCE_IN_BASE_UNITS","approve","sendTransactionAsync","from","tx","awaitTransactionSuccessAsync","stepsModalAdvanceStep","onDismiss","pendingText","GraphQlProvider","client","getAaveGraphClient","children","StyledCard","Card","Text","span","variant","GlobalOverall","isNative","getAaveCurrency","userAccountData","getAaveUserAccountData","ethUsd","getEthInUsd","fetchAaveGlobal","getAaveOverall","userAcc","setAaveUserAccountData","loadingLendingPoolData","useInterval","formatETHField","field","dividedBy","toFixed","multipliedBy","totalLiquidity","totalCollateralETH","totalBorrowsETH","availableBorrowsETH","currentLiquidationThreshold","ltv","healthFactor","gt","columns","dataField","text","formatter","cellContent","row","rowIndex","wrapperClasses","bordered","classes","bootstrap4","keyField","remote","data","ResponsiveTable","breakpoint","direction","withoutBorder","GET_AAVE_RESERVES","gql","InputRow","div","flexRowNoWrap","Container","Label","InputContainer","LabelRow","Aligner","InputPanel","flexColumnNoWrap","StyledTokenName","CurrencySelect","button","bg1","BalanceRow","BorrowInputPanel","state","valueStr","tokenAmountInUnits","decimals","valueFixedDecimals","_updateValue","newValue","unitsInTokenAmount","min","isLessThan","setState","this","label","disable","selected","hideInput","id","showBalance","balanceText","Token","name","style","padding","borderRadius","className","CurrencyLogo","active","Boolean","slice","toUpperCase","NumericalInput","getDerivedStateFromProps","eq","Title","h4","SummaryRow","CustomTypeBlack","TYPE","black","StyledButton","LendingModalContainer","btnMsg","cardMsg","componentDidMount","TX_DEFAULTS_TRANSFER","gasTransferToken","toast","submit","tokenBalance","isEth","aToken","isLending","onSubmit","_reset","_closeModal","setMax","maxBalance","updateAmount","coinSymbol","displayDecimals","context","closeModal","show","liquidityRate","tokenSymbolToDisplayString","btnPrefix","balanceInUnits","btnText","isSubmitAllowed","isGreaterThan","onHide","centered","Body","Row","Col","xs","max","pow","toString","marginBottom","fontWeight","color","disabled","onClick","contextType","ThemeContext","LogoContainer","Symbol","Name","CellText","isEthState","setIsEthState","isHideZeroBalance","isStableCoin","isModalOpenState","setIsModalOpenState","isSubmittingState","setIsSubmittingState","aTokenDataState","setATokenDataState","isLendingState","setIsLendingState","tokenBalanceState","setTokenBalanceState","order","sort","setSort","aTokensData","getATokensData","tokensPrice","getTokensPrice","ethTotalBalance","currencySelector","getAaveLoadingState","tokensRow","map","tokenD","isEthToken","isWethToken","tb","isEqualTo","displayBalance","displayDepositBalance","tokB","formattedLendBalance","formattedBalance","tokenPrice","c_id","Number","price_usd","toNumber","apy","tokenName","tokenSymbol","sortedData","handleSubmit","startLendingTokenSteps","Protocol","Aave","startUnLendingTokenSteps","wethPlusEthBalance","openLendingModal","openUnLendingModal","bind","isAction","formatExtraData","onTableChange","sortField","sortOrder","isSubmitting","BorrowTokenModal","availableForBorrow","setError","setAmount","useTheme","variableBorrowRate","RepayTokenModal","borrowedBalance","setIsNotEnoughBalance","isLessThanOrEqualTo","balanceInShort","minus","balanceBorrowedInUnits","amountSubmit","isModalBorrowOpenState","setIsModalBorrowOpenState","isModalRepayOpenState","setIsModalRepayOpenState","isBorrowState","setIsBorrowState","availableForBorrowState","setAvailableForBorrowState","borrowBalanceState","setBorrowBalanceState","reserves","getAaveReservesGQLResponse","borrowBalance","reserve","r","displayAvailableForBorrowBalance","displayBorrowedBalance","availableBalanceForBorrowToken","priceInEth","price","totalAvailableForBorrowETH","integerValue","ROUND_DOWN","formattedBorrowedBalance","formattedAvailableForBorrowBalance","closeBorrowModal","closeRepayModal","startBorrowTokenSteps","startRepayTokenSteps","openBorrowModal","openRepayModal","modals","web3Wrapper","HeaderCol","CustomNav","Nav","CustomNavItem","Item","CustomNavLink","Link","primary","BorrowCommon","useQuery","pollInterval","loading","aaveLoadingState","setAaveReservesGQLResponse","AaveLoadingState","NotLoaded","initAave","fetchAave","Tab","defaultActiveKey","fill","eventKey","Content","Pane","wrapping","setWrapping","currentWethBalance","newWethBalance","convertingFrom","wrapEthereum","updateWethBalance","convertTxHash","connect","step","gasInfo","getGasInfo","onSubmitLendingToken","defiToken","getState","protocol","getDefiProtocol","txHash","lendingAToken","lendingDefiToken","onSubmitUnLendingToken","unLendingAToken","unLendingDefiToken","setLoading","amountOfTokenString","Lending","onDone","onSubmitBorrowToken","borrowAToken","borrowDefiToken","onSubmitRepayToken","repayAToken","repayDefiToken","isBorrow","Borrowing","ModalProvider","submitted","setSubmitted","setTxHash","isOpen","Web3","givenProvider","providers","HttpProvider","process","currentProvider","Web3Wrapper","hideModal","setStepsModalCurrentStep","chainId","CHAIN_ID","hash","kind","StepKind","ToggleTokenLock","WrapEth","LendingToken","UnLendingToken","RepayToken","BorrowToken","StyledRow","Borrow","Page"],"mappings":"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","file":"static/js/27.64030a2a.chunk.js","sourcesContent":["import React from \"react\";\nimport styled from \"styled-components\";\nimport { escapeRegExp } from \"../../utils\";\n\nconst StyledInput = styled.input<{\n\terror?: boolean;\n\tfontSize?: string;\n\talign?: string;\n\tnoBorder?: boolean;\n\treverse?: boolean;\n\tsize?: string;\n}>`\n\tcolor: ${({ error, theme }) => (error ? theme.red1 : theme.text1)};\n\twidth: 0;\n\tposition: relative;\n\tfont-weight: 500;\n\tfont-family: inherit;\n\toutline: none;\n\tborder: none;\n\tflex: 1 1 auto;\n\tbackground-color: ${({ theme }) => theme.bg3};\n\tfont-size: 1rem;\n\ttext-align: ${({ align }) => align && align};\n\twhite-space: nowrap;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n\theight: ${({ size }) => (size === \"sm\" ? \"48px\" : \"56px\")};\n\tborder-bottom-right-radius: ${({ reverse }) => (reverse ? \"0\" : `1.125rem`)};\n\tborder-top-right-radius: ${({ reverse }) => (reverse ? \"0\" : `1.125rem`)};\n\tborder-bottom-left-radius: ${({ reverse }) => (reverse ? \"1.125rem\" : `0`)};\n\tborder-top-left-radius: ${({ reverse }) => (reverse ? \"1.125rem\" : `0`)};\n\tpadding-right: 0.625rem;\n\tpadding-left: ${({ noBorder, reverse }) => (reverse ? \"1.375rem\" : noBorder ? \"0.625rem\" : `1.5rem`)};\n\t-webkit-appearance: textfield;\n\tborder-left: ${({ theme, noBorder }) => (noBorder ? \"none\" : `3px solid ${theme.modalBG}`)};\n\n\t@media (min-width: 768px) {\n\t\tpadding-right: 4.5625rem;\n\t}\n\n\t::-webkit-search-decoration {\n\t\t-webkit-appearance: none;\n\t}\n\n\t[type=\"number\"] {\n\t\t-moz-appearance: textfield;\n\t}\n\n\t::-webkit-outer-spin-button,\n\t::-webkit-inner-spin-button {\n\t\t-webkit-appearance: none;\n\t}\n\n\t::placeholder {\n\t\tcolor: ${({ theme }) => theme.text3};\n\t}\n`;\n\nconst inputRegex = RegExp(`^\\\\d*(?:\\\\\\\\[.])?\\\\d*$`); // match escaped \".\" characters via in a non-capturing group\n\nexport const Input = React.memo(function InnerInput({\n\tvalue,\n\tonUserInput,\n\tplaceholder,\n\tsize,\n\t...rest\n}: {\n\tvalue: string | number;\n\tonUserInput: (input: string) => void;\n\terror?: boolean;\n\tfontSize?: string;\n\tsize?: string;\n\talign?: \"right\" | \"left\";\n} & Omit<React.HTMLProps<HTMLInputElement>, \"ref\" | \"onChange\" | \"as\">) {\n\tconst enforcer = (nextUserInput: string) => {\n\t\tif (nextUserInput === \"\" || inputRegex.test(escapeRegExp(nextUserInput))) {\n\t\t\tonUserInput(nextUserInput);\n\t\t}\n\t};\n\n\treturn (\n\t\t<StyledInput\n\t\t\t{...rest}\n\t\t\tvalue={value}\n\t\t\tonChange={(event) => {\n\t\t\t\t// replace commas with periods, because uniswap exclusively uses period as the decimal separator\n\t\t\t\tenforcer(event.target.value.replace(/,/g, \".\"));\n\t\t\t}}\n\t\t\t// universal input options\n\t\t\tinputMode=\"decimal\"\n\t\t\ttitle=\"Token Amount\"\n\t\t\tautoComplete=\"off\"\n\t\t\tautoCorrect=\"off\"\n\t\t\tsize={size}\n\t\t\t// text-specific options\n\t\t\ttype=\"text\"\n\t\t\tpattern=\"^[0-9]*[.,]?[0-9]*$\"\n\t\t\tplaceholder={placeholder || \"0.0\"}\n\t\t\tminLength={1}\n\t\t\tmaxLength={79}\n\t\t\tspellCheck=\"false\"\n\t\t/>\n\t);\n});\n\nexport default Input;\n\n// const inputRegex = RegExp(`^\\\\d*(?:\\\\\\\\[.])?\\\\d*$`) // match escaped \".\" characters via in a non-capturing group\n","import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React from 'react';\nimport { useTranslation } from './useTranslation';\nimport { getDisplayName } from './utils';\nexport function withTranslation(ns) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return function Extend(WrappedComponent) {\n    function I18nextWithTranslation(_ref) {\n      var forwardedRef = _ref.forwardedRef,\n          rest = _objectWithoutProperties(_ref, [\"forwardedRef\"]);\n\n      var _useTranslation = useTranslation(ns, rest),\n          _useTranslation2 = _slicedToArray(_useTranslation, 3),\n          t = _useTranslation2[0],\n          i18n = _useTranslation2[1],\n          ready = _useTranslation2[2];\n\n      var passDownProps = _objectSpread(_objectSpread({}, rest), {}, {\n        t: t,\n        i18n: i18n,\n        tReady: ready\n      });\n\n      if (options.withRef && forwardedRef) {\n        passDownProps.ref = forwardedRef;\n      } else if (!options.withRef && forwardedRef) {\n        passDownProps.forwardedRef = forwardedRef;\n      }\n\n      return React.createElement(WrappedComponent, passDownProps);\n    }\n\n    I18nextWithTranslation.displayName = \"withI18nextTranslation(\".concat(getDisplayName(WrappedComponent), \")\");\n    I18nextWithTranslation.WrappedComponent = WrappedComponent;\n\n    var forwardRef = function forwardRef(props, ref) {\n      return React.createElement(I18nextWithTranslation, Object.assign({}, props, {\n        forwardedRef: ref\n      }));\n    };\n\n    return options.withRef ? React.forwardRef(forwardRef) : I18nextWithTranslation;\n  };\n}","import { useMemo, useState, useEffect } from \"react\";\nimport { tokensToTokenBalances } from \"../utils/spot/tokens\";\nimport { useActiveWeb3React } from \"./index\";\nimport { useSelector } from \"react-redux\";\nimport { getBaseToken, getQuoteToken, searchToken } from \"../state/selectors\";\nimport { getKnownTokens } from \"../utils/known_tokens\";\nimport { useETHBalances } from \"../state/wallet/hooks\";\nimport { BigNumber } from \"@0x/utils\";\n\nexport const useTokenToBalance = (tokens, address, library) => {\n\tconst [balances, setBalances] = useState([]);\n\n\tconst fetchBalances = async () => {\n\t\tif (address) {\n\t\t\tconst res = await tokensToTokenBalances(tokens, address, library);\n\t\t\tsetBalances(res);\n\t\t}\n\t};\n\tuseEffect(() => {\n\t\tfetchBalances();\n\t}, [address, tokens]);\n\n\treturn useMemo(() => {\n\t\tif (balances.length > 0) {\n\t\t\treturn balances;\n\t\t} else {\n\t\t\treturn [];\n\t\t}\n\t}, [address, balances, tokens]);\n};\n\nexport const useSpotBalances = () => {\n\tconst { account, library } = useActiveWeb3React();\n\n\tconst baseToken = useSelector(getBaseToken);\n\tconst quoteToken = useSelector(getQuoteToken);\n\n\tconst knownTokens = useMemo(() => {\n\t\treturn getKnownTokens();\n\t}, []);\n\tconst tokens = useMemo(() => {\n\t\treturn knownTokens.getTokens();\n\t}, []);\n\n\tconst wethToken = useMemo(() => {\n\t\treturn knownTokens.getWethToken();\n\t}, []);\n\n\tconst t = useMemo(() => {\n\t\treturn [...tokens, wethToken];\n\t}, [wethToken, tokens]);\n\tconst allBalances = useTokenToBalance(t, account, window.ethereum || library);\n\n\tconst ethBalance = useETHBalances([account]);\n\n\tconst wethBalance = useMemo(() => {\n\t\treturn allBalances.find((b) => b.token.symbol === wethToken.symbol);\n\t}, [allBalances]);\n\n\tconst tokensBalance = useMemo(() => {\n\t\treturn allBalances.filter((b) => b.token.symbol !== wethToken.symbol);\n\t}, [allBalances]);\n\n\tconst ethereumBalance = useMemo(() => {\n\t\tconst ETH = ethBalance[account] ? ethBalance[account].toExact() : null;\n\t\tconst bn = new BigNumber(ETH * 10 ** 18);\n\n\t\treturn {\n\t\t\ttoken: ethBalance[account] ? ethBalance[account].currency : undefined,\n\t\t\tbalance: bn,\n\t\t};\n\t}, [ethBalance]);\n\n\tconst totalEthBalance = useMemo(() => {\n\t\tif (wethBalance && ethereumBalance) {\n\t\t\tlet total = wethBalance.balance;\n\t\t\tif (ethereumBalance.token !== undefined) {\n\t\t\t\ttotal = ethereumBalance.balance.plus(wethBalance.balance);\n\t\t\t}\n\n\t\t\treturn total;\n\t\t} else {\n\t\t\treturn undefined;\n\t\t}\n\t}, [ethereumBalance, wethBalance]);\n\n\tconst baseTokenBalance = useMemo(() => {\n\t\treturn searchToken({ tokenBalances: tokensBalance, wethTokenBalance: wethBalance, tokenToFind: baseToken });\n\t}, [baseToken, tokensBalance, wethBalance]);\n\n\tconst quoteTokenBalance = useMemo(() => {\n\t\treturn searchToken({ tokenBalances: tokensBalance, wethTokenBalance: wethBalance, tokenToFind: quoteToken });\n\t}, [quoteToken, tokensBalance, wethBalance]);\n\n\treturn useMemo(() => {\n\t\treturn {\n\t\t\tquoteTokenBalance,\n\t\t\tbaseTokenBalance,\n\t\t\ttotalEthBalance,\n\t\t\tethBalance: ethereumBalance,\n\t\t\twethBalance,\n\t\t\ttokensBalance,\n\t\t};\n\t}, [account, baseToken, quoteToken, allBalances, baseTokenBalance, quoteTokenBalance]);\n};\n","import { useSpotBalances } from \"../../hooks/useTokenToBalance\";\n\nconst withBalance = (Component) => {\n\treturn (props) => {\n\t\tconst balances = useSpotBalances();\n\t\treturn <Component {...props} {...balances} />;\n\t};\n};\n\nexport default withBalance;\n","import { ConfirmationPendingContent } from \"../../../../components/TransactionConfirmationModal\";\nimport React, { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\n\nimport { getStepsModalCurrentStep } from \"../../../../state/selectors\";\nimport { UNLIMITED_ALLOWANCE_IN_BASE_UNITS } from \"../../../../constants\";\nimport { useActiveWeb3React } from \"../../../../hooks\";\nimport { getContractWrappers } from \"../../../../utils/spot/contractWrapper\";\nimport { ERC20TokenContract } from \"@0x/contract-wrappers\";\nimport { stepsModalAdvanceStep } from \"../../../../state/spotUI/actions\";\n\nconst UnlockToken = (props) => {\n\tconst [unlocking, setUnlocking] = useState(false);\n\tconst { account, library } = useActiveWeb3React();\n\tconst currentStep = useSelector(getStepsModalCurrentStep);\n\tconst { address, token } = currentStep;\n\tconst web3 = props.web3;\n\tconst dispatch = useDispatch();\n\n\tconst unlockToken = async () => {\n\t\ttry {\n\t\t\tconst contractWrappers = await getContractWrappers(web3.getProvider());\n\t\t\tconst approveAddress = address ? address : contractWrappers.contractAddresses.erc20Proxy;\n\n\t\t\tconst erc20Token = new ERC20TokenContract(token.address, contractWrappers.getProvider());\n\t\t\tconst amount = UNLIMITED_ALLOWANCE_IN_BASE_UNITS;\n\n\t\t\tconst tx = await erc20Token.approve(approveAddress, amount).sendTransactionAsync({\n\t\t\t\tfrom: account,\n\t\t\t});\n\t\t\tsetUnlocking(true);\n\t\t\tawait web3.awaitTransactionSuccessAsync(tx);\n\n\t\t\tif (tx) {\n\t\t\t\tsetUnlocking(false);\n\t\t\t\tdispatch(stepsModalAdvanceStep());\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tsetUnlocking(false);\n\t\t\tprops.onDismiss();\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tunlockToken();\n\t}, [currentStep]);\n\n\treturn (\n\t\t<ConfirmationPendingContent\n\t\t\tonDismiss={unlocking ? () => null : props.onDismiss}\n\t\t\tpendingText={unlocking ? \"Unlocking\" : \"Waiting for confirmation\"}\n\t\t/>\n\t);\n};\n\nexport default UnlockToken;\n","import { ApolloProvider } from \"@apollo/react-hooks\";\n\nimport { getAaveGraphClient } from \"../../../services/aave/aave\";\n\nconst GraphQlProvider = (props) => {\n\treturn <ApolloProvider client={getAaveGraphClient()}>{props.children}</ApolloProvider>;\n};\n\nexport default GraphQlProvider;\n","import { BigNumber } from \"@0x/utils\";\nimport { useDispatch, useSelector } from \"react-redux\";\n\nimport \"./styles.scss\";\nimport { useActiveWeb3React } from \"../../../hooks\";\nimport { getAaveCurrency, getAaveUserAccountData, getEthInUsd } from \"../../../state/selectors\";\nimport { getAaveOverall } from \"../../../services/aave/aave\";\nimport { setAaveUserAccountData } from \"../../../state/aave/actions\";\nimport React, { useEffect } from \"react\";\nimport useInterval from \"../../../hooks/useInterval\";\nimport Card from \"../../../components/Card\";\nimport BootstrapTable from \"react-bootstrap-table-next\";\nimport ResponsiveTable from \"../../../components/ResponsiveTable\";\nimport styled from \"styled-components\";\nimport { useTranslation } from \"react-i18next\";\n\nconst StyledCard = styled(Card)`\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: stretch;\n\n\t& .card-body {\n\t\tpadding: 24px 20px 20px;\n\t}\n\n\t@media (min-width: 1400px) {\n\t\t& .card-body {\n\t\t\tpadding: 24px;\n\t\t}\n\t}\n`;\n\nconst Text = styled.span`\n\tcolor: ${({ theme, variant }) => (variant ? theme[variant] : theme.text1)};\n\tfont-size: 1rem;\n\tfont-weight: 700;\n`;\n\nconst GlobalOverall = (props) => {\n\tconst { account } = useActiveWeb3React();\n\tconst currencySelector = useSelector(getAaveCurrency);\n\tconst isNative = currencySelector === \"NATIVE\";\n\tconst dispatch = useDispatch();\n\tconst userAccountData = useSelector(getAaveUserAccountData);\n\tconst ethUsd = useSelector(getEthInUsd);\n\tconst { t } = useTranslation();\n\n\tconst fetchAaveGlobal = async () => {\n\t\tconst userAcc = await getAaveOverall(account);\n\t\tdispatch(setAaveUserAccountData(userAcc));\n\t};\n\n\t// initial loading\n\tuseEffect(() => {\n\t\tconst loadingLendingPoolData = async () => {\n\t\t\tif (account) {\n\t\t\t\tawait fetchAaveGlobal();\n\t\t\t}\n\t\t};\n\n\t\tloadingLendingPoolData();\n\t}, [account]);\n\n\t// Update global state\n\tuseInterval(async () => {\n\t\tif (account) {\n\t\t\tawait fetchAaveGlobal();\n\t\t}\n\t}, 30 * 1000);\n\n\tconst formatETHField = (field = undefined) => {\n\t\tif (field) {\n\t\t\treturn isNative\n\t\t\t\t? `${field.dividedBy(\"1e18\").toFixed(3)} ETH`\n\t\t\t\t: ethUsd\n\t\t\t\t? `${field.dividedBy(\"1e18\").multipliedBy(ethUsd).toFixed(3)} USD`\n\t\t\t\t: \"- USD\";\n\t\t} else {\n\t\t\treturn \"-\";\n\t\t}\n\t};\n\n\tconst totalLiquidity = formatETHField(userAccountData && userAccountData.totalLiquidity);\n\tconst totalCollateralETH = formatETHField(userAccountData && userAccountData.totalCollateralETH);\n\tconst totalBorrowsETH = formatETHField(userAccountData && userAccountData.totalBorrowsETH);\n\tconst availableBorrowsETH = formatETHField(userAccountData && userAccountData.availableBorrowsETH);\n\tconst currentLiquidationThreshold =\n\t\t(userAccountData && `${userAccountData.currentLiquidationThreshold.toFixed(0)} %`) || \"-\";\n\tconst ltv = (userAccountData && `${userAccountData.ltv.toFixed(0)} %`) || \"-\";\n\tlet healthFactor = \"-\";\n\tlet healtFactorValue;\n\t// const healthFactor = (userAccountData && userAccountData.healthFactor.toFixed(3)) || '-';;\n\tif (userAccountData && userAccountData.totalBorrowsETH.gt(0)) {\n\t\thealthFactor = userAccountData && userAccountData.healthFactor.dividedBy(\"1e18\").toFixed(3);\n\t\thealtFactorValue = new BigNumber(healthFactor);\n\t}\n\n\tconst columns = [\n\t\t{\n\t\t\tdataField: \"total_liquidity\",\n\t\t\ttext: t(\"borrow.totalLiquidity\"),\n\t\t\tformatter: (cellContent, row, rowIndex) => {\n\t\t\t\treturn <Text>{row.totalLiquidity}</Text>;\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tdataField: \"total_collateral\",\n\t\t\ttext: t(\"borrow.totalCollateral\"),\n\t\t\tformatter: (cellContent, row, rowIndex) => {\n\t\t\t\treturn <Text>{row.totalCollateralETH}</Text>;\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tdataField: \"total_borrows\",\n\t\t\ttext: t(\"borrow.totalBorrows\"),\n\t\t\tformatter: (cellContent, row, rowIndex) => {\n\t\t\t\treturn <Text>{row.totalBorrowsETH}</Text>;\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tdataField: \"available\",\n\t\t\ttext: t(\"borrow.available\"),\n\t\t\tformatter: (cellContent, row, rowIndex) => {\n\t\t\t\treturn <Text>{row.availableBorrowsETH}</Text>;\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tdataField: \"liquidation_threshold\",\n\t\t\ttext: t(\"borrow.liquidationThreshold\"),\n\t\t\tformatter: (cellContent, row, rowIndex) => {\n\t\t\t\treturn <Text>{row.currentLiquidationThreshold}</Text>;\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tdataField: \"ltv\",\n\t\t\ttext: \"LTV\",\n\t\t\tformatter: (cellContent, row, rowIndex) => {\n\t\t\t\treturn <Text>{row.ltv}</Text>;\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tdataField: \"health_factor\",\n\t\t\ttext: t(\"borrow.healthFactor\"),\n\t\t\tformatter: (cellContent, row, rowIndex) => {\n\t\t\t\treturn <Text>{row.healthFactor}</Text>;\n\t\t\t},\n\t\t},\n\t];\n\n\treturn (\n\t\t<StyledCard>\n\t\t\t<BootstrapTable\n\t\t\t\twrapperClasses=\"d-none d-lg-block\"\n\t\t\t\tbordered={false}\n\t\t\t\tclasses=\"table table-head-custom table-borderless table-vertical-center overflow-hidden global-overall__table mb-0\"\n\t\t\t\tbootstrap4\n\t\t\t\tkeyField={\"id\"}\n\t\t\t\tremote\n\t\t\t\tdata={[\n\t\t\t\t\t{\n\t\t\t\t\t\ttotalLiquidity,\n\t\t\t\t\t\ttotalCollateralETH,\n\t\t\t\t\t\ttotalBorrowsETH,\n\t\t\t\t\t\tavailableBorrowsETH,\n\t\t\t\t\t\tcurrentLiquidationThreshold,\n\t\t\t\t\t\tltv,\n\t\t\t\t\t\thealthFactor,\n\t\t\t\t\t},\n\t\t\t\t]}\n\t\t\t\tcolumns={columns}\n\t\t\t/>\n\t\t\t<ResponsiveTable\n\t\t\t\tbreakpoint={\"lg\"}\n\t\t\t\tcolumns={columns}\n\t\t\t\tdata={[\n\t\t\t\t\t{\n\t\t\t\t\t\ttotalLiquidity,\n\t\t\t\t\t\ttotalCollateralETH,\n\t\t\t\t\t\ttotalBorrowsETH,\n\t\t\t\t\t\tavailableBorrowsETH,\n\t\t\t\t\t\tcurrentLiquidationThreshold,\n\t\t\t\t\t\tltv,\n\t\t\t\t\t\thealthFactor,\n\t\t\t\t\t},\n\t\t\t\t]}\n\t\t\t\tdirection={\"rtl\"}\n\t\t\t\twithoutBorder\n\t\t\t/>\n\t\t</StyledCard>\n\t);\n};\n\nexport default GlobalOverall;\n","/**\n * GraphQl Queries\n *\n */\nimport { gql } from \"apollo-boost\";\n\nexport const GET_AAVE_RESERVES = gql`\n\t{\n\t\treserves {\n\t\t\tid\n\t\t\tname\n\t\t\tsymbol\n\t\t\tdecimals\n\t\t\tliquidityRate\n\t\t\tvariableBorrowRate\n\t\t\tprice {\n\t\t\t\tpriceInEth\n\t\t\t}\n\t\t\tstableBorrowRate\n\t\t\taverageStableBorrowRate\n\t\t\taToken {\n\t\t\t\tid\n\t\t\t}\n\t\t}\n\t}\n`;\n\n/*export const GET_USER_AAVE_DATA = gql`\n{\n    query UserData($userAddress: String! ){\n        user(id: $userAddress){\n           id,\n           reserves{\n            id,\n            userBalanceIndex,\n            principalATokenBalance,\n            redirectedBalance,\n            principalBorrows,\n            borrowRateMode,\n            borrowRate,\n            usageAsCollateralEnabledOnUser,\n           }\n     }\n   }\n`;*/\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nimport { RowBetween } from \"../Row\";\nimport { Input as NumericalInput } from \"../NumericalInput\";\nimport { tokenAmountInUnits, unitsInTokenAmount } from \"../../utils/spot/tokens\";\nimport { Token } from \"@uniswap/sdk\";\nimport CurrencyLogo from \"../CurrencyLogo\";\n\nconst InputRow = styled.div`\n\t${({ theme }) => theme.flexRowNoWrap};\n\talign-items: center;\n\n\tpadding: 0.625rem 0 0;\n\n\t@media (min-width: 768px) {\n\t\tpadding-top: 0.75rem;\n\t}\n`;\n\nconst Container = styled.div`\n\tdisplay: flex;\n\tflex-direction: column;\n\tmargin-bottom: 34px;\n\n\t@media (min-width: 768px) {\n\t\tmargin-bottom: 36px;\n\t}\n`;\n\nconst Label = styled.span`\n\tcolor: ${({ theme }) => theme.text1};\n\tfont-size: 0.875rem;\n\tfont-weight: 400;\n\tpadding: 0;\n\n\t@media (min-width: 768px) {\n\t\tpadding: 0 1rem;\n\t\tfont-weight: 700;\n\t}\n`;\n\nconst InputContainer = styled.div`\n\tposition: relative;\n\tdisplay: flex;\n\talign-items: center;\n\tflex-wrap: nowrap;\n\tflex: 1;\n`;\n\nconst LabelRow = styled.div`\n\t${({ theme }) => theme.flexRowNoWrap};\n\talign-items: center;\n\tcolor: ${({ theme }) => theme.text1};\n\tfont-size: 0.75rem;\n\tline-height: 1rem;\n\tpadding: 0;\n`;\n\nconst Aligner = styled.span`\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\n\t@media (min-width: 768px) {\n\t\tjustify-content: space-between;\n\t}\n`;\n\nconst InputPanel = styled.div`\n\t${({ theme }) => theme.flexColumnNoWrap};\n\tposition: relative;\n\tborder-radius: 0.42rem;\n`;\n\nconst StyledTokenName = styled.span`\n\tfont-size: 0.875rem;\n\tfont-weight: 500;\n\tmargin-left: 15px;\n\n\t@media (min-width: 768px) {\n\t\tfont-size: 1rem;\n\t\tmargin-right: auto;\n\t}\n`;\n\nconst CurrencySelect = styled.button`\n\talign-items: center;\n\theight: 56px;\n\tfont-size: 0.875rem;\n\tfont-weight: 500;\n\tbackground-color: ${({ theme }) => theme.bg3};\n\tcolor: ${({ theme }) => theme.text1};\n\tborder-bottom-left-radius: 18px;\n\tborder-top-left-radius: 18px;\n\tbox-shadow: none;\n\toutline: none;\n\tcursor: pointer;\n\tuser-select: none;\n\tborder: none;\n\tpadding: 0.875rem 0.625rem;\n\tmin-width: 116px;\n\twidth: 116px;\n\ttext-align: center;\n\n\t@media (min-width: 768px) {\n\t\tmin-width: 116px;\n\t\twidth: 116px;\n\t\tpadding: 0.625rem 1rem;\n\t\tfont-size: 1rem;\n\t\tfont-weight: 700;\n\t\ttext-align: left;\n\t}\n\n\t:focus,\n\t:hover {\n\t\tbackground-color: ${({ theme }) => theme.bg1};\n\t\toutline: none;\n\t}\n`;\n\nlet BalanceRow = styled.div`\n\t${({ theme }) => theme.flexRowNoWrap};\n\talign-items: center;\n\tmargin-top: 10px;\n\tcolor: ${({ theme }) => theme.text1};\n\topacity: 0.5;\n\tfont-size: 0.75rem;\n\tfont-weight: 400;\n\tline-height: 1rem;\n\tpadding: 0;\n\n\t@media (min-width: 768px) {\n\t\tpadding: 0 1rem;\n\t}\n`;\n\nexport default class BorrowInputPanel extends React.Component {\n\tstate = {\n\t\tvalueStr: this.props.value\n\t\t\t? tokenAmountInUnits(this.props.value, this.props.decimals, this.props.valueFixedDecimals)\n\t\t\t: \"\",\n\t};\n\n\t_updateValue = (value) => {\n\t\tconst newValue = unitsInTokenAmount(value || \"0\", this.props.decimals);\n\t\tconst invalidValue = this.props.min && newValue.isLessThan(this.props.min);\n\t\tif (invalidValue) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.props.onUserInput(newValue);\n\t\tthis.setState({\n\t\t\tvalueStr: value,\n\t\t});\n\t};\n\n\tstatic getDerivedStateFromProps = (props, state) => {\n\t\tconst { decimals, value, valueFixedDecimals } = props;\n\t\tconst { valueStr } = state;\n\n\t\tif (!value) {\n\t\t\treturn {\n\t\t\t\tvalueStr: \"\",\n\t\t\t};\n\t\t} else if (value && !unitsInTokenAmount(valueStr || \"0\", decimals).eq(value)) {\n\t\t\treturn {\n\t\t\t\tvalueStr: tokenAmountInUnits(value, decimals, valueFixedDecimals),\n\t\t\t};\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t};\n\n\trender() {\n\t\tconst {\n\t\t\tlabel = \"Input\",\n\t\t\tdisable = false,\n\t\t\tselected,\n\t\t\thideInput = false,\n\t\t\tid,\n\t\t\tshowBalance = true,\n\t\t\tbalanceText,\n\t\t\ttoken = undefined,\n\t\t} = this.props;\n\t\tconst { valueStr } = this.state;\n\n\t\tconst currency = token ? new Token(1, token.address, token.decimals, token.symbol, token.name) : undefined;\n\n\t\treturn (\n\t\t\t<InputPanel id={id}>\n\t\t\t\t<Container>\n\t\t\t\t\t{!hideInput && (\n\t\t\t\t\t\t<LabelRow>\n\t\t\t\t\t\t\t<RowBetween>\n\t\t\t\t\t\t\t\t<Label>{label}</Label>\n\t\t\t\t\t\t\t</RowBetween>\n\t\t\t\t\t\t</LabelRow>\n\t\t\t\t\t)}\n\t\t\t\t\t<InputRow style={hideInput ? { padding: \"0\", borderRadius: \"0.42rem\" } : {}} selected={disable}>\n\t\t\t\t\t\t<CurrencySelect selected={!!selected} className=\"open-currency-select-button\">\n\t\t\t\t\t\t\t<Aligner>\n\t\t\t\t\t\t\t\t{token && <CurrencyLogo currency={currency} size={\"24px\"} />}\n\t\t\t\t\t\t\t\t<StyledTokenName className=\"token-symbol-container\" active={Boolean(selected)}>\n\t\t\t\t\t\t\t\t\t{(selected && selected?.length > 20\n\t\t\t\t\t\t\t\t\t\t? (\n\t\t\t\t\t\t\t\t\t\t\t\tselected?.slice(0, 4) +\n\t\t\t\t\t\t\t\t\t\t\t\t\"...\" +\n\t\t\t\t\t\t\t\t\t\t\t\tselected?.slice(selected?.length - 5, selected?.length)\n\t\t\t\t\t\t\t\t\t\t  ).toUpperCase()\n\t\t\t\t\t\t\t\t\t\t: selected.toUpperCase()) || `Select`}\n\t\t\t\t\t\t\t\t</StyledTokenName>\n\t\t\t\t\t\t\t</Aligner>\n\t\t\t\t\t\t</CurrencySelect>\n\n\t\t\t\t\t\t{!hideInput && (\n\t\t\t\t\t\t\t<InputContainer>\n\t\t\t\t\t\t\t\t<NumericalInput\n\t\t\t\t\t\t\t\t\tclassName=\"token-amount-input pl-3 \"\n\t\t\t\t\t\t\t\t\tvalue={valueStr}\n\t\t\t\t\t\t\t\t\tonUserInput={this._updateValue}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</InputContainer>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</InputRow>\n\t\t\t\t\t{selected && showBalance && <BalanceRow>{balanceText()}</BalanceRow>}\n\t\t\t\t</Container>\n\t\t\t</InputPanel>\n\t\t);\n\t}\n}\n","import React from \"react\";\nimport { Row, Col } from \"react-bootstrap\";\nimport { BigNumber } from \"@0x/utils\";\nimport styled, { ThemeContext } from \"styled-components\";\n\nimport { Modal } from \"../../../components/Modal/bootstrap\";\nimport { TX_DEFAULTS_TRANSFER } from \"../../../constants\";\nimport { tokenAmountInUnits, tokenSymbolToDisplayString } from \"../../../utils/spot/tokens\";\nimport BorrowInputPanel from \"../../../components/BorrowInputPanel\";\nimport { AutoColumn } from \"../../../components/Column\";\nimport { RowFixed } from \"../../../components/Row\";\nimport { Field } from \"../../../state/swap/actions\";\nimport { TYPE } from \"../../../theme\";\nimport { toast } from \"react-hot-toast\";\nimport { withTranslation } from \"react-i18next\";\n\nconst Title = styled.h4`\n\tfont-size: 1.25rem;\n\tfont-weight: 500;\n\tmargin-top: 0;\n\tmargin-bottom: 2.25rem;\n`;\n\nexport const SummaryRow = styled.div`\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: space-between;\n\tpadding: 1rem 0;\n\tborder-bottom: 1px solid ${({ theme }) => theme.text3};\n\tfont-size: 1rem;\n\tfont-weight: 500;\n`;\n\nconst CustomTypeBlack = styled(TYPE.black)`\n\tfont-size: 0.75rem;\n\n\t@media (min-width: 768px) {\n\t\tfont-size: 1rem;\n\t}\n`;\n\nconst StyledButton = styled.button`\n\theight: 56px;\n\tmin-height: 56px;\n\tmin-width: 250px;\n`;\n\nclass LendingModalContainer extends React.Component {\n\tstatic contextType = ThemeContext;\n\tstate = {\n\t\tamount: null,\n\t\terror: {\n\t\t\tbtnMsg: null,\n\t\t\tcardMsg: null,\n\t\t},\n\t};\n\n\tcomponentDidMount = () => {\n\t\tconst { ethBalance, t } = this.props;\n\t\tif (ethBalance.isLessThan(TX_DEFAULTS_TRANSFER.gasTransferToken)) {\n\t\t\ttoast.error(t(\"errors.notEnoughGas\"));\n\t\t\tthis.setState({\n\t\t\t\terror: {\n\t\t\t\t\tbtnMsg: \"Error\",\n\t\t\t\t\tcardMsg: t(\"errors.notEnoughGas\"),\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t};\n\n\trender() {\n\t\tconst theme = this.context;\n\t\tconst {\n\t\t\ttokenBalance,\n\t\t\tcloseModal,\n\t\t\tethBalance,\n\t\t\tisEth,\n\t\t\twethToken,\n\t\t\taToken,\n\t\t\tisLending,\n\t\t\tshow,\n\t\t\tt,\n\t\t\t...restProps\n\t\t} = this.props;\n\t\tconst { error, amount } = this.state;\n\t\tconst { liquidityRate } = aToken;\n\t\tlet coinSymbol;\n\t\tlet maxBalance;\n\t\tlet decimals;\n\t\tlet displayDecimals;\n\n\t\tif (isEth) {\n\t\t\tdisplayDecimals = wethToken.displayDecimals;\n\t\t\tdecimals = 18;\n\t\t\tmaxBalance = isLending ? ethBalance : aToken.balance || new BigNumber(0);\n\t\t\tcoinSymbol = tokenSymbolToDisplayString(\"ETH\");\n\t\t} else if (tokenBalance) {\n\t\t\tconst { token, balance } = tokenBalance;\n\t\t\tdisplayDecimals = token.displayDecimals;\n\t\t\tdecimals = token.decimals;\n\t\t\tmaxBalance = isLending ? balance : aToken.balance || new BigNumber(0);\n\t\t\tcoinSymbol = tokenSymbolToDisplayString(token.symbol);\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst { token } = tokenBalance;\n\t\tconst btnPrefix = isLending ? \"Deposit \" : \"Withdraw \";\n\t\tconst balanceInUnits = tokenAmountInUnits(maxBalance, decimals, displayDecimals);\n\t\tconst btnText = error && error.btnMsg ? \"Error\" : btnPrefix + coinSymbol;\n\t\tconst isSubmitAllowed = amount === null || (amount && amount.isGreaterThan(maxBalance));\n\n\t\treturn (\n\t\t\t<Modal show={show} onHide={closeModal} centered>\n\t\t\t\t<Modal.Body style={{ padding: 30 }}>\n\t\t\t\t\t<Row>\n\t\t\t\t\t\t<Col xs={12}>\n\t\t\t\t\t\t\t<Title>\n\t\t\t\t\t\t\t\t{isLending ? t(\"Deposit\") : t(\"withdraw\")} {coinSymbol}\n\t\t\t\t\t\t\t</Title>\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t<Col xs={12}>\n\t\t\t\t\t\t\t<BorrowInputPanel\n\t\t\t\t\t\t\t\tdecimals={decimals}\n\t\t\t\t\t\t\t\tmin={0}\n\t\t\t\t\t\t\t\tmax={maxBalance}\n\t\t\t\t\t\t\t\tonUserInput={this.updateAmount}\n\t\t\t\t\t\t\t\tvalue={amount}\n\t\t\t\t\t\t\t\ttoken={token}\n\t\t\t\t\t\t\t\tselected={coinSymbol}\n\t\t\t\t\t\t\t\tshowBalance={false}\n\t\t\t\t\t\t\t\tlabel={isLending ? t(\"wantToDeposit\") : t(\"wantToWithdraw\")}\n\t\t\t\t\t\t\t\tplaceholder={new BigNumber(1).div(new BigNumber(10).pow(displayDecimals)).toString()}\n\t\t\t\t\t\t\t\tvalueFixedDecimals={displayDecimals}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t<Col xs={12} style={{ marginBottom: 56 }}>\n\t\t\t\t\t\t\t<AutoColumn>\n\t\t\t\t\t\t\t\t<SummaryRow>\n\t\t\t\t\t\t\t\t\t<RowFixed>\n\t\t\t\t\t\t\t\t\t\t<CustomTypeBlack fontWeight={500} color={theme.text1}>\n\t\t\t\t\t\t\t\t\t\t\t{t(\"interestAPR\")}\n\t\t\t\t\t\t\t\t\t\t</CustomTypeBlack>\n\t\t\t\t\t\t\t\t\t</RowFixed>\n\t\t\t\t\t\t\t\t\t<RowFixed>\n\t\t\t\t\t\t\t\t\t\t<CustomTypeBlack color={theme.text1} fontWeight={500}>\n\t\t\t\t\t\t\t\t\t\t\t{liquidityRate.div(\"1e27\").multipliedBy(100).toFixed(5)} %\n\t\t\t\t\t\t\t\t\t\t</CustomTypeBlack>\n\t\t\t\t\t\t\t\t\t</RowFixed>\n\t\t\t\t\t\t\t\t</SummaryRow>\n\t\t\t\t\t\t\t\t<SummaryRow>\n\t\t\t\t\t\t\t\t\t<RowFixed>\n\t\t\t\t\t\t\t\t\t\t<CustomTypeBlack fontWeight={500} color={theme.text1}>\n\t\t\t\t\t\t\t\t\t\t\t{t(\"amount\")}\n\t\t\t\t\t\t\t\t\t\t</CustomTypeBlack>\n\t\t\t\t\t\t\t\t\t</RowFixed>\n\t\t\t\t\t\t\t\t\t<RowFixed>\n\t\t\t\t\t\t\t\t\t\t<CustomTypeBlack color={theme.text1} fontWeight={500}>\n\t\t\t\t\t\t\t\t\t\t\t{balanceInUnits}\n\t\t\t\t\t\t\t\t\t\t</CustomTypeBlack>\n\t\t\t\t\t\t\t\t\t</RowFixed>\n\t\t\t\t\t\t\t\t</SummaryRow>\n\t\t\t\t\t\t\t</AutoColumn>\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t<Col\n\t\t\t\t\t\t\txs={12}\n\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\"d-flex align-items-stretch align-items-lg-center justify-content-center flex-column\"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<StyledButton\n\t\t\t\t\t\t\t\tclassName={`btn btn-${isLending ? \"primary\" : \"warning\"}`}\n\t\t\t\t\t\t\t\tdisabled={isSubmitAllowed}\n\t\t\t\t\t\t\t\tonClick={this.submit}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{btnText}\n\t\t\t\t\t\t\t</StyledButton>\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t</Row>\n\t\t\t\t</Modal.Body>\n\t\t\t</Modal>\n\t\t);\n\t}\n\n\tsubmit = async () => {\n\t\tconst { tokenBalance, isEth, wethToken, aToken, isLending } = this.props;\n\t\tlet token;\n\t\tif (isEth) {\n\t\t\ttoken = {\n\t\t\t\t...wethToken,\n\t\t\t\tsymbol: \"ETH\",\n\t\t\t};\n\t\t} else if (tokenBalance) {\n\t\t\ttoken = tokenBalance.token;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t\tconst amount = this.state.amount || new BigNumber(0);\n\t\tthis.props.onSubmit(amount, token, aToken, isEth, isLending);\n\t};\n\n\t_reset = () => {\n\t\tthis.setState({\n\t\t\tamount: null,\n\t\t});\n\t};\n\n\t_closeModal = () => {\n\t\tthis._reset();\n\t};\n\n\tsetMax = () => {\n\t\tconst { tokenBalance, isEth, ethBalance, isLending, aToken } = this.props;\n\t\tif (isEth) {\n\t\t\tconst maxBalance = isLending ? ethBalance : aToken.balance || new BigNumber(0);\n\t\t\tthis.setState({\n\t\t\t\tamount: maxBalance,\n\t\t\t});\n\t\t} else if (tokenBalance) {\n\t\t\tthis.setState({\n\t\t\t\tamount: isLending ? tokenBalance.balance : aToken.balance || new BigNumber(0),\n\t\t\t});\n\t\t}\n\t};\n\n\tupdateAmount = (newValue) => {\n\t\tthis.setState({\n\t\t\tamount: newValue,\n\t\t});\n\t};\n}\n\nexport default withTranslation()(LendingModalContainer);\n","import React, { useMemo, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { BigNumber } from \"@0x/utils\";\nimport styled from \"styled-components\";\nimport { Token } from \"@uniswap/sdk\";\n\nimport { getAaveCurrency, getAaveLoadingState, getATokensData, getTokensPrice } from \"../../../state/selectors\";\nimport withBalance from \"../../../components/hoc/withBalance\";\nimport { useActiveWeb3React } from \"../../../hooks\";\nimport { setAaveCurrency } from \"../../../state/aave/actions\";\nimport { getKnownTokens, isWethToken } from \"../../../utils/known_tokens\";\nimport { formatTokenSymbol, tokenAmountInUnits } from \"../../../utils/spot/tokens\";\nimport { Protocol } from \"../../../utils/aave/types\";\nimport { startLendingTokenSteps, startUnLendingTokenSteps } from \"../../../state/spotUI/actions\";\nimport CurrencyLogo from \"../../../components/CurrencyLogo\";\nimport Skeleton from \"react-loading-skeleton\";\nimport { StyledLink, TradeButton } from \"../../Wallet\";\nimport BootstrapTable from \"react-bootstrap-table-next\";\nimport ResponsiveTable from \"../../../components/ResponsiveTable\";\nimport LendingModalContainer from \"./LendingModalContainer\";\nimport { sortedData } from \"../../../lib/helper\";\nimport { useTranslation } from \"react-i18next\";\n\nconst LogoContainer = styled.div`\n\twidth: 32px;\n\theight: 32px;\n\tborder-radius: 32px;\n\tbackground-color: ${({ theme }) => theme.text1};\n\n\t@media (max-width: 991px) {\n\t\twidth: 24px;\n\t\theight: 24px;\n\t\tborder-radius: 24px;\n\t}\n`;\n\nconst Symbol = styled.span`\n\tcolor: ${({ theme }) => theme.text1};\n\tfont-size: 1rem;\n\tmargin-right: 10px;\n\tfont-weight: 700;\n`;\n\nconst Name = styled.span`\n\tfont-weight: 400;\n\tcolor: ${({ theme }) => theme.text1};\n\tfont-size: 0.875rem;\n\n\t@media (max-width: 991px) {\n\t\tfont-size: 0.875rem;\n\t\tfont-weight: 400;\n\t}\n`;\n\nconst CellText = styled.span`\n\tfont-weight: 500;\n\tfont-size: 0.875rem;\n\tcolor: ${({ theme }) => theme.text1};\n\n\t&.font-size-base {\n\t\tfont-size: 1rem;\n\t}\n\n\t@media (max-width: 991px) {\n\t\tfont-weight: 700;\n\n\t\t&.label {\n\t\t\tfont-weight: 500;\n\t\t}\n\t}\n`;\n\nconst LendingBalance = (props) => {\n\tconst [isEthState, setIsEthState] = useState(false);\n\tconst [isHideZeroBalance, setIsHideZeroBalance] = useState(false);\n\tconst [isStableCoin, setIsStableCoin] = useState(false);\n\tconst [isModalOpenState, setIsModalOpenState] = useState(false);\n\tconst [isSubmittingState, setIsSubmittingState] = useState(false);\n\tconst [aTokenDataState, setATokenDataState] = useState();\n\tconst [isLendingState, setIsLendingState] = useState(true);\n\tconst [tokenBalanceState, setTokenBalanceState] = useState();\n\tconst [sort, setSort] = useState({\n\t\tfield: false,\n\t\torder: \"desc\",\n\t});\n\tconst { t } = useTranslation();\n\n\tconst { account } = useActiveWeb3React();\n\tconst dispatch = useDispatch();\n\tconst aTokensData = useSelector(getATokensData);\n\tconst tokensPrice = useSelector(getTokensPrice);\n\tconst tokenBalances = props.tokensBalance;\n\tconst ethBalance = props.ethBalance;\n\tconst ethTotalBalance = props.totalEthBalance;\n\tconst wethTokenBalance = props.wethBalance;\n\tconst aaveLoadingState = useSelector(getAaveLoadingState);\n\tconst currencySelector = useSelector(getAaveCurrency);\n\n\tconst innerTabs = [\n\t\t{\n\t\t\tactive: currencySelector === \"NATIVE\",\n\t\t\tonClick: () => dispatch(setAaveCurrency(\"NATIVE\")),\n\t\t\ttext: \"Native\",\n\t\t},\n\t\t{\n\t\t\tactive: currencySelector === \"USD\",\n\t\t\tonClick: () => dispatch(setAaveCurrency(\"USD\")),\n\t\t\ttext: \"USD\",\n\t\t},\n\t];\n\n\tconst openLendingModal = (...rest) => {\n\t\tconst [tokenD, isEthToken, tokB, token] = rest;\n\t\tsetATokenDataState(tokenD);\n\t\tsetIsModalOpenState(true);\n\t\tif (isEthToken) {\n\t\t\tsetIsEthState(true);\n\t\t\tsetTokenBalanceState({ ...wethTokenBalance, balance: tokB });\n\t\t} else {\n\t\t\tsetIsEthState(false);\n\t\t\tsetTokenBalanceState(tokenBalances.find((tb) => tb.token === token));\n\t\t}\n\t\tsetIsLendingState(true);\n\t};\n\n\tconst openUnLendingModal = (...rest) => {\n\t\tconst [tokenD, isEthToken, tokB, token] = rest;\n\t\tsetATokenDataState(tokenD);\n\t\tif (isEthToken) {\n\t\t\tsetIsEthState(true);\n\t\t\tsetTokenBalanceState({ ...wethTokenBalance, balance: tokB });\n\t\t} else {\n\t\t\tsetIsEthState(false);\n\t\t\tsetTokenBalanceState(tokenBalances.find((tb) => tb.token === token));\n\t\t}\n\t\tsetIsModalOpenState(true);\n\t\tsetIsLendingState(false);\n\t};\n\n\tconst tokensRow = useMemo(() => {\n\t\tconst data = aTokensData.map((tokenD) => {\n\t\t\tconst { token, balance } = tokenD;\n\n\t\t\tconst { symbol } = token;\n\t\t\tconst isEthToken = isWethToken(token);\n\t\t\tconst tokenBalance = tokenBalances.find((tb) => tb.token.symbol === symbol);\n\t\t\tif (isHideZeroBalance) {\n\t\t\t\tif (isEthToken && ethTotalBalance.isEqualTo(0) && balance && balance.isEqualTo(0)) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\tif (tokenBalance && tokenBalance.balance.isEqualTo(0) && balance && balance.isEqualTo(0)) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (isStableCoin) {\n\t\t\t\tif (!token.isStableCoin) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst tokB = isEthToken\n\t\t\t\t? ethTotalBalance || new BigNumber(0)\n\t\t\t\t: (tokenBalance && tokenBalance.balance) || new BigNumber(0);\n\t\t\tlet displayBalance;\n\t\t\tlet displayDepositBalance;\n\n\t\t\tif (account && balance) {\n\t\t\t\tconst formattedLendBalance = tokenAmountInUnits(balance, token.decimals, token.displayDecimals);\n\t\t\t\tconst formattedBalance = tokenAmountInUnits(tokB, token.decimals, token.displayDecimals);\n\t\t\t\tconst tokenPrice = tokensPrice && tokensPrice.find((t) => t.c_id === token.c_id);\n\t\t\t\tif (currencySelector === \"NATIVE\") {\n\t\t\t\t\tdisplayBalance = Number(formattedBalance);\n\t\t\t\t\tdisplayDepositBalance = Number(formattedLendBalance);\n\t\t\t\t} else {\n\t\t\t\t\tdisplayBalance = tokenPrice\n\t\t\t\t\t\t? tokenPrice.price_usd.multipliedBy(new BigNumber(formattedBalance)).toNumber()\n\t\t\t\t\t\t: \"-\";\n\t\t\t\t\tdisplayDepositBalance = tokenPrice\n\t\t\t\t\t\t? tokenPrice.price_usd.multipliedBy(new BigNumber(formattedLendBalance)).toNumber()\n\t\t\t\t\t\t: \"-\";\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tdisplayBalance = \"-\";\n\t\t\t\tdisplayDepositBalance = \"-\";\n\t\t\t}\n\n\t\t\tconst apy = tokenD.liquidityRate.dividedBy(\"1e27\").multipliedBy(100).toNumber();\n\n\t\t\tconst tokenName = isEthToken ? \"Ethereum\" : token.name;\n\t\t\tconst tokenSymbol = isEthToken ? \"ETH\" : token.symbol.toUpperCase();\n\n\t\t\treturn {\n\t\t\t\ttoken,\n\t\t\t\tsymbol,\n\t\t\t\ttokenSymbol,\n\t\t\t\ttokenName,\n\t\t\t\tdisplayBalance,\n\t\t\t\tdisplayDepositBalance,\n\t\t\t\tapy,\n\t\t\t\tbalance,\n\t\t\t\ttokB,\n\t\t\t\tisEthToken,\n\t\t\t\ttokenD,\n\t\t\t};\n\t\t});\n\n\t\treturn sortedData(data, sort);\n\t}, [aTokensData, sort]);\n\n\tconst closeModal = () => {\n\t\tsetIsModalOpenState(false);\n\t};\n\n\tconst handleSubmit = async (amount, token, aToken, isEth, isLending) => {\n\t\tsetIsSubmittingState(true);\n\n\t\ttry {\n\t\t\tif (isLending) {\n\t\t\t\tawait dispatch(\n\t\t\t\t\tstartLendingTokenSteps(\n\t\t\t\t\t\tamount,\n\t\t\t\t\t\ttoken,\n\t\t\t\t\t\taToken,\n\t\t\t\t\t\tisEth,\n\t\t\t\t\t\tProtocol.Aave,\n\t\t\t\t\t\tethBalance,\n\t\t\t\t\t\twethTokenBalance,\n\t\t\t\t\t\tethTotalBalance\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tawait dispatch(startUnLendingTokenSteps(amount, token, aToken, isEth));\n\t\t\t}\n\t\t} finally {\n\t\t\tsetIsSubmittingState(false);\n\t\t\tcloseModal();\n\t\t}\n\t};\n\n\tconst wethToken = getKnownTokens().getWethToken();\n\tconst onHideZeroBalance = () => {\n\t\tsetIsHideZeroBalance(!isHideZeroBalance);\n\t};\n\tconst onIsStableCoin = () => {\n\t\tsetIsStableCoin(!isStableCoin);\n\t};\n\n\tconst wethPlusEthBalance = wethTokenBalance ? wethTokenBalance.balance.plus(ethBalance) : new BigNumber(0);\n\n\tconst onTableChange = (type, context) => {\n\t\tif (type === \"sort\") {\n\t\t\tsetSort({\n\t\t\t\tfield: context.sortField,\n\t\t\t\torder: context.sortOrder,\n\t\t\t});\n\t\t}\n\t};\n\n\tconst columns = [\n\t\t{\n\t\t\tdataField: \"tokenName\",\n\t\t\ttext: t(\"token\"),\n\t\t\tformatter: (cellContent, row, rowIndex) => {\n\t\t\t\tconst currency = new Token(1, row.token.address, row.token.decimals, row.token.symbol, row.token.name);\n\t\t\t\treturn (\n\t\t\t\t\t<div\n\t\t\t\t\t\tkey={rowIndex}\n\t\t\t\t\t\tclassName=\"d-flex flex-row-reverse flex-lg-row align-items-start align-items-lg-center py-lg-2 pr-lg-4\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<LogoContainer>\n\t\t\t\t\t\t\t<CurrencyLogo currency={currency} />\n\t\t\t\t\t\t</LogoContainer>\n\t\t\t\t\t\t<div className=\"d-flex flex-column justify-content-center ml-lg-3 mr-3 mr-lg-0\">\n\t\t\t\t\t\t\t<Symbol>{row.tokenSymbol}</Symbol>\n\t\t\t\t\t\t\t<Name>{row.tokenName}</Name>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t},\n\t\t\tsort: true,\n\t\t},\n\t\t{\n\t\t\tdataField: \"displayBalance\",\n\t\t\ttext: t(\"borrow.balance\"),\n\t\t\tformatter: (cellContent, row, rowIndex) => {\n\t\t\t\treturn <CellText>{typeof row.displayBalance === 'number' ? `${row.displayBalance} ${row.tokenSymbol}` : row.displayBalance}</CellText>;\n\t\t\t},\n\t\t\tsort: true,\n\t\t},\n\t\t{\n\t\t\tdataField: \"displayDepositBalance\",\n\t\t\ttext: t(\"borrow.depositBalance\"),\n\t\t\tformatter: (cellContent, row, rowIndex) => {\n\t\t\t\treturn <CellText>{typeof row.displayDepositBalance === 'number' ? `${row.displayDepositBalance} ${row.tokenSymbol}` : row.displayDepositBalance}</CellText>;\n\t\t\t},\n\t\t\tsort: true,\n\t\t},\n\t\t{\n\t\t\tdataField: \"apy\",\n\t\t\ttext: \"APY\",\n\t\t\tformatter: (cellContent, row, rowIndex) => {\n\t\t\t\treturn <CellText>{row.apy.toFixed(6)} %</CellText>;\n\t\t\t},\n\t\t\tsort: true,\n\t\t},\n\t\t{\n\t\t\tdataField: \"actions\",\n\t\t\ttext: t(\"table.actions\"),\n\t\t\tformatter: (cellContent, row, rowIndex, { openLendingModal, openUnLendingModal }) => {\n\t\t\t\tconst { balance, tokB, tokenD, isEthToken, token } = row;\n\t\t\t\treturn (\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\"d-flex align-items-stretch justify-content-center flex-column flex-lg-row align-items-lg-center justify-content-lg-start w-100\"\n\t\t\t\t\t\t}\n\t\t\t\t\t>\n\t\t\t\t\t\t<StyledLink>\n\t\t\t\t\t\t\t<TradeButton\n\t\t\t\t\t\t\t\tonClick={openLendingModal.bind(this, tokenD, isEthToken, tokB, token)}\n\t\t\t\t\t\t\t\tdisabled={tokB.isEqualTo(0)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{t(\"deposit\")}\n\t\t\t\t\t\t\t</TradeButton>\n\t\t\t\t\t\t</StyledLink>\n\n\t\t\t\t\t\t<StyledLink>\n\t\t\t\t\t\t\t<TradeButton\n\t\t\t\t\t\t\t\tvariant={\"warning\"}\n\t\t\t\t\t\t\t\tonClick={openUnLendingModal.bind(this, tokenD, isEthToken, tokB, token)}\n\t\t\t\t\t\t\t\tdisabled={balance && balance.isEqualTo(0)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{t(\"withdraw\")}\n\t\t\t\t\t\t\t</TradeButton>\n\t\t\t\t\t\t</StyledLink>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t},\n\t\t\tisAction: true,\n\t\t\tformatExtraData: {\n\t\t\t\topenLendingModal,\n\t\t\t\topenUnLendingModal,\n\t\t\t},\n\t\t},\n\t];\n\n\treturn (\n\t\t<div className=\"d-flex flex-column\">\n\t\t\t<BootstrapTable\n\t\t\t\twrapperClasses=\"table-responsive d-none d-lg-block\"\n\t\t\t\tbordered={false}\n\t\t\t\tclasses=\"table table-head-custom table-borderless table-vertical-center overflow-hidden borrow__table\"\n\t\t\t\tbootstrap4\n\t\t\t\tremote\n\t\t\t\tkeyField=\"id\"\n\t\t\t\tdata={tokensRow}\n\t\t\t\tcolumns={columns}\n\t\t\t\tonTableChange={onTableChange}\n\t\t\t></BootstrapTable>\n\t\t\t<ResponsiveTable breakpoint={\"lg\"} columns={columns} data={tokensRow} direction={\"rtl\"} />\n\n\t\t\t{isModalOpenState && aTokenDataState && (\n\t\t\t\t<LendingModalContainer\n\t\t\t\t\tshow={isModalOpenState}\n\t\t\t\t\ttokenBalance={tokenBalanceState}\n\t\t\t\t\tisSubmitting={isSubmittingState}\n\t\t\t\t\tonSubmit={handleSubmit}\n\t\t\t\t\taToken={aTokenDataState}\n\t\t\t\t\tcloseModal={closeModal}\n\t\t\t\t\tethBalance={wethPlusEthBalance}\n\t\t\t\t\tisEth={isEthState}\n\t\t\t\t\twethToken={wethToken}\n\t\t\t\t\tisLending={isLendingState}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n\nexport default withBalance(LendingBalance);\n","import { Row, Col } from \"react-bootstrap\";\nimport React, { useEffect, useState } from \"react\";\nimport { BigNumber } from \"@0x/utils\";\n\nimport { Modal } from \"../../../components/Modal/bootstrap\";\nimport { TX_DEFAULTS_TRANSFER } from \"../../../constants\";\nimport { tokenAmountInUnits, tokenSymbolToDisplayString } from \"../../../utils/spot/tokens\";\nimport styled from \"styled-components\";\nimport BorrowInputPanel from \"../../../components/BorrowInputPanel\";\nimport { AutoColumn } from \"../../../components/Column\";\nimport { RowFixed } from \"../../../components/Row\";\nimport { TYPE } from \"../../../theme\";\nimport { toast } from \"react-hot-toast\";\nimport { useTranslation } from \"react-i18next\";\nimport useTheme from \"../../../hooks/useTheme\";\n\nconst Title = styled.h4`\n\tfont-size: 1.25rem;\n\tfont-weight: 500;\n\tmargin-top: 0;\n\tmargin-bottom: 2.25rem;\n`;\n\nexport const SummaryRow = styled.div`\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: space-between;\n\tpadding: 1rem 0;\n\tborder-bottom: 1px solid ${({ theme }) => theme.text3};\n\tfont-size: 1rem;\n\tfont-weight: 500;\n`;\n\nconst CustomTypeBlack = styled(TYPE.black)`\n\tfont-size: 0.75rem;\n\n\t@media (min-width: 768px) {\n\t\tfont-size: 1rem;\n\t}\n`;\n\nconst StyledButton = styled.button`\n\theight: 56px;\n\tmin-height: 56px;\n\tmin-width: 250px;\n`;\n\nconst BorrowTokenModal = (props) => {\n\tconst {\n\t\ttokenBalance,\n\t\tcloseModal,\n\t\tethBalance,\n\t\tisEth,\n\t\twethToken,\n\t\taToken,\n\t\tavailableForBorrow,\n\t\tshow,\n\t\t...restProps\n\t} = props;\n\tconst [error, setError] = useState({\n\t\tbtnMsg: null,\n\t\tcardMsg: null,\n\t});\n\tconst [amount, setAmount] = useState(new BigNumber(0));\n\tconst { t } = useTranslation();\n\n\tconst theme = useTheme();\n\n\tuseEffect(() => {\n\t\tif (ethBalance.isLessThan(TX_DEFAULTS_TRANSFER.gasTransferToken)) {\n\t\t\ttoast.error(t(\"errors.notEnoughGas\"));\n\t\t\tsetError({\n\t\t\t\tbtnMsg: \"Error\",\n\t\t\t\tcardMsg: t(\"errors.notEnoughGas\"),\n\t\t\t});\n\t\t}\n\t}, [ethBalance]);\n\n\tconst { variableBorrowRate } = aToken;\n\tconst { token } = tokenBalance;\n\tlet coinSymbol;\n\tlet maxBalance = availableForBorrow;\n\tlet decimals;\n\tlet displayDecimals;\n\n\tif (isEth) {\n\t\tdisplayDecimals = wethToken.displayDecimals;\n\t\tdecimals = 18;\n\t\tcoinSymbol = tokenSymbolToDisplayString(\"ETH\");\n\t} else if (tokenBalance) {\n\t\tdisplayDecimals = token.displayDecimals;\n\t\tdecimals = token.decimals;\n\t\tmaxBalance = availableForBorrow;\n\t\tcoinSymbol = tokenSymbolToDisplayString(token.symbol);\n\t} else {\n\t\treturn null;\n\t}\n\n\tconst btnPrefix = \"Borrow \";\n\tconst balanceInUnits = tokenAmountInUnits(maxBalance, decimals, displayDecimals);\n\tconst btnText = error && error.btnMsg ? \"Error\" : btnPrefix + coinSymbol;\n\tconst isSubmitAllowed = amount === null || (amount && amount.isGreaterThan(maxBalance));\n\tconst onUpdateAmount = (newValue) => {\n\t\tsetAmount(newValue);\n\t};\n\tconst onSetMax = () => {\n\t\tsetAmount(availableForBorrow);\n\t};\n\tconst onSubmit = () => {\n\t\tlet token;\n\t\tif (isEth) {\n\t\t\ttoken = {\n\t\t\t\t...wethToken,\n\t\t\t\tsymbol: \"ETH\",\n\t\t\t};\n\t\t} else if (tokenBalance) {\n\t\t\ttoken = tokenBalance.token;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\n\t\tprops.onSubmit(amount, token, aToken, isEth);\n\t};\n\n\treturn (\n\t\t<Modal show={show} onHide={closeModal} centered>\n\t\t\t<Modal.Body style={{ padding: 30 }}>\n\t\t\t\t<Row>\n\t\t\t\t\t<Col xs={12}>\n\t\t\t\t\t\t<Title>\n\t\t\t\t\t\t\t{t(\"borrow.title\")} {coinSymbol}\n\t\t\t\t\t\t</Title>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col xs={12}>\n\t\t\t\t\t\t<BorrowInputPanel\n\t\t\t\t\t\t\tdecimals={decimals}\n\t\t\t\t\t\t\tmin={0}\n\t\t\t\t\t\t\tmax={maxBalance}\n\t\t\t\t\t\t\tonUserInput={onUpdateAmount}\n\t\t\t\t\t\t\tvalue={amount}\n\t\t\t\t\t\t\ttoken={token}\n\t\t\t\t\t\t\tselected={coinSymbol}\n\t\t\t\t\t\t\tshowBalance={false}\n\t\t\t\t\t\t\tlabel={t(\"wantToBorrow\")}\n\t\t\t\t\t\t\tplaceholder={new BigNumber(1).div(new BigNumber(10).pow(displayDecimals)).toString()}\n\t\t\t\t\t\t\tvalueFixedDecimals={displayDecimals}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col xs={12} style={{ marginBottom: 56 }}>\n\t\t\t\t\t\t<AutoColumn>\n\t\t\t\t\t\t\t<SummaryRow>\n\t\t\t\t\t\t\t\t<RowFixed>\n\t\t\t\t\t\t\t\t\t<CustomTypeBlack fontWeight={500} color={theme.text1}>\n\t\t\t\t\t\t\t\t\t\t{t(\"borrow.borrowRate\")}\n\t\t\t\t\t\t\t\t\t</CustomTypeBlack>\n\t\t\t\t\t\t\t\t</RowFixed>\n\t\t\t\t\t\t\t\t<RowFixed>\n\t\t\t\t\t\t\t\t\t<CustomTypeBlack color={theme.text1} fontWeight={500}>\n\t\t\t\t\t\t\t\t\t\t{variableBorrowRate.div(\"1e27\").multipliedBy(100).toFixed(5)} %\n\t\t\t\t\t\t\t\t\t</CustomTypeBlack>\n\t\t\t\t\t\t\t\t</RowFixed>\n\t\t\t\t\t\t\t</SummaryRow>\n\t\t\t\t\t\t\t<SummaryRow>\n\t\t\t\t\t\t\t\t<RowFixed>\n\t\t\t\t\t\t\t\t\t<CustomTypeBlack fontWeight={500} color={theme.text1}>\n\t\t\t\t\t\t\t\t\t\t{t(\"borrow.available\")}\n\t\t\t\t\t\t\t\t\t</CustomTypeBlack>\n\t\t\t\t\t\t\t\t</RowFixed>\n\t\t\t\t\t\t\t\t<RowFixed>\n\t\t\t\t\t\t\t\t\t<CustomTypeBlack color={theme.text1} fontWeight={500}>\n\t\t\t\t\t\t\t\t\t\t{balanceInUnits}\n\t\t\t\t\t\t\t\t\t</CustomTypeBlack>\n\t\t\t\t\t\t\t\t</RowFixed>\n\t\t\t\t\t\t\t</SummaryRow>\n\t\t\t\t\t\t</AutoColumn>\n\t\t\t\t\t</Col>\n\n\t\t\t\t\t<Col\n\t\t\t\t\t\txs={12}\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\"d-flex align-items-stretch align-items-lg-center justify-content-center flex-column\"\n\t\t\t\t\t\t}\n\t\t\t\t\t>\n\t\t\t\t\t\t<StyledButton\n\t\t\t\t\t\t\tclassName={`btn btn-${error && error.btnMsg ? \"danger\" : \"primary\"}`}\n\t\t\t\t\t\t\tdisabled={isSubmitAllowed}\n\t\t\t\t\t\t\tonClick={onSubmit}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{btnText}\n\t\t\t\t\t\t</StyledButton>\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t</Modal.Body>\n\t\t</Modal>\n\t);\n};\n\nexport default BorrowTokenModal;\n","import { Row, Col } from \"react-bootstrap\";\nimport React, { useEffect, useState } from \"react\";\nimport { BigNumber } from \"@0x/utils\";\nimport { useDispatch } from \"react-redux\";\n\nimport { Modal } from \"../../../components/Modal/bootstrap\";\nimport { TX_DEFAULTS_TRANSFER } from \"../../../constants\";\nimport { tokenAmountInUnits, tokenSymbolToDisplayString } from \"../../../utils/spot/tokens\";\nimport styled from \"styled-components\";\nimport { TYPE } from \"../../../theme\";\nimport BorrowInputPanel from \"../../../components/BorrowInputPanel\";\nimport { AutoColumn } from \"../../../components/Column\";\nimport { RowFixed } from \"../../../components/Row\";\nimport { toast } from \"react-hot-toast\";\nimport { useTranslation } from \"react-i18next\";\nimport useTheme from \"../../../hooks/useTheme\";\n\nconst Title = styled.h4`\n\tfont-size: 1.25rem;\n\tfont-weight: 500;\n\tmargin-top: 0;\n\tmargin-bottom: 2.25rem;\n`;\n\nexport const SummaryRow = styled.div`\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: space-between;\n\tpadding: 1rem 0;\n\tborder-bottom: 1px solid ${({ theme }) => theme.text3};\n\tfont-size: 1rem;\n\tfont-weight: 500;\n`;\n\nconst CustomTypeBlack = styled(TYPE.black)`\n\tfont-size: 0.75rem;\n\n\t@media (min-width: 768px) {\n\t\tfont-size: 1rem;\n\t}\n`;\n\nconst StyledButton = styled.button`\n\theight: 56px;\n\tmin-height: 56px;\n\tmin-width: 250px;\n`;\n\nconst RepayTokenModal = (props) => {\n\tconst {\n\t\ttokenBalance,\n\t\tcloseModal,\n\t\tethBalance,\n\t\tisEth,\n\t\twethToken,\n\t\taToken,\n\t\tborrowedBalance,\n\t\tshow,\n\t\t...restProps\n\t} = props;\n\tconst [error, setError] = useState({\n\t\tbtnMsg: null,\n\t\tcardMsg: null,\n\t});\n\tconst [amount, setAmount] = useState(null);\n\tconst [isNotEnoughBalance, setIsNotEnoughBalance] = useState(false);\n\tconst dispatch = useDispatch();\n\tconst { t } = useTranslation();\n\tconst theme = useTheme();\n\n\tuseEffect(() => {\n\t\tif (ethBalance.isLessThan(TX_DEFAULTS_TRANSFER.gasTransferToken)) {\n\t\t\ttoast.error(t(\"errors.notEnoughGas\"));\n\t\t\tsetError({\n\t\t\t\tbtnMsg: \"Error\",\n\t\t\t\tcardMsg: t(\"errors.notEnoughGas\"),\n\t\t\t});\n\t\t}\n\t\tif (isEth) {\n\t\t\tsetIsNotEnoughBalance(ethBalance.isLessThanOrEqualTo(borrowedBalance));\n\t\t} else {\n\t\t\tsetIsNotEnoughBalance(tokenBalance.balance.isLessThanOrEqualTo(borrowedBalance));\n\t\t}\n\t}, [ethBalance, tokenBalance]);\n\n\tlet coinSymbol;\n\tlet maxBalance = new BigNumber(0);\n\tlet balance = new BigNumber(0);\n\tlet decimals;\n\tlet displayDecimals;\n\tlet balanceInShort;\n\n\tconst { token } = tokenBalance;\n\tif (isEth) {\n\t\tdisplayDecimals = wethToken.displayDecimals;\n\t\tdecimals = 18;\n\t\tmaxBalance = borrowedBalance || new BigNumber(0);\n\t\tcoinSymbol = tokenSymbolToDisplayString(\"ETH\");\n\t\tbalance = ethBalance;\n\t\tbalanceInShort = maxBalance.minus(ethBalance);\n\t} else if (tokenBalance) {\n\t\tdisplayDecimals = token.displayDecimals;\n\t\tdecimals = token.decimals;\n\t\tmaxBalance = borrowedBalance || new BigNumber(0);\n\t\tcoinSymbol = tokenSymbolToDisplayString(token.symbol);\n\t\tbalanceInShort = maxBalance.minus(tokenBalance.balance);\n\t\tbalance = tokenBalance.balance;\n\t} else {\n\t\treturn null;\n\t}\n\n\tconst btnPrefix = \"Repay \";\n\tconst balanceBorrowedInUnits = tokenAmountInUnits(maxBalance, decimals, displayDecimals);\n\tconst balanceInUnits = tokenAmountInUnits(balance, decimals, displayDecimals);\n\tconst displayBalanceInShort = tokenAmountInUnits(balanceInShort, decimals, displayDecimals + 1);\n\tconst btnText = error && error.btnMsg ? \"Error\" : btnPrefix + coinSymbol;\n\tconst isSubmitAllowed =\n\t\tamount === null || (amount && amount.isGreaterThan(maxBalance)) || (amount && amount.isEqualTo(0));\n\tconst onUpdateAmount = (newValue) => {\n\t\tsetAmount(newValue);\n\t};\n\tconst onSetMax = () => {\n\t\tif (isEth) {\n\t\t\tconst bal = ethBalance.isLessThanOrEqualTo(maxBalance) ? ethBalance : maxBalance;\n\t\t\tsetAmount(bal);\n\t\t} else if (tokenBalance) {\n\t\t\tconst bal = tokenBalance.balance.isLessThanOrEqualTo(maxBalance) ? tokenBalance.balance : maxBalance;\n\t\t\tsetAmount(bal);\n\t\t}\n\t};\n\n\tconst onSubmit = () => {\n\t\tlet token;\n\t\tif (isEth) {\n\t\t\ttoken = {\n\t\t\t\t...wethToken,\n\t\t\t\tsymbol: \"ETH\",\n\t\t\t};\n\t\t} else if (tokenBalance) {\n\t\t\ttoken = tokenBalance.token;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t\tconst amountSubmit = amount || new BigNumber(0);\n\t\tprops.onSubmit(amountSubmit, token, aToken, isEth);\n\t};\n\n\treturn (\n\t\t<Modal show={show} onHide={closeModal} centered>\n\t\t\t<Modal.Body style={{ padding: 30 }}>\n\t\t\t\t<Row>\n\t\t\t\t\t<Col xs={12}>\n\t\t\t\t\t\t<Title>\n\t\t\t\t\t\t\t{t(\"repay\")} {coinSymbol}\n\t\t\t\t\t\t</Title>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col xs={12}>\n\t\t\t\t\t\t<BorrowInputPanel\n\t\t\t\t\t\t\tdecimals={decimals}\n\t\t\t\t\t\t\tmin={0}\n\t\t\t\t\t\t\tmax={maxBalance}\n\t\t\t\t\t\t\tonUserInput={onUpdateAmount}\n\t\t\t\t\t\t\tvalue={amount}\n\t\t\t\t\t\t\ttoken={token}\n\t\t\t\t\t\t\tselected={coinSymbol}\n\t\t\t\t\t\t\tshowBalance={false}\n\t\t\t\t\t\t\tlabel={t(\"wantToRepay\")}\n\t\t\t\t\t\t\tplaceholder={new BigNumber(1).div(new BigNumber(10).pow(displayDecimals)).toString()}\n\t\t\t\t\t\t\tvalueFixedDecimals={displayDecimals}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Col>\n\n\t\t\t\t\t<Col xs={12} style={{ marginBottom: 56 }}>\n\t\t\t\t\t\t<AutoColumn>\n\t\t\t\t\t\t\t<SummaryRow>\n\t\t\t\t\t\t\t\t<RowFixed>\n\t\t\t\t\t\t\t\t\t<CustomTypeBlack fontWeight={500} color={theme.text1}>\n\t\t\t\t\t\t\t\t\t\t{t(\"borrow.amountBorrowed\")}\n\t\t\t\t\t\t\t\t\t</CustomTypeBlack>\n\t\t\t\t\t\t\t\t</RowFixed>\n\t\t\t\t\t\t\t\t<RowFixed>\n\t\t\t\t\t\t\t\t\t<CustomTypeBlack color={theme.text1} fontWeight={500}>\n\t\t\t\t\t\t\t\t\t\t{balanceBorrowedInUnits}\n\t\t\t\t\t\t\t\t\t</CustomTypeBlack>\n\t\t\t\t\t\t\t\t</RowFixed>\n\t\t\t\t\t\t\t</SummaryRow>\n\t\t\t\t\t\t\t<SummaryRow>\n\t\t\t\t\t\t\t\t<RowFixed>\n\t\t\t\t\t\t\t\t\t<CustomTypeBlack fontWeight={500} color={theme.text1}>\n\t\t\t\t\t\t\t\t\t\t{t(\"borrow.amountAvailable\")}\n\t\t\t\t\t\t\t\t\t</CustomTypeBlack>\n\t\t\t\t\t\t\t\t</RowFixed>\n\t\t\t\t\t\t\t\t<RowFixed>\n\t\t\t\t\t\t\t\t\t<CustomTypeBlack color={theme.text1} fontWeight={500}>\n\t\t\t\t\t\t\t\t\t\t{balanceInUnits}\n\t\t\t\t\t\t\t\t\t</CustomTypeBlack>\n\t\t\t\t\t\t\t\t</RowFixed>\n\t\t\t\t\t\t\t</SummaryRow>\n\t\t\t\t\t\t</AutoColumn>\n\t\t\t\t\t</Col>\n\n\t\t\t\t\t<Col\n\t\t\t\t\t\txs={12}\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\"d-flex align-items-stretch align-items-lg-center justify-content-center flex-column\"\n\t\t\t\t\t\t}\n\t\t\t\t\t>\n\t\t\t\t\t\t<StyledButton\n\t\t\t\t\t\t\tclassName={`btn btn-${error && error.btnMsg ? \"danger\" : \"primary\"}`}\n\t\t\t\t\t\t\tdisabled={isSubmitAllowed}\n\t\t\t\t\t\t\tonClick={onSubmit}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{btnText}\n\t\t\t\t\t\t</StyledButton>\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t</Modal.Body>\n\t\t</Modal>\n\t);\n};\n\nexport default RepayTokenModal;\n","import React, { useMemo, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { BigNumber } from \"@0x/utils\";\nimport styled from \"styled-components\";\n\nimport {\n\tgetAaveCurrency,\n\tgetAaveLoadingState,\n\tgetAaveReservesGQLResponse,\n\tgetAaveUserAccountData,\n\tgetATokensData,\n\tgetTokensPrice,\n} from \"../../../state/selectors\";\nimport withBalance from \"../../../components/hoc/withBalance\";\nimport { useActiveWeb3React } from \"../../../hooks\";\nimport { setAaveCurrency } from \"../../../state/aave/actions\";\nimport { getKnownTokens, isWethToken } from \"../../../utils/known_tokens\";\nimport { formatTokenSymbol, tokenAmountInUnits } from \"../../../utils/spot/tokens\";\nimport { Protocol } from \"../../../utils/aave/types\";\nimport {\n\tstartBorrowTokenSteps,\n\tstartLendingTokenSteps,\n\tstartRepayTokenSteps,\n\tstartUnLendingTokenSteps,\n} from \"../../../state/spotUI/actions\";\nimport CurrencyLogo from \"../../../components/CurrencyLogo\";\nimport Skeleton from \"react-loading-skeleton\";\nimport { StyledLink, TradeButton } from \"../../Wallet\";\nimport BootstrapTable from \"react-bootstrap-table-next\";\nimport ResponsiveTable from \"../../../components/ResponsiveTable\";\nimport BorrowTokenModal from \"./BorrowTokenModal\";\nimport RepayTokenModal from \"./RepayTokenModal\";\nimport { Token } from \"@uniswap/sdk\";\nimport { sortedData } from \"../../../lib/helper\";\nimport { useTranslation } from \"react-i18next\";\n\nconst LogoContainer = styled.div`\n\twidth: 32px;\n\theight: 32px;\n\tborder-radius: 32px;\n\tbackground-color: ${({ theme }) => theme.text1};\n\n\t@media (max-width: 991px) {\n\t\twidth: 24px;\n\t\theight: 24px;\n\t\tborder-radius: 24px;\n\t}\n`;\n\nconst Symbol = styled.span`\n\tcolor: ${({ theme }) => theme.text1};\n\tfont-size: 1rem;\n\tmargin-right: 10px;\n\tfont-weight: 500;\n`;\n\nconst Name = styled.span`\n\tfont-weight: 400;\n\tfont-size: 0.875rem;\n\tcolor: ${({ theme }) => theme.text1};\n\n\t@media (max-width: 991px) {\n\t\tfont-size: 0.875rem;\n\t\tfont-weight: 400;\n\t}\n`;\n\nconst CellText = styled.span`\n\tfont-weight: 500;\n\tfont-size: 0.875rem;\n\tcolor: ${({ theme }) => theme.text1};\n\n\t&.font-size-base {\n\t\tfont-size: 1rem;\n\t}\n\n\t@media (max-width: 991px) {\n\t\tfont-weight: 700;\n\n\t\t&.label {\n\t\t\tfont-weight: 500;\n\t\t}\n\t}\n`;\n\nconst BorrowBalance = (props) => {\n\tconst [isEthState, setIsEthState] = useState(false);\n\tconst [isHideZeroBalance, setIsHideZeroBalance] = useState(false);\n\tconst [isStableCoin, setIsStableCoin] = useState(false);\n\tconst { t } = useTranslation();\n\tconst [isModalBorrowOpenState, setIsModalBorrowOpenState] = useState(false);\n\tconst [isModalRepayOpenState, setIsModalRepayOpenState] = useState(false);\n\tconst [isSubmittingState, setIsSubmittingState] = useState(false);\n\tconst [aTokenDataState, setATokenDataState] = useState();\n\tconst [isBorrowState, setIsBorrowState] = useState(true);\n\tconst [tokenBalanceState, setTokenBalanceState] = useState();\n\tconst [availableForBorrowState, setAvailableForBorrowState] = useState(new BigNumber(0));\n\tconst [borrowBalanceState, setBorrowBalanceState] = useState(new BigNumber(0));\n\tconst [sort, setSort] = useState({\n\t\tfield: false,\n\t\torder: \"desc\",\n\t});\n\n\tconst { account } = useActiveWeb3React();\n\tconst reserves = useSelector(getAaveReservesGQLResponse);\n\tconst userAccountData = useSelector(getAaveUserAccountData);\n\tconst dispatch = useDispatch();\n\tconst aTokensData = useSelector(getATokensData);\n\tconst tokensPrice = useSelector(getTokensPrice);\n\tconst tokenBalances = props.tokensBalance;\n\tconst ethBalance = props.ethBalance;\n\tconst ethTotalBalance = props.totalEthBalance;\n\tconst wethTokenBalance = props.wethBalance;\n\tconst aaveLoadingState = useSelector(getAaveLoadingState);\n\tconst currencySelector = useSelector(getAaveCurrency);\n\n\tconst innerTabs = [\n\t\t{\n\t\t\tactive: currencySelector === \"NATIVE\",\n\t\t\tonClick: () => dispatch(setAaveCurrency(\"NATIVE\")),\n\t\t\ttext: \"Native\",\n\t\t},\n\t\t{\n\t\t\tactive: currencySelector === \"USD\",\n\t\t\tonClick: () => dispatch(setAaveCurrency(\"USD\")),\n\t\t\ttext: \"USD\",\n\t\t},\n\t];\n\n\tconst openBorrowModal = (...rest) => {\n\t\tconst [tokenD, isEthToken, tokB, token, availableBalanceForBorrowToken] = rest;\n\t\tsetATokenDataState(tokenD);\n\t\tsetIsModalBorrowOpenState(true);\n\t\tif (isEthToken) {\n\t\t\tsetIsEthState(true);\n\t\t\tsetTokenBalanceState({ ...wethTokenBalance, balance: tokB });\n\t\t} else {\n\t\t\tsetIsEthState(false);\n\t\t\tsetTokenBalanceState(tokenBalances.find((tb) => tb.token === token));\n\t\t}\n\t\tsetAvailableForBorrowState(availableBalanceForBorrowToken);\n\t\tsetIsBorrowState(true);\n\t};\n\n\tconst openRepayModal = (...rest) => {\n\t\tconst [tokenD, isEthToken, tokB, token, borrowBalance] = rest;\n\t\tsetATokenDataState(tokenD);\n\t\tif (isEthToken) {\n\t\t\tsetIsEthState(true);\n\t\t\tsetTokenBalanceState({ ...wethTokenBalance, balance: tokB });\n\t\t} else {\n\t\t\tsetIsEthState(false);\n\t\t\tsetTokenBalanceState(tokenBalances.find((tb) => tb.token === token));\n\t\t}\n\t\tsetBorrowBalanceState(borrowBalance || new BigNumber(0));\n\t\tsetIsModalRepayOpenState(true);\n\t\tsetIsBorrowState(false);\n\t};\n\n\tconst tokensRow = useMemo(() => {\n\t\tconst data = aTokensData.map((tokenD) => {\n\t\t\tconst { token, balance, borrowBalance } = tokenD;\n\n\t\t\tconst { symbol } = token;\n\t\t\tconst reserve = reserves.find((r) => r.aToken.id === tokenD.address);\n\t\t\tconst isEthToken = isWethToken(token);\n\t\t\tconst tokenBalance = tokenBalances.find((tb) => tb.token.symbol === symbol);\n\t\t\tif (isHideZeroBalance) {\n\t\t\t\t/* if ((isEthToken && ethTotalBalance.isEqualTo(0)) && (balance && balance.isEqualTo(0))) {\n                     return null;\n                 }*/\n\n\t\t\t\tif (borrowBalance && borrowBalance.isEqualTo(0)) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (isStableCoin) {\n\t\t\t\tif (!token.isStableCoin) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst tokB = isEthToken\n\t\t\t\t? ethTotalBalance || new BigNumber(0)\n\t\t\t\t: (tokenBalance && tokenBalance.balance) || new BigNumber(0);\n\t\t\tlet displayAvailableForBorrowBalance;\n\t\t\tlet displayBorrowedBalance;\n\t\t\tlet availableForBorrow = new BigNumber(0);\n\t\t\tlet availableBalanceForBorrowToken = new BigNumber(0);\n\n\t\t\tif (account && borrowBalance && reserve && userAccountData) {\n\t\t\t\tconst priceInEth = reserve.price.priceInEth;\n\t\t\t\tconst totalAvailableForBorrowETH = userAccountData.availableBorrowsETH;\n\t\t\t\tavailableForBorrow = userAccountData.availableBorrowsETH;\n\t\t\t\tavailableBalanceForBorrowToken = totalAvailableForBorrowETH\n\t\t\t\t\t.dividedBy(new BigNumber(priceInEth).div(new BigNumber(10).pow(token.decimals)))\n\t\t\t\t\t.integerValue(BigNumber.ROUND_DOWN);\n\t\t\t\tconst formattedBorrowedBalance = tokenAmountInUnits(\n\t\t\t\t\tborrowBalance,\n\t\t\t\t\ttoken.decimals,\n\t\t\t\t\ttoken.displayDecimals\n\t\t\t\t);\n\t\t\t\tconst formattedAvailableForBorrowBalance = tokenAmountInUnits(\n\t\t\t\t\tavailableBalanceForBorrowToken,\n\t\t\t\t\ttoken.decimals,\n\t\t\t\t\ttoken.displayDecimals\n\t\t\t\t);\n\t\t\t\tconst tokenPrice = tokensPrice && tokensPrice.find((t) => t.c_id === token.c_id);\n\t\t\t\tif (currencySelector === \"NATIVE\") {\n\t\t\t\t\tdisplayAvailableForBorrowBalance = Number(formattedAvailableForBorrowBalance);\n\t\t\t\t\tdisplayBorrowedBalance = Number(formattedBorrowedBalance);\n\t\t\t\t} else {\n\t\t\t\t\tdisplayAvailableForBorrowBalance = tokenPrice\n\t\t\t\t\t\t? tokenPrice.price_usd\n\t\t\t\t\t\t\t\t.multipliedBy(new BigNumber(formattedAvailableForBorrowBalance))\n\t\t\t\t\t\t\t\t.toNumber()\n\t\t\t\t\t\t: \"-\";\n\t\t\t\t\tdisplayBorrowedBalance = tokenPrice\n\t\t\t\t\t\t? tokenPrice.price_usd.multipliedBy(new BigNumber(formattedBorrowedBalance)).toNumber()\n\t\t\t\t\t\t: \"-\";\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tdisplayAvailableForBorrowBalance = \"-\";\n\t\t\t\tdisplayBorrowedBalance = \"-\";\n\t\t\t}\n\n\t\t\tconst apy = tokenD.variableBorrowRate.dividedBy(\"1e27\").multipliedBy(100).toNumber();\n\n\t\t\tconst tokenName = isEthToken ? \"Ethereum\" : token.name;\n\t\t\tconst tokenSymbol = isEthToken ? \"ETH\" : token.symbol.toUpperCase();\n\n\t\t\treturn {\n\t\t\t\ttoken,\n\t\t\t\tsymbol,\n\t\t\t\ttokenSymbol,\n\t\t\t\ttokenName,\n\t\t\t\tdisplayAvailableForBorrowBalance,\n\t\t\t\tavailableBalanceForBorrowToken,\n\t\t\t\tdisplayBorrowedBalance,\n\t\t\t\tavailableForBorrow,\n\t\t\t\tborrowBalance,\n\t\t\t\tapy,\n\t\t\t\tbalance,\n\t\t\t\ttokB,\n\t\t\t\tisEthToken,\n\t\t\t\ttokenD,\n\t\t\t};\n\t\t});\n\n\t\treturn sortedData(data, sort);\n\t}, [aTokensData, sort]);\n\n\n\tconst closeBorrowModal = () => {\n\t\tsetIsModalBorrowOpenState(false);\n\t};\n\tconst closeRepayModal = () => {\n\t\tsetIsModalRepayOpenState(false);\n\t};\n\n\tconst handleSubmit = async (amount, token, aToken, isEth) => {\n\t\tsetIsSubmittingState(true);\n\n\t\ttry {\n\t\t\tif (isBorrowState) {\n\t\t\t\tawait dispatch(\n\t\t\t\t\tstartBorrowTokenSteps(\n\t\t\t\t\t\tamount,\n\t\t\t\t\t\ttoken,\n\t\t\t\t\t\taToken,\n\t\t\t\t\t\tisEth,\n\t\t\t\t\t\tProtocol.Aave,\n\t\t\t\t\t\tethBalance,\n\t\t\t\t\t\twethTokenBalance,\n\t\t\t\t\t\tethTotalBalance\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tawait dispatch(\n\t\t\t\t\tstartRepayTokenSteps(\n\t\t\t\t\t\tamount,\n\t\t\t\t\t\ttoken,\n\t\t\t\t\t\taToken,\n\t\t\t\t\t\tisEth,\n\t\t\t\t\t\tProtocol.Aave,\n\t\t\t\t\t\tethBalance,\n\t\t\t\t\t\twethTokenBalance,\n\t\t\t\t\t\tethTotalBalance\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t}\n\t\t} finally {\n\t\t\tsetIsSubmittingState(false);\n\t\t\tif (isBorrowState) {\n\t\t\t\tcloseBorrowModal();\n\t\t\t} else {\n\t\t\t\tcloseRepayModal();\n\t\t\t}\n\t\t}\n\t};\n\tconst wethToken = getKnownTokens().getWethToken();\n\tconst onHideZeroBalance = () => {\n\t\tsetIsHideZeroBalance(!isHideZeroBalance);\n\t};\n\tconst onIsStableCoin = () => {\n\t\tsetIsStableCoin(!isStableCoin);\n\t};\n\n\tconst wethPlusEthBalance = wethTokenBalance ? wethTokenBalance.balance.plus(ethBalance) : new BigNumber(0);\n\n\tconst onTableChange = (type, context) => {\n\t\tif (type === \"sort\") {\n\t\t\tsetSort({\n\t\t\t\tfield: context.sortField,\n\t\t\t\torder: context.sortOrder,\n\t\t\t});\n\t\t}\n\t};\n\n\tconst columns = [\n\t\t{\n\t\t\tdataField: \"tokenName\",\n\t\t\ttext: t(\"token\"),\n\t\t\tformatter: (cellContent, row, rowIndex) => {\n\t\t\t\tconst currency = new Token(1, row.token.address, row.token.decimals, row.token.symbol, row.token.name);\n\t\t\t\treturn (\n\t\t\t\t\t<div\n\t\t\t\t\t\tkey={rowIndex}\n\t\t\t\t\t\tclassName=\"d-flex flex-row-reverse flex-lg-row align-items-start align-items-lg-center py-lg-2 pr-lg-4\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<LogoContainer>\n\t\t\t\t\t\t\t<CurrencyLogo currency={currency} />\n\t\t\t\t\t\t</LogoContainer>\n\t\t\t\t\t\t<div className=\"d-flex flex-column justify-content-center ml-lg-3 mr-3 mr-lg-0\">\n\t\t\t\t\t\t\t<Symbol className={\"font-weight-bold\"}>{row.tokenSymbol}</Symbol>\n\t\t\t\t\t\t\t<Name className={\"font-weight-bold\"}>{row.tokenName}</Name>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t},\n\t\t\tsort: true,\n\t\t},\n\t\t{\n\t\t\tdataField: \"displayAvailableForBorrowBalance\",\n\t\t\ttext: t(\"borrow.available\"),\n\t\t\tformatter: (cellContent, row, rowIndex) => {\n\t\t\t\treturn <CellText>{typeof row.displayAvailableForBorrowBalance === 'number' ? `${row.displayAvailableForBorrowBalance} ${row.tokenSymbol}` : row.displayAvailableForBorrowBalance}</CellText>;\n\t\t\t},\n\t\t\tsort: true,\n\t\t},\n\t\t{\n\t\t\tdataField: \"displayBorrowedBalance\",\n\t\t\ttext: t(\"borrow.borrowBalance\"),\n\t\t\tformatter: (cellContent, row, rowIndex) => {\n\t\t\t\treturn <CellText>{typeof row.displayBorrowedBalance === 'number' ? `${row.displayBorrowedBalance} ${row.tokenSymbol}` : row.displayBorrowedBalance}</CellText>;\n\t\t\t},\n\t\t\tsort: true,\n\t\t},\n\t\t{\n\t\t\tdataField: \"apy\",\n\t\t\ttext: t(\"borrow.borrowRate\"),\n\t\t\tformatter: (cellContent, row, rowIndex) => {\n\t\t\t\treturn <CellText>{row.apy.toFixed(6)} %</CellText>;\n\t\t\t},\n\t\t\tsort: true,\n\t\t},\n\t\t{\n\t\t\tdataField: \"actions\",\n\t\t\ttext: t(\"table.actions\"),\n\t\t\tformatter: (cellContent, row, rowIndex, { openBorrowModal, openRepayModal }) => {\n\t\t\t\tconst {\n\t\t\t\t\ttokB,\n\t\t\t\t\ttokenD,\n\t\t\t\t\tisEthToken,\n\t\t\t\t\ttoken,\n\t\t\t\t\tborrowBalance,\n\t\t\t\t\tavailableBalanceForBorrowToken,\n\t\t\t\t\tavailableForBorrow,\n\t\t\t\t} = row;\n\t\t\t\treturn (\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\"d-flex align-items-stretch justify-content-center flex-column flex-lg-row align-items-lg-center justify-content-lg-start w-100\"\n\t\t\t\t\t\t}\n\t\t\t\t\t>\n\t\t\t\t\t\t<StyledLink>\n\t\t\t\t\t\t\t<TradeButton\n\t\t\t\t\t\t\t\tonClick={openBorrowModal.bind(\n\t\t\t\t\t\t\t\t\tthis,\n\t\t\t\t\t\t\t\t\ttokenD,\n\t\t\t\t\t\t\t\t\tisEthToken,\n\t\t\t\t\t\t\t\t\ttokB,\n\t\t\t\t\t\t\t\t\ttoken,\n\t\t\t\t\t\t\t\t\tavailableBalanceForBorrowToken\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\tdisabled={availableForBorrow.isEqualTo(0) || !account}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{t(\"borrow.title\")}\n\t\t\t\t\t\t\t</TradeButton>\n\t\t\t\t\t\t</StyledLink>\n\n\t\t\t\t\t\t<StyledLink>\n\t\t\t\t\t\t\t<TradeButton\n\t\t\t\t\t\t\t\tvariant={\"warning\"}\n\t\t\t\t\t\t\t\tonClick={openRepayModal.bind(this, tokenD, isEthToken, tokB, token, borrowBalance)}\n\t\t\t\t\t\t\t\tdisabled={(borrowBalance && borrowBalance.isEqualTo(0)) || !account}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{t(\"repay\")}\n\t\t\t\t\t\t\t</TradeButton>\n\t\t\t\t\t\t</StyledLink>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t},\n\t\t\tisAction: true,\n\t\t\tformatExtraData: {\n\t\t\t\topenBorrowModal,\n\t\t\t\topenRepayModal,\n\t\t\t},\n\t\t},\n\t];\n\n\tconst modals = (\n\t\t<>\n\t\t\t{isModalBorrowOpenState && aTokenDataState && (\n\t\t\t\t<BorrowTokenModal\n\t\t\t\t\tshow={isModalBorrowOpenState}\n\t\t\t\t\ttokenBalance={tokenBalanceState}\n\t\t\t\t\tisSubmitting={isSubmittingState}\n\t\t\t\t\tavailableForBorrow={availableForBorrowState}\n\t\t\t\t\tonSubmit={handleSubmit}\n\t\t\t\t\taToken={aTokenDataState}\n\t\t\t\t\tcloseModal={closeBorrowModal}\n\t\t\t\t\tethBalance={wethPlusEthBalance}\n\t\t\t\t\tisEth={isEthState}\n\t\t\t\t\twethToken={wethToken}\n\t\t\t\t/>\n\t\t\t)}\n\t\t\t{isModalRepayOpenState && aTokenDataState && (\n\t\t\t\t<RepayTokenModal\n\t\t\t\t\tshow={isModalRepayOpenState}\n\t\t\t\t\ttokenBalance={tokenBalanceState}\n\t\t\t\t\tisSubmitting={isSubmittingState}\n\t\t\t\t\tonSubmit={handleSubmit}\n\t\t\t\t\tborrowedBalance={borrowBalanceState}\n\t\t\t\t\taToken={aTokenDataState}\n\t\t\t\t\tcloseModal={closeRepayModal}\n\t\t\t\t\tethBalance={wethPlusEthBalance}\n\t\t\t\t\tisEth={isEthState}\n\t\t\t\t\twethToken={wethToken}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</>\n\t);\n\n\treturn (\n\t\t<div className=\"d-flex flex-column\">\n\t\t\t<BootstrapTable\n\t\t\t\twrapperClasses=\"table-responsive d-none d-lg-block\"\n\t\t\t\tbordered={false}\n\t\t\t\tclasses=\"table table-head-custom table-borderless table-vertical-center overflow-hidden borrow__table\"\n\t\t\t\tbootstrap4\n\t\t\t\tremote\n\t\t\t\tkeyField=\"id\"\n\t\t\t\tdata={tokensRow}\n\t\t\t\tcolumns={columns}\n\t\t\t\tonTableChange={onTableChange}\n\t\t\t></BootstrapTable>\n\t\t\t<ResponsiveTable breakpoint={\"lg\"} columns={columns} data={tokensRow} direction={\"rtl\"} />\n\n\t\t\t{modals}\n\t\t</div>\n\t);\n};\n\nexport default withBalance(BorrowBalance);\n","import { Col, Nav, Row, Tab } from \"react-bootstrap\";\nimport styled from \"styled-components\";\n\nimport { ResponsiveCard } from \"../../../components/Card\";\nimport React, { useEffect } from \"react\";\nimport { GET_AAVE_RESERVES } from \"../../../services/aave/gql\";\nimport { useQuery } from \"@apollo/client\";\nimport { getAaveGraphClient } from \"../../../services/aave/aave\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useActiveWeb3React } from \"../../../hooks\";\nimport { getAaveLoadingState } from \"../../../state/selectors\";\nimport { fetchAave, initAave, setAaveReservesGQLResponse } from \"../../../state/aave/actions\";\nimport { AaveLoadingState } from \"../../../utils/aave/types\";\nimport useInterval from \"../../../hooks/useInterval\";\nimport LendingBalance from \"../LendingBalance\";\nimport BorrowBalance from \"../BorrowBalance\";\nimport { useTranslation } from \"react-i18next\";\n\nconst HeaderCol = styled(Col)`\n\tmargin: -10px 0 20px;\n\n\t@media (min-width: 768px) {\n\t\tmargin-bottom: 25px;\n\t}\n`;\n\nconst CustomNav = styled(Nav)`\n\tmargin-left: -30px !important;\n\tmargin-right: -30px !important;\n\toverflow: auto;\n\n\t@media (min-width: 768px) {\n\t\tmargin-left: -10px !important;\n\t\tmargin-right: -10px !important;\n\t}\n`;\n\nconst CustomNavItem = styled(Nav.Item)`\n\tflex-grow: initial !important;\n\n\tpadding: 0 10px 10px;\n\n\t@media (max-width: 767px) {\n\t\tpadding: 0 5px 10px;\n\t}\n\n\t&:first-child {\n\t\t@media (max-width: 767px) {\n\t\t\tpadding-left: 30px;\n\t\t}\n\t}\n\t&:last-child {\n\t\t@media (max-width: 767px) {\n\t\t\tpadding-right: 30px;\n\t\t}\n\t}\n`;\nconst CustomNavLink = styled(Nav.Link)`\n\tborder-radius: 18px !important;\n\tcolor: ${({ theme }) => theme.primary};\n\tbackground-color: rgba(135, 220, 225, 0.15);\n\twhite-space: nowrap;\n\tpadding: 14px 24px;\n\tmin-height: 56px;\n\tfont-weight: 500;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\n\t@media (max-width: 767px) {\n\t\tpadding: 6px 15px;\n\t\tfont-size: 1rem;\n\t\tmin-height: 32px;\n\t\tborder-radius: 12px !important;\n\t}\n\n\t&:hover {\n\t\tcolor: ${({ theme }) => theme.primary};\n\t}\n\n\t&.active {\n\t\tcolor: ${({ theme }) => theme.text1};\n\t\tbackground-color: ${({ theme }) => theme.primary};\n\t}\n`;\n\nconst BorrowCommon = (props) => {\n\tconst { account } = useActiveWeb3React();\n\tconst { loading, error, data } = useQuery(GET_AAVE_RESERVES, {\n\t\tclient: getAaveGraphClient(),\n\t\tpollInterval: 1000,\n\t});\n\tconst dispatch = useDispatch();\n\tconst aaveLoadingState = useSelector(getAaveLoadingState);\n\tconst { t } = useTranslation();\n\n\tuseEffect(() => {\n\t\tif (!loading && !error && data) {\n\t\t\tdispatch(setAaveReservesGQLResponse(data.reserves));\n\t\t\tif (aaveLoadingState === AaveLoadingState.NotLoaded) {\n\t\t\t\tdispatch(initAave(account));\n\t\t\t} else {\n\t\t\t\tdispatch(fetchAave(account));\n\t\t\t}\n\t\t}\n\t}, [loading, data, account]);\n\n\t// Update Aaave state each 60 seconds\n\tuseInterval(async () => {\n\t\tif (account && data && !loading && !error) {\n\t\t\tdispatch(fetchAave(account));\n\t\t}\n\t}, 60 * 1000);\n\n\treturn (\n\t\t<ResponsiveCard>\n\t\t\t<Tab.Container defaultActiveKey=\"deposit\">\n\t\t\t\t<Row>\n\t\t\t\t\t<HeaderCol\n\t\t\t\t\t\txs={12}\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\"d-flex flex-column-reverse flex-lg-row align-items-stretch align-items-lg-start justify-content-start justify-content-lg-between\"\n\t\t\t\t\t\t}\n\t\t\t\t\t>\n\t\t\t\t\t\t<CustomNav fill variant=\"pills\" className={\"d-flex flex-row align-items-center flex-nowrap\"}>\n\t\t\t\t\t\t\t<CustomNavItem>\n\t\t\t\t\t\t\t\t<CustomNavLink eventKey=\"deposit\">{t(\"deposit\")}</CustomNavLink>\n\t\t\t\t\t\t\t</CustomNavItem>\n\t\t\t\t\t\t\t<CustomNavItem>\n\t\t\t\t\t\t\t\t<CustomNavLink eventKey=\"borrow\">{t(\"borrow.title\")}</CustomNavLink>\n\t\t\t\t\t\t\t</CustomNavItem>\n\t\t\t\t\t\t</CustomNav>\n\t\t\t\t\t</HeaderCol>\n\n\t\t\t\t\t<Col xs={12}>\n\t\t\t\t\t\t<Tab.Content className={\"bg-transparent\"}>\n\t\t\t\t\t\t\t<Tab.Pane eventKey=\"deposit\">\n\t\t\t\t\t\t\t\t<LendingBalance />\n\t\t\t\t\t\t\t</Tab.Pane>\n\t\t\t\t\t\t\t<Tab.Pane eventKey=\"borrow\">\n\t\t\t\t\t\t\t\t<BorrowBalance />\n\t\t\t\t\t\t\t</Tab.Pane>\n\t\t\t\t\t\t</Tab.Content>\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t</Tab.Container>\n\t\t</ResponsiveCard>\n\t);\n};\n\nexport default BorrowCommon;\n","import { Modal } from \"../../../components/Modal/bootstrap\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport Web3 from \"web3\";\nimport { Web3Wrapper } from \"@0x/web3-wrapper\";\n\nimport { getStepsModalCurrentStep } from \"../../../state/selectors\";\nimport { setStepsModalCurrentStep } from \"../../../state/spotUI/actions\";\nimport { CHAIN_ID, StepKind } from \"../../../constants\";\n\nimport UnlockToken from \"./modals/UnlockToken\";\nimport React, { useEffect, useState } from \"react\";\nimport { TransactionSubmittedContent } from \"../../../components/TransactionConfirmationModal\";\nimport WrapEth from \"./modals/WrapEth\";\nimport LendingToken from \"./modals/LendingToken\";\nimport BorrowToken from \"./modals/BorrowToken\";\n\nlet web3;\nlet web3Wrapper;\n\nconst ModalProvider = (props) => {\n\tconst [submitted, setSubmitted] = useState(false);\n\tconst [txHash, setTxHash] = useState(null);\n\tconst currentStep = useSelector(getStepsModalCurrentStep);\n\tconst dispatch = useDispatch();\n\tconst isOpen = currentStep !== null;\n\n\tuseEffect(() => {\n\t\tweb3 = new Web3(Web3.givenProvider || new Web3.providers.HttpProvider(process.env.REACT_APP_NETWORK_URL));\n\t\tif (web3.currentProvider) {\n\t\t\tweb3Wrapper = new Web3Wrapper(web3.currentProvider);\n\t\t}\n\t}, []);\n\n\tconst hideModal = () => {\n\t\tsetSubmitted(false);\n\t\tsetTxHash(null);\n\t\tdispatch(setStepsModalCurrentStep(null));\n\t};\n\n\tconst onDone = (tx) => {\n\t\tsetSubmitted(true);\n\t\tsetTxHash(tx);\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t{props.children}\n\t\t\t<Modal show={isOpen} centered onHide={hideModal}>\n\t\t\t\t<Modal.Body className={\"px-0 py-0\"}>\n\t\t\t\t\t{!submitted ? (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t{currentStep && currentStep.kind === StepKind.ToggleTokenLock && (\n\t\t\t\t\t\t\t\t<UnlockToken onDismiss={hideModal} web3={web3Wrapper} />\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{currentStep && currentStep.kind === StepKind.WrapEth && (\n\t\t\t\t\t\t\t\t<WrapEth onDismiss={hideModal} web3={web3Wrapper} />\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{currentStep && currentStep.kind === StepKind.LendingToken && (\n\t\t\t\t\t\t\t\t<LendingToken onDismiss={hideModal} onDone={onDone} web3={web3Wrapper} />\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{currentStep && currentStep.kind === StepKind.UnLendingToken && (\n\t\t\t\t\t\t\t\t<LendingToken onDismiss={hideModal} onDone={onDone} web3={web3Wrapper} />\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{currentStep && currentStep.kind === StepKind.RepayToken && (\n\t\t\t\t\t\t\t\t<BorrowToken onDismiss={hideModal} onDone={onDone} web3={web3Wrapper} />\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{currentStep && currentStep.kind === StepKind.BorrowToken && (\n\t\t\t\t\t\t\t\t<BorrowToken onDismiss={hideModal} onDone={onDone} web3={web3Wrapper} />\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<TransactionSubmittedContent chainId={CHAIN_ID} hash={txHash} onDismiss={hideModal} />\n\t\t\t\t\t)}\n\t\t\t\t</Modal.Body>\n\t\t\t</Modal>\n\t\t</>\n\t);\n};\n\nexport default ModalProvider;\n","import { ConfirmationPendingContent } from \"../../../../components/TransactionConfirmationModal\";\nimport React, { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\n\nimport { getStepsModalCurrentStep } from \"../../../../state/selectors\";\nimport { UNLIMITED_ALLOWANCE_IN_BASE_UNITS } from \"../../../../constants\";\nimport { useActiveWeb3React } from \"../../../../hooks\";\nimport { getContractWrappers } from \"../../../../utils/spot/contractWrapper\";\nimport { ERC20TokenContract } from \"@0x/contract-wrappers\";\nimport { stepsModalAdvanceStep, updateWethBalance } from \"../../../../state/spotUI/actions\";\nimport withBalance from \"../../../../components/hoc/withBalance\";\nimport {\n\tINSUFFICIENT_ETH_BALANCE_FOR_DEPOSIT,\n\tUNEXPECTED_ERROR,\n\tUSER_DENIED_TRANSACTION_SIGNATURE_ERR,\n} from \"../../../../lib/exceptions/common\";\nimport { tokenAmountInUnits } from \"../../../../utils/spot/tokens\";\nimport { ConvertBalanceMustNotBeEqualException } from \"../../../../lib/exceptions/convertBalance\";\n\nconst WrapEth = (props) => {\n\tconst [wrapping, setWrapping] = useState(false);\n\tconst { account } = useActiveWeb3React();\n\tconst currentStep = useSelector(getStepsModalCurrentStep);\n\tconst { wethBalance } = props;\n\tconst { currentWethBalance, newWethBalance } = currentStep;\n\tconst web3 = props.web3;\n\tconst dispatch = useDispatch();\n\n\tconst amount = newWethBalance.minus(currentWethBalance);\n\tconst isEthToWeth = amount.isGreaterThan(0);\n\tconst convertingFrom = isEthToWeth ? \"ETH\" : \"wETH\";\n\n\tconst wrapEthereum = async () => {\n\t\ttry {\n\t\t\tconst convertTxHash = await dispatch(\n\t\t\t\tupdateWethBalance(wethBalance, newWethBalance, account, web3.getProvider())\n\t\t\t);\n\t\t\tsetWrapping(true);\n\t\t\tconst tx = await web3.awaitTransactionSuccessAsync(convertTxHash);\n\n\t\t\tif (tx) {\n\t\t\t\tsetWrapping(false);\n\t\t\t\tdispatch(stepsModalAdvanceStep());\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tsetWrapping(false);\n\t\t\tprops.onDismiss();\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\twrapEthereum();\n\t}, [currentStep]);\n\n\treturn (\n\t\t<ConfirmationPendingContent\n\t\t\tonDismiss={wrapping ? () => null : props.onDismiss}\n\t\t\tpendingText={wrapping ? \"Wrapping...\" : `Convert ${convertingFrom}`}\n\t\t/>\n\t);\n};\n\nexport default withBalance(WrapEth);\n","import { ConfirmationPendingContent } from \"../../../../components/TransactionConfirmationModal\";\nimport React, { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\n\nimport { useActiveWeb3React } from \"../../../../hooks\";\nimport { tokenAmountInUnits, tokenSymbolToDisplayString } from \"../../../../utils/spot/tokens\";\nimport { getGasInfo, getStepsModalCurrentStep } from \"../../../../state/selectors\";\nimport { lendingDefiToken, unLendingDefiToken } from \"../../../../state/defi/actions\";\n\nconst LendingToken = (props) => {\n\tconst [loading, setLoading] = useState(false);\n\tconst { account } = useActiveWeb3React();\n\n\tconst { step, onSubmitLendingToken, onSubmitUnLendingToken } = props;\n\tconst { amount, token, isEth, defiToken, isLending } = step;\n\n\tconst coinSymbol = isEth ? tokenSymbolToDisplayString(\"ETH\") : tokenSymbolToDisplayString(token.symbol);\n\tconst decimals = isEth ? 18 : step.token.decimals;\n\tconst amountOfTokenString = `${tokenAmountInUnits(\n\t\tstep.amount,\n\t\tdecimals,\n\t\tstep.token.displayDecimals\n\t).toString()} ${coinSymbol}`;\n\n\tconst web3 = props.web3;\n\n\tconst Lending = async () => {\n\t\ttry {\n\t\t\tconst txHash = isLending\n\t\t\t\t? await onSubmitLendingToken(token, defiToken, amount, isEth, account)\n\t\t\t\t: await onSubmitUnLendingToken(token, defiToken, amount, isEth, account);\n\t\t\tsetLoading(true);\n\t\t\tconst tx = await web3.awaitTransactionSuccessAsync(txHash);\n\t\t\tif (tx) {\n\t\t\t\tsetLoading(false);\n\t\t\t\tprops.onDone(txHash);\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tsetLoading(false);\n\t\t\tprops.onDismiss();\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tLending();\n\t}, [step]);\n\n\treturn (\n\t\t<ConfirmationPendingContent\n\t\t\tonDismiss={loading ? () => null : props.onDismiss}\n\t\t\tpendingText={\n\t\t\t\tloading\n\t\t\t\t\t? `Pending Transaction...`\n\t\t\t\t\t: `Confirm on ${account} to ${isLending ? \"deposit\" : \"withdraw\"} ${amountOfTokenString}.`\n\t\t\t}\n\t\t/>\n\t);\n};\n\nconst mapStateToProps = (state) => {\n\treturn {\n\t\tstep: getStepsModalCurrentStep(state),\n\t\tgasInfo: getGasInfo(state),\n\t};\n};\n\nconst mapDispatchToProps = (dispatch) => {\n\treturn {\n\t\tonSubmitLendingToken: (token, defiToken, amount, isEth, account) =>\n\t\t\tdispatch(lendingDefiToken(token, defiToken, amount, isEth, account)),\n\t\tonSubmitUnLendingToken: (token, defiToken, amount, isEth, account) =>\n\t\t\tdispatch(unLendingDefiToken(token, defiToken, amount, isEth, account)),\n\t};\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(LendingToken);\n","import { getUpdateAToken } from \"../../services/aave/aave\";\nimport { Protocol } from \"../../utils/aave/types\";\nimport { borrowAToken, lendingAToken, repayAToken, setATokenBalance, unLendingAToken } from \"../aave/actions\";\nimport { getDefiProtocol } from \"../selectors\";\n\nexport const lendingDefiToken = (token, defiToken, amount, isEth, account) => {\n\treturn async (dispatch, getState) => {\n\t\tconst state = getState();\n\t\tconst protocol = getDefiProtocol(state);\n\t\tswitch (protocol) {\n\t\t\tcase Protocol.Aave:\n\t\t\t\tconst txHash = dispatch(lendingAToken(token, defiToken, amount, isEth, account));\n\t\t\t\treturn txHash;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t};\n};\n\nexport const borrowDefiToken = (token, defiToken, amount, isEth, account) => {\n\treturn async (dispatch, getState) => {\n\t\tconst state = getState();\n\t\tconst protocol = getDefiProtocol(state);\n\t\tswitch (protocol) {\n\t\t\tcase Protocol.Aave:\n\t\t\t\tconst txHash = dispatch(borrowAToken(token, defiToken, amount, isEth, account));\n\t\t\t\treturn txHash;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t};\n};\n\nexport const repayDefiToken = (token, defiToken, amount, isEth, account) => {\n\treturn async (dispatch, getState) => {\n\t\tconst state = getState();\n\t\tconst protocol = getDefiProtocol(state);\n\t\tswitch (protocol) {\n\t\t\tcase Protocol.Aave:\n\t\t\t\tconst txHash = dispatch(repayAToken(token, defiToken, amount, isEth, account));\n\t\t\t\treturn txHash;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t};\n};\n\nexport const unLendingDefiToken = (token, defiToken, amount, isEth, account) => {\n\treturn async (dispatch, getState) => {\n\t\tconst state = getState();\n\t\tconst protocol = getDefiProtocol(state);\n\t\tswitch (protocol) {\n\t\t\tcase Protocol.Aave:\n\t\t\t\tconst txHash = dispatch(unLendingAToken(token, defiToken, amount, isEth, account));\n\t\t\t\treturn txHash;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t};\n};\n\nexport const updateDefiTokenBalance = (defiToken, ethAccount) => {\n\treturn async (dispatch, getState) => {\n\t\tconst state = getState();\n\t\tconst protocol = getDefiProtocol(state);\n\t\tswitch (protocol) {\n\t\t\tcase Protocol.Aave:\n\t\t\t\tconst token = await getUpdateAToken(ethAccount, defiToken);\n\t\t\t\tdispatch(setATokenBalance(token));\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t};\n};\n","import { ConfirmationPendingContent } from \"../../../../components/TransactionConfirmationModal\";\nimport React, { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\n\nimport { useActiveWeb3React } from \"../../../../hooks\";\nimport { tokenAmountInUnits, tokenSymbolToDisplayString } from \"../../../../utils/spot/tokens\";\nimport { getGasInfo, getStepsModalCurrentStep } from \"../../../../state/selectors\";\nimport { borrowDefiToken, lendingDefiToken, repayDefiToken, unLendingDefiToken } from \"../../../../state/defi/actions\";\n\nconst LendingToken = (props) => {\n\tconst [loading, setLoading] = useState(false);\n\tconst { account } = useActiveWeb3React();\n\n\tconst { step, onSubmitBorrowToken, onSubmitRepayToken } = props;\n\tconst { amount, token, isEth, defiToken, isBorrow } = step;\n\n\tconst coinSymbol = isEth ? tokenSymbolToDisplayString(\"ETH\") : tokenSymbolToDisplayString(token.symbol);\n\tconst decimals = isEth ? 18 : step.token.decimals;\n\n\tconst amountOfTokenString = `${tokenAmountInUnits(\n\t\tstep.amount,\n\t\tdecimals,\n\t\tstep.token.displayDecimals\n\t).toString()} ${coinSymbol}`;\n\n\tconst web3 = props.web3;\n\n\tconst Borrowing = async () => {\n\t\ttry {\n\t\t\tconst txHash = isBorrow\n\t\t\t\t? await onSubmitBorrowToken(token, defiToken, amount, isEth, account)\n\t\t\t\t: await onSubmitRepayToken(token, defiToken, amount, isEth, account);\n\n\t\t\tsetLoading(true);\n\t\t\tconst tx = await web3.awaitTransactionSuccessAsync(txHash);\n\t\t\tif (tx) {\n\t\t\t\tsetLoading(false);\n\t\t\t\tprops.onDone(txHash);\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tsetLoading(false);\n\t\t\tprops.onDismiss();\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tBorrowing();\n\t}, [step]);\n\n\treturn (\n\t\t<ConfirmationPendingContent\n\t\t\tonDismiss={loading ? () => null : props.onDismiss}\n\t\t\tpendingText={\n\t\t\t\tloading\n\t\t\t\t\t? `Pending Transaction...`\n\t\t\t\t\t: `Confirm on ${account} to ${isBorrow ? \"Borrow\" : \"Repay\"} ${amountOfTokenString}.`\n\t\t\t}\n\t\t/>\n\t);\n};\n\nconst mapStateToProps = (state) => {\n\treturn {\n\t\tstep: getStepsModalCurrentStep(state),\n\t\tgasInfo: getGasInfo(state),\n\t};\n};\n\nconst mapDispatchToProps = (dispatch) => {\n\treturn {\n\t\tonSubmitBorrowToken: (token, defiToken, amount, isEth, account) =>\n\t\t\tdispatch(borrowDefiToken(token, defiToken, amount, isEth, account)),\n\t\tonSubmitRepayToken: (token, defiToken, amount, isEth, account) =>\n\t\t\tdispatch(repayDefiToken(token, defiToken, amount, isEth, account)),\n\t};\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(LendingToken);\n","import { Row, Col } from \"react-bootstrap\";\n\nimport GraphQlProvider from \"./Provider\";\nimport Page from \"../../components/Page\";\nimport GlobalOverall from \"./GlobalOverall\";\nimport BorrowCommon from \"./Common\";\nimport \"./style.scss\";\nimport ModalProvider from \"./ModalProvider\";\nimport styled from \"styled-components\";\n\nconst StyledRow = styled(Row)`\n\tmargin-top: 40px;\n\n\t@media (max-width: 767px) {\n\t\tmargin-top: 20px;\n\t}\n`;\n\nconst Borrow = (props) => {\n\treturn (\n\t\t<Page>\n\t\t\t<GraphQlProvider>\n\t\t\t\t<ModalProvider />\n\t\t\t\t<StyledRow>\n\t\t\t\t\t<Col xs={12}>\n\t\t\t\t\t\t<GlobalOverall />\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col xs={12}>\n\t\t\t\t\t\t<BorrowCommon />\n\t\t\t\t\t</Col>\n\t\t\t\t</StyledRow>\n\t\t\t</GraphQlProvider>\n\t\t</Page>\n\t);\n};\n\nexport default Borrow;\n"],"sourceRoot":""}